!function(t){function e(t){delete installedChunks[t]}function i(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.charset="utf-8",i.src=f.p+""+t+"."+T+".hot-update.js",e.appendChild(i)}function r(){return new Promise(function(t,e){if("undefined"==typeof XMLHttpRequest)return e(new Error("No browser support"));try{var i=new XMLHttpRequest,r=f.p+""+T+".hot-update.json";i.open("GET",r,!0),i.timeout=1e4,i.send(null)}catch(t){return e(t)}i.onreadystatechange=function(){if(4===i.readyState)if(0===i.status)e(new Error("Manifest request to "+r+" timed out."));else if(404===i.status)t();else if(200!==i.status&&304!==i.status)e(new Error("Manifest request to "+r+" failed."));else{try{var n=JSON.parse(i.responseText)}catch(t){return void e(t)}t(n)}}})}function n(t){var e=P[t];if(!e)return f;var i=function(i){return e.hot.active?(P[i]?P[i].parents.indexOf(t)<0&&P[i].parents.push(t):(E=[t],m=i),e.children.indexOf(i)<0&&e.children.push(i)):(console.warn("[HMR] unexpected require("+i+") from disposed module "+t),E=[]),f(i)};for(var r in f)Object.prototype.hasOwnProperty.call(f,r)&&"e"!==r&&Object.defineProperty(i,r,function(t){return{configurable:!0,enumerable:!0,get:function(){return f[t]},set:function(e){f[t]=e}}}(r));return i.e=function(t){function e(){I--,"prepare"===S&&(O[t]||l(t),0===I&&0===A&&c())}return"ready"===S&&a("prepare"),I++,f.e(t).then(e,function(t){throw e(),t})},i}function o(t){var e={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:m!==t,active:!0,accept:function(t,i){if(void 0===t)e._selfAccepted=!0;else if("function"==typeof t)e._selfAccepted=t;else if("object"==typeof t)for(var r=0;r<t.length;r++)e._acceptedDependencies[t[r]]=i||function(){};else e._acceptedDependencies[t]=i||function(){}},decline:function(t){if(void 0===t)e._selfDeclined=!0;else if("object"==typeof t)for(var i=0;i<t.length;i++)e._declinedDependencies[t[i]]=!0;else e._declinedDependencies[t]=!0},dispose:function(t){e._disposeHandlers.push(t)},addDisposeHandler:function(t){e._disposeHandlers.push(t)},removeDisposeHandler:function(t){var i=e._disposeHandlers.indexOf(t);i>=0&&e._disposeHandlers.splice(i,1)},check:h,apply:d,status:function(t){if(!t)return S;x.push(t)},addStatusHandler:function(t){x.push(t)},removeStatusHandler:function(t){var e=x.indexOf(t);e>=0&&x.splice(e,1)},data:b[t]};return m=void 0,e}function a(t){S=t;for(var e=0;e<x.length;e++)x[e].call(null,t)}function s(t){return+t+""===t?+t:t}function h(t){if("idle"!==S)throw new Error("check() is only allowed in idle status");return _=t,a("check"),r().then(function(t){if(!t)return a("idle"),null;R={},O={},C=t.c,y=t.h,a("prepare");var e=new Promise(function(t,e){g={resolve:t,reject:e}});v={};return l(0),"prepare"===S&&0===I&&0===A&&c(),e})}function u(t,e){if(C[t]&&R[t]){R[t]=!1;for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(v[i]=e[i]);0==--A&&0===I&&c()}}function l(t){C[t]?(R[t]=!0,A++,i(t)):O[t]=!0}function c(){a("ready");var t=g;if(g=null,t)if(_)d(_).then(function(e){t.resolve(e)},function(e){t.reject(e)});else{var e=[];for(var i in v)Object.prototype.hasOwnProperty.call(v,i)&&e.push(s(i));t.resolve(e)}}function d(i){function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];t.indexOf(r)<0&&t.push(r)}}if("ready"!==S)throw new Error("apply() is only allowed in ready status");i=i||{};var n,o,h,u,l,c={},d=[],p={},m=function(){console.warn("[HMR] unexpected require("+_.moduleId+") to disposed module")};for(var g in v)if(Object.prototype.hasOwnProperty.call(v,g)){l=s(g);var _;_=v[g]?function(t){for(var e=[t],i={},n=e.slice().map(function(t){return{chain:[t],id:t}});n.length>0;){var o=n.pop(),a=o.id,s=o.chain;if((u=P[a])&&!u.hot._selfAccepted){if(u.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:a};if(u.hot._main)return{type:"unaccepted",chain:s,moduleId:a};for(var h=0;h<u.parents.length;h++){var l=u.parents[h],c=P[l];if(c){if(c.hot._declinedDependencies[a])return{type:"declined",chain:s.concat([l]),moduleId:a,parentId:l};e.indexOf(l)>=0||(c.hot._acceptedDependencies[a]?(i[l]||(i[l]=[]),r(i[l],[a])):(delete i[l],e.push(l),n.push({chain:s.concat([l]),id:l})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:i}}(l):{type:"disposed",moduleId:g};var w=!1,x=!1,A=!1,I="";switch(_.chain&&(I="\nUpdate propagation: "+_.chain.join(" -> ")),_.type){case"self-declined":i.onDeclined&&i.onDeclined(_),i.ignoreDeclined||(w=new Error("Aborted because of self decline: "+_.moduleId+I));break;case"declined":i.onDeclined&&i.onDeclined(_),i.ignoreDeclined||(w=new Error("Aborted because of declined dependency: "+_.moduleId+" in "+_.parentId+I));break;case"unaccepted":i.onUnaccepted&&i.onUnaccepted(_),i.ignoreUnaccepted||(w=new Error("Aborted because "+l+" is not accepted"+I));break;case"accepted":i.onAccepted&&i.onAccepted(_),x=!0;break;case"disposed":i.onDisposed&&i.onDisposed(_),A=!0;break;default:throw new Error("Unexception type "+_.type)}if(w)return a("abort"),Promise.reject(w);if(x){p[l]=v[l],r(d,_.outdatedModules);for(l in _.outdatedDependencies)Object.prototype.hasOwnProperty.call(_.outdatedDependencies,l)&&(c[l]||(c[l]=[]),r(c[l],_.outdatedDependencies[l]))}A&&(r(d,[_.moduleId]),p[l]=m)}var O=[];for(o=0;o<d.length;o++)l=d[o],P[l]&&P[l].hot._selfAccepted&&O.push({module:l,errorHandler:P[l].hot._selfAccepted});a("dispose"),Object.keys(C).forEach(function(t){!1===C[t]&&e(t)});for(var R,M=d.slice();M.length>0;)if(l=M.pop(),u=P[l]){var D={},k=u.hot._disposeHandlers;for(h=0;h<k.length;h++)(n=k[h])(D);for(b[l]=D,u.hot.active=!1,delete P[l],h=0;h<u.children.length;h++){var N=P[u.children[h]];N&&((R=N.parents.indexOf(l))>=0&&N.parents.splice(R,1))}}var G,L;for(l in c)if(Object.prototype.hasOwnProperty.call(c,l)&&(u=P[l]))for(L=c[l],h=0;h<L.length;h++)G=L[h],(R=u.children.indexOf(G))>=0&&u.children.splice(R,1);a("apply"),T=y;for(l in p)Object.prototype.hasOwnProperty.call(p,l)&&(t[l]=p[l]);var F=null;for(l in c)if(Object.prototype.hasOwnProperty.call(c,l)){u=P[l],L=c[l];var U=[];for(o=0;o<L.length;o++)G=L[o],n=u.hot._acceptedDependencies[G],U.indexOf(n)>=0||U.push(n);for(o=0;o<U.length;o++){n=U[o];try{n(L)}catch(t){i.onErrored&&i.onErrored({type:"accept-errored",moduleId:l,dependencyId:L[o],error:t}),i.ignoreErrored||F||(F=t)}}}for(o=0;o<O.length;o++){var B=O[o];l=B.module,E=[l];try{f(l)}catch(t){if("function"==typeof B.errorHandler)try{B.errorHandler(t)}catch(e){i.onErrored&&i.onErrored({type:"self-accept-error-handler-errored",moduleId:l,error:e,orginalError:t}),i.ignoreErrored||F||(F=e),F||(F=t)}else i.onErrored&&i.onErrored({type:"self-accept-errored",moduleId:l,error:t}),i.ignoreErrored||F||(F=t)}}return F?(a("fail"),Promise.reject(F)):(a("idle"),new Promise(function(t){t(d)}))}function f(e){if(P[e])return P[e].exports;var i=P[e]={i:e,l:!1,exports:{},hot:o(e),parents:(w=E,E=[],w),children:[]};return t[e].call(i.exports,i,i.exports,n(e)),i.l=!0,i.exports}var p=this.webpackHotUpdate;this.webpackHotUpdate=function(t,e){u(t,e),p&&p(t,e)};var m,g,v,y,_=!0,T="86d8910981c6c76abd24",b={},E=[],w=[],x=[],S="idle",A=0,I=0,O={},R={},C={},P={};f.m=t,f.c=P,f.i=function(t){return t},f.d=function(t,e,i){f.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},f.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return f.d(e,"a",e),e},f.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},f.p="./",f.h=function(){return T},n(320)(f.s=320)}([function(t,e,i){"use strict";e.__esModule=!0;e.VERSION="4.7.3",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,i){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var o=i(0);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=i(5);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=i(6);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return n(s).default}});var h=i(51);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return n(h).default}});var u=i(94);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return n(u).default}});var l=i(24);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return n(l).default}});var c=i(95);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return n(c).default}});var d=i(96);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return n(d).default}});var f=i(52);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return n(f).default}});var p=i(56);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return n(p).default}});var m=i(250);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return n(m).default}});var g=i(57);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return n(g).default}});var v=i(252);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return n(v).default}});var y=i(254);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return n(y).default}});var _=i(107);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return n(_).default}});var T=i(106);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return n(T).default}});var b=i(222);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return n(b).default}});var E=i(97);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return n(E).default}});var w=i(225);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return n(w).default}});var x=i(223);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return n(x).default}});var S=i(255);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return n(S).default}});var A=i(12);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return n(A).default}});var I=i(109);Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return n(I).default}});var O=i(20);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return n(O).default}});var R=i(58);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return n(R).default}});var C=i(108);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return n(C).default}});var P=i(111);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return n(P).default}});var M=i(110);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return n(M).default}});var D=i(101);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return n(D).default}});var k=i(23);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return n(k).default}});var N=i(26);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return n(N).default}});var G=i(34);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return n(G).default}});var L=i(35);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return n(L).default}});var F=i(105);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return n(F).default}});var U=i(104);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return n(U).default}});var B=i(103);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return n(B).default}});var j=i(92);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return n(j).default}});var X=i(93);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return X.autoDetectRenderer}});var W=i(2),H=r(W),V=i(59),Y=r(V),z=i(4),K=n(z),q=i(25),Z=n(q),J=i(33),Q=n(J);e.settings=K.default,e.utils=H,e.ticker=Y,e.CanvasRenderer=Z.default,e.WebGLRenderer=Q.default},function(t,e,i){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function n(t){return t&&t.__esModule?t:{default:t}}function o(){return++B}function a(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function s(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)}function h(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function u(t,e){var i=S.default.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}function l(t){var e=w.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}}function c(t){var e=w.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()}function d(t){var e=w.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}function f(){j=!0}function p(t){if(!j){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+w.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+w.VERSION+" - "+t+" - http://www.pixijs.com/");j=!0}}function m(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(t){return!1}}function g(t){return 0===t?0:t<0?-1:1}function v(){var t=void 0;for(t in X)X[t].destroy();for(t in W)W[t].destroy()}function y(){var t=void 0;for(t in X)delete X[t];for(t in W)delete W[t]}function _(t,e){return H[e?1:0][t]}function T(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return i=i*e+.5|0,r=r*e+.5|0,n=n*e+.5|0,(255*e<<24)+(i<<16)+(r<<8)+n}function b(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function E(t,e,i,r){return i=i||new Float32Array(4),i[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=o,e.hex2rgb=a,e.hex2string=s,e.rgb2hex=h,e.getResolutionOfUrl=u,e.decomposeDataUri=l,e.getUrlFileExtension=c,e.getSvgSize=d,e.skipHello=f,e.sayHello=p,e.isWebGLSupported=m,e.sign=g,e.destroyTextureCache=v,e.clearTextureCache=y,e.correctBlendMode=_,e.premultiplyTint=T,e.premultiplyRgba=b,e.premultiplyTintToRgba=E;var w=i(0),x=i(4),S=n(x),A=i(15),I=n(A),O=i(262),R=n(O),C=i(261),P=r(C),M=i(48),D=r(M),k=i(309),N=n(k),G=i(259),L=n(G),F=i(45),U=n(F),B=0,j=!1;e.isMobile=D,e.removeItems=N.default,e.EventEmitter=I.default,e.pluginTarget=R.default,e.mixins=P,e.earcut=U.default;var X=e.TextureCache=Object.create(null),W=e.BaseTextureCache=Object.create(null),H=e.premultiplyBlendMode=(0,L.default)()},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(260),o=r(n),a=i(258),s=r(a);e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,o.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)(),MESH_CANVAS_PADDING:0}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(54);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return r(n).default}});var o=i(99);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return r(o).default}});var a=i(53);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return r(a).default}});var s=i(98);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return r(s).default}});var h=i(232);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return r(h).default}});var u=i(233);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return r(u).default}});var l=i(234);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return r(l).default}});var c=i(55);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return r(c).default}});var d=i(235);Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return r(d).default}})},function(t,e,i){var r={createContext:i(218),setVertexAttribArrays:i(83),GLBuffer:i(214),GLFramebuffer:i(215),GLShader:i(216),GLTexture:i(82),VertexArrayObject:i(217),shader:i(219)};void 0!==t&&t.exports&&(t.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(9),h=i(11),u=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.spriteIndex=t,i.texture=h.spriteInfo[i.spriteIndex].texture,i.data=h.spriteInfo[i.spriteIndex].data,i.animId=-1,i.currentAFrame=0,i.currentTime=0,i.isLoop=!0,i.isFinish=!1,i}return o(e,t),a(e,[{key:"PrepareAnim",value:function(t){for(var e=this.data.anims[this.animId],i=e.aFramesCount,r=i-this.children.length,n=0;n<r;n++){var o=new s(this.spriteIndex);this.addChild(o)}for(var a=0;a<this.children.length;a++){var h=this.getChildAt(a),u=this.data.aframe[e.aFramesStartIndex+a];a<i?(h.SetFrame(u.frameIndex),h.position.set(u.ox,u.oy),h.scale.set(u.scaleX,u.scaleY),h.rotation=u.rotation*Math.PI/180,h.visible=!0):h.visible=!1}}},{key:"SetTouchable",value:function(t){if(this.interactive=t,t){var e=this.data.anims[this.animId],i=this.data.aframe[e.aFramesStartIndex],r=this.data.frames[i.frameIndex].rect[0].Clone();r.Scale(i.scaleX,i.scaleY),this.hitArea=new PIXI.Rectangle(r.x,r.y,r.width,r.height)}}},{key:"SetAnim",value:function(t,e){this.currentAFrame=0,this.currentTime=0,this.isLoop=e,this.isFinish=!1,this.animId!=t&&(this.animId=t,this.PrepareAnim(this.animId)),this.SetCurrentAFrame(this.currentAFrame)}},{key:"SetCurrentAFrame",value:function(t){for(var e=0;e<this.children.length;e++){var i=this.getChildAt(e);i.visible=e==t}}},{key:"Update",value:function(t){var e=this.data.anims[this.animId];if(e){var i=this.data.aframe[e.aFramesStartIndex+this.currentAFrame],r=i.time/60,n=e.aFramesCount;this.currentTime>=r&&(this.currentTime-=r,this.currentAFrame<n&&this.currentAFrame++,this.currentAFrame>=n&&(this.isFinish=!0,this.isLoop?this.currentAFrame=0:this.currentAFrame=n-1),this.SetCurrentAFrame(this.currentAFrame)),this.currentTime+=t}}},{key:"GetRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.data.anims[this.animId],i=this.data.aframe[e.aFramesStartIndex+this.currentAFrame];return this.data.frames[i.frameIndex].rect[t]}},{key:"GetTransformRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.GetRect(t).Clone();return e.Scale(this.scale.x,this.scale.y),e.Translate(this.position.x,this.position.y),e}},{key:"Clone",value:function(){var t=new e(this.spriteIndex);return t.SetAnim(this.animId,!0),t}},{key:"Tint",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.children[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.Tint(t)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}]),e}(PIXI.Container);t.exports=u},function(t,e,i){(function(t){function i(t,e){for(var i=0,r=t.length-1;r>=0;r--){var n=t[r];"."===n?t.splice(r,1):".."===n?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return n.exec(t).slice(1)};e.resolve=function(){for(var e="",n=!1,o=arguments.length-1;o>=-1&&!n;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,n="/"===a.charAt(0))}return e=i(r(e.split("/"),function(t){return!!t}),!n).join("/"),(n?"/":"")+e||"."},e.normalize=function(t){var n=e.isAbsolute(t),o="/"===a(t,-1);return t=i(r(t.split("/"),function(t){return!!t}),!n).join("/"),t||n||(t="."),t&&o&&(t+="/"),(n?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var n=r(t.split("/")),o=r(i.split("/")),a=Math.min(n.length,o.length),s=a,h=0;h<a;h++)if(n[h]!==o[h]){s=h;break}for(var u=[],h=s;h<n.length;h++)u.push("..");return u=u.concat(o.slice(s)),u.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),i=e[0],r=e[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},e.basename=function(t,e){var i=o(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(e,i(79))},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(11),h=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.spriteIndex=t,i.texture=s.spriteInfo[i.spriteIndex].texture,i.data=s.spriteInfo[i.spriteIndex].data,i.moduleTextures=[],i.frameId=-1,i}return o(e,t),a(e,[{key:"SetFrame",value:function(t){this.frameId!=t&&(this.frameId=t,this.PrepareFrame(this.frameId))}},{key:"PrepareFrame",value:function(t){for(var e=this.data.frames[t],i=e.fmstartIndex,r=e.fmstartIndex+e.fmCount,n=r-i,o=n-this.children.length,a=0;a<o;a++){var s=new PIXI.Texture(this.texture.baseTexture),h=new PIXI.Sprite(s);this.moduleTextures.push(s),this.addChild(h)}for(var u=0;u<this.children.length;u++){var l=this.getChildAt(u);if(u<n){var c=this.data.fmodule[i+u],d=this.data.modules[c.fmodulesID];l.position.set(c.fmodulesOX,c.fmodulesOY),l.scale.set(c.fmodulesScaleX,c.fmodulesScaleY),l.rotation=c.fmodulesRotation*Math.PI/180,l.visible=!0,this.moduleTextures[u].frame=new PIXI.Rectangle(d.x,d.y,d.w,d.h)}else l.visible=!1}}},{key:"SetTouchable",value:function(t){if(this.interactive=t,t){var e=this.data.frames[this.frameId].rect[0];this.hitArea=new PIXI.Rectangle(e.x,e.y,e.width,e.height)}}},{key:"GetRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.data.frames[this.frameId].rect[t]}},{key:"GetTransformRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.GetRect(t).Clone();return e.Scale(this.scale.x,this.scale.y),e.Translate(this.position.x,this.position.y),e}},{key:"Clone",value:function(){var t=new e(this.spriteIndex);return t.SetFrame(this.frameId),t}},{key:"Tint",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.children[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.tint=t}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";(function(r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function a(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),this.useColors){var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(r++,"%c"===t&&(n=r))}),e.splice(n,0,i)}}function s(){var t;return"object"===("undefined"==typeof console?"undefined":n(console))&&console.log&&(t=console).log.apply(t,arguments)}function h(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}}function u(){var t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}e.log=s,e.formatArgs=a,e.save=h,e.load=u,e.useColors=o,e.storage=function(){try{return localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=i(200)(e),t.exports.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(e,i(79))},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.spriteInfo=[]}return n(t,[{key:"Add",value:function(t,e,i){this.spriteInfo[t]={texture:e,data:i}}},{key:"GetSpriteByIndex",value:function(t){return this.spriteInfo[t]}}]),t}();t.exports=new o},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=i(20),l=r(u),c=i(111),d=r(c),f=i(110),p=r(f),m=i(15),g=r(m),v=i(5),y=i(2),_=i(4),T=r(_),b=function(t){function e(i,r,a,s,h){n(this,e);var u=o(this,t.call(this));if(u.noFrame=!1,r||(u.noFrame=!0,r=new v.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),u.baseTexture=i,u._frame=r,u.trim=s,u.valid=!1,u.requiresUpdate=!1,u._uvs=null,u.orig=a||r,u._rotate=Number(h||0),!0===h)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(u.noFrame&&(r=new v.Rectangle(0,0,i.width,i.height),i.on("update",u.onBaseTextureUpdated,u)),u.frame=r):i.once("loaded",u.onBaseTextureLoaded,u),u._updateID=0,u.transform=null,u.textureCacheIds=[],u}return a(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new v.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(y.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new p.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,r,n){var o=y.TextureCache[t];return o||(o=new e(l.default.fromImage(t,i,r,n)),e.addToCache(o,t)),o},e.fromFrame=function(t){var e=y.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(l.default.fromCanvas(t,i,r))},e.fromVideo=function(t,i){return"string"==typeof t?e.fromVideoUrl(t,i):new e(d.default.fromVideo(t,i))},e.fromVideoUrl=function(t,i){return new e(d.default.fromUrl(t,i))},e.from=function(t){if("string"==typeof t){var i=y.TextureCache[t];if(!i){return null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t)}return i}return t instanceof HTMLImageElement?new e(l.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,T.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof l.default?new e(t):t},e.fromLoader=function(t,i,r){var n=new l.default(t,void 0,(0,y.getResolutionOfUrl)(i)),o=new e(n);return n.imageUrl=i,r||(r=i),l.default.addToCache(o.baseTexture,r),e.addToCache(o,r),r!==i&&(l.default.addToCache(o.baseTexture,i),e.addToCache(o,i)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),y.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),y.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=y.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete y.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)y.TextureCache[t.textureCacheIds[r]]===t&&delete y.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},h(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,o=e+r>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,u="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+s+" "+u)}this.valid=r&&n&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(g.default);e.default=b,b.EMPTY=new b(new l.default),s(b.EMPTY),s(b.EMPTY.baseTexture),b.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new b(new l.default(t))}(),s(b.WHITE),s(b.WHITE.baseTexture)},function(t,e,i){function r(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}var n=i(67),o=i(66);e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(t,e){if(!t.ccBits)throw new Error("Invalid mode: "+t);if(!n.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},e.getBestModeForData=function(t){return o.testNumeric(t)?e.NUMERIC:o.testAlphanumeric(t)?e.ALPHANUMERIC:o.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(t){if(t&&t.id)return t.id;throw new Error("Invalid mode")},e.isValid=function(t){return t&&t.bit&&t.ccBits},e.from=function(t,i){if(e.isValid(t))return t;try{return r(t)}catch(t){return i}}},function(t,e){var i,r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];e.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},e.getSymbolTotalCodewords=function(t){return r[t]},e.getBCHDigit=function(t){for(var e=0;0!==t;)e++,t>>>=1;return e},e.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');i=t},e.isKanjiModeEnabled=function(){return void 0!==i},e.toSJIS=function(t){return i(t)}},function(t,e,i){"use strict";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,i,r,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new n(i,r||t,o),s=u?u+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],a]:t._events[s].push(a):(t._events[s]=a,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}var h=Object.prototype.hasOwnProperty,u="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(u=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)h.call(t,e)&&i.push(u?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=u?u+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,o=new Array(n);r<n;r++)o[r]=i[r].fn;return o},s.prototype.listenerCount=function(t){var e=u?u+t:t,i=this._events[e];return i?i.fn?1:i.length:0},s.prototype.emit=function(t,e,i,r,n,o){var a=u?u+t:t;if(!this._events[a])return!1;var s,h,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,r),!0;case 5:return l.fn.call(l.context,e,i,r,n),!0;case 6:return l.fn.call(l.context,e,i,r,n,o),!0}for(h=1,s=new Array(c-1);h<c;h++)s[h-1]=arguments[h];l.fn.apply(l.context,s)}else{var d,f=l.length;for(h=0;h<f;h++)switch(l[h].once&&this.removeListener(t,l[h].fn,void 0,!0),c){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,e);break;case 3:l[h].fn.call(l[h].context,e,i);break;case 4:l[h].fn.call(l[h].context,e,i,r);break;default:if(!s)for(d=1,s=new Array(c-1);d<c;d++)s[d-1]=arguments[d];l[h].fn.apply(l[h].context,s)}}return!0},s.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},s.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},s.prototype.removeListener=function(t,e,i,r){var n=u?u+t:t;if(!this._events[n])return this;if(!e)return a(this,n),this;var o=this._events[n];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||a(this,n);else{for(var s=0,h=[],l=o.length;s<l;s++)(o[s].fn!==e||r&&!o[s].once||i&&o[s].context!==i)&&h.push(o[s]);h.length?this._events[n]=1===h.length?h[0]:h:a(this,n)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=u?u+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=u,s.EventEmitter=s,t.exports=s},function(t,e,i){"use strict";function r(t,e,i){return r.TYPED_ARRAY_SUPPORT||this instanceof r?"number"==typeof t?s(this,t):g(this,t,e,i):new r(t,e,i)}function n(t){if(t>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|t}function o(t){return t!==t}function a(t,e){var i;return r.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(e),i.__proto__=r.prototype):(i=t,null===i&&(i=new r(e)),i.length=e),i}function s(t,e){var i=a(t,e<0?0:0|n(e));if(!r.TYPED_ARRAY_SUPPORT)for(var o=0;o<e;++o)i[o]=0;return i}function h(t,e){var i=0|f(e),r=a(t,i),n=r.write(e);return n!==i&&(r=r.slice(0,n)),r}function u(t,e){for(var i=e.length<0?0:0|n(e.length),r=a(t,i),o=0;o<i;o+=1)r[o]=255&e[o];return r}function l(t,e,i,n){if(i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");var o;return o=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),r.TYPED_ARRAY_SUPPORT?o.__proto__=r.prototype:o=u(t,o),o}function c(t,e){if(r.isBuffer(e)){var i=0|n(e.length),s=a(t,i);return 0===s.length?s:(e.copy(s,0,0,i),s)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||o(e.length)?a(t,0):u(t,e);if("Buffer"===e.type&&Array.isArray(e.data))return u(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t,e){e=e||1/0;for(var i,r=t.length,n=null,o=[],a=0;a<r;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function f(t){return r.isBuffer(t)?t.length:"undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer)?t.byteLength:("string"!=typeof t&&(t=""+t),0===t.length?0:d(t).length)}function p(t,e,i,r){for(var n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function m(t,e,i,r){return p(d(e,t.length-i),t,i,r)}function g(t,e,i,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?l(t,e,i,r):"string"==typeof e?h(t,e,i):c(t,e)}var v=i(21);r.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}();var y=r.TYPED_ARRAY_SUPPORT?2147483647:1073741823;r.TYPED_ARRAY_SUPPORT&&(r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1})),r.prototype.write=function(t,e,i){void 0===e?(i=this.length,e=0):void 0===i&&"string"==typeof e?(i=this.length,e=0):isFinite(e)&&(e|=0,isFinite(i)?i|=0:i=void 0);var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");return m(this,t,e,i)},r.prototype.slice=function(t,e){var i=this.length;t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);var n;if(r.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=r.prototype;else{var o=e-t;n=new r(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+t]}return n},r.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var o,a=n-i;if(this===t&&i<e&&e<n)for(o=a-1;o>=0;--o)t[o+e]=this[o+i];else if(a<1e3||!r.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)t[o+e]=this[o+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+a),e);return a},r.prototype.fill=function(t,e,i){if("string"==typeof t){if("string"==typeof e?(e=0,i=this.length):"string"==typeof i&&(i=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=r.isBuffer(t)?t:new r(t),s=a.length;for(o=0;o<i-e;++o)this[o+e]=a[o%s]}return this},r.concat=function(t,e){if(!v(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a(null,0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=s(null,e),o=0;for(i=0;i<t.length;++i){var h=t[i];if(!r.isBuffer(h))throw new TypeError('"list" argument must be an Array of Buffers');h.copy(n,o),o+=h.length}return n},r.byteLength=f,r.prototype._isBuffer=!0,r.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.exports=r},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t)}return n(t,[{key:"Increase",value:function(t,e,i){for(var r=t+e;r>=i;)r-=i;for(;r<0;)r+=i;return r}},{key:"Project",value:function(t,e,i,r,n,o,a,s,h,u){t.camera.x=(t.world.x||0)-e,t.camera.y=(t.world.y||0)-i,t.camera.z=(t.world.z||0)-r,t.screen.scale=n/t.camera.z,t.screen.x=Math.round(o/2+t.screen.scale*t.camera.x*o/2),t.screen.y=Math.floor(a/2-t.screen.scale*t.camera.y*a/2),t.screen.w=Math.round(t.screen.scale*s*o/2),t.ground.x=t.screen.x,t.ground.scale=1-.1*t.world.y/a,t.ground.y=Math.floor(a/2+t.screen.scale*a*a/2)+.1*h,t.ground.offset=a*(1-t.ground.scale)*.5}},{key:"GetLaneOffset",value:function(t,e){switch(t){case GameDefine.ROAD_LANE_LEFT:return-e/2;case GameDefine.ROAD_LANE_LEFT_1:return-e/4;case GameDefine.ROAD_LANE_MIDDLE_LEFT:return-e/6;case GameDefine.ROAD_LANE_MIDDLE:return 0;case GameDefine.ROAD_LANE_MIDDLE_RIGHT:return e/6;case GameDefine.ROAD_LANE_RIGHT_1:return e/4;case GameDefine.ROAD_LANE_RIGHT:return e/2}}},{key:"EaseIn",value:function(t,e,i){return t+(e-t)*Math.pow(i,2)}},{key:"EaseOut",value:function(t,e,i){return t+(e-t)*(1-Math.pow(1-i,2))}},{key:"EaseInOut",value:function(t,e,i){return t+(e-t)*(-Math.cos(i*Math.PI)/2+.5)}},{key:"ExponentialFog",value:function(t,e){return 1/Math.pow(Math.E,t*t*e)}},{key:"PercentRemaining",value:function(t,e){return t%e/e}},{key:"Interpolate",value:function(t,e,i){return t+(e-t)*i}},{key:"ToInt",value:function(t,e){if(null!==t){var i=parseInt(t,10);if(!isNaN(i))return i}return this.ToInt(e,0)}},{key:"RandomInt",value:function(t,e){return Math.round(this.Interpolate(t,e,Math.random()))}},{key:"RandomChoice",value:function(t){return t[this.RandomInt(0,t.length-1)]}},{key:"RumbleWidth",value:function(t,e){return t/Math.max(8,2*e)}},{key:"LaneMarkerWidth",value:function(t,e){return t/Math.max(32,8*e)}}]),t}();t.exports=new o},function(t,e,i){function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,n=0;n<i.length;n++)if((r=i[n])===e||r.fn===e){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(i){i=i.slice(0);for(var r=0,n=i.length;r<n;++r)i[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){(function(t){function r(t,i){return i("b"+e.packets[t.type]+t.data.data)}function n(t,i,r){if(!i)return e.encodeBase64Packet(t,r);var n=t.data,o=new Uint8Array(n),a=new Uint8Array(1+n.byteLength);a[0]=y[t.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}function o(t,i,r){if(!i)return e.encodeBase64Packet(t,r);var n=new FileReader;return n.onload=function(){t.data=n.result,e.encodePacket(t,i,!0,r)},n.readAsArrayBuffer(t.data)}function a(t,i,r){if(!i)return e.encodeBase64Packet(t,r);if(v)return o(t,i,r);var n=new Uint8Array(1);return n[0]=y[t.type],r(new b([n.buffer,t.data]))}function s(t){try{t=p.decode(t)}catch(t){return!1}return t}function h(t,e,i){for(var r=new Array(t.length),n=f(t.length,i),o=0;o<t.length;o++)!function(t,i,n){e(i,function(e,i){r[t]=i,n(e,r)})}(o,t[o],n)}var u,l=i(207),c=i(76),d=i(159),f=i(158),p=i(318);t&&t.ArrayBuffer&&(u=i(198));var m="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),v=m||g;e.protocol=3;var y=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},_=l(y),T={type:"error",data:"parser error"},b=i(199);e.encodePacket=function(e,i,o,s){"function"==typeof i&&(s=i,i=!1),"function"==typeof o&&(s=o,o=null);var h=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&h instanceof ArrayBuffer)return n(e,i,s);if(b&&h instanceof t.Blob)return a(e,i,s);if(h&&h.base64)return r(e,s);var u=y[e.type];return void 0!==e.data&&(u+=o?p.encode(String(e.data)):String(e.data)),s(""+u)},e.encodeBase64Packet=function(i,r){var n="b"+e.packets[i.type];if(b&&i.data instanceof t.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(n+t)},o.readAsDataURL(i.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(i.data))}catch(t){for(var s=new Uint8Array(i.data),h=new Array(s.length),u=0;u<s.length;u++)h[u]=s[u];a=String.fromCharCode.apply(null,h)}return n+=t.btoa(a),r(n)},e.decodePacket=function(t,i,r){if(void 0===t)return T;if("string"==typeof t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),i);if(r&&!1===(t=s(t)))return T;var n=t.charAt(0);return Number(n)==n&&_[n]?t.length>1?{type:_[n],data:t.substring(1)}:{type:_[n]}:T}var o=new Uint8Array(t),n=o[0],a=d(t,1);return b&&"blob"===i&&(a=new b([a])),{type:_[n],data:a}},e.decodeBase64Packet=function(t,e){var i=_[t.charAt(0)];if(!u)return{type:i,data:{base64:!0,data:t.substr(1)}};var r=u.decode(t.substr(1));return"blob"===e&&b&&(r=new b([r])),{type:i,data:r}},e.encodePayload=function(t,i,r){function n(t){return t.length+":"+t}function o(t,r){e.encodePacket(t,!!a&&i,!0,function(t){r(null,n(t))})}"function"==typeof i&&(r=i,i=null);var a=c(t);return i&&a?b&&!v?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void h(t,o,function(t,e){return r(e.join(""))}):r("0:")},e.decodePayload=function(t,i,r){if("string"!=typeof t)return e.decodePayloadAsBinary(t,i,r);"function"==typeof i&&(r=i,i=null);var n;if(""==t)return r(T,0,1);for(var o,a,s="",h=0,u=t.length;h<u;h++){var l=t.charAt(h);if(":"!=l)s+=l;else{if(""==s||s!=(o=Number(s)))return r(T,0,1);if(a=t.substr(h+1,o),s!=a.length)return r(T,0,1);if(a.length){if(n=e.decodePacket(a,i,!0),T.type==n.type&&T.data==n.data)return r(T,0,1);if(!1===r(n,h+o,u))return}h+=o,s=""}}return""!=s?r(T,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,i){function r(t,i){e.encodePacket(t,!0,!0,function(t){return i(null,t)})}if(!t.length)return i(new ArrayBuffer(0));h(t,r,function(t,e){var r=e.reduce(function(t,e){var i;return i="string"==typeof e?e.length:e.byteLength,t+i.toString().length+i+2},0),n=new Uint8Array(r),o=0;return e.forEach(function(t){var e="string"==typeof t,i=t;if(e){for(var r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);i=r.buffer}n[o++]=e?0:1;for(var s=i.byteLength.toString(),a=0;a<s.length;a++)n[o++]=parseInt(s[a]);n[o++]=255;for(var r=new Uint8Array(i),a=0;a<r.length;a++)n[o++]=r[a]}),i(n.buffer)})},e.encodePayloadAsBlob=function(t,i){function r(t,i){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);t=r.buffer,e[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,a=o.toString(),s=new Uint8Array(a.length+1),n=0;n<a.length;n++)s[n]=parseInt(a[n]);if(s[a.length]=255,b){var h=new b([e.buffer,s.buffer,t]);i(null,h)}})}h(t,r,function(t,e){return i(new b(e))})},e.decodePayloadAsBinary=function(t,i,r){"function"==typeof i&&(r=i,i=null);for(var n=t,o=[],a=!1;n.byteLength>0;){for(var s=new Uint8Array(n),h=0===s[0],u="",l=1;255!=s[l];l++){if(u.length>310){a=!0;break}u+=s[l]}if(a)return r(T,0,1);n=d(n,2+u.length),u=parseInt(u);var c=d(n,0,u);if(h)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(t){var f=new Uint8Array(c);c="";for(var l=0;l<f.length;l++)c+=String.fromCharCode(f[l])}o.push(c),n=d(n,u)}var p=o.length;o.forEach(function(t,n){r(e.decodePacket(t,i,!0),n,p)})}}).call(e,i(3))},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(2),h=i(4),u=r(h),l=i(15),c=r(l),d=i(112),f=r(d),p=i(44),m=r(p),g=function(t){function e(i,r,a){n(this,e);var h=o(this,t.call(this));return h.uid=(0,s.uid)(),h.touched=0,h.resolution=a||u.default.RESOLUTION,h.width=100,h.height=100,h.realWidth=100,h.realHeight=100,h.scaleMode=void 0!==r?r:u.default.SCALE_MODE,h.hasLoaded=!1,h.isLoading=!1,h.source=null,h.origSource=null,h.imageType=null,h.sourceScale=1,h.premultipliedAlpha=!0,h.imageUrl=null,h.isPowerOfTwo=!1,h.mipmap=u.default.MIPMAP_TEXTURES,h.wrapMode=u.default.WRAP_MODE,h._glTextures={},h._enabled=0,h._virtalBoundId=-1,h._destroyed=!1,h.textureCacheIds=[],i&&h.loadSource(i),h}return a(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=m.default.isPow2(this.realWidth)&&m.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var r=this;if(t.onload=function(){if(r._updateImageType(),t.onload=null,t.onerror=null,r.isLoading){if(r.isLoading=!1,r._sourceLoaded(),"svg"===r.imageType)return void r._loadSvgSource();r.emit("loaded",r)}},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,s.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,s.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,s.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,s.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,s.getSvgSize)(t),r=i.width,n=i.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,s.uid)(),o.getContext("2d").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,e.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete s.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,r,n){var o=s.BaseTextureCache[t];if(!o){var a=new Image;void 0===i&&0!==t.indexOf("data:")?a.crossOrigin=(0,f.default)(t):i&&(a.crossOrigin="string"==typeof i?i:"anonymous"),o=new e(a,r),o.imageUrl=t,n&&(o.sourceScale=n),o.resolution=(0,s.getResolutionOfUrl)(t),a.src=t,e.addToCache(o,t)}return o},e.fromCanvas=function(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=r+"_"+(0,s.uid)());var n=s.BaseTextureCache[t._pixiId];return n||(n=new e(t,i),e.addToCache(n,t._pixiId)),n},e.from=function(t,i,r){if("string"==typeof t)return e.fromImage(t,void 0,i,r);if(t instanceof HTMLImageElement){var n=t.src,o=s.BaseTextureCache[n];return o||(o=new e(t,i),o.imageUrl=n,r&&(o.sourceScale=r),o.resolution=(0,s.getResolutionOfUrl)(n),e.addToCache(o,n)),o}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),s.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete s.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete s.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e}(c.default);e.default=g},function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.bmax=Math.pow(2,8),this.smax=Math.pow(2,16),this.imax=Math.pow(2,32)}return n(t,[{key:"ReadUInit32",value:function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e+0]}},{key:"ReadInit32",value:function(t,e){var i=t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e+0];return i>=this.imax/2&&(i-=this.imax),i}},{key:"ReadUShort",value:function(t,e){return t[e+1]<<8|t[e+0]}},{key:"ReadShort",value:function(t,e){var i=t[e+1]<<8|t[e+0];return i>=this.smax/2&&(i-=this.smax),i}},{key:"ReadShortArray",value:function(t,e,i,r,n){for(var o=0;o<n;o++)t[o+e]=this.ReadShort(i,r),r+=2;return r}},{key:"ReadUByte",value:function(t,e){return 255&t[e]}},{key:"ReadByte",value:function(t,e){var i=255&t[e];return i>=this.bmax/2&&(i-=this.bmax),i}},{key:"ArrayCopy",value:function(t,e,i,r,n){for(var o=0;o<n;o++)t[e++]=i[r++]}}]),t}();t.exports=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}e.__esModule=!0;var s=i(6),h=i(4),u=function(t){return t&&t.__esModule?t:{default:t}}(h),l=function(t){function e(i,o,s,h,l){return r(this,e),n(this,t.call(this,i,a(o,l||u.default.PRECISION_VERTEX),a(s,l||u.default.PRECISION_FRAGMENT),void 0,h))}return o(e,t),e}(s.GLShader);e.default=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(2),h=i(94),u=function(t){return t&&t.__esModule?t:{default:t}}(h),l=function(t){function e(){r(this,e);var i=n(this,t.call(this));return i.children=[],i}return o(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,(0,s.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,r="number"==typeof e?e:this.children.length,n=r-i,o=void 0;if(n>0&&n<=r){o=this.children.splice(i,n);for(var a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var s=0;s<o.length;++s)o[s].emit("removed",this);return o}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var n=0,o=this.children.length;n<o;n++)this.children[n].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},a(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(u.default);e.default=l,l.prototype.containerUpdateTransform=l.prototype.updateTransform},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(100),h=r(s),u=i(236),l=r(u),c=i(101),d=r(c),f=i(237),p=r(f),m=i(2),g=i(0),v=i(4),y=r(v),_=function(t){function e(i,r,a){n(this,e);var s=o(this,t.call(this,"Canvas",i,r,a));return s.type=g.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext("2d",{alpha:s.transparent}),s.context=s.rootContext,s.refresh=!0,s.maskManager=new l.default(s),s.smoothProperty="imageSmoothingEnabled",s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty="webkitImageSmoothingEnabled":s.rootContext.mozImageSmoothingEnabled?s.smoothProperty="mozImageSmoothingEnabled":s.rootContext.oImageSmoothingEnabled?s.smoothProperty="oImageSmoothingEnabled":s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty="msImageSmoothingEnabled")),s.initPlugins(),s.blendModes=(0,p.default)(),s._activeBlendMode=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return a(e,t),e.prototype.render=function(t,e,i,r,n){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new d.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!n){var s=t.parent,h=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(h),this._tempDisplayObjectParent.transform._worldID=-1):h.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=g.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[g.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=a,t.renderCanvas(this),this.context=u,a.restore(),this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=y.default.SCALE_MODE===g.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(h.default);e.default=_,m.pluginTarget.mixin(_)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){r(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(12),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=new h.Point,d=new h.Polygon,f=function(t){function e(i,o,a,s,u){r(this,e);var c=n(this,t.call(this));return c._texture=i||l.default.EMPTY,c.uvs=a||new Float32Array([0,0,1,0,1,1,0,1]),c.vertices=o||new Float32Array([0,0,100,0,100,100,0,100]),c.indices=s||new Uint16Array([0,1,3,2]),c.dirty=0,c.indexDirty=0,c.blendMode=h.BLEND_MODES.NORMAL,c.canvasPadding=h.settings.MESH_CANVAS_PADDING,c.drawMode=u||e.DRAW_MODES.TRIANGLE_MESH,c.shader=null,c.tintRgb=new Float32Array([1,1,1]),c._glDatas={},c._uvTransform=new h.TextureMatrix(c._texture),c.uploadUvTransform=!1,c.pluginName="mesh",c}return o(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,c);for(var i=this.vertices,r=d.points,n=this.indices,o=this.indices.length,a=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<o;s+=a){var h=2*n[s],u=2*n[s+1],l=2*n[s+2];if(r[0]=i[h],r[1]=i[h+1],r[2]=i[u],r[3]=i[u+1],r[4]=i[l],r[5]=i[l+1],d.contains(c.x,c.y))return!0}return!1},a(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return h.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=h.utils.hex2rgb(t,this.tintRgb)}}]),e}(h.Container);e.default=f,f.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,i){"use strict";var r=i(310).Loader,n=i(62).Resource,o=i(128),a=i(129);r.Resource=n,r.async=o,r.encodeBinary=a,r.base64=a,t.exports=r,t.exports.Loader=r,t.exports.default=r},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(22),a=function(){function t(){r(this,t),this.texts=[],this.loaded=!1}return n(t,[{key:"Utf8ArrayToStr",value:function(t,e,i){var r,n,o,a,s,h;for(r="",o=i,n=0;n<o;)switch(a=t[e+n],n++,a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(a);break;case 12:case 13:s=t[e+n],n++,r+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[e+n],n++,h=t[e+n],n++,r+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&h)<<0)}return r}},{key:"Load",value:function(t){var e=0;o.ReadByte(t,e);e++;var i=o.ReadInit32(t,e);e+=4;for(var r=[],n=0;n<i;n++)r[n]=o.ReadInit32(t,e),e+=4;for(var a=0,n=0;n<i;n++)this.texts[n]=this.Utf8ArrayToStr(t,e,r[n]-a),e+=r[n]-a,a=r[n];this.loaded=!0}},{key:"GetText",value:function(t){return this.texts[t]}}]),t}();t.exports=new a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(22),h=i(29),u=i(9),l=i(7),c=(i(11),i(173)),d=function(t){function e(){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),a(e,[{key:"Load",value:function(t){for(var e=0;e<t.length;){var i=s.ReadUByte(t,e);e++;var r=s.ReadShort(t,e);e+=2;var n=s.ReadShort(t,e);e+=2;var o=s.ReadUByte(t,e);if(e++,i==c.TEMPLATE_GUI_GFXITEM){var a=s.ReadByte(t,e);e++;var d=s.ReadShort(t,e);e+=2;var f=s.ReadByte(t,e);e++;var p=s.ReadByte(t,e);if(e++,-1==f){var m=new u(a);m.posX=r,m.posY=n,m.SetFrame(d),m.position.set(r,n),m.visible=p,this.UpdateAnchor(m,o),this.addChild(m)}else{var g=new l(a);g.posX=r,g.posY=n,g.SetAnim(f,!0),g.position.set(r,n),g.visible=p,this.UpdateAnchor(g,o),this.addChild(g)}}else if(i==c.TEMPLATE_GUI_TEXTITEM){var v=s.ReadShort(t,e);e+=2;var y=s.ReadShort(t,e);e+=2;var _=s.ReadShort(t,e);e+=2;var T=s.ReadShort(t,e);e+=2;var b=s.ReadByte(t,e);e++;var E=s.ReadUByte(t,e);e++;var w=s.ReadUByte(t,e);e++;var x=s.ReadUByte(t,e);e++;var S=s.ReadByte(t,e);e++;var A=s.ReadByte(t,e);e++;var I=s.ReadUByte(t,e);e++;var O=s.ReadUByte(t,e);e++;var R=s.ReadUByte(t,e);e++;var C=h.GetText(v),P=0==S?"left":1==S?"right":"center",M=GameConfig.fontInfo[b],D="rgba("+E+", "+w+", "+x+", 1)",k="rgba("+I+", "+O+", "+R+", 1)",N=new PIXI.TextStyle({align:P,fontFamily:M,fontSize:y,fill:D,dropShadow:A,dropShadowColor:k,wordWrap:!0,wordWrapWidth:_}),G=new PIXI.Text(C,N);switch(P){case"left":G.anchor.set(0,.5),G.position.set(r,n+T/2);break;case"right":G.anchor.set(1,.5),G.position.set(r+_,n+T/2);break;case"center":G.anchor.set(.5,.5),G.position.set(r+_/2,n+T/2)}G.posX=G.position.x,G.posY=G.position.y,this.UpdateAnchor(G,o),G.rect=new PIXI.Rectangle(G.position.x,G.position.y-T/2,_,T),this.addChild(G)}}}},{key:"UpdateAnchor",value:function(t,e){switch(e){case c.ANCHOR_LEFT:break;case c.ANCHOR_LEFT_TOP:case c.ANCHOR_LEFT_CENTER:case c.ANCHOR_LEFT_BOTTOM:break;case c.ANCHOR_RIGHT:t.position.x=t.posX+2*APP.offsetX;break;case c.ANCHOR_RIGHT_TOP:case c.ANCHOR_RIGHT_CENTER:break;case c.ANCHOR_RIGHT_BOTTOM:t.position.x=t.posX+2*APP.offsetX,t.position.y=t.posY+2*APP.offsetY;break;case c.ANCHOR_TOP:case c.ANCHOR_TOP_CENTER:break;case c.ANCHOR_BOTTOM:t.position.y=t.posY+2*APP.offsetY;break;case c.ANCHOR_BOTTOM_CENTER:t.position.y=t.posY+2*APP.offsetY,t.position.x=t.posX+APP.offsetX;break;case c.ANCHOR_HCENTER_VCENTER:t.position.x=t.posX+APP.offsetX,t.position.y=t.posY+APP.offsetY}t.auroraAnchor=e}},{key:"UpdateAnchors",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this.children[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;this.UpdateAnchor(o,o.auroraAnchor),o instanceof PIXI.Text&&(o.rect.x=o.position.x,o.rect.y=o.position.y-o.rect.height/2)}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}},{key:"UpdateAnchorRotate",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this.children[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var o=r.value;switch(o.auroraAnchor){case c.ANCHOR_LEFT:break;case c.ANCHOR_LEFT_TOP:case c.ANCHOR_LEFT_CENTER:case c.ANCHOR_LEFT_BOTTOM:break;case c.ANCHOR_RIGHT:o.position.x=o.posX+2*APP.offsetY;break;case c.ANCHOR_RIGHT_TOP:case c.ANCHOR_RIGHT_CENTER:case c.ANCHOR_RIGHT_BOTTOM:case c.ANCHOR_TOP:case c.ANCHOR_TOP_CENTER:break;case c.ANCHOR_BOTTOM:o.position.y=o.posY+2*APP.offsetX;break;case c.ANCHOR_BOTTOM_CENTER:o.position.y=o.posY+2*APP.offsetX,o.position.x=o.posX+APP.offsetY;break;case c.ANCHOR_HCENTER_VCENTER:o.position.x=o.posX+APP.offsetY,o.position.y=o.posY+APP.offsetX}}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}},{key:"GetObject",value:function(t){return this.getChildAt(t)}},{key:"Update",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.children[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.Update&&a.Update(t)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}]),e}(PIXI.Container);t.exports=d},function(t,e){t.exports=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";function r(t,e){var i=t.points;if(0!==i.length){var r=new o.Point(i[0],i[1]),n=new o.Point(i[i.length-2],i[i.length-1]);if(r.x===n.x&&r.y===n.y){i=i.slice(),i.pop(),i.pop(),n=new o.Point(i[i.length-2],i[i.length-1]);var s=n.x+.5*(r.x-n.x),h=n.y+.5*(r.y-n.y);i.unshift(s,h),i.push(s,h)}var u=e.points,l=e.indices,c=i.length/2,d=i.length,f=u.length/6,p=t.lineWidth/2,m=(0,a.hex2rgb)(t.lineColor),g=t.lineAlpha,v=m[0]*g,y=m[1]*g,_=m[2]*g,T=i[0],b=i[1],E=i[2],w=i[3],x=0,S=0,A=-(b-w),I=T-E,O=0,R=0,C=0,P=0,M=Math.sqrt(A*A+I*I);A/=M,I/=M,A*=p,I*=p,u.push(T-A,b-I,v,y,_,g),u.push(T+A,b+I,v,y,_,g);for(var D=1;D<c-1;++D){T=i[2*(D-1)],b=i[2*(D-1)+1],E=i[2*D],w=i[2*D+1],x=i[2*(D+1)],S=i[2*(D+1)+1],A=-(b-w),I=T-E,M=Math.sqrt(A*A+I*I),A/=M,I/=M,A*=p,I*=p,O=-(w-S),R=E-x,M=Math.sqrt(O*O+R*R),O/=M,R/=M,O*=p,R*=p;var k=-I+b-(-I+w),N=-A+E-(-A+T),G=(-A+T)*(-I+w)-(-A+E)*(-I+b),L=-R+S-(-R+w),F=-O+E-(-O+x),U=(-O+x)*(-R+w)-(-O+E)*(-R+S),B=k*F-L*N;if(Math.abs(B)<.1)B+=10.1,u.push(E-A,w-I,v,y,_,g),u.push(E+A,w+I,v,y,_,g);else{var j=(N*U-F*G)/B,X=(L*G-k*U)/B;(j-E)*(j-E)+(X-w)*(X-w)>196*p*p?(C=A-O,P=I-R,M=Math.sqrt(C*C+P*P),C/=M,P/=M,C*=p,P*=p,u.push(E-C,w-P),u.push(v,y,_,g),u.push(E+C,w+P),u.push(v,y,_,g),u.push(E-C,w-P),u.push(v,y,_,g),d++):(u.push(j,X),u.push(v,y,_,g),u.push(E-(j-E),w-(X-w)),u.push(v,y,_,g))}}T=i[2*(c-2)],b=i[2*(c-2)+1],E=i[2*(c-1)],w=i[2*(c-1)+1],A=-(b-w),I=T-E,M=Math.sqrt(A*A+I*I),A/=M,I/=M,A*=p,I*=p,u.push(E-A,w-I),u.push(v,y,_,g),u.push(E+A,w+I),u.push(v,y,_,g),l.push(f);for(var W=0;W<d;++W)l.push(f++);l.push(f-1)}}function n(t,e){var i=0,r=t.points;if(0!==r.length){var n=e.points,o=r.length/2,s=(0,a.hex2rgb)(t.lineColor),h=t.lineAlpha,u=s[0]*h,l=s[1]*h,c=s[2]*h;for(i=1;i<o;i++){var d=r[2*(i-1)],f=r[2*(i-1)+1],p=r[2*i],m=r[2*i+1];n.push(d,f),n.push(u,l,c,h),n.push(p,m),n.push(u,l,c,h)}}}e.__esModule=!0,e.default=function(t,e,i){t.nativeLines?n(t,i):r(t,e)};var o=i(5),a=i(2)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(100),h=r(s),u=i(244),l=r(u),c=i(245),d=r(c),f=i(243),p=r(f),m=i(35),g=r(m),v=i(34),y=r(v),_=i(239),T=r(_),b=i(20),E=r(b),w=i(238),x=r(w),S=i(240),A=r(S),I=i(248),O=r(I),R=i(249),C=r(R),P=i(2),M=i(6),D=r(M),k=i(0),N=0,G=function(t){function e(i,r,a){n(this,e);var s=o(this,t.call(this,"WebGL",i,r,a));return s.legacy=s.options.legacy,s.legacy&&(D.default.VertexArrayObject.FORCE_NATIVE=!0),s.type=k.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener("webglcontextlost",s.handleContextLost,!1),s.view.addEventListener("webglcontextrestored",s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:s.options.antialias,premultipliedAlpha:s.transparent&&"notMultiplied"!==s.transparent,stencil:!0,preserveDrawingBuffer:s.options.preserveDrawingBuffer,powerPreference:s.options.powerPreference},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new l.default(s),s.stencilManager=new d.default(s),s.emptyRenderer=new y.default(s),s.currentRenderer=s.emptyRenderer,s.textureManager=null,s.filterManager=null,s.initPlugins(),s.options.context&&(0,C.default)(s.options.context),s.gl=s.options.context||D.default.createContext(s.view,s._contextOptions),s.CONTEXT_UID=N++,s.state=new A.default(s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.drawModes=(0,O.default)(s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return a(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new T.default(this),this.filterManager=new p.default(this),this.textureGC=new x.default(this),this.state.resetToDefault(),this.rootRenderTarget=new g.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new D.default.GLTexture.fromData(t,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var n=0;n<e;n++){var o=new E.default;o._glTextures[this.CONTEXT_UID]=i,this.boundTextures[n]=r,this.emptyTextures[n]=o,this.bindTexture(null,n)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,r,n){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!n){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,r),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){h.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture,r=i._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var r=t.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),i=r._glRenderTargets[this.CONTEXT_UID],i.setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,i)e=e||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===t)return r;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===t&&(this.boundTextures[i]=this.emptyTextures[i],e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new D.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(h.default);e.default=G,P.pluginTarget.mixin(G)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(26),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=function(t){function e(){return r(this,e),n(this,t.apply(this,arguments))}return o(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(s.default);e.default=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(5),o=i(0),a=i(4),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=i(6),u=function(){function t(e,i,a,u,l,c){r(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=l||s.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==u?u:s.default.SCALE_MODE,this.root=c,this.root?(this.frameBuffer=new h.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=h.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,a)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=u},function(t,e){function i(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(t){return t&&void 0!==t.bit&&t.bit>=0&&t.bit<4},e.from=function(t,r){if(e.isValid(t))return t;try{return i(t)}catch(t){return r}}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(22),a=function(){function t(){r(this,t),this.version,this.count,this.packName,this.packDataIndex,this.packdDataLength,this.packdData,this.subpackCount,this.subpackStartIndex}return n(t,[{key:"Load",value:function(t){var e=null;if("undefined"!=typeof Uint8Array)e=new Uint8Array(t);else{var i=new DataView(t);e=[];for(var r=0;r<t.byteLength;r++)e[r]=i.getUint8(r)}var n=0;this.version=o.ReadShort(e,n),n+=2,this.count=o.ReadShort(e,n),n+=2,this.subpackCount=o.ReadShort(e,n),n+=2,this.subpackStartIndex=[];for(var a=0;a<this.subpackCount;a++){var s=o.ReadShort(e,n);n+=2,this.subpackStartIndex[a]=s}this.packName=[],this.packdData=[],this.packDataIndex=[],this.packdDataLength=[];for(var h=0,u=0;u<this.subpackCount;u++)for(;h<this.count;){var l=o.ReadByte(e,n);if(n++,l>0){var c=[];o.ArrayCopy(c,0,e,n,l),n+=l,this.packName[h]=c}var d=o.ReadInit32(e,n);n+=4,this.packDataIndex[h]=d;var f=o.ReadInit32(e,n);n+=4,this.packdDataLength[h]=f,h++}for(var p=0;p<this.count;p++){var m=this.packDataIndex[p],g=this.packdDataLength[p];o.ReadByte(e,m);m++,this.packdData[p]=[],o.ArrayCopy(this.packdData[p],0,e,m,g-1)}}},{key:"GetData",value:function(t){return this.packdData[t]}},{key:"Close",value:function(){if(null!=this.packdData){for(var t=0;t<this.packdData.length;t++)this.DeleteArray(this.packdData[t]);this.DeleteArray(this.packdData)}this.packName=null,this.packdData=null,this.packDataIndex=null,this.packdDataLength=null,this.isloaded=!1}},{key:"DeleteArray",value:function(t){for(var e=0;e<t.length;e++)delete t[e];t.splice(0,t.length)}}]),t}();t.exports=new a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(175),a=i(22),s=e.Module=function t(){r(this,t),this.type,this.x,this.y,this.w,this.h,this.color},h=e.FModule=function t(){r(this,t),this.fmodulesID,this.fmodulesOX,this.fmodulesOY,this.fmodulesFlags,this.fmodulesPal,this.fmodulesRotation,this.fmodulesScaleX,this.fmodulesScaleY,this.fmodulesBlendMode,this.fmodulesBlendOpacity},u=e.Frame=function t(){r(this,t),this.fmCount,this.fmstartIndex,this.rect=[]},l=e.AFrame=function t(){r(this,t),this.frameIndex,this.time,this.ox,this.oy,this.flags,this.rotation=0,this.scaleX=1,this.scaleY=1},c=e.Animation=function t(){r(this,t),this.aFramesCount,this.aFramesStartIndex},d=function(){function t(){r(this,t),this.bsFlags=0,this.bsExtraFlags=0,this.modules=[],this.fmodule=[],this.frames=[],this.frameRect=[],this.framePolygon=[],this.framePolygonLength=[],this.aframe=[],this.anims=[]}return n(t,[{key:"CheckFlag",value:function(t,e){return 0!=(t&e)}},{key:"CheckSpriteFlag",value:function(t){return 0!=(this.bsFlags&t)}},{key:"CheckSpriteExtraFlag",value:function(t){return 0!=(this.bsExtraFlags&t)}},{key:"ConvertFMFlagsToFreeRotateScale",value:function(t){var e=t.fmodulesFlags,i=t.fmodulesOX,r=t.fmodulesOY,n=this.modules[t.fmodulesID],o=n.w,a=n.h;t.fmodulesRotation=0,t.fmodulesScaleX=1,t.fmodulesScaleY=1,this.CheckFlag(e,4)?(t.fmodulesRotation=90,this.CheckFlag(e,1)?(t.fmodulesScaleX=-1,this.CheckFlag(e,2)?(t.fmodulesScaleY=-1,r+=o):(r+=o,i+=a)):this.CheckFlag(e,2)?t.fmodulesScaleY=-1:i+=a,t.fmodulesOY=r,t.fmodulesOX=i):(this.CheckFlag(e,1)&&(t.fmodulesScaleX=-1,i+=o,t.fmodulesOX=i),this.CheckFlag(e,2)&&(t.fmodulesScaleY=-1,r+=a,t.fmodulesOY=r))}},{key:"LoadModule",value:function(t,e){var i=a.ReadUShort(t,e);if(e+=2,i>0)for(var r=void 0,n=0;n<i;++n){var o=a.ReadUByte(t,e);e++;var h=!1,u=!1,l=!1,c=!1;r=new s,r.type=o,0==o?(h=!0,u=!0,this.CheckSpriteFlag(4)&&(r.imgIndex=a.ReadByte(t,e),e++)):244==o||255==o||(254==o?(l=!0,c=!0,u=!0):253==o||252==o||251==o||250==o||249==o||248==o||247==o||Utils.Log("Invalid module type : "+o+"\tmodule #"+n)),l&&this.CheckSpriteExtraFlag(1<<22),c&&(r.color=Graphic.ToColor(a.ReadInit32(t,e)),e+=4),h&&(this.CheckSpriteFlag(32)?(r.x=a.ReadShort(t,e),e+=2,r.y=a.ReadShort(t,e),e+=2):this.CheckSpriteFlag(2)&&(r.x=a.ReadByte(t,e),e++,r.y=a.ReadByte(t,e),e++)),u&&(this.CheckSpriteFlag(16)?(r.w=a.ReadShort(t,e),e+=2,r.h=a.ReadShort(t,e),e+=2):(r.w=a.ReadByte(t,e),e++,r.h=a.ReadByte(t,e),e++)),this.modules.push(r)}return e}},{key:"LoadFModule",value:function(t,e){var i=a.ReadUShort(t,e);if(e+=2,i>0)for(var r=0;r<i;r++){var n=new h;this.CheckSpriteFlag(1<<20)?(n.fmodulesID=a.ReadShort(t,e),e+=2):(n.fmodulesID=a.ReadByte(t,e),e++),this.CheckSpriteFlag(1024)?(n.fmodulesOX=a.ReadShort(t,e),e+=2,n.fmodulesOY=a.ReadShort(t,e),e+=2):(n.fmodulesOX=a.ReadByte(t,e),e++,n.fmodulesOY=a.ReadByte(t,e),e++),this.CheckSpriteFlag(16384)&&(n.fmodulesPal=a.ReadByte(t,e),e++),n.fmodulesFlags=a.ReadByte(t,e),e++,this.CheckSpriteExtraFlag(1)?(n.fmodulesRotation=a.ReadShort(t,e),e+=2,n.fmodulesScaleX=a.ReadShort(t,e)/100,e+=2,n.fmodulesScaleY=a.ReadShort(t,e)/100,e+=2):this.ConvertFMFlagsToFreeRotateScale(n),this.CheckSpriteExtraFlag(16)&&(n.fmodulesBlendMode=a.ReadByte(t,e),e++,n.fmodulesBlendOpacity=a.ReadByte(t,e),e++),this.fmodule.push(n)}return e}},{key:"LoadFrame",value:function(t,e){if(this.CheckSpriteFlag(32768)){var i=a.ReadUShort(t,e);e+=2;var r=i<<2,n=0;this.CheckSpriteFlag(1024)?(a.ReadShortArray(this.frameRect,n,t,e,r),e+=2*r,n+=r):(a.ArrayCopy(this.frameRect,n,t,e,r),e+=r,n+=r)}if(this.CheckSpriteExtraFlag(1<<26)){var s=a.ReadUShort(t,e);e+=2;var h=s<<1;this.CheckSpriteFlag(1024)?(a.ReadShortArray(this.framePolygon,0,t,e,h),e+=2*h):(a.ReadShortArray(this.framePolygon,0,t,e,h),e+=h);var l=a.ReadUShort(t,e);e+=2,a.ReadShortArray(this.framePolygonLength,0,t,e,l),e+=2*l}var c=a.ReadUShort(t,e);if(e+=2,c>0){for(var d=0,f=0,p=0;p<c;p++){var m=new u,g=0,v=0;if(this.CheckSpriteFlag(2048)?(m.fmCount=a.ReadShort(t,e),e+=2):(m.fmCount=a.ReadByte(t,e),e++),m.fmstartIndex=a.ReadShort(t,e),e+=2,this.CheckSpriteFlag(32768)){var y=d;d+=a.ReadByte(t,e),e++,g=d-y;for(var _=0;_<g;_++){var T=new o,b=4*(y+_);T.x=this.frameRect[b+0],T.y=this.frameRect[b+1],T.width=this.frameRect[b+2],T.height=this.frameRect[b+3],m.rect.push(T)}}if(this.CheckSpriteExtraFlag(1<<26)){var E=f;f+=a.ReadByte(t,e),e++,v=f-E;for(var w=0;w<v;w++){for(var x=[],S=0,A=0;A<E+w;A++)S+=this.framePolygonLength[A];for(var A=0;A<this.framePolygonLength[E+w];A++){var I=2*(S+A);x.push(this.framePolygon[I+0]),x.push(this.framePolygon[I+1])}m.rect.push(x)}}if(g<=0&&v<=0){var O=new o,R=m.fmstartIndex,C=m.fmstartIndex+m.fmCount,P=this.fmodule[R],M=0,D=0;P&&(O.x=P.fmodulesOX,O.y=P.fmodulesOY,M=P.fmodulesOX+this.modules[P.fmodulesID].w,D=P.fmodulesOY+this.modules[P.fmodulesID].h);for(var k=R;k<C;k++){var N=this.modules[this.fmodule[k].fmodulesID];P=this.fmodule[k],O.x>P.fmodulesOX&&(O.x=P.fmodulesOX),O.y>P.fmodulesOY&&(O.y=P.fmodulesOY),M<P.fmodulesOX+N.w&&(M=P.fmodulesOX+N.w),D<P.fmodulesOY+N.h&&(D=P.fmodulesOY+N.h)}O.width=M-O.x,O.height=D-O.y,m.rect.push(O)}this.frames.push(m)}if(!this.CheckSpriteFlag(4096))for(var G=c<<2,L=0;L<G;L++){this.CheckSpriteFlag(1024)?(a.ReadShort(t,e),e+=2):(a.ReadByte(t,e),e++)}this.CheckSpriteFlag(8192)&&(this.CheckSpriteFlag(1024)?e+=c<<3:e+=c<<2)}return e}},{key:"LoadAFrame",value:function(t,e){var i=a.ReadUShort(t,e);if(e+=2,i>0)for(var r=0;r<i;r++){var n=new l;this.CheckSpriteFlag(1<<21)?(n.frameIndex=a.ReadShort(t,e),e+=2):(n.frameIndex=a.ReadByte(t,e),e++),n.time=a.ReadUByte(t,e),e++,this.CheckSpriteFlag(1<<18)?(n.ox=a.ReadShort(t,e),e+=2,n.oy=a.ReadShort(t,e),e+=2):(n.ox=a.ReadByte(t,e),e++,n.oy=a.ReadByte(t,e),e++),n.flags=a.ReadByte(t,e),e++,this.CheckSpriteExtraFlag(2)&&(n.rotation=a.ReadShort(t,e),e+=2,n.scaleX=a.ReadShort(t,e)/100,e+=2,n.scaleY=a.ReadShort(t,e)/100,e+=2),this.aframe.push(n)}return e}},{key:"LoadAnims",value:function(t,e){var i=a.ReadUShort(t,e);if(e+=2,i>0)for(var r=0;r<i;r++){var n=new c;this.CheckSpriteFlag(1<<19)?(n.aFramesCount=a.ReadShort(t,e),e+=2):(n.aFramesCount=a.ReadByte(t,e),e++),n.aFramesStartIndex=a.ReadShort(t,e),e+=2,this.anims.push(n)}return e}},{key:"LoadTween",value:function(t,e){if(this.CheckSpriteExtraFlag(4096))try{var i=a.ReadUShort(t,e);e+=2;for(var r=0;r<i;r++)e+=2,e++,e+=2,e+=2,e+=2,e+=2,e+=2,e+=2,e++,e+=2,e+=2,e+=2,e+=2,e+=2,e++,e+=2;var n=a.ReadUShort(t,e);e+=2;for(var o=0;o<n;o++)e+=2,e+=2,e+=2;var s=a.ReadUShort(t,e);e+=2;for(var h=0;h<s;h++)e+=2,e+=2,e+=2,e+=2,e+=2;var u=a.ReadUShort(t,e);e+=2;for(var l=0;l<u;l++)e+=2,e+=2,e+=2}catch(t){Utils.Log("Guisprite: "+t)}return e}},{key:"Load",value:function(t){if(this.bsFlags=0,this.bsExtraFlags=0,this.modules=[],this.fmodule=[],this.frames=[],this.frameRect=[],this.framePolygon=[],this.framePolygonLength=[],this.aframe=[],this.anims=[],t&&null!=t&&t.length>0){var e=0,i=a.ReadShort(t,e);if(e+=2,1503!=i)return void Utils.Log("ASprite.Load.Invalid BSprite version!");if(this.bsFlags=a.ReadInit32(t,e),e+=4,this.CheckSpriteFlag(1<<22)&&(this.bsExtraFlags=a.ReadInit32(t,e),e+=4),e=this.LoadModule(t,e),e=this.LoadFModule(t,e),e=this.LoadFrame(t,e),e=this.LoadAFrame(t,e),e=this.LoadAnims(t,e),e=this.LoadTween(t,e),this.modules.length<=0)return void Utils.Log("WARNING: sprite with num modules = "+this.modules.length);for(var r=[this.modules,this.fmodule,this.frames,this.aframe,this.anims],n=[],o=0;o<r.length;o++){var s=[];a.ArrayCopy(s,0,r[o],0,r[o].length),n.push(s)}return{modules:n[0],fmodule:n[1],frames:n[2],aframe:n[3],anims:n[4]}}}}]),t}();t.exports=new d},function(t,e,i){"use strict";function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(){n(this,t),this.mainDiv=null,this.onRotate=!1,this.canRotate=!1}return o(t,[{key:"Init",value:function(){var t=APP.GetWidth(),e=APP.GetHeight();if(null==this.mainDiv){var i=void 0;if(APP.IsRotate())i={position:"absolute",top:"50%",left:"50%",width:t+"px",height:e+"px",transform:"translate(-50%, -50%) rotate(-90deg)",msTransform:"translate(-50%, -50%) rotate(-90deg)",WebkitTransform:"translate(-50%, -50%) rotate(-90deg)"};else{var n;n={position:"absolute",top:"50%",left:"50%",width:t+"px",height:e+"px",transform:"translate(-50%, -50%) rotate(0deg)"},r(n,"transform","translate(-50%, -50%) rotate(0deg)"),r(n,"msTransform","translate(-50%, -50%) rotate(0deg)"),r(n,"WebkitTransform","translate(-50%, -50%) rotate(0deg)"),i=n}this.mainDiv=document.createElement("div"),this.SetStyle(this.mainDiv,i),document.body.appendChild(this.mainDiv),this.canRotate=!0}}},{key:"Resize",value:function(){document.body.removeChild(this.mainDiv),this.mainDiv=null,this.Init(),this.SetTouchable(!1),null!=this.mainDiv&&(APP.IsRotate()?(this.mainDiv.style.transform="translate(-50%, -50%) rotate(-90deg)",this.mainDiv.style.msTransform="translate(-50%, -50%) rotate(-90deg)",this.mainDiv.style.WebkitTransform="translate(-50%, -50%) rotate(-90deg)"):(this.mainDiv.style.transform="translate(-50%, -50%) rotate(0deg)",this.mainDiv.style.msTransform="translate(-50%, -50%) rotate(0deg)",this.mainDiv.style.WebkitTransform="translate(-50%, -50%) rotate(0deg)"))}},{key:"Show",value:function(){this.mainDiv.style.display="initial"}},{key:"Hide",value:function(){this.mainDiv.style.display="none"}},{key:"SetTouchable",value:function(t){null!=this.mainDiv&&(this.mainDiv.style["pointer-events"]=t?"auto":"none")}},{key:"SetStyle",value:function(t,e){var i=APP.IsRotate()?window.innerHeight:window.innerWidth;for(var r in e){var n=""+e[r];if(n.endsWith("px")){var o=i/APP.GetWidth(),a=n.substr(0,n.length-2);t.style[r]=parseInt(a)*o+"px"}else t.style[r]=n}}},{key:"Create",value:function(t,e){var i=document.createElement(t);return this.SetStyle(i,e),i}},{key:"AddChild",value:function(t){this.mainDiv.appendChild(t)}},{key:"RemoveAll",value:function(){for(;this.mainDiv.firstChild;)this.mainDiv.removeChild(this.mainDiv.firstChild)}},{key:"ClearnChildrenData",value:function(){for(var t=this.mainDiv.children,e=0;e<t.length;e++)t[e].value=""}},{key:"Hide",value:function(){for(var t=this.mainDiv.children,e=0;e<t.length;e++)t[e].style.display="none";this.Blur()}},{key:"Show",value:function(){for(var t=this.mainDiv.children,e=0;e<t.length;e++)t[e].style.display="initial"}},{key:"Blur",value:function(t){if(t)t.blur();else for(var e=this.mainDiv.children,i=0;i<e.length;i++)e[i].blur()}}]),t}();t.exports=new a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(22),h=i(9),u=i(187),l=i(177),c=i(189),d=(i(188),i(178)),f=i(17),p=i(176),m=i(69),g=i(183),v=i(179),y=i(184),_={LENGTH:{NONE:0,SHORT:25,MEDIUM:50,LONG:100},HILL:{NONE:0,LOW:20,MEDIUM:40,HIGH:60},CURVE:{NONE:0,EASY:2,MEDIUM:4,HARD:6}},T={LIGHT:{grass:1092112,rumble:9321508,lane:13421772},DARK:{grass:39424,rumble:9935749}},b=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.tweenMgr=new p,t.background=new PIXI.Container,t.sky=null,t.bg_middle=null,t.bg_bottom=null,t.roadSegment=new PIXI.Container,t.items=new PIXI.Container,t.boost=new PIXI.Container,t.finishLine=new PIXI.Container,t.objects=new PIXI.Container,t.player=null,t.speed2x=null,t.state=GameDefine.MAP_STATE_NORMAL,t.segments=[],t.segmentLength=200*GameConfig.scale,t.fieldOfView=100,t.cameraHeight=600*GameConfig.scale,t.cameraDepth=null,t.cameraZ=0,t.viewWidth=0,t.viewHeight=0,t.roadWidth=2e3*GameConfig.scale,t.rumbleLength=3,t.trackLength=null,t.drawDistance=100,t.lanes=3,t.fogDensity=2,t.speed=0,t.speedMax=0,t.timerBoostSpeed=new Timer,t.skyline=0,t.LensflareMgr=null,t.roadDrawDistance=t.drawDistance,t.myParticles=[],t.mIsFirstInitMap=!0,t}return o(e,t),a(e,[{key:"ProfileSetup",value:function(){}},{key:"Init",value:function(t){if(this.mIsFirstInitMap){this.ProfileSetup(),GameConfig.isOptmVersion&&(this.roadDrawDistance=this.drawDistance=50),this.player=t,this.speed2x=GuiManager.GetGui(GameDefine.GetGUIVer()).GetObject(4);for(var e=0;e<this.drawDistance;e++){var i=new c("2",6);this.roadSegment.addChild(i)}if(this.background.addChild(new d("1",33)),this.background.addChild(new d("4",9)),this.background.addChild(new d("5",9)),this.background.children[0].speed=.0012,this.background.children[1].speed=1e-4,this.background.children[2].speed=1e-4,this.background.children[2].visible=!1,this.sky=new PIXI.Sprite(GameDefine.bgjpg),this.addChild(this.sky),this.addChild(this.background),!GameConfig.isOptmVersion)for(var r=0;r<6;r++){var n=new y({size:50,speed:2,texture:GameDefine.particle_texture});this.addChild(n),this.myParticles.push(n)}this.LensflareMgr=new g,this.addChild(this.LensflareMgr),this.addChild(v),this.addChild(this.objects),this.addChild(this.roadSegment),this.addChild(this.items),this.addChild(this.player),GameConfig.isOptmVersion||(this.bg_middle=new h("1"),this.bg_middle.SetFrame(34),this.bg_middle.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.addChild(this.bg_middle),this.bg_bottom=new h("1"),this.bg_bottom.SetFrame(35),this.bg_bottom.position.set(APP.GetWidth()/2,APP.GetHeight()),this.addChild(this.bg_bottom))}this.LensflareMgr.Init(),v.Init(),this.mIsFirstInitMap=!1}},{key:"Load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.segments=[],this.objects.removeChildren(0,this.objects.children.length),this.items.removeChildren(0,this.items.children.length),this.viewWidth=APP.GetWidth(),this.viewHeight=APP.GetHeight(),this.cameraZ=0,this.speed=GameDefine.GAME_SPEED_NORMAL,this.speedMax=this.segmentLength;var i=0,r=s.ReadUShort(t,i);i+=2;for(var n=0;n<r;n++){var o=s.ReadUByte(t,i);i++;var a=s.ReadUByte(t,i);i++;var h=s.ReadUByte(t,i);i++;var u=s.ReadByte(t,i);i++;var l=s.ReadUByte(t,i);i++;var c=s.ReadByte(t,i);switch(i++,o){case 0:this.AddStraight(a);break;case 1:this.AddCurve(a,h*u,l*c)}}for(var d=0;d<e;d++)i+=this.segments.length/3*GameDefine.ROAD_LANE_MAX;for(var f=0;f<this.segments.length/GameDefine.GAME_OBJECTS_SEGMENT_SCALE;f++)for(var p=0;p<GameDefine.ROAD_LANE_MAX;p++){var m=s.ReadUByte(t,i);i++;var g=f*GameDefine.GAME_OBJECTS_SEGMENT_SCALE,v=0;switch(m){case GameDefine.ROAD_DECORATION_TREE:v=Utils.RandInt(6,20),this.AddObject(this.segments[g].objects,m,p,v);break;case GameDefine.ROAD_DECORATION_TREE_MIX:v=Utils.RandInt(11,15),this.AddObject(this.segments[g].objects,m,p,v);break;case GameDefine.ROAD_DECORATION_TREE_MIX_BRUSH:v=Utils.RandInt(16,20),this.AddObject(this.segments[g].objects,m,p,v);break;case GameDefine.ROAD_DECORATION_CLOUND:GameConfig.isOptmVersion||(v=Utils.RandInt(29,34),this.AddObject(this.segments[g].objects,m,p,v));break;case GameDefine.ROAD_DECORATION_FLOOR:break;case GameDefine.ROAD_DECORATION_FLAG:v=Utils.RandInt(21,22),this.AddObject(this.segments[g].objects,m,p,v);break;case GameDefine.ROAD_DECORATION_HOUSE_LEFT1:case GameDefine.ROAD_DECORATION_HOUSE_LEFT2:case GameDefine.ROAD_DECORATION_HOUSE_LEFT3:case GameDefine.ROAD_DECORATION_HOUSE_LEFT4:v=m-GameDefine.ROAD_DECORATION_HOUSE_LEFT1+1,this.AddObject(this.segments[g].objects,m,p,v);break;case GameDefine.ROAD_DECORATION_HOUSE_RIGHT1:case GameDefine.ROAD_DECORATION_HOUSE_RIGHT2:case GameDefine.ROAD_DECORATION_HOUSE_RIGHT3:case GameDefine.ROAD_DECORATION_HOUSE_RIGHT4:v=m-GameDefine.ROAD_DECORATION_HOUSE_RIGHT1+5,this.AddObject(this.segments[g].objects,m,p,v);break;case GameDefine.ROAD_EVIRONMENT_1:case GameDefine.ROAD_EVIRONMENT_2:v=9,this.AddObject(this.segments[g].objects,m,p,v);break;case GameDefine.ROAD_OBSTACLE_ITEM:v=1,this.AddObject(this.segments[g].objects,m,p,v);break;case GameDefine.ROAD_OBSTACLE_RED_ITEM:v=0,this.AddObject(this.segments[g].objects,m,p,v)}}this.trackLength=this.segments.length*this.segmentLength,this.cameraDepth=1/Math.tan(this.fieldOfView/2*Math.PI/180),this.resolution=this.viewHeight/480,this.timerBoostSpeed.SetDuration(0),this.timerBoostSpeed.JustFinished(),this.player.StopBoost(),this.speed2x.SetAnim(8);var y=!0,_=!1,T=void 0;try{for(var b,E=this.objects.children[Symbol.iterator]();!(y=(b=E.next()).done);y=!0){b.value.visible=!1}}catch(t){_=!0,T=t}finally{try{!y&&E.return&&E.return()}finally{if(_)throw T}}var w=!0,x=!1,S=void 0;try{for(var A,I=this.items.children[Symbol.iterator]();!(w=(A=I.next()).done);w=!0){A.value.visible=!1}}catch(t){x=!0,S=t}finally{try{!w&&I.return&&I.return()}finally{if(x)throw S}}var O=!0,R=!1,C=void 0;try{for(var P,M=this.boost.children[Symbol.iterator]();!(O=(P=M.next()).done);O=!0){P.value.visible=!1}}catch(t){R=!0,C=t}finally{try{!O&&M.return&&M.return()}finally{if(R)throw C}}var D=!0,k=!1,N=void 0;try{for(var G,L=this.finishLine.children[Symbol.iterator]();!(D=(G=L.next()).done);D=!0){G.value.visible=!0}}catch(t){k=!0,N=t}finally{try{!D&&L.return&&L.return()}finally{if(k)throw N}}this.player.Init(this.cameraHeight*this.cameraDepth+GameDefine.PLAYER_OFFSET_Z)}},{key:"AddSegment",value:function(t,e){var i=this.segments.length,r={world:{y:this.LastY(),z:i*this.segmentLength},camera:{},screen:{},ground:{}},n={world:{y:e,z:(i+1)*this.segmentLength},camera:{},screen:{},ground:{}},o=Math.floor(i/this.rumbleLength)%2?T.DARK:T.LIGHT;this.segments.push({index:i,p1:r,p2:n,curve:t,objects:[],color:o})}},{key:"AddObject",value:function(t,e,i,r){t.push({type:e,lane:i,animId:r})}},{key:"AddRoad",value:function(t,e,i,r,n){for(var o=this.LastY(),a=o+f.ToInt(n,0)*this.segmentLength,s=t+e+i,h=0;h<t;h++)this.AddSegment(f.EaseIn(0,r,h/t),f.EaseInOut(o,a,h/s));for(var u=0;u<e;u++)this.AddSegment(r,f.EaseInOut(o,a,(t+u)/s));for(var l=0;l<i;l++)this.AddSegment(f.EaseInOut(r,0,l/i),f.EaseInOut(o,a,(t+e+l)/s))}},{key:"AddStraight",value:function(t){t=t||_.LENGTH.MEDIUM,this.AddRoad(t,t,t,0,0)}},{key:"AddCurve",value:function(t,e,i){t=t||_.LENGTH.MEDIUM,e=e||_.CURVE.MEDIUM,i=i||_.HILL.NONE,this.AddRoad(t,t,t,e,i)}},{key:"AddFinishLine",value:function(){var t=this.FindSegment(this.cameraZ),e=this.segments[(t.index+49)%this.segments.length],i=this.segments[(t.index+50)%this.segments.length];this.AddObject(e.objects,GameDefine.ROAD_OBSTACLE_FINISH_LINE,GameDefine.ROAD_LANE_MIDDLE,12),this.AddObject(i.objects,GameDefine.ROAD_OBSTACLE_FINISH_LINE,GameDefine.ROAD_LANE_MIDDLE,12)}},{key:"FindSegment",value:function(t){return this.segments[Math.floor(t/this.segmentLength)%this.segments.length]}},{key:"LastY",value:function(){return 0==this.segments.length?0:this.segments[this.segments.length-1].p2.world.y}},{key:"UpdateSpeed",value:function(t){this.timerBoostSpeed.Update(t),this.timerBoostSpeed.JustFinished()&&(this.player.StopBoost(),this.speed2x.SetAnim(5,!1)),this.timerBoostSpeed.IsDone()?this.speed>GameDefine.GAME_SPEED_NORMAL&&(this.speed-=GameDefine.GAME_SPEED_BOOST*GameDefine.GAME_SPEED_BASE*t,this.speed<=GameDefine.GAME_SPEED_NORMAL&&(this.speed=GameDefine.GAME_SPEED_NORMAL)):this.speed=GameDefine.GAME_SPEED_FAST}},{key:"TransformFrenzyRoad",value:function(t){var e=this,i=!0,r=!1,n=void 0;try{for(var o,a=this.roadSegment.children[Symbol.iterator]();!(i=(o=a.next()).done);i=!0)!function(){var i=o.value;e.tweenMgr.Create(i,m.LINEAR_EASE,{x:i.x,y:i.y,alpha:1,scale:1},{x:i.x,y:i.y,alpha:0,scale:1},.5,0),e.tweenMgr.SetCallback(i,function(){i.TransformRoad(t),this.callback=null}),e.tweenMgr.Create(i,m.LINEAR_EASE,{x:i.x,y:i.y,alpha:0,scale:1},{x:i.x,y:i.y,alpha:1,scale:1},.5,0)}()}catch(t){r=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(r)throw n}}t==GameDefine.MAP_STATE_FRENZY&&this.TriggerFirework()}},{key:"TriggerFirework",value:function(){GameConfig.isOptmVersion||this.myParticles.forEach(function(t,e){setTimeout(function(){t.position.set(Utils.RandInt(200,APP.GetWidth()-200),Utils.RandInt(100,300)),t.Start(),t.scale.set(.5+.5*Math.random())},500*e+1e3*Math.random())})}},{key:"Update",value:function(t){var e=this.cameraZ,i=1;this.state===GameDefine.MAP_STATE_FRENZY&&(i=2),this.cameraZ=f.Increase(this.cameraZ,this.speed*GameDefine.GAME_SPEED_BASE*t*i,this.trackLength);var r=this.FindSegment(this.cameraZ),n=f.PercentRemaining(this.cameraZ,this.segmentLength),o=this.FindSegment(this.cameraZ+this.player.position3dZ),a=f.PercentRemaining(this.cameraZ+this.player.position3dZ,this.segmentLength),s=f.Interpolate(o.p1.world.y,o.p2.world.y,a),h=5*this.viewHeight/6,c=0,d=-r.curve*n,p=o.p2.world.y-o.p1.world.y,m=!0,g=!1,y=void 0;try{for(var _,T=this.background.children[Symbol.iterator]();!(m=(_=T.next()).done);m=!0){_.value.Update(o.curve*(this.cameraZ-e)/this.segmentLength,this.skyline,p)}}catch(t){g=!0,y=t}finally{try{!m&&T.return&&T.return()}finally{if(g)throw y}}this.player.Update(t,this.timerBoostSpeed.GetTimePercent()),this.LensflareMgr.Update(t,o.curve,p),v.Update(t,o.curve,p,this.player.isFrenzy);for(var b=0;b<this.drawDistance;b++){var E=this.segments[(r.index+b)%this.segments.length];E.looped=E.index<r.index,E.fog=f.ExponentialFog(b/this.drawDistance,this.fogDensity),E.clip=h,f.Project(E.p1,this.player.position3dX*this.roadWidth-c,s+this.cameraHeight,this.cameraZ-(E.looped?this.trackLength:0),this.cameraDepth,this.viewWidth,this.viewHeight,this.roadWidth,this.resolution*s,p),f.Project(E.p2,this.player.position3dX*this.roadWidth-c-d,s+this.cameraHeight,this.cameraZ-(E.looped?this.trackLength:0),this.cameraDepth,this.viewWidth,this.viewHeight,this.roadWidth,this.resolution*s,p),c+=d,d+=E.curve,E.p1.camera.z<=this.cameraDepth||E.p2.screen.y>=E.p1.screen.y||E.p2.screen.y>=h?this.roadSegment.children[b].visible=!1:(p<0&&(this.roadDrawDistance=10),this.roadDrawDistance+=t,this.roadDrawDistance=Math.min(this.drawDistance,this.roadDrawDistance),this.roadSegment.children[b].visible=b<this.roadDrawDistance,this.roadSegment.children[b].Update(this.viewWidth,3,E),h=E.p2.screen.y)}for(var w=0,x=0,S=this.drawDistance-1;S>0;S--){var A=this.segments[(r.index+S)%this.segments.length];S==this.drawDistance-1&&(this.skyline=A.p1.ground.y);for(var I=0;I<A.objects.length;I++){var O=A.objects[I];switch(O.type){case GameDefine.ROAD_DECORATION_TREE:case GameDefine.ROAD_DECORATION_TREE_MIX:case GameDefine.ROAD_DECORATION_TREE_MIX_BRUSH:case GameDefine.ROAD_DECORATION_HOUSE:case GameDefine.ROAD_DECORATION_HOUSE_LEFT1:case GameDefine.ROAD_DECORATION_HOUSE_LEFT2:case GameDefine.ROAD_DECORATION_HOUSE_LEFT3:case GameDefine.ROAD_DECORATION_HOUSE_LEFT4:case GameDefine.ROAD_DECORATION_HOUSE_RIGHT1:case GameDefine.ROAD_DECORATION_HOUSE_RIGHT2:case GameDefine.ROAD_DECORATION_HOUSE_RIGHT3:case GameDefine.ROAD_DECORATION_HOUSE_RIGHT4:case GameDefine.ROAD_DECORATION_FLOOR:case GameDefine.ROAD_DECORATION_FLAG:w>=this.objects.children.length&&this.objects.addChild(new l),this.objects.children[w].visible=!0,this.objects.children[w].UpdateInfo(t,A,O,this.viewWidth,this.roadWidth,A.fog,p),w++;break;case GameDefine.ROAD_OBSTACLE_ITEM:case GameDefine.ROAD_OBSTACLE_RED_ITEM:case GameDefine.ROAD_DECORATION_CLOUND:x>=this.items.children.length&&this.items.addChild(new u("2")),this.items.children[x].visible=!0,this.items.children[x].UpdateInfo(t,A,O,this.viewWidth,this.roadWidth,A.fog,p),x++;break;case GameDefine.ROAD_EVIRONMENT_1:case GameDefine.ROAD_EVIRONMENT_2:x>=this.items.children.length&&this.items.addChild(new u("2")),this.items.children[x].visible=!0,this.items.children[x].UpdateInfo(t,A,O,this.viewWidth,this.roadWidth,A.fog,p),x++}if(Math.abs(A.index-o.index)<=2*GameDefine.GAME_OBJECTS_SEGMENT_SCALE){var R=O.type,C=O.animId;O.lane;switch(R){case GameDefine.ROAD_EVIRONMENT_1:if(8!=C){var P=this.items.children[x-1];this.player.IsCollisionWithObject(P)&&8!=C&&(P.Hit(O),this.SwitchMap(1))}break;case GameDefine.ROAD_EVIRONMENT_2:if(8!=C){var M=this.items.children[x-1];this.player.IsCollisionWithObject(M)&&8!=C&&(M.Hit(O),this.SwitchMap(2))}break;case GameDefine.ROAD_OBSTACLE_ITEM:if(8!=C){var D=this.items.children[x-1];if(this.player.IsCollisionWithObject(D)&&8!=C){D.Hit(O),StateIngame.AddScore(GameDefine.SCORE_OBSTACLE_COIN,D.position);for(var k=3+2*Math.random(),N=0;N<k;N++)ParticleMgr.MakeItemParticle(D.position.x,D.position.y,0)}}break;case GameDefine.ROAD_OBSTACLE_RED_ITEM:if(8!=C){var G=this.items.children[x-1];if(this.player.IsCollisionWithObject(G)&&8!=C){G.Hit(O),StateIngame.AddScore(GameDefine.SCORE_OBSTACLE_SPECIAL_COIN,G.position);for(var L=6+2*Math.random(),F=0;F<L;F++)ParticleMgr.MakeItemParticle(G.position.x,G.position.y,0);this.player.ActiveExcitited()}}}}}if(A==o){var U=this.cameraDepth/this.player.position3dZ,B=this.speed/this.speedMax,j=2*Math.random()*B*this.resolution*f.RandomChoice([-1,1]),X=this.viewWidth/2,W=this.viewHeight/2-U*f.Interpolate(o.p1.camera.y,o.p2.camera.y,a)*this.viewHeight/2;o.p2.screen.x,o.p1.screen.x;this.player.UpdateInfo(X,W,U*this.viewWidth,j,p,A.curve),0!=p&&(this.speed=GameDefine.GAME_SPEED_NORMAL-.3*p)}}for(var H=w;H<this.objects.children.length;H++)this.objects.children[H]&&(this.objects.children[H].visible=!1);for(var V=x;V<this.items.children.length;V++)this.items.children[V].visible=!1;for(var Y=0;Y<this.boost.children.length;Y++)this.boost.children[Y].visible=!1;for(var z=0;z<this.finishLine.children.length;z++)this.finishLine.children[z].visible=!1;return this.tweenMgr.Update(t),this.UpdateSpeed(t),GameConfig.isOptmVersion||this.myParticles.forEach(function(e){e.Update(t)}),r.index}},{key:"SwitchMap",value:function(t){for(var e=0;e<this.objects.children.length;e++)this.objects.children[e]&&this.objects.children[e].SwitchMap(t);this.background.children[1].visible=!1,this.background.children[2].visible=!1,this.background.children[t].visible=!0}}]),e}(PIXI.Container);t.exports=b},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(7),h=function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.train_head=new s(t),i.train_body=new s(t),i.train_main=new PIXI.Container,i.train_seat1=new s(t),i.train_seat2=new s(t),i.train_player=new s(t),i.spine_player1=new PIXI.spine.Spine(GameDefine.spinePlayer),i.spine_player1.skeleton.setSkinByName("boy2"),i.spine_player1.position.set(-110,300),i.spine_player2=new PIXI.spine.Spine(GameDefine.spinePlayer),i.spine_player2.skeleton.setSkinByName("girl2"),i.spine_player2.position.set(110,300),i.spine_player1.state.addListener({end:function(){null!=i.playerAnimCallback&&i.playerAnimCallback()}.bind(i)}),i.SetPlayerAnim("idle",!0),i.boost=new s(t),i.state=0,i.playerState="idle",i.lane=0,i.speed=0,i.position3dX=0,i.position3dZ=0,i.positionTarget=0,i.start3dZ=0,i.soundMoveLeft=0,i.soundMoveRight=0,i.isBoost=!1,i.timerBlink=new Timer,i.playerRotation=0,i.playerRotationTarget=0,i.prevUpDown=0,i.isFrenzy=!1,i.playerAnimCallback=null,i.lastPlayMoveSound=0,i.addChild(i.train_head),i.addChild(i.train_body),i.addChild(i.train_player),i.addChild(i.train_main),i.addChild(i.train_seat1),i.addChild(i.train_seat2),i.train_main.addChild(i.spine_player1),i.train_main.addChild(i.spine_player2),i.addChild(i.boost),i}return o(e,t),a(e,[{key:"Init",value:function(t){this.state=GameDefine.PLAYER_STATE_NONE,this.lane=GameDefine.ROAD_LANE_MIDDLE,this.speed=GameDefine.PLAYER_MOVE_SPEED,this.position3dX=0,this.position3dZ=t,this.positionTarget=0,this.start3dZ=t,this.soundMoveLeft=0,this.soundMoveRight=0,this.playerRotation=0,this.playerRotationTarget=0,this.isFrenzy=!1,this.lastPlayMoveSound=GameDefine.GAME_TIMEOUT,this.train_head.SetAnim(0),this.train_body.SetAnim(1),this.train_player.SetAnim(5),this.train_seat1.SetAnim(2),this.train_seat2.SetAnim(3),this.timerBlink.SetDuration(0)}},{key:"Update",value:function(t,e){switch(this.state){case GameDefine.PLAYER_STATE_NONE:if(0!=this.playerRotation){var i=this.playerRotation>0,r=this.speed*GameDefine.GAME_SPEED_BASE*t;this.playerRotation+=i?-r:r,Math.abs(this.playerRotation)<.02&&(this.playerRotation=0)}break;case GameDefine.PLAYER_STATE_MOVE_LEFT:this.playerRotation!=this.playerRotationTarget&&(this.playerRotation<=this.playerRotationTarget?(this.lane=GameDefine.ROAD_LANE_MIDDLE_LEFT,this.playerRotation=this.playerRotationTarget):this.playerRotation-=this.speed*GameDefine.GAME_SPEED_BASE*t);break;case GameDefine.PLAYER_STATE_MOVE_RIGHT:this.playerRotation!=this.playerRotationTarget&&(this.playerRotation>=this.playerRotationTarget?(this.lane=GameDefine.ROAD_LANE_MIDDLE_RIGHT,this.playerRotation=this.playerRotationTarget):this.playerRotation+=this.speed*GameDefine.GAME_SPEED_BASE*t)}this.train_head.Update(t),this.train_body.Update(t),this.train_player.Update(t),this.train_seat1.Update(t),this.train_seat2.Update(t),this.boost.Update(t)}},{key:"Pause",value:function(){this.spine_player1.autoUpdate=!1,this.spine_player2.autoUpdate=!1}},{key:"Resume",value:function(){this.spine_player1.autoUpdate=!0,this.spine_player2.autoUpdate=!0}},{key:"Blink",value:function(){}},{key:"IsBlink",value:function(){return!this.timerBlink.IsDone()}},{key:"StartBoost",value:function(){this.isBoost=!0,this.boost.Set,Anim(SPRITE_BG_ANIM_BOOST_START,!1)}},{key:"StopBoost",value:function(){this.isBoost=!1}},{key:"MoveLeft",value:function(){this.isBoost||this.state==GameDefine.PLAYER_STATE_MOVE_LEFT||(this.state=GameDefine.PLAYER_STATE_MOVE_LEFT,this.playerRotationTarget=GameDefine.PLAYER_ROTATE_LEFT,this.PlayMoveSound())}},{key:"MoveRight",value:function(){this.isBoost||this.state==GameDefine.PLAYER_STATE_MOVE_RIGHT||(this.state=GameDefine.PLAYER_STATE_MOVE_RIGHT,this.playerRotationTarget=GameDefine.PLAYER_ROTATE_RIGHT,this.PlayMoveSound())}},{key:"PlayMoveSound",value:function(){"excitited"==this.playerState&&"wow"!=this.playerState&&"scare"!=this.playerState&&"scare2"!=this.playerState&&Math.max(StateIngame.timerMain.GetTime()-2,0)<this.lastPlayMoveSound-2&&(AudioManager.Play(Utils.RandInt(16,19),!1),this.lastPlayMoveSound=Math.max(StateIngame.timerMain.GetTime()-2,0))}},{key:"Release",value:function(){this.lane=GameDefine.ROAD_LANE_MIDDLE,this.state=GameDefine.PLAYER_STATE_NONE,this.playerRotationTarget=0}},{key:"Reset",value:function(){this.Release(),this.SetPlayerAnim("idle",!0)}},{key:"SetPlayerAnim",value:function(t,e,i){i=i||null,this.spine_player1.state.clearTrack(0),this.spine_player2.state.clearTrack(0),this.spine_player1.state.setAnimation(0,t,e>0),this.spine_player2.state.setAnimation(0,t,e>0),e>0?setTimeout(function(){null!=i&&i()},e):this.playerAnimCallback=i,this.playerState=t}},{key:"ActiveFrenzy",value:function(){this.isFrenzy=!0,this.SetPlayerAnim("wow",!0),setTimeout(function(){StateIngame.IsGamePlaying()&&AudioManager.Play(21,!1)},500),AudioManager.Play(15,!1)}},{key:"EndFrenzy",value:function(){this.isFrenzy=!1,this.SetPlayerAnim("idle",!0)}},{key:"ActiveExcitited",value:function(){var t=this;this.isFrenzy||this.SetPlayerAnim("excitited",GameDefine.GAME_PLAYER_EXCITITED_TIME,function(){t.isFrenzy||t.SetPlayerAnim("idle",!0)})}},{key:"UpdateInfo",value:function(t,e,i,r,n,o){var a=this,s=1*o*Math.PI/180,h=1*o;this.train_head.position.set(t+1*h,e+r-.7*n),this.train_body.position.set(t+.5*h,e+r-.5*n),this.train_player.position.set(t,e+r+.1*n),this.train_main.position.set(t,e+r+.1*n),this.train_seat1.position.set(t,e+r+.1*n),this.train_seat2.position.set(t,e+r+.5*n),this.train_head.scale.set(i,i),this.train_body.scale.set(i,i),this.train_player.scale.set(i,i),this.train_main.scale.set(i,i),this.train_seat1.scale.set(i,i),this.train_seat2.scale.set(i,i),this.train_head.rotation=1.4*s,this.train_body.rotation=1.2*s,this.train_player.rotation=1*s+this.playerRotation,this.spine_player1.rotation=1*s+this.playerRotation,this.spine_player2.rotation=1*s+this.playerRotation,this.train_seat1.rotation=1*s,this.train_seat2.rotation=1.2*s,this.boost.position.set(t,e+r),this.boost.scale.set(i,i),this.isFrenzy||(0!=n&&0==this.prevUpDown?n>0||(AudioManager.Play(20,!1),this.SetPlayerAnim("scared",!0,function(){a.isFrenzy||a.SetPlayerAnim("scared2",GameDefine.GAME_PLAYER_SCARE_TIME,function(){a.isFrenzy||a.SetPlayerAnim("idle",!0)})})):0!=this.prevUpDown&&0==n&&this.SetPlayerAnim("idle",!0)),this.prevUpDown=n}},{key:"IsCollisionWithObject",value:function(t){var e=void 0;e=this.state==GameDefine.PLAYER_STATE_MOVE_LEFT?this.train_player.GetTransformRect(1):this.state==GameDefine.PLAYER_STATE_MOVE_RIGHT?this.train_player.GetTransformRect(2):this.train_player.GetTransformRect(0);var i=t.GetTransformRect();return!!Utils.Collision2Rect(e,i)}},{key:"IsCollisionWithPlane",value:function(t){var e=this.train_player.GetTransformRect(),i=t.rect;return!!Utils.Collision2Rect(e,i)}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=(i(9),function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.mCountTimeCombo=0,t}return o(e,t),a(e,[{key:"Add",value:function(t,e,i,r){var n=r===GameDefine.MAP_STATE_FRENZY?1:0,o={x:e,y:i};switch(t){case GameDefine.SCORE_OBSTACLE_COIN:ParticleMgr.MakeTextScore("AR"===DeviceInfo.GAME_COUNTRY?GameDefine.SCORE_ARR[n].text+"+":"+"+GameDefine.SCORE_ARR[n].text,GameDefine.SCORE_ARR[n].fillColor,GameDefine.SCORE_ARR[n].strokeColor,o);break;case GameDefine.SCORE_OBSTACLE_SPECIAL_COIN:ParticleMgr.MakeTextScore("AR"===DeviceInfo.GAME_COUNTRY?GameDefine.SCORE_ARR[n+1].text+"+":"+"+GameDefine.SCORE_ARR[n+1].text,GameDefine.SCORE_ARR[n+1].fillColor,GameDefine.SCORE_ARR[n+1].strokeColor,o)}}},{key:"Reset",value:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this.children[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){r.value.visible=!1}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}}},{key:"AddCombo",value:function(t){this.mCountTimeCombo=GameDefine.COMBO_COUNT_TIME;var e="";switch(DeviceInfo.GAME_COUNTRY){case"AR":e=GLText.GetText(GameDefine.COMBO_ARR[t].textId)+"\n"+GameDefine.COMBO_ARR[t].addScore+"+";break;default:e=GLText.GetText(GameDefine.COMBO_ARR[t].textId)+"\n+"+GameDefine.COMBO_ARR[t].addScore}ParticleMgr.MakeTextCombo(e,GameDefine.COMBO_ARR[t].fillColor,GameDefine.COMBO_ARR[t].strokeColor)}},{key:"Update",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.children[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value,s=1-(GameDefine.SCORE_FLY_START-a.position.y)/GameDefine.SCORE_FLY_DISTANCE;a.position.y-=GameDefine.SCORE_FLY_SPEED*GameDefine.GAME_SPEED_BASE*t,a.alpha=s,s<=0&&(a.visible=!1)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}]),e}(PIXI.Container));t.exports=new s},function(t,e,i){"use strict";var r,n,o,a,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i){if("object"===s(e)&&void 0!==t)t.exports=i();else{n=[],r=i,void 0!==(o="function"==typeof r?r.apply(e,n):r)&&(t.exports=o)}}(function(){var t;return function t(e,i,r){function n(s,h){if(!i[s]){if(!e[s]){var u="function"==typeof a&&a;if(!h&&u)return a(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return n(i||t)},c,c.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof a&&a,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){e.exports=t("./pixi-multistyle-text").default},{"./pixi-multistyle-text":2}],2:[function(e,i,r){var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();!function(n){if("object"===(void 0===i?"undefined":s(i))&&"object"===s(i.exports)){var o=n(e,r);void 0!==o&&(i.exports=o)}else"function"==typeof t&&t.amd&&t(["require","exports"],n)}(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,i){var r=t.call(this,e)||this;return r.styles=i,r}return n(e,t),Object.defineProperty(e.prototype,"styles",{set:function(t){this.textStyles={},this.textStyles.default=this.assign({},e.DEFAULT_TAG_STYLE);for(var i in t)"default"===i?this.assign(this.textStyles.default,t[i]):this.textStyles[i]=this.assign({},t[i]);this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},enumerable:!0,configurable:!0}),e.prototype.setTagStyle=function(t,e){t in this.textStyles?this.assign(this.textStyles[t],e):this.textStyles[t]=this.assign({},e),this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},e.prototype.deleteTagStyle=function(t){"default"===t?this.textStyles.default=this.assign({},e.DEFAULT_TAG_STYLE):delete this.textStyles[t],this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},e.prototype._getTextDataPerLine=function(t){for(var e=[],i=Object.keys(this.textStyles).join("|"),r=new RegExp("</?("+i+")>","g"),n=[this.assign({},this.textStyles.default)],o=["default"],a=0;a<t.length;a++){for(var s=[],h=[],u=void 0;u=r.exec(t[a]);)h.push(u);if(0===h.length)s.push(this.createTextData(t[a],n[n.length-1],o[o.length-1]));else{for(var l=0,c=0;c<h.length;c++)h[c].index>l&&s.push(this.createTextData(t[a].substring(l,h[c].index),n[n.length-1],o[o.length-1])),"/"===h[c][0][1]?n.length>1&&(n.pop(),o.pop()):(n.push(this.assign({},n[n.length-1],this.textStyles[h[c][1]])),o.push(h[c][1])),l=h[c].index+h[c][0].length;l<t[a].length&&s.push(this.createTextData(t[a].substring(l),n[n.length-1],o[o.length-1]))}e.push(s)}return e},e.prototype.getFontString=function(t){return new PIXI.TextStyle(t).toFontString()},e.prototype.createTextData=function(t,e,i){return{text:t,style:e,width:0,height:0,fontProperties:void 0,tagName:i}},e.prototype.getDropShadowPadding=function(){var t=this,e=0,i=0;return Object.keys(this.textStyles).forEach(function(r){var n=t.textStyles[r],o=n.dropShadowDistance,a=n.dropShadowBlur;e=Math.max(e,o||0),i=Math.max(i,a||0)}),e+i},e.prototype.updateText=function(){var t=this;if(this.dirty){this.texture.baseTexture.resolution=this.resolution;var i=this.textStyles,r=this.text;this._style.wordWrap&&(r=this.wordWrap(this.text));var n=r.split(/(?:\r\n|\r|\n)/),o=this._getTextDataPerLine(n);if(window.isAR)for(var a=0;a<o.length;a++)o[a].reverse();for(var s=[],h=[],u=[],l=0,a=0;a<n.length;a++){for(var c=0,d=0,f=0,p=0;p<o[a].length;p++){var m=o[a][p].style;this.context.font=this.getFontString(m),o[a][p].width=this.context.measureText(o[a][p].text).width,0===o[a][p].text.length&&(o[a][p].width+=(o[a][p].text.length-1)*m.letterSpacing,p>0&&(c+=m.letterSpacing/2),p<o[a].length-1&&(c+=m.letterSpacing/2)),c+=o[a][p].width,o[a][p].fontProperties=PIXI.TextMetrics.measureFont(this.context.font),o[a][p].height=o[a][p].fontProperties.fontSize+o[a][p].style.strokeThickness,"number"==typeof m.valign?(d=Math.min(d,m.valign-o[a][p].fontProperties.descent),f=Math.max(f,m.valign+o[a][p].fontProperties.ascent)):(d=Math.min(d,-o[a][p].fontProperties.descent),f=Math.max(f,o[a][p].fontProperties.ascent))}s[a]=c,h[a]=d,u[a]=f,l=Math.max(l,c)}var g=Object.keys(i).map(function(t){return i[t]}),v=g.reduce(function(t,e){return Math.max(t,e.strokeThickness||0)},0),y=this.getDropShadowPadding(),_=u.reduce(function(t,e){return t+e},0)-h.reduce(function(t,e){return t+e},0),T=l+v+2*y,b=_+2*y;this.canvas.width=(T+this.context.lineWidth)*this.resolution,this.canvas.height=b*this.resolution,this.context.scale(this.resolution,this.resolution),this.context.textBaseline="alphabetic",this.context.lineJoin="round";for(var E=y,w=[],a=0;a<o.length;a++){var x=o[a],S=void 0;switch(this._style.align){case"left":S=y;break;case"center":S=y+(l-s[a])/2;break;case"right":S=y+l-s[a]}for(var p=0;p<x.length;p++){var A=x[p],I=A.style,O=A.text,R=A.fontProperties,C=A.width,P=(A.height,A.tagName);S+=v/2;var M=v/2+E+R.ascent;switch(I.valign){case"top":break;case"baseline":M+=u[a]-R.ascent;break;case"middle":M+=(u[a]-h[a]-R.ascent-R.descent)/2;break;case"bottom":M+=u[a]-h[a]-R.ascent-R.descent;break;default:M+=u[a]-R.ascent-I.valign}if(0===I.letterSpacing)w.push({text:O,style:I,x:S,y:M,width:C,ascent:R.ascent,descent:R.descent,tagName:P}),S+=x[p].width;else{this.context.font=this.getFontString(x[p].style);for(var D=0;D<O.length;D++)(D>0||p>0)&&(S+=I.letterSpacing/2),w.push({text:O.charAt(D),style:I,x:S,y:M,width:C,ascent:R.ascent,descent:R.descent,tagName:P}),S+=this.context.measureText(O.charAt(D)).width,(D<O.length-1||p<x.length-1)&&(S+=I.letterSpacing/2)}S-=v/2}E+=u[a]-h[a]}this.context.save(),w.forEach(function(e){var i=e.style,r=e.text,n=e.x,o=e.y;if(i.dropShadow){t.context.font=t.getFontString(i);var a=i.dropShadowColor;"number"==typeof a&&(a=PIXI.utils.hex2string(a)),t.context.shadowColor=a,t.context.shadowBlur=i.dropShadowBlur,t.context.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance*t.resolution,t.context.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance*t.resolution,t.context.fillText(r,n,o)}}),this.context.restore(),w.forEach(function(i){var r=i.style,n=i.text,o=i.x,a=i.y,s=i.width,h=i.ascent,u=i.descent,l=i.tagName;t.context.font=t.getFontString(r);var c=r.stroke;"number"==typeof c&&(c=PIXI.utils.hex2string(c)),t.context.strokeStyle=c,t.context.lineWidth=r.strokeThickness;var d=r.fill;if("number"==typeof d)d=PIXI.utils.hex2string(d);else if(Array.isArray(d))for(var f=0;f<d.length;f++){var p=d[f];"number"==typeof p&&(d[f]=PIXI.utils.hex2string(p))}t.context.fillStyle=t._generateFillStyle(new PIXI.TextStyle(r),[n]),r.stroke&&r.strokeThickness&&t.context.strokeText(n,o,a),r.fill&&t.context.fillText(n,o,a),(void 0===r.debug?e.debugOptions.spans.enabled:r.debug)&&(t.context.lineWidth=1,e.debugOptions.spans.bounding&&(t.context.fillStyle=e.debugOptions.spans.bounding,t.context.strokeStyle=e.debugOptions.spans.bounding,t.context.beginPath(),t.context.rect(o,a-h,s,h+u),t.context.fill(),t.context.stroke(),t.context.stroke()),e.debugOptions.spans.baseline&&(t.context.strokeStyle=e.debugOptions.spans.baseline,t.context.beginPath(),t.context.moveTo(o,a),t.context.lineTo(o+s,a),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.top&&(t.context.strokeStyle=e.debugOptions.spans.top,t.context.beginPath(),t.context.moveTo(o,a-h),t.context.lineTo(o+s,a-h),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.bottom&&(t.context.strokeStyle=e.debugOptions.spans.bottom,t.context.beginPath(),t.context.moveTo(o,a+u),t.context.lineTo(o+s,a+u),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.text&&(t.context.fillStyle="#ffffff",t.context.strokeStyle="#000000",t.context.lineWidth=2,t.context.font="8px monospace",t.context.strokeText(l,o,a-h+8),t.context.fillText(l,o,a-h+8),t.context.strokeText(s.toFixed(2)+"x"+(h+u).toFixed(2),o,a-h+16),t.context.fillText(s.toFixed(2)+"x"+(h+u).toFixed(2),o,a-h+16)))}),e.debugOptions.objects.enabled&&(e.debugOptions.objects.bounding&&(this.context.fillStyle=e.debugOptions.objects.bounding,this.context.beginPath(),this.context.rect(0,0,T,b),this.context.fill()),e.debugOptions.objects.text&&(this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.context.lineWidth=2,this.context.font="8px monospace",this.context.strokeText(T.toFixed(2)+"x"+b.toFixed(2),0,8,T),this.context.fillText(T.toFixed(2)+"x"+b.toFixed(2),0,8,T))),this.updateTexture(),this.outputTextData=o}},e.prototype.wordWrap=function(t){var e="",i=Object.keys(this.textStyles).join("|"),r=new RegExp("(</?("+i+")>)","g"),n=t.split("\n"),o=this._style.wordWrapWidth,a=[this.assign({},this.textStyles.default)];this.context.font=this.getFontString(this.textStyles.default);for(var s=0;s<n.length;s++){for(var h=o,u=n[s].split(" "),l=0;l<u.length;l++)for(var c=u[l].split(r),d=0;d<c.length;d++)if(r.test(c[d]))e+=c[d],"/"===c[d][1]?(d++,a.pop()):(d++,a.push(this.assign({},a[a.length-1],this.textStyles[c[d]]))),this.context.font=this.getFontString(a[a.length-1]);else{var f=this.context.measureText(c[d]).width;if(this._style.breakWords&&f>h){var p=c[d].split("");l>0&&0===d&&(e+=" ",h-=this.context.measureText(" ").width);for(var m=0;m<p.length;m++){var g=this.context.measureText(p[m]).width;g>h?(e+="\n"+p[m],h=o-g):(l>0&&0===d&&0===m&&(e+=" "),e+=p[m],h-=g)}}else if(this._style.breakWords)e+=c[d],h-=f;else{var v=f+(0===d?this.context.measureText(" ").width:0);0===l||v>h?(l>0&&(e+="\n"),e+=c[d],h=o-f):(h-=v,0===d&&(e+=" "),e+=c[d])}}s<n.length-1&&(e+="\n")}return e},e.prototype.updateTexture=function(){var t=this._texture,e=this.getDropShadowPadding();t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.trim.width=t.frame.width=this.canvas.width/this.resolution,t.trim.height=t.frame.height=this.canvas.height/this.resolution,t.trim.x=-this._style.padding-e,t.trim.y=-this._style.padding-e,t.orig.width=t.frame.width-2*(this._style.padding+e),t.orig.height=t.frame.height-2*(this._style.padding+e),this._onTextureUpdate(),t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},e.prototype.assign=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=0,n=e;r<n.length;r++){var o=n[r];for(var a in o)t[a]=o[a]}return t},e}(PIXI.Text);i.DEFAULT_TAG_STYLE={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",valign:"baseline",wordWrap:!1,wordWrapWidth:100},i.debugOptions={spans:{enabled:!1,baseline:"#44BB44",top:"#BB4444",bottom:"#4444BB",bounding:"rgba(255, 255, 255, 0.1)",text:!0},objects:{enabled:!1,bounding:"rgba(255, 255, 255, 0.05)",text:!0}},e.default=i})},{}]},{},[1])(1)})},function(t,e,i){"use strict";"use restrict";function r(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,t>>>=e,i=(t>255)<<3,t>>>=i,e|=i,i=(t>15)<<2,t>>>=i,e|=i,i=(t>3)<<1,t>>>=i,(e|=i)|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,16843009*((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,r=e,n=7;for(i>>>=1;i;i>>>=1)r<<=1,r|=1&i,--n;t[e]=r<<n&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},e.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),(t=65535&(t|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),t|i<<2},e.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),(t=1023&(t|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r=e&&e.length,o=r?e[0]*i:t.length,s=n(t,0,o,i,!0),h=[];if(!s||s.next===s.prev)return h;var u,l,d,f,p,m,g;if(r&&(s=c(t,e,s,i)),t.length>80*i){u=d=t[0],l=f=t[1];for(var v=i;v<o;v+=i)p=t[v],m=t[v+1],p<u&&(u=p),m<l&&(l=m),p>d&&(d=p),m>f&&(f=m);g=Math.max(d-u,f-l),g=0!==g?1/g:0}return a(s,h,i,u,l,g),h}function n(t,e,i,r,n){var o,a;if(n===P(t,e,i,r)>0)for(o=e;o<i;o+=r)a=O(o,t[o],t[o+1],a);else for(o=i-r;o>=e;o-=r)a=O(o,t[o],t[o+1],a);return a&&E(a,a.next)&&(R(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!E(r,r.next)&&0!==b(r.prev,r,r.next))r=r.next;else{if(R(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function a(t,e,i,r,n,c,d){if(t){!d&&c&&m(t,r,n,c);for(var f,p,g=t;t.prev!==t.next;)if(f=t.prev,p=t.next,c?h(t,r,n,c):s(t))e.push(f.i/i),e.push(t.i/i),e.push(p.i/i),R(t),t=p.next,g=p.next;else if((t=p)===g){d?1===d?(t=u(t,e,i),a(t,e,i,r,n,c,2)):2===d&&l(t,e,i,r,n,c):a(o(t),e,i,r,n,c,1);break}}}function s(t){var e=t.prev,i=t,r=t.next;if(b(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(_(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&b(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,i,r){var n=t.prev,o=t,a=t.next;if(b(n,o,a)>=0)return!1;for(var s=n.x<o.x?n.x<a.x?n.x:a.x:o.x<a.x?o.x:a.x,h=n.y<o.y?n.y<a.y?n.y:a.y:o.y<a.y?o.y:a.y,u=n.x>o.x?n.x>a.x?n.x:a.x:o.x>a.x?o.x:a.x,l=n.y>o.y?n.y>a.y?n.y:a.y:o.y>a.y?o.y:a.y,c=v(s,h,e,i,r),d=v(u,l,e,i,r),f=t.prevZ,p=t.nextZ;f&&f.z>=c&&p&&p.z<=d;){if(f!==t.prev&&f!==t.next&&_(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&b(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==t.prev&&p!==t.next&&_(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&_(n.x,n.y,o.x,o.y,a.x,a.y,f.x,f.y)&&b(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&_(n.x,n.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function u(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!E(n,o)&&w(n,r,r.next,o)&&S(n,o)&&S(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),R(r),R(r.next),r=t=o),r=r.next}while(r!==t);return r}function l(t,e,i,r,n,s){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&T(h,u)){var l=I(h,u);return h=o(h,h.next),l=o(l,l.next),a(h,e,i,r,n,s),void a(l,e,i,r,n,s)}u=u.next}h=h.next}while(h!==t)}function c(t,e,i,r){var a,s,h,u,l,c=[];for(a=0,s=e.length;a<s;a++)h=e[a]*r,u=a<s-1?e[a+1]*r:t.length,l=n(t,h,u,r,!1),l===l.next&&(l.steiner=!0),c.push(y(l));for(c.sort(d),a=0;a<c.length;a++)f(c[a],i),i=o(i,i.next);return i}function d(t,e){return t.x-e.x}function f(t,e){if(e=p(t,e)){var i=I(e,t);o(i,i.next)}}function p(t,e){var i,r=e,n=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>a){if(a=s,s===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i.prev;var h,u=i,l=i.x,c=i.y,d=1/0;for(r=i.next;r!==u;)n>=r.x&&r.x>=l&&n!==r.x&&_(o<c?n:a,o,l,c,o<c?a:n,o,r.x,r.y)&&((h=Math.abs(o-r.y)/(n-r.x))<d||h===d&&r.x>i.x)&&S(r,t)&&(i=r,d=h),r=r.next;return i}function m(t,e,i,r){var n=t;do{null===n.z&&(n.z=v(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,g(n)}function g(t){var e,i,r,n,o,a,s,h,u=1;do{for(i=t,t=null,o=null,a=0;i;){for(a++,r=i,s=0,e=0;e<u&&(s++,r=r.nextZ);e++);for(h=u;s>0||h>0&&r;)0!==s&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,u*=2}while(a>1);return t}function v(t,e,i,r,n){return t=32767*(t-i)*n,e=32767*(e-r)*n,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function y(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function _(t,e,i,r,n,o,a,s){return(n-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(i-a)*(e-s)>=0&&(i-a)*(o-s)-(n-a)*(r-s)>=0}function T(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!x(t,e)&&S(t,e)&&S(e,t)&&A(t,e)}function b(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function E(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,i,r){return!!(E(t,e)&&E(i,r)||E(t,r)&&E(i,e))||b(t,e,i)>0!=b(t,e,r)>0&&b(i,r,t)>0!=b(i,r,e)>0}function x(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&w(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function S(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function A(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}function I(t,e){var i=new C(t.i,t.x,t.y),r=new C(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function O(t,e,i,r){var n=new C(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function R(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,i,r){for(var n=0,o=e,a=i-r;o<i;o+=r)n+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return n}t.exports=r,t.exports.default=r,r.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,a=Math.abs(P(t,0,o,i));if(n)for(var s=0,h=e.length;s<h;s++){var u=e[s]*i,l=s<h-1?e[s+1]*i:t.length;a-=Math.abs(P(t,u,l,i))}var c=0;for(s=0;s<r.length;s+=3){var d=r[s]*i,f=r[s+1]*i,p=r[s+2]*i;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var a=0;a<e;a++)i.vertices.push(t[n][o][a]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},function(t,e,i){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var n=i(19),o=i(18);t.exports=r,o(r.prototype),r.prototype.onError=function(t,e){var i=new Error(t);return i.type="TransportError",i.description=e,this.emit("error",i),this},r.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,i){(function(e){var r=i(208);t.exports=function(t){var i=t.xdomain,n=t.xscheme,o=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!i||r))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(t){}if(!i)try{return new(e[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(e,i(3))},function(t,e,i){var r,n,o;/**
 * isMobile.js v0.4.1
 *
 * A simple library to detect Apple phones and tablets,
 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
 * and any kind of seven inch device, via user agent sniffing.
 *
 * @author: Kai Mallea (kmallea@gmail.com)
 *
 * @license: http://creativecommons.org/publicdomain/zero/1.0/
 */
!function(i){var a=/iPhone/i,s=/iPod/i,h=/iPad/i,u=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,l=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,d=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,f=/Windows Phone/i,p=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,g=/BB10/i,v=/Opera Mini/i,y=/(CriOS|Chrome)(?=.*\bMobile\b)/i,_=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,T=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),b=function(t,e){return t.test(e)},E=function(t){var e=t||navigator.userAgent,i=e.split("[FBAN");if(void 0!==i[1]&&(e=i[0]),i=e.split("Twitter"),void 0!==i[1]&&(e=i[0]),this.apple={phone:b(a,e),ipod:b(s,e),tablet:!b(a,e)&&b(h,e),device:b(a,e)||b(s,e)||b(h,e)},this.amazon={phone:b(c,e),tablet:!b(c,e)&&b(d,e),device:b(c,e)||b(d,e)},this.android={phone:b(c,e)||b(u,e),tablet:!b(c,e)&&!b(u,e)&&(b(d,e)||b(l,e)),device:b(c,e)||b(d,e)||b(u,e)||b(l,e)},this.windows={phone:b(f,e),tablet:b(p,e),device:b(f,e)||b(p,e)},this.other={blackberry:b(m,e),blackberry10:b(g,e),opera:b(v,e),firefox:b(_,e),chrome:b(y,e),device:b(m,e)||b(g,e)||b(v,e)||b(_,e)||b(y,e)},this.seven_inch=b(T,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},w=function(){var t=new E;return t.Class=E,t};void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=E:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=w():(n=[],r=i.isMobile=w(),void 0!==(o="function"==typeof r?r.apply(e,n):r)&&(t.exports=o))}(this)},function(t,e){e.encode=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e.length&&(e+="&"),e+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e},e.decode=function(t){for(var e={},i=t.split("&"),r=0,n=i.length;r<n;r++){var o=i[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},function(t,e){var i=function(t,e){if(!r){var i=Object.keys(n);r={};for(var o=0;o<i.length;++o){var a=i[o];r[t[a]]=n[a]}}return r[e]},r=null,n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=i},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(5),o=function(){function t(){r(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:(t=t||new n.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[2],a=t[3],e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[4],a=t[5],e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,o=t[6],a=t[7],e=o<e?o:e,i=a<i?a:i,r=o>r?o:r,n=a>n?a:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){var o=t.worldTransform,a=o.a,s=o.b,h=o.c,u=o.d,l=o.tx,c=o.ty,d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,g=a*e+h*i+l,v=s*e+u*i+c;d=g<d?g:d,f=v<f?v:f,p=g>p?g:p,m=v>m?v:m,g=a*r+h*i+l,v=s*r+u*i+c,d=g<d?g:d,f=v<f?v:f,p=g>p?g:p,m=v>m?v:m,g=a*e+h*n+l,v=s*e+u*n+c,d=g<d?g:d,f=v<f?v:f,p=g>p?g:p,m=v>m?v:m,g=a*r+h*n+l,v=s*r+u*n+c,d=g<d?g:d,f=v<f?v:f,p=g>p?g:p,m=v>m?v:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m},t.prototype.addVertices=function(t,e,i,r){for(var n=t.worldTransform,o=n.a,a=n.b,s=n.c,h=n.d,u=n.tx,l=n.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=i;m<r;m+=2){var g=e[m],v=e[m+1],y=o*g+s*v+u,_=h*v+a*g+l;c=y<c?y:c,d=_<d?_:d,f=y>f?y:f,p=_>p?_:p}this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=o){var a=this.minX,s=this.minY,h=this.maxX,u=this.maxY;this.minX=i<a?i:a,this.minY=r<s?r:s,this.maxX=n>h?n:h,this.maxY=o>u?o:u}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=o){var a=this.minX,s=this.minY,h=this.maxX,u=this.maxY;this.minX=i<a?i:a,this.minY=r<s?r:s,this.maxX=n>h?n:h,this.maxY=o>u?o:u}},t}();e.default=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(5),o=function(){function t(){r(this,t),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,r=this.localTransform;i.a=r.a*e.a+r.b*e.c,i.b=r.a*e.b+r.b*e.d,i.c=r.c*e.a+r.d*e.c,i.d=r.c*e.b+r.d*e.d,i.tx=r.tx*e.a+r.ty*e.c+e.tx,i.ty=r.tx*e.b+r.ty*e.d+e.ty,this._worldID++},t}();e.default=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(54),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=i(0),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r(this,t),this.a=e,this.b=i,this.c=n,this.d=o,this.tx=a,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new a.default;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a.default;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,o,a,s,h){return this.a=Math.cos(a+h)*n,this.b=Math.sin(a+h)*n,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=-Math.atan2(-r,n),a=Math.atan2(i,e),h=Math.abs(o+a);return h<1e-5||Math.abs(s.PI_2-h)<1e-5?(t.rotation=a,e<0&&n>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(0),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=Number(e),this.y=Number(i),this.width=Number(n),this.height=Number(a),this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=r,this.height=n-r},n(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=a},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(5),u=i(2),l=i(0),c=i(12),d=r(c),f=i(24),p=r(f),m=new h.Point,g=function(t){function e(i){n(this,e);var r=o(this,t.call(this));return r._anchor=new h.ObservablePoint(r._onAnchorUpdate,r),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=l.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=i||d.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return a(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,u.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,u.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,a=e.tx,s=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,f=0,p=0,m=0;u?(f=u.x-c._x*l.width,d=f+u.width,m=u.y-c._y*l.height,p=m+u.height):(f=-c._x*l.width,d=f+l.width,m=-c._y*l.height,p=m+l.height),h[0]=i*f+n*m+a,h[1]=o*m+r*f+s,h[2]=i*d+n*m+a,h[3]=o*m+r*d+s,h[4]=i*d+n*p+a,h[5]=o*p+r*d+s,h[6]=i*f+n*p+a,h[7]=o*p+r*f+s}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,s=n.c,h=n.d,u=n.tx,l=n.ty,c=-r._x*i.width,d=c+i.width,f=-r._y*i.height,p=f+i.height;e[0]=o*c+s*f+u,e[1]=h*f+a*c+l,e[2]=o*d+s*f+u,e[3]=h*f+a*d+l,e[4]=o*d+s*p+u,e[5]=h*p+a*d+l,e[6]=o*c+s*p+u,e[7]=h*p+a*c+l},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return m.x>=r&&m.x<r+e&&(n=-i*this.anchor.y,m.y>=n&&m.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(d.default.from(t))},e.fromFrame=function(t){var i=u.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,r){return new e(d.default.fromImage(t,i,r))},s(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,u.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,u.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(p.default);e.default=g},function(t,e,i){"use strict";e.__esModule=!0;var r=i(2),n=i(102),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a={getTintedTexture:function(t,e){var i=t._texture;e=a.roundColor(e);var r="#"+("00000"+(0|e).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var n=i.tintCache[r],o=void 0;if(n){if(n.tintId===i._updateID)return i.tintCache[r];o=i.tintCache[r]}else o=a.canvas||document.createElement("canvas");if(a.tintMethod(i,e,o),o.tintId=i._updateID,a.convertTintToImage){var s=new Image;s.src=o.toDataURL(),i.tintCache[r]=s}else i.tintCache[r]=o,a.canvas=null;return o},tintWithMultiply:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithOverlay:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithPerPixel:function(t,e,i){var n=i.getContext("2d"),o=t._frame.clone(),a=t.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,i.width=Math.ceil(o.width),i.height=Math.ceil(o.height),n.save(),n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),n.restore();for(var s=(0,r.hex2rgb)(e),h=s[0],u=s[1],l=s[2],c=n.getImageData(0,0,o.width,o.height),d=c.data,f=0;f<d.length;f+=4)d[f+0]*=h,d[f+1]*=u,d[f+2]*=l;n.putImageData(c,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,i=(0,r.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,r.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,o.default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,e.default=a},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(108),h=r(s),u=i(12),l=r(u),c=function(t){function e(i,r){n(this,e);var a=null;if(!(i instanceof h.default)){var s=arguments[1],u=arguments[2],l=arguments[3],c=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+u+") instead of the ctor directly."),a=arguments[0],r=null,i=new h.default(s,u,l,c)}var d=o(this,t.call(this,i,r));return d.legacyRenderer=a,d.valid=!0,d._updateUvs(),d}return a(e,t),e.prototype.resize=function(t,e,i){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,r,n){return new e(new h.default(t,i,r,n))},e}(l.default);e.default=c},function(t,e,i){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var r=i(256),n=function(t){return t&&t.__esModule?t:{default:t}}(r),o=new n.default;o.autoStart=!0,o.destroy=function(){},e.shared=o,e.Ticker=n.default},function(t,e,i){"use strict";function r(t){for(var e=6*t,i=new Uint16Array(e),r=0,n=0;r<e;r+=6,n+=4)i[r+0]=n+0,i[r+1]=n+1,i[r+2]=n+2,i[r+3]=n+0,i[r+4]=n+2,i[r+5]=n+3;return i}e.__esModule=!0,e.default=r},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof d.Texture){var n=t._textures[r].baseTexture;-1===e.indexOf(n)&&(e.push(n),i=!0)}return i}function o(t,e){return t instanceof d.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function a(t,e){if(t._texture&&t._texture instanceof d.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function s(t,e){return e instanceof d.Text&&(e.updateText(!0),!0)}function h(t,e){if(e instanceof d.TextStyle){var i=e.toFontString();return d.TextMetrics.measureFont(i),!0}return!1}function u(t,e){if(t instanceof d.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function l(t,e){return t instanceof d.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}e.__esModule=!0;var c=i(1),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c),f=i(127),p=function(t){return t&&t.__esModule?t:{default:t}}(f),m=d.ticker.shared;d.settings.UPLOADS_PER_FRAME=4;var g=function(){function t(e){var i=this;r(this,t),this.limiter=new p.default(d.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(u),this.registerFindHook(l),this.registerFindHook(n),this.registerFindHook(o),this.registerFindHook(a),this.registerUploadHook(s),this.registerUploadHook(h)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,m.addOnce(this.tick,this,d.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)m.addOnce(this.tick,this,d.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(var o=0,a=n.length;o<a;o++)n[o]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof d.Container)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},t.prototype.destroy=function(){this.ticking&&m.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();e.default=g},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function a(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function s(t){return t.toString().replace("object ","")}e.__esModule=!0,e.Resource=void 0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=i(80),l=r(u),c=i(78),d=r(c),f=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),p=null,m=e.Resource=function(){function t(e,i,r){if(n(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new d.default,this.onProgress=new d.default,this.onComplete=new d.default,this.onAfterMiddleware=new d.default}return t.setExtensionLoadType=function(e,i){a(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){a(t._xhrTypeMap,e,i)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(i)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:f&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(s(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(s(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(s(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2!=(r/100|0))return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,p||(p=document.createElement("a")),p.href=t,t=(0,l.default)(p.href,{strictMode:!0});var i=!t.port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&r===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(r>-1?r:t.length,n>-1?n:t.length);t=t.substring(0,o),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},h(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();m.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},m.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},m.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},m.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},m._loadTypeMap={gif:m.LOAD_TYPE.IMAGE,png:m.LOAD_TYPE.IMAGE,bmp:m.LOAD_TYPE.IMAGE,jpg:m.LOAD_TYPE.IMAGE,jpeg:m.LOAD_TYPE.IMAGE,tif:m.LOAD_TYPE.IMAGE,tiff:m.LOAD_TYPE.IMAGE,webp:m.LOAD_TYPE.IMAGE,tga:m.LOAD_TYPE.IMAGE,svg:m.LOAD_TYPE.IMAGE,"svg+xml":m.LOAD_TYPE.IMAGE,mp3:m.LOAD_TYPE.AUDIO,ogg:m.LOAD_TYPE.AUDIO,wav:m.LOAD_TYPE.AUDIO,mp4:m.LOAD_TYPE.VIDEO,webm:m.LOAD_TYPE.VIDEO},m._xhrTypeMap={xhtml:m.XHR_RESPONSE_TYPE.DOCUMENT,html:m.XHR_RESPONSE_TYPE.DOCUMENT,htm:m.XHR_RESPONSE_TYPE.DOCUMENT,xml:m.XHR_RESPONSE_TYPE.DOCUMENT,tmx:m.XHR_RESPONSE_TYPE.DOCUMENT,svg:m.XHR_RESPONSE_TYPE.DOCUMENT,tsx:m.XHR_RESPONSE_TYPE.DOCUMENT,gif:m.XHR_RESPONSE_TYPE.BLOB,png:m.XHR_RESPONSE_TYPE.BLOB,bmp:m.XHR_RESPONSE_TYPE.BLOB,jpg:m.XHR_RESPONSE_TYPE.BLOB,jpeg:m.XHR_RESPONSE_TYPE.BLOB,tif:m.XHR_RESPONSE_TYPE.BLOB,tiff:m.XHR_RESPONSE_TYPE.BLOB,webp:m.XHR_RESPONSE_TYPE.BLOB,tga:m.XHR_RESPONSE_TYPE.BLOB,json:m.XHR_RESPONSE_TYPE.JSON,text:m.XHR_RESPONSE_TYPE.TEXT,txt:m.XHR_RESPONSE_TYPE.TEXT,ttf:m.XHR_RESPONSE_TYPE.BUFFER,otf:m.XHR_RESPONSE_TYPE.BUFFER},m.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",t.exports.default=m},function(t,e,i){function r(){}function n(t){var i="",r=!1;return i+=t.type,e.BINARY_EVENT!=t.type&&e.BINARY_ACK!=t.type||(i+=t.attachments,i+="-"),t.nsp&&"/"!=t.nsp&&(r=!0,i+=t.nsp),null!=t.id&&(r&&(i+=",",r=!1),i+=t.id),null!=t.data&&(r&&(i+=","),i+=d.stringify(t.data)),c("encoded %j as %s",t,i),i}function o(t,e){function i(t){var i=p.deconstructPacket(t),r=n(i.packet),o=i.buffers;o.unshift(r),e(o)}p.removeBlobs(t,i)}function a(){this.reconstructor=null}function s(t){var i={},r=0;if(i.type=Number(t.charAt(0)),null==e.types[i.type])return l();if(e.BINARY_EVENT==i.type||e.BINARY_ACK==i.type){for(var n="";"-"!=t.charAt(++r)&&(n+=t.charAt(r),r!=t.length););if(n!=Number(n)||"-"!=t.charAt(r))throw new Error("Illegal attachments");i.attachments=Number(n)}if("/"==t.charAt(r+1))for(i.nsp="";++r;){var o=t.charAt(r);if(","==o)break;if(i.nsp+=o,r==t.length)break}else i.nsp="/";var a=t.charAt(r+1);if(""!==a&&Number(a)==a){for(i.id="";++r;){var o=t.charAt(r);if(null==o||Number(o)!=o){--r;break}if(i.id+=t.charAt(r),r==t.length)break}i.id=Number(i.id)}return t.charAt(++r)&&(i=h(i,t.substr(r))),c("decoded %s as %j",t,i),i}function h(t,e){try{t.data=d.parse(e)}catch(t){return l()}return t}function u(t){this.reconPack=t,this.buffers=[]}function l(t){return{type:e.ERROR,data:"parser error"}}var c=i(10)("socket.io-parser"),d=i(209),f=i(18),p=i(314),m=i(133);e.protocol=4,e.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=a,r.prototype.encode=function(t,i){if(c("encoding packet %j",t),e.BINARY_EVENT==t.type||e.BINARY_ACK==t.type)o(t,i);else{i([n(t)])}},f(a.prototype),a.prototype.add=function(t){var i;if("string"==typeof t)i=s(t),e.BINARY_EVENT==i.type||e.BINARY_ACK==i.type?(this.reconstructor=new u(i),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",i)):this.emit("decoded",i);else{if(!m(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(i=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,this.emit("decoded",i))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var r=i(36),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];e.getBlocksCount=function(t,e){switch(e){case r.L:return n[4*(t-1)+0];case r.M:return n[4*(t-1)+1];case r.Q:return n[4*(t-1)+2];case r.H:return n[4*(t-1)+3];default:return}},e.getTotalCodewordsCount=function(t,e){switch(e){case r.L:return o[4*(t-1)+0];case r.M:return o[4*(t-1)+1];case r.Q:return o[4*(t-1)+2];case r.H:return o[4*(t-1)+3];default:return}}},function(t,e){var i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");var r="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+")(?:.|[\r\n]))+";e.KANJI=new RegExp(i,"g"),e.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),e.BYTE=new RegExp(r,"g"),e.NUMERIC=new RegExp("[0-9]+","g"),e.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");var n=new RegExp("^"+i+"$"),o=new RegExp("^[0-9]+$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");e.testKanji=function(t){return n.test(t)},e.testNumeric=function(t){return o.test(t)},e.testAlphanumeric=function(t){return a.test(t)}},function(t,e){e.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}},function(t,e){function i(t){if("string"!=typeof t)throw new Error("Color should be defined as hex string");var e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw new Error("Invalid hex color: "+t);3!==e.length&&4!==e.length||(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");var i=parseInt(e.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function(t){t||(t={}),t.color||(t.color={});var e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,n=t.scale||4;return{width:r,scale:r?4:n,margin:e,color:{dark:i(t.color.dark||"#000000ff"),light:i(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},e.getScale=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},e.getImageWidth=function(t,i){var r=e.getScale(t,i);return Math.floor((t+2*i.margin)*r)},e.qrToImageData=function(t,i,r){for(var n=i.modules.size,o=i.modules.data,a=e.getScale(n,r),s=Math.floor((n+2*r.margin)*a),h=r.margin*a,u=[r.color.light,r.color.dark],l=0;l<s;l++)for(var c=0;c<s;c++){var d=4*(l*s+c),f=r.color.light;if(l>=h&&c>=h&&l<s-h&&c<s-h){var p=Math.floor((l-h)/a),m=Math.floor((c-h)/a);f=u[o[p*n+m]?1:0]}t[d++]=f.r,t[d++]=f.g,t[d++]=f.b,t[d]=f.a}}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=e.TweenDefine=function t(){r(this,t),this.NONE=0,this.LINEAR_EASE=this.NONE+1,this.ELASTIC_EASE_IN=this.LINEAR_EASE+1,this.ELASTIC_EASE_OUT=this.ELASTIC_EASE_IN+1,this.ELASTIC_EASE_INOUT=this.ELASTIC_EASE_OUT+1,this.BACK_EASE_IN=this.ELASTIC_EASE_INOUT+1,this.BACK_EASE_OUT=this.BACK_EASE_IN+1,this.BACK_EASE_INOUT=this.BACK_EASE_OUT+1,this.BOUNCE_EASE_IN=this.BACK_EASE_INOUT+1,this.BOUNCE_EASE_OUT=this.BOUNCE_EASE_IN+1,this.BOUNCE_EASE_INOUT=this.BOUNCE_EASE_OUT+1,this.QUAD_EASE_OUT=this.BOUNCE_EASE_INOUT+1,this.SINUSODIAL_EASE_IN=this.QUAD_EASE_OUT+1,this.SINUSODIAL_EASE_OUT=this.SINUSODIAL_EASE_IN+1,this.SINUSODIAL_EASE_INOUT=this.SINUSODIAL_EASE_OUT+1,this.EXPONENTIAL_IN=this.SINUSODIAL_EASE_INOUT+1,this.EXPONENTIAL_OUT=this.EXPONENTIAL_IN+1,this.EXPONENTIAL_INOUT=this.EXPONENTIAL_OUT+1};t.exports=new n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.text=null,this.term_popup_background=null,this.content_holder=null,this.text=null,this.callback=null}return n(t,[{key:"Init",value:function(){this.InitTermAndConditionPopup()}},{key:"InitTermAndConditionPopup",value:function(){if(!$(this.term_popup_background).exists()){this.term_popup_background=$('<div class="popup-background"></div>'),this.term_popup_background.css("font-family",GameConfig.fontList.MainFont),this.term_popup_background.attr("onRotate","false"),this.term_popup_background.hide(),$("body").append(this.term_popup_background),this.content_holder=$('<div class="content-holder"></div>'),this.term_popup_background.append(this.content_holder);var t=$('<div class="text-holder"></div>');this.content_holder.append(t),this.text=$('<div class="text-div"></div>'),window.isAR&&this.text.css("direction","rtl"),t.append(this.text);var e=$('<div class="btn-holder"></div>');this.content_holder.append(e);var i=$('<div class="btn-ok">'+GLText.GetText(31)+"</div>");e.append(i),i.on("click",function(){this.term_popup_background.hide(),this.callback&&this.callback(!1)}.bind(this))}}},{key:"GetTermsText",value:function(){for(var t="",e="",i=81;i<=100;i++)t=GLText.GetText(i),""!=t.trim()&&(e+=t);return e}},{key:"ShowPopupText",value:function(t,e,i,r){this.text&&(this.text.empty(),this.text.append(t),this.term_popup_background.show(),this.callback=r)}}]),t}();t.exports=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(43),h=i(9),u=i(39),l=i(70),c=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.interactive=!0,t.drawing=new PIXI.Graphics,t.debug=new PIXI.Graphics,t.formS1={},t.formS2={},t.formS3={},t.formW={},t.formTerm={},t.termPos={},t.totalTextHeight=0,t.appWidth=0,t.appHeight=0,t.iconOk=null,t.iconErr=null,t.iconCheck=null,t.name="",t.email="",t.rawText,t.editedText,t.tempVar,t.isInit=!1,t.currentStep=0,t.formStep={},t.formStep.step1=1,t.formStep.step2=2,t.formStep.step3=3,t.formStep.stepTerm=4,t.termMinY=0,t.termMaxY=0,t.scrollMinY=0,t.scrollMaxY=0,t.isTermDrag=!1,t.isScrollDrag=!1,t.textOffset,t.textRange,t.scrollRange,t.scrollRatio,t.endText=null,t.redirect=null,t.retry=null,t.formImpressionSent=!1,t.submitClicked=!1,t.textLogo=!1,t.needBreak=!1,t.keeper={},t}return o(e,t),a(e,[{key:"Init",value:function(){if(!GameDefine.IS_VOUCHER){if(this.isInit)return void(this.endText&&(this.endText.position.y=APP.GetHeight()/2,this.redirect.position.y=this.endText.position.y-this.endText.height/2+this.keeper.endTextHeight));var t=DeviceInfo.GetCurrentCountry();this.needBreak="CH"==t||"JP"==t,this.appWidth=APP.GetWidth(),this.appHeight=APP.GetHeight(),this.SetupParam(),this.LoadCompleteHandler(),this.isInit=!0}}},{key:"_RemoveAllChild",value:function(t){for(;t.children.length>0;){var e=t.getChildAt(0);t.removeChild(e)}}},{key:"_AddChildAllOf",value:function(t){var e=this;Object.values(t).forEach(function(t){e.addChild(t)})}},{key:"_HideObjects",value:function(t){Object.values(t).forEach(function(t){t.visible=!1})}},{key:"_ShowObjects",value:function(t){Object.values(t).forEach(function(t){t.visible=!0}),t===this.formS2&&(this.formS2.ageCheck.visible=!1,this.formS2.termCheck.visible=!1,this.formS2.nameErr.visible=!1,this.formS2.nameOk.visible=!1,this.formS2.emailErr.visible=!1,this.formS2.emailOk.visible=!1,this.formS2.btnActive.visible=!1,this.formS2.btnInactive.visible=!0)}},{key:"_ExportToSprite",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var i=APP.renderer.generateTexture(t),r=new PIXI.Sprite(i);return r.interactive=e,r.anchor.set(.5,.5),r}catch(t){console.log(t)}}},{key:"_DrawObj",value:function(t){this.debug.clear(),this.debug.lineStyle(2,16711680),this.debug.drawRect(t.x-t.width/2,t.y-t.height/2,t.width,t.height)}},{key:"_DrawFormRect",value:function(t){var e=this;this.debug.clear(),this.debug.lineStyle(3,16711680),Object.values(t).forEach(function(t){e.debug.drawRect(t.x-t.width/2,t.y-t.height/2,t.width,t.height)})}},{key:"LoadCompleteHandler",value:function(){this.currentStep=this.formStep.step1,this._InitRedirect(),this._InitReplay(),GameDefine.CAN_SHOW_FORM?(this._SetupFormStep1(),this._SetupFormStep2(),this._SetupFormStep3()):this.END_TEXT_POS_Y_OFFSET=0,this._InitFinalText(),this._SetupFormWarning(),this.addChild(this.debug),u.Hide()}},{key:"Hide",value:function(){u.Hide(),this.currentStep==this.formStep.step3&&this._HideObjects(this.formS3)}},{key:"Show",value:function(){GameDefine.IS_VOUCHER||this.currentStep==this.formStep.step2&&u.Show()}},{key:"Resize",value:function(){GameDefine.IS_VOUCHER||(this._RemoveAllChild(this),this.isInit=!1,u.Resize(),this.Init())}},{key:"SubmitForm",value:function(){if(!this.submitClicked){this.submitClicked=!0;var t={gl_device_id:""+resource.get_args("gl_device_id"),name:this.name.trim(),email:this.email.trim()};resource.save_form_data(t,function(){try{UserProfile.save_my_profile({finishTutorial:GameConfig.isNewUser,formSubmitted:!0}).error(function(){})}catch(t){console.log(t)}u.RemoveAll(),this._HideObjects(this.formS2),this._ShowObjects(this.formS3),this.currentStep=this.formStep.step3,StateGameOver.ShowUI(),GameDefine.CAN_SHOW_FORM=!1,this.endText.visible=!0,this.redirect.visible=!0,TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_FORM_LEAD,null,JSON.stringify(t))}.bind(this),function(t){this._ShowWarning("wifi"),this.submitClicked=!1}.bind(this)),(window.DEBUG||window.REVIEW)&&(u.RemoveAll(),this._HideObjects(this.formS2),this._ShowObjects(this.formS3),this.currentStep=this.formStep.step3,StateGameOver.ShowUI(),GameDefine.CAN_SHOW_FORM=!1,this.endText.visible=!0,this.redirect.visible=!0,TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_FORM_LEAD,null,JSON.stringify(t)))}}},{key:"TouchHandler",value:function(t){switch(Input.IsTouchDown(t)&&u&&u.Blur(),t.target){case this.formS1.btn:Input.IsTouchUp(t)&&(this.formImpressionSent||(TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_FORM_IMPRESSION),this.formImpressionSent=!0),this._HideObjects(this.formS1),this._ShowObjects(this.formS2),u.ClearnChildrenData(),u.Show(),this.currentStep=this.formStep.step2,StateGameOver.HideUI());break;case this.formS2.close:Input.IsTouchUp(t)&&(this._HideObjects(this.formS2),this._ShowObjects(this.formS1),u.Hide(),this.currentStep=this.formStep.step1,StateGameOver.ShowUI());break;case this.formS2.btnActive:Input.IsTouchUp(t)&&this.SubmitForm();break;case this.formS2.ageBox:Input.IsTouchUp(t)&&(this.formS2.ageCheck.visible=!this.formS2.ageCheck.visible,this._CheckFormData());break;case this.formS2.termBox:Input.IsTouchUp(t)&&(this.formS2.termCheck.visible=!this.formS2.termCheck.visible,this._CheckFormData());break;case this.formS2.termText:Input.IsTouchUp(t)&&(this.currentStep=this.formStep.stepTerm,u.Hide(),l.ShowPopupText(l.GetTermsText(),!0,null,this.CallbackForDom.bind(this)));break;case this.formS2.nameErr:Input.IsTouchUp(t)&&this._ShowWarning("name");break;case this.formS2.emailErr:Input.IsTouchUp(t)&&this._ShowWarning("email");break;case this.formW.btnOk:Input.IsTouchUp(t)&&(this._HideObjects(this.formW),this.currentStep!=this.formStep.stepTerm&&this.currentStep!=this.formStep.step2||u.Show());break;case this.formTerm.btn:Input.IsTouchUp(t)&&(this._HideObjects(this.formTerm),this.currentStep=this.formStep.step2,u.Show());break;case this.formTerm.text:Input.IsTouchDown(t)&&(this.isTextDrag=!0),Input.IsTouchUp(t)&&(this.isTextDrag=!1);break;case this.formTerm.scroll:Input.IsTouchDown(t)&&(this.isScrollDrag=!0),Input.IsTouchUp(t)&&(this.isScrollDrag=!1);break;case this.retry:Input.IsTouchUp(t)&&(StateGameOver.isSendingTracking||(TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_REPLAY),gIngameTimeSpent=0,StateIngame.Reset(),StateManager.SwitchState(StateIngame),this.Hide()));break;case this.redirect:Input.IsTouchUp(t)&&StateGameOver.OpenProductLink()}}},{key:"CallbackForDom",value:function(){u.Show(),this.currentStep=this.formStep.step2}},{key:"_OnNameChange",value:function(t){var e=/^([s{0}a-zA-z])([a-zA-Z ]{1,19})$/,i=t.currentTarget.value,r=!1;if(""==i)return this.formS2.nameErr.visible=!1,void(this.formS2.nameOk.visible=!1);r=e.test(i),this.formS2.nameErr.visible=!r,this.formS2.nameOk.visible=r,this.name=i,this._CheckFormData()}},{key:"_OnEmailChange",value:function(t){var e=/^([a-zA-Z0-9_.+-]{2,})\@([a-zA-Z0-9]{2,})(((\.)([a-zA-Z]{2,})){1,2})$/,i=t.currentTarget.value,r=!1;if(""==i)return this.formS2.emailErr.visible=!1,void(this.formS2.emailOk.visible=!1);r=e.test(i),this.formS2.emailErr.visible=!r,this.formS2.emailOk.visible=r,this.email=i,this._CheckFormData()}},{key:"_CheckFormData",value:function(){var t=this.formS2.emailOk.visible,e=this.formS2.nameOk.visible,i=this.formS2.ageCheck.visible,r=this.formS2.termCheck.visible;t&&e&&i&&r?(this.formS2.btnActive.visible=!0,this.formS2.btnInactive.visible=!1):(this.formS2.btnActive.visible=!1,this.formS2.btnInactive.visible=!0)}},{key:"_SetupFormStep1",value:function(){var t={};this.formS1.bg=null,this.formS1.bg1=null,this.formS1.tit=new PIXI.Container,this.rawText=GLText.GetText(64),this.rawText=this.rawText.replace("%TEMP%","<hl>"+GLText.GetText(65)+"</hl>"),this.rawText=this.rawText.replace("<br>","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.S1_TITLE_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.TOTAL_WIDTH*this.S1_DESCRIPTION_WIDTH_RATIO,breakWords:this.needBreak},hl:{fill:"#ffd300"}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS1.tit.addChild(this.editedText);var e=DeviceInfo.GetCurrentCountry(),i="JP"==e||"KR"==e||"MY"==e||"GE"==e;this.formS1.desc=new PIXI.Graphics,this.rawText=GLText.GetText(67),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.S1_DESCRIPTION_FONT_SIZE-(i?8:0),fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.appWidth*this.S1_DESCRIPTION_WIDTH_RATIO,breakWords:"CH"==DeviceInfo.GetCurrentCountry()},hl:{fill:"#ffd300"}}),this.formS1.desc.addChild(this.editedText),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.rawText=GLText.GetText(66),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.S1_FORM_SIGNUP_BTN_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",breakWords:this.needBreak}),this.editedText.width>this.S1_FORM_SIGNUP_BTN_MAX_W&&(this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.S1_DESCRIPTION_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.S1_FORM_SIGNUP_BTN_MAX_W,breakWords:this.needBreak})),this.formS1.btn=new PIXI.Graphics,t.width=this.editedText.width+8*this.S1_PADDING,t.height=this.editedText.height+5*this.S1_PADDING,this.formS1.btn.beginFill(13835556),this.formS1.btn.drawRoundedRect(-.5*t.width,-.5*t.height,t.width,t.height,t.height/2),this.formS1.btn.endFill(),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS1.btn.addChild(this.editedText),this.formS1.btn.interactive=!0,this.formS1.btn.hitArea=new PIXI.Rectangle(this.formS1.btn.position.x-APP.GetWidth()/2,this.formS1.btn.y-this.formS1.desc.height/2-this.formS1.btn.height/2,700,this.formS1.desc.height),this.formS1.bg=new PIXI.Graphics,t.height=this.formS1.tit.height+this.formS1.btn.height+10*this.S1_PADDING,t.width=this.appWidth+this.S1_PADDING,this.formS1.bg.lineStyle(3,16777215),this.formS1.bg.moveTo(-.5*t.width,-.5*t.height),this.formS1.bg.lineTo(.5*t.width,-.5*t.height),this.formS1.bg.beginFill(0,.5),this.formS1.bg.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formS1.bg.endFill(),this.formS1.bg1=new PIXI.Graphics,t.height=this.formS1.desc.height+5*this.S1_PADDING,t.width=.9*this.appWidth+this.S1_PADDING,this.formS1.bg1.lineStyle(3,16777215),this.formS1.bg1.moveTo(-.5*t.width,-.5*t.height),this.formS1.bg1.lineTo(.5*t.width,-.5*t.height),this.formS1.bg1.beginFill(0,.5),this.formS1.bg1.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formS1.bg1.endFill(),this.formS1.logoText=new PIXI.Graphics,this.rawText=this.FORM_LOGO_TEXT,this.rawText=this.rawText.replaceAll("<br>","\n"),this.rawText=this.rawText.replaceAll("\n","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.S1_LOGOTEXT_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:.9*this.appWidth}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS1.logoText.addChild(this.editedText),this._FormStep1Pos(),this._AddChildAllOf(this.formS1)}},{key:"_FormStep1Pos",value:function(){var t={};t.midPoint=APP.GetHeight()/2;var e=this.formS1;e.bg.position.set(this.appWidth/2,t.midPoint-e.bg.height/2-2*this.S1_PADDING),e.bg1.position.set(this.appWidth/2,t.midPoint+e.bg1.height/2+2*this.S1_PADDING),t.x=e.bg.x,t.y=e.bg.y-e.bg.height/2+e.tit.height/2+4*this.S1_PADDING,e.tit.position.set(t.x,t.y),t.y=e.bg.y+e.bg.height/2-e.btn.height/2-4*this.S1_PADDING,e.btn.position.set(t.x,t.y),t.y=e.bg1.y,e.desc.position.set(t.x,t.y),t.y=e.bg1.y+e.bg1.height/2+e.logoText.height/2+this.S1_PADDING,e.logoText.position.set(t.x,t.y)}},{key:"_SetupFormStep2",value:function(){var t={};this.formS2.bg=null,this.formS2.tit=null,this.formS2.close=null,this.formS2.name=null,this.formS2.email=null,this.formS2.nameOk=null,this.formS2.nameErr=null,this.formS2.emailOk=null,this.formS2.emailErr=null,this.formS2.ageBox=null,this.formS2.ageCheck=null,this.formS2.termBox=null,this.formS2.termCheck=null,this.formS2.termText=null,this.formS2.ageText=null,this.formS2.btnActive=null,this.formS2.btnInactive=null,this.formS2.tit=new PIXI.Graphics,this.rawText=GLText.GetText(68),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.S2_TITLE_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.TOTAL_WIDTH*this.S1_DESCRIPTION_WIDTH_RATIO,breakWords:this.needBreak},hl:{}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS2.tit.addChild(this.editedText),this.formS2.close=new h("2"),this.formS2.close.SetFrame(0),this.formS2.close.buttonMode=!0,this.formS2.close.interactive=!0,this.formS2.nameOk=new h("2"),this.formS2.nameOk.SetFrame(100),this.formS2.nameErr=new h("2"),this.formS2.nameErr.SetFrame(101),this.formS2.nameOk.scale.set(.9,.9),this.formS2.nameErr.scale.set(.9,.9),this.formS2.nameErr.interactive=!0,this.formS2.emailOk=new h("2"),this.formS2.emailOk.SetFrame(100),this.formS2.emailErr=new h("2"),this.formS2.emailErr.SetFrame(101),this.formS2.emailOk.scale.set(.9,.9),this.formS2.emailErr.scale.set(.9,.9),this.formS2.emailErr.interactive=!0,this.formS2.name=new PIXI.Graphics,t.width=.8*this.TOTAL_WIDTH,t.height=this.formS2.nameOk.height+2*this.S1_PADDING,this.formS2.name.beginFill(16777215),this.formS2.name.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formS2.name.endFill(),this.formS2.email=new PIXI.Graphics,this.formS2.email.beginFill(16777215),this.formS2.email.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formS2.email.endFill(),t.width=this.S2_CHECKBOX_SIZE,t.height=this.S2_CHECKBOX_SIZE,this.formS2.ageBox=new PIXI.Graphics,this.formS2.ageBox.lineStyle(3,16777215),this.formS2.ageBox.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formS2.ageBox.interactive=!0,this.formS2.ageBox.hitArea=new PIXI.Rectangle(-.5*t.width,-.5*t.height,t.width,t.height),this.formS2.ageCheck=new h("2"),this.formS2.ageCheck.SetFrame(99),this.formS2.ageCheck.visible=!1,t.width=this.S2_CHECKBOX_SIZE,t.height=this.S2_CHECKBOX_SIZE,this.formS2.termBox=new PIXI.Graphics,this.formS2.termBox.lineStyle(3,16777215),this.formS2.termBox.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formS2.termBox.interactive=!0,this.formS2.termBox.hitArea=new PIXI.Rectangle(-.5*t.width,-.5*t.height,t.width,t.height),this.formS2.termCheck=new h("2"),this.formS2.termCheck.SetFrame(99),this.formS2.termCheck.visible=!1;var e="AR"==DeviceInfo.GetCurrentCountry()?"right":"left";this.formS2.ageText=new PIXI.Graphics,this.rawText=GLText.GetText(80),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.S2_INFO_FONT_SIZE,fill:"#ffffff",align:e,fontWeight:"normal",wordWrap:!0,wordWrapWidth:APP.GetWidth()*this.S2_TEXT_MAX_W_RATIO,breakWords:!1},hl:{}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS2.ageText.addChild(this.editedText),this.formS2.termText=new PIXI.Graphics,this.rawText=GLText.GetText(118),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.S2_INFO_FONT_SIZE,fill:"#ffffff",align:e,fontWeight:"normal",wordWrap:!0,wordWrapWidth:APP.GetWidth()*this.S2_TEXT_MAX_W_RATIO,breakWords:this.needBreak},hl:{fill:this.S2_TERM_COLOR}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS2.termText.addChild(this.editedText),this.formS2.termText.interactive=!0,this.rawText=GLText.GetText(74),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.S1_DESCRIPTION_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",breakWords:this.needBreak}),this.editedText.width>this.S1_FORM_SIGNUP_BTN_MAX_W&&(this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.S1_DESCRIPTION_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.S1_FORM_SIGNUP_BTN_MAX_W,breakWords:this.needBreak})),this.formS2.btnInactive=new PIXI.Graphics,t.width=this.editedText.width+8*this.S1_PADDING,t.height=this.editedText.height+5*this.S1_PADDING,this.formS2.btnInactive.beginFill(7372944),this.formS2.btnInactive.drawRoundedRect(-.5*t.width,-.5*t.height,t.width,t.height,t.height/2),this.formS2.btnInactive.endFill(),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS2.btnInactive.addChild(this.editedText),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.S1_DESCRIPTION_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",breakWords:this.needBreak}),this.editedText.width>this.S1_FORM_SIGNUP_BTN_MAX_W&&(this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.S1_DESCRIPTION_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.S1_FORM_SIGNUP_BTN_MAX_W,breakWords:this.needBreak})),this.formS2.btnActive=new PIXI.Graphics,this.formS2.btnActive.beginFill(13835556),this.formS2.btnActive.drawRoundedRect(-.5*t.width,-.5*t.height,t.width,t.height,t.height/2),this.formS2.btnActive.endFill(),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS2.btnActive.addChild(this.editedText),this.formS2.btnActive.interactive=!0,t.height=this.formS2.tit.height+this.formS2.name.height+this.formS2.email.height+this.formS2.ageText.height+this.formS2.termText.height+this.formS2.btnActive.height+9*this.S1_PADDING,t.width=this.appWidth+this.S1_PADDING,this.formS2.bg=new PIXI.Graphics,this.formS2.bg.lineStyle(3,16777215),this.formS2.bg.moveTo(-.5*t.width,-.5*t.height),this.formS2.bg.lineTo(.5*t.width,-.5*t.height),this.formS2.bg.beginFill(0,.5),this.formS2.bg.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formS2.bg.endFill(),this.formS2.logoText=new PIXI.Graphics,this.rawText=this.FORM_LOGO_TEXT,this.rawText=this.rawText.replaceAll("<br>","\n"),this.rawText=this.rawText.replaceAll("\n","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.S1_LOGOTEXT_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:.9*this.appWidth}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS2.logoText.addChild(this.editedText),this._FormStep2Pos(),this._AddChildAllOf(this.formS2),this._HideObjects(this.formS2)}},{key:"_FormStep2Pos",value:function(){var t="AR"==DeviceInfo.GetCurrentCountry(),e={},i=this.formS2,r={};i.bg.position.set(APP.GetWidth()/2,APP.GetHeight()/2),e.x=i.bg.position.x,e.y=i.bg.position.y-i.bg.height/2+i.tit.height/2+this.S1_PADDING,this.formS2.tit.position.set(e.x,e.y),e.x=i.bg.width-i.close.width/2-2*this.S1_PADDING,e.y=i.bg.position.y-i.bg.height/2+i.close.height/2+this.S1_PADDING,i.close.scale.set(.9,.9),i.close.position.set(e.x,e.y),e.x=i.bg.position.x,e.y=i.tit.y+i.tit.height/2+i.name.height/2+this.S1_PADDING,i.name.position.set(e.x,e.y);var n=i.name,o=1==t?"rtl":"ltr";r.width=n.width-i.nameErr.width-3*this.S1_PADDING,r.left=n.position.x-n.width/2,r.top=n.position.y-n.height/2;var a=void 0;t?(r.left+=n.width-r.width-this.S1_PADDING,a={position:"fixed",left:r.left+"px",top:r.top+"px",width:r.width+"px",height:n.height+"px",border:"0px solid #ffffff",outline:"none","pointer-events":"auto","background-color":"rgba(255,255,255,0)","padding-right":this.S1_PADDING+"px",fontSize:this.S2_INFO_FONT_SIZE+"px",direction:o}):a={position:"fixed",left:r.left+"px",top:r.top+"px",width:r.width+"px",height:n.height+"px",border:"0px solid #ffffff",outline:"none","pointer-events":"auto","background-color":"rgba(255,255,255,0)","padding-left":this.S1_PADDING+"px",fontSize:this.S2_INFO_FONT_SIZE+"px",direction:o};var s=u.Create("input",a);s.oninput=this._OnNameChange.bind(this),u.AddChild(s),s.placeholder=GLText.GetText(69),e.y=i.name.position.y+i.name.height/2+i.email.height/2+2*this.S1_PADDING,i.email.position.set(e.x,e.y);var h=i.email;r.left=h.position.x-h.width/2,r.top=h.position.y-h.height/2;var l=void 0;t?(r.left+=h.width-r.width-this.S1_PADDING,l={position:"fixed",left:r.left+"px",top:r.top+"px",width:r.width+"px",height:h.height+"px",border:"0px solid #ffffff",outline:"none","pointer-events":"auto","background-color":"rgba(255,255,255,0)","padding-right":this.S1_PADDING+"px",fontSize:this.S2_INFO_FONT_SIZE+"px",direction:o}):l={position:"fixed",left:r.left+"px",top:r.top+"px",width:r.width+"px",height:h.height+"px",border:"0px solid #ffffff",outline:"none","pointer-events":"auto","background-color":"rgba(255,255,255,0)","padding-left":this.S1_PADDING+"px",fontSize:this.S2_INFO_FONT_SIZE+"px",direction:o};var c=u.Create("input",l);c.oninput=this._OnEmailChange.bind(this),u.AddChild(c),c.placeholder=GLText.GetText(70),e.x=i.name.position.x+i.name.width/2-i.nameOk.width/2-this.S1_PADDING,e.y=i.name.position.y,t&&(e.x=i.name.position.x-i.name.width/2+i.nameOk.width/2+this.S1_PADDING),i.nameOk.position.set(e.x,e.y),i.nameErr.position.set(e.x,e.y),i.nameOk.visible=!1,i.nameErr.visible=!1,e.x=i.email.position.x+i.email.width/2-i.emailOk.width/2-this.S1_PADDING,e.y=i.email.position.y,t&&(e.x=i.email.position.x-i.email.width/2+i.emailOk.width/2+this.S1_PADDING),i.emailOk.position.set(e.x,e.y),i.emailErr.position.set(e.x,e.y),i.emailOk.visible=!1,i.emailErr.visible=!1,e.y=i.email.position.y+i.email.height/2+i.ageText.height/2+this.S1_PADDING,e.x=i.name.position.x-i.name.width/2+i.ageText.width/2+i.ageBox.width+this.S1_PADDING,t&&(e.x=i.email.position.x+i.email.width/2-i.ageText.width/2-i.ageBox.width-this.S1_PADDING),i.ageText.position.set(e.x,e.y),e.x=i.name.position.x-i.name.width/2+i.termText.width/2+i.ageBox.width+this.S1_PADDING,e.y=i.ageText.position.y+i.ageText.height/2+i.termText.height/2+this.S1_PADDING,t&&(e.x=i.email.position.x+i.email.width/2-i.termText.width/2-i.ageBox.width-this.S1_PADDING),i.termText.position.set(e.x,e.y),e.x=i.name.position.x-i.name.width/2+i.ageBox.width/2,e.y=i.ageText.y,t&&(e.x=i.email.position.x+i.email.width/2-i.ageBox.width/2),i.ageBox.position.set(e.x,e.y),i.ageCheck.position.set(e.x,e.y),e.y=i.termText.y,i.termBox.position.set(e.x,e.y),i.termCheck.position.set(e.x,e.y),e.x=i.bg.position.x,e.y=i.bg.position.y+i.bg.height/2-i.btnActive.height/2-2*this.S1_PADDING,i.btnActive.position.set(e.x,e.y),i.btnInactive.position.set(e.x,e.y),i.btnActive.visible=!1,e.y=i.bg.position.y+i.bg.height/2+i.logoText.height/2+2*this.S1_PADDING,i.logoText.position.set(e.x,e.y)}},{key:"_SetupFormStep3",value:function(){var t={};this.formS3.form=new PIXI.Graphics,this.rawText=GLText.GetText(75),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.S3_INFO_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.S3_WORD_WRAP_WIDTH,breakWords:this.needBreak}),t.width=this.TOTAL_WIDTH+this.S1_PADDING,t.height=this.editedText.height+2*this.S1_PADDING,this.formS3.form.lineStyle(3,16777215),this.formS3.form.moveTo(-.5*t.width,-.5*t.height),this.formS3.form.lineTo(.5*t.width,-.5*t.height),this.formS3.form.beginFill(0,.5),this.formS3.form.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formS3.form.endFill(),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formS3.form.addChild(this.editedText),this._FormStep3Pos(),this._AddChildAllOf(this.formS3),GameDefine.CAN_SHOW_FORM&&this._HideObjects(this.formS3)}},{key:"_FormStep3Pos",value:function(){this.formS3.form.position.set(APP.GetWidth()/2,APP.GetHeight()/2-this.formS3.form.height/2-2*this.S1_PADDING)}},{key:"_SetupFormWarning",value:function(){var t={};this.formW.bgBig=null,this.formW.bgName=null,this.formW.bgEmail=null,this.formW.bgConnecttion=null,this.formW.bgReward=null,this.formW.textName=new PIXI.Graphics,this.rawText=GLText.GetText(77),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.FORM_WARNING_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.FORM_WARNING_WORD_WRAP_W,breakWords:this.needBreak},hl:{}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formW.textName.addChild(this.editedText),this.formW.textEmail=new PIXI.Graphics,this.rawText=GLText.GetText(78),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.FORM_WARNING_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.FORM_WARNING_WORD_WRAP_W,breakWords:this.needBreak},hl:{fill:"#ffffff"}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formW.textEmail.addChild(this.editedText),this.formW.textConnection=new PIXI.Graphics,this.rawText=GLText.GetText(21),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.FORM_WARNING_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.FORM_WARNING_WORD_WRAP_W,breakWords:this.needBreak}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formW.textConnection.addChild(this.editedText),this.formW.textReward=new PIXI.Graphics,this.rawText=GLText.GetText(9),this.rawText=this.rawText.replaceAll("<br>","\n"),this.editedText=new s(this.rawText,{default:{fontFamily:this.fontFam,fontSize:this.FORM_WARNING_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.FORM_WARNING_WORD_WRAP_W,breakWords:this.needBreak},hl:{}}),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formW.textReward.addChild(this.editedText),this.formW.btnOk=new PIXI.Graphics,this.rawText=GLText.GetText(31),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.S1_DESCRIPTION_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.FORM_WARNING_WORD_WRAP_W,breakWords:this.needBreak}),t.width=this.editedText.width+14*this.S1_PADDING,t.height=this.editedText.height+5*this.S1_PADDING,this.formW.btnOk.beginFill(13835556),this.formW.btnOk.drawRoundedRect(-.5*t.width,-.5*t.height,t.width,t.height,t.height/2),this.formW.btnOk.endFill(),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.formW.btnOk.addChild(this.editedText),this.formW.btnOk.interactive=!0,this.formW.bgBig=new PIXI.Graphics,this.formW.bgBig.beginFill(0,.7),this.formW.bgBig.drawRect(-.5*APP.GetWidth(),-.5*APP.GetHeight(),APP.GetWidth(),APP.GetHeight()),this.formW.bgBig.endFill(),this.formW.bgName=new PIXI.Graphics,t.width=this.FORM_WARNING_MAX_W,t.height=this.formW.textName.height+this.formW.btnOk.height+5*this.S1_PADDING,this.formW.bgName.lineStyle(3,16777215),this.formW.bgName.beginFill(0),this.formW.bgName.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formW.bgName.endFill(),this.formW.bgEmail=new PIXI.Graphics,t.width=this.FORM_WARNING_MAX_W,t.height=this.formW.textEmail.height+this.formW.btnOk.height+5*this.S1_PADDING,this.formW.bgEmail.lineStyle(3,16777215),this.formW.bgEmail.beginFill(0),this.formW.bgEmail.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formW.bgEmail.endFill(),this.formW.bgConnecttion=new PIXI.Graphics,t.width=this.FORM_WARNING_MAX_W,t.height=this.formW.textConnection.height+this.formW.btnOk.height+5*this.S1_PADDING,this.formW.bgConnecttion.lineStyle(3,16777215),this.formW.bgConnecttion.beginFill(0),this.formW.bgConnecttion.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formW.bgConnecttion.endFill(),this.formW.bgReward=new PIXI.Graphics,t.width=this.FORM_WARNING_MAX_W,t.height=this.formW.textReward.height+this.formW.btnOk.height+5*this.S1_PADDING,this.formW.bgReward.lineStyle(3,16777215),this.formW.bgReward.beginFill(0),this.formW.bgReward.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.formW.bgReward.endFill(),this.formW.textName.visible=!1,this.formW.bgName.visible=!1,this._FormWarningPos(),this._AddChildAllOf(this.formW),this._HideObjects(this.formW)}},{key:"_FormWarningPos",value:function(){var t={},e=this.formW;e.bgBig.position.set(APP.GetWidth()/2,APP.GetHeight()/2),e.bgBig.interactive=!0,e.bgName.position.set(e.bgBig.position.x,e.bgBig.position.y),t.x=e.bgName.position.x,t.y=e.bgName.position.y-e.bgName.height/2+e.textName.height/2+2*this.S1_PADDING,e.textName.position.set(t.x,t.y),e.bgEmail.position.set(e.bgBig.position.x,e.bgBig.position.y),t.x=e.bgEmail.position.x,t.y=e.bgEmail.position.y-e.bgEmail.height/2+e.textEmail.height/2+2*this.S1_PADDING,e.textEmail.position.set(t.x,t.y),e.bgConnecttion.position.set(e.bgBig.position.x,e.bgBig.position.y),t.x=e.bgConnecttion.position.x,t.y=e.bgConnecttion.position.y-e.bgConnecttion.height/2+e.textConnection.height/2+2*this.S1_PADDING,e.textConnection.position.set(t.x,t.y),e.bgReward.position.set(e.bgBig.position.x,e.bgBig.position.y),t.x=e.bgReward.position.x,t.y=e.bgReward.position.y-e.bgReward.height/2+e.textReward.height/2+2*this.S1_PADDING,e.textReward.position.set(t.x,t.y)}},{key:"_ShowWarning",value:function(t){var e={};this._ShowObjects(this.formW),"name"==t&&(this.formW.textEmail.visible=!1,this.formW.bgEmail.visible=!1,this.formW.textConnection.visible=!1,this.formW.bgConnecttion.visible=!1,this.formW.textReward.visible=!1,this.formW.bgReward.visible=!1,e.x=this.formW.bgName.position.x,e.y=this.formW.bgName.position.y+this.formW.bgName.height/2-this.formW.btnOk.height/2-2*this.S1_PADDING,this.formW.btnOk.position.set(e.x,e.y)),"email"==t&&(this.formW.textName.visible=!1,this.formW.bgName.visible=!1,this.formW.textConnection.visible=!1,this.formW.bgConnecttion.visible=!1,this.formW.textReward.visible=!1,this.formW.bgReward.visible=!1,e.x=this.formW.bgEmail.position.x,e.y=this.formW.bgEmail.position.y+this.formW.bgEmail.height/2-this.formW.btnOk.height/2-2*this.S1_PADDING,this.formW.btnOk.position.set(e.x,e.y)),"wifi"==t&&(this.formW.textEmail.visible=!1,this.formW.bgEmail.visible=!1,this.formW.textName.visible=!1,this.formW.bgName.visible=!1,this.formW.textReward.visible=!1,this.formW.bgReward.visible=!1,e.x=this.formW.bgConnecttion.position.x,e.y=this.formW.bgConnecttion.position.y+this.formW.bgConnecttion.height/2-this.formW.btnOk.height/2-2*this.S1_PADDING,this.formW.btnOk.position.set(e.x,e.y)),"reward"==t&&(this.formW.textEmail.visible=!1,this.formW.bgEmail.visible=!1,this.formW.textName.visible=!1,this.formW.bgName.visible=!1,this.formW.textConnection.visible=!1,this.formW.bgConnecttion.visible=!1,e.x=this.formW.bgReward.position.x,e.y=this.formW.bgReward.position.y+this.formW.bgReward.height/2-this.formW.btnOk.height/2-2*this.S1_PADDING,this.formW.btnOk.position.set(e.x,e.y)),u.Hide()}},{key:"_InitFinalText",value:function(){this._InitRedirect();var t={};this.endText=new PIXI.Graphics,this.rawText=GLText.GetText(11),this.rawText=this.rawText.replace("<br>","\n"),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.END_TEXT_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,dropShadow:!0,dropShadowAlpha:.3,dropShadowBlur:6,dropShadowColor:4521984,dropShadowDistance:0,stroke:4521984,strokeThickness:2,wordWrapWidth:this.END_TEXT_WORD_WRAP_W,breakWords:this.needBreak}),t.width=.9*APP.GetWidth(),t.height=this.editedText.height+this.redirect.height/2+6*this.S1_PADDING,this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,-t.height/2+this.editedText.height/2+3*this.S1_PADDING),this.endText.lineStyle(2,16777215),this.endText.beginFill(0,.5),this.endText.drawRect(-.5*t.width,-.5*t.height,t.width,t.height),this.endText.addChild(this.editedText);var e=this.FORM_LOGO_TEXT;e=e.replaceAll("<br>","\n"),e=e.replaceAll("\n","\n");var i=new s(e,{default:{fontFamily:this.fontFam,fontSize:this.S1_LOGOTEXT_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:.9*this.appWidth}});i.anchor.set(.5,.5),i.position.set(0,(t.height+i.height+this.redirect.height)/2+2*this.S1_PADDING),this.endText.addChild(i);var r=this.endText.height/2;GameDefine.CAN_SHOW_FORM||(this.END_TEXT_POS_Y_OFFSET=0,r=0),t.x=APP.GetWidth()/2,t.y=APP.GetHeight()/2+r+this.END_TEXT_POS_Y_OFFSET,this.endText.position.set(t.x,t.y),this.addChild(this.endText),this.addChild(this.redirect),t.x=this.endText.position.x,t.y=this.endText.position.y+t.height/2,this.keeper.endTextHeight=t.height,t.width=this.redirect.width+150,t.height=this.redirect.height+150,this.redirect.hitArea=new PIXI.Rectangle(-.5*t.width,-.5*t.height,t.width,t.height),this.redirect.position.set(t.x,t.y),GameDefine.CAN_SHOW_FORM&&(this.endText.visible=!1)}},{key:"_InitRedirect",value:function(){this.redirect=new PIXI.Graphics;var t={};this.rawText=GLText.GetText(10),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.REDIRECT_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.S1_FORM_SIGNUP_BTN_MAX_W,breakWords:this.needBreak}),t.width=this.editedText.width+10*this.S1_PADDING,t.height=this.editedText.height+5*this.S1_PADDING,this.redirect.beginFill(13835556),this.redirect.drawRoundedRect(-.5*t.width,-.5*t.height,t.width,t.height,t.height/2),this.redirect.endFill(),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.redirect.addChild(this.editedText),this.redirect.interactive=!0,t.x=APP.GetWidth()/2,t.y=APP.GetHeight()-this.redirect.height-25,GameDefine.CAN_SHOW_FORM&&(this.redirect.visible=!1)}},{key:"_InitReplay",value:function(){this.retry=new PIXI.Graphics;var t={};this.rawText=GLText.GetText(25),this.editedText=new PIXI.Text(this.rawText,{fontFamily:this.fontFam,fontSize:this.REPLAY_FONT_SIZE,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:this.S1_FORM_SIGNUP_BTN_MAX_W,breakWords:this.needBreak}),t.width=this.editedText.width+5*this.S1_PADDING,t.height=this.editedText.height+3*this.S1_PADDING,this.retry.beginFill(0),this.retry.drawRoundedRect(-t.width/2,-t.height/2,t.width,t.height,t.height/2),this.retry.endFill(),this.editedText.anchor.set(.5,.5),this.editedText.position.set(0,0),this.retry.addChild(this.editedText),this.retry.interactive=!0,t.width+=100,t.height+=100,this.retry.hitArea=new PIXI.Rectangle(-t.width/2,-t.height/2,t.width,t.height),this.addChild(this.retry)}},{key:"HideUI",value:function(){this.retry.visible=!1}},{key:"ShowUI",value:function(){this.retry.visible=!0}},{key:"SetRetryPos",value:function(t){var e={};e.x=APP.GetWidth()/2,e.y=t.position.y+this.retry.height+3*this.S1_PADDING,this.retry.position.set(e.x,e.y)}},{key:"SetupParam",value:function(){this.TOTAL_WIDTH=APP.GetWidth(),this.fontFam=GameConfig.fontList.MainFont,this.S1_TITLE_FONT_SIZE=43,this.S1_PADDING=10,this.S1_DESCRIPTION_FONT_SIZE=34,this.S1_LOGOTEXT_FONT_SIZE=18,this.S1_DESCRIPTION_WIDTH_RATIO=.85,this.S1_TITLE_WIDTH_RATIO=.9,this.S1_FORM_SIGNUP_BTN_W=400,this.S1_FORM_SIGNUP_BTN_H=150,this.S1_FORM_SIGNUP_BTN_RADIUS=20,this.S1_FORM_SIGNUP_BTN_MAX_W=450,this.S1_FORM_SIGNUP_BTN_FONT_SIZE=this.S1_TITLE_FONT_SIZE,this.S2_TITLE_FONT_SIZE=43,this.S2_INFO_FONT_SIZE=30,this.S2_BTN_CLOSE_SIZE=50,this.S2_INPUT_HEIGHT=60,this.S2_INPUT_WIDTH=300,this.S2_CHECKBOX_SIZE=35,this.S2_TEXT_MAX_W_RATIO=.7,this.S2_TERM_COLOR=16765696,this.S3_WORD_WRAP_WIDTH=.9*this.TOTAL_WIDTH,this.S3_INFO_FONT_SIZE=46,this.FORM_WARNING_MAX_W=this.TOTAL_WIDTH+4,this.FORM_WARNING_WORD_WRAP_W=.9*this.FORM_WARNING_MAX_W,this.FORM_WARNING_FONT_SIZE=36,this.FORM_TERM_MAX_W=this.TOTAL_WIDTH,this.FORM_TERM_WORD_WRAP_W=.9*this.FORM_TERM_MAX_W,this.FORM_TERM_TEXT_W=.93*this.FORM_TERM_MAX_W,this.FORM_TERM_TEXT_H=700,this.FORM_TERM_BUTTON_FONT_SIZE=40,this.FORM_TERM_TEXT_FONT_SIZE=36,this.END_TEXT_WORD_WRAP_W=.9*this.TOTAL_WIDTH,this.END_TEXT_FONT_SIZE=46,this.END_TEXT_POS_Y_OFFSET=2*this.S1_PADDING,this.REPLAY_FONT_SIZE=42,this.REDIRECT_FONT_SIZE=44,this.FORM_LOGO_TEXT="LEGO, the LEGO logo, the Brick and Knob configurations, the Minifigure and LEGOLAND are trademarks of the LEGO Group. \n (c)2018 The LEGO Group, LEGOLAND is a Merlin Entertainments brand."}},{key:"CreatePixiTexture",value:function(t,e,i,r){var n=null;return this.drawing.beginFill(e,i),this.drawing.drawRect(0,0,t.width,t.height),this.drawing.endFill(),null!=text&&(text.anchor.set(.5,.5),text.position.set(t.width/2,t.height/2),this.drawing.addChild(text)),n=this._ExportToSprite(this.drawing,!0),this.drawing.removeChild(this.editedText),this.drawing.clear(),n}}]),e}(PIXI.Container);t.exports=new c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=(i(42),i(7)),h=(i(41),i(40),function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.fillBar=null,t.currentScore=0,t.targetScore=0,t.state=0,t.mFrenzyFillSpeed=0,t.mCountTimeMakeParticle,t.STATE_NORMAL=0,t.STATE_FRENDZY=1,t.score=null,t}return o(e,t),a(e,[{key:"Init",value:function(){var t=GameDefine.GetGUIVer();this.score=GuiManager.GetGui(3).GetObject(5==t?4:7),this.score.style={fontFamily:"Arial",fontSize:5===GameDefine.GetGUIVer()?36:30*GameConfig.scale,fill:"#000000",fontWeight:"bold"};var e=GuiManager.GetGui(3).GetObject(5==t?2:5);this.mFill=GuiManager.GetGui(3).GetObject(5==t?3:6),this.rect=this.mFill.GetTransformRect(),this.mMask=new PIXI.Graphics,this.mMask.position.set(this.rect.x,this.rect.y),this.mMask.clear(),this.mMask.beginFill(16711680,1),this.mMask.drawRect(0,0,this.rect.width,this.rect.height),this.mMask.endFill(),this.mMask.mHeight=this.rect.height,this.mFill.mask=this.mMask,this.mCountTimeMakeParticle=0,this.mFill.mask.scale.set(this.currentScore/GameDefine.SCORE_MGR_FRENZY_SCORE_MAX,1),this.mHighlight=new s("2"),this.mHighlight.SetAnim(5===GameDefine.GetGUIVer()?10:36,!1),this.mHighlight.position.set(this.mFill.position.x,this.mFill.position.y),this.mMaskHighlight=new PIXI.Graphics,this.mMaskHighlight.position.set(this.rect.x,this.rect.y),this.mMaskHighlight.clear(),this.mMaskHighlight.beginFill(16711680,1),this.mMaskHighlight.drawRect(0,0,8,this.rect.height),this.mMaskHighlight.endFill(),this.mMaskHighlight.mRootX=this.rect.x,this.mMaskHighlight.mMaxDistance=this.rect.width,this.mMaskHighlight.mHeight=this.rect.height,this.mHighlight.mask=this.mMaskHighlight,this.addChild(e),this.addChild(this.mHighlight),this.addChild(this.mMaskHighlight),this.addChild(this.mFill),this.addChild(this.mMask),this.addChild(this.score),this.targetScore=0}},{key:"Reset",value:function(){this.currentScore=0,this.targetScore=0,this.mFrenzyFillSpeed=0,this.mFill.mask.scale.set(0,1)}},{key:"UpdateScore",value:function(t){this.score.text=t}},{key:"AddFrenzyScore",value:function(t){switch(this.state){case 0:this.targetScore=Math.max(this.targetScore+t,0)}}},{key:"Update",value:function(t){switch(this.mFill.mask.scale.set(this.currentScore/GameDefine.SCORE_MGR_FRENZY_SCORE_MAX,1),this.mMaskHighlight.position.x=this.mMaskHighlight.mRootX+this.currentScore/GameDefine.SCORE_MGR_FRENZY_SCORE_MAX*this.mMaskHighlight.mMaxDistance,this.state){case this.STATE_NORMAL:if(this.currentScore<this.targetScore){this.mFrenzyFillSpeed=Math.max(3*Math.abs(this.targetScore-this.currentScore),3),this.currentScore=GameDefine.MoveToTarget(this.currentScore,Math.min(this.targetScore,GameDefine.SCORE_MGR_FRENZY_SCORE_MAX),this.mFrenzyFillSpeed,t),this.currentScore>this.targetScore&&(this.currentScore=this.targetScore);var e=Math.max(StateIngame.timerMain.GetTime()-2,0);this.currentScore>=GameDefine.SCORE_MGR_FRENZY_SCORE_MAX&&e>=2&&(this.state=this.STATE_FRENDZY,this.mFrenzyFillSpeed=GameDefine.SCORE_MGR_FRENZY_SCORE_MAX/GameDefine.FRENZY_TIME),this.currentScore<this.targetScore&&this.currentScore<GameDefine.SCORE_MGR_FRENZY_SCORE_MAX&&(this.mCountTimeMakeParticle-=t,this.mCountTimeMakeParticle<=0&&(this.mCountTimeMakeParticle=.08+.03*Math.random(),ParticleMgr.MakeFillFrenzyBarParticle(this.mMask.position.x+this.mMask.width,this.mMask.position.y+this.mMask.mHeight*(.1+.8*Math.random()))))}break;case this.STATE_FRENDZY:this.currentScore=GameDefine.MoveToTarget(this.currentScore,0,this.mFrenzyFillSpeed,t),this.currentScore<=0&&(this.state=this.STATE_NORMAL,this.targetScore=0)}}}]),e}(PIXI.Container));t.exports=new h},function(t,e){var i=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=i.call(arguments,2);return function(){return e.apply(t,r.concat(i.call(arguments)))}}},function(t,e,i){(function(t){function r(e){var i=!1,r=!1,s=!1!==e.jsonp;if(t.location){var h="https:"===location.protocol,u=location.port;u||(u=h?443:80),i=e.hostname!==location.hostname||u!==e.port,r=e.secure!==h}if(e.xdomain=i,e.xscheme=r,"open"in new n(e)&&!e.forceJSONP)return new o(e);if(!s)throw new Error("JSONP disabled");return new a(e)}var n=i(47),o=i(205),a=i(204),s=i(206);e.polling=r,e.websocket=s}).call(e,i(3))},function(t,e,i){function r(t){var e=t&&t.forceBase64;l&&!e||(this.supportsBinary=!1),n.call(this,t)}var n=i(46),o=i(49),a=i(19),s=i(31),h=i(135),u=i(10)("engine.io-client:polling");t.exports=r;var l=function(){return null!=new(i(47))({xdomain:!1}).responseType}();s(r,n),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){u("paused"),i.readyState="paused",t()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(u("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){u("pre-pause polling complete"),--r||e()})),this.writable||(u("we are currently writing - waiting to pause"),r++,this.once("drain",function(){u("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;u("polling got data %s",t);var i=function(t,i,r){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)};a.decodePayload(t,this.socket.binaryType,i),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){u("writing close packet"),e.write([{type:"close"}])}var e=this;"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")};a.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,i)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=h()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"===e&&443!==Number(this.port)||"http"===e&&80!==Number(this.port))&&(i=":"+this.port),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t}},function(t,e,i){(function(e){function r(t){function i(t){if(!t)return!1;if(e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer||e.Blob&&t instanceof Blob||e.File&&t instanceof File)return!0;if(n(t)){for(var r=0;r<t.length;r++)if(i(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&i(t[o]))return!0}return!1}return i(t)}var n=i(21);t.exports=r}).call(e,i(3))},function(t,e){var i=[].indexOf;t.exports=function(t,e){if(i)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=function(){function t(e,i,n){void 0===i&&(i=!1),r(this,t),this._fn=e,this._once=i,this._thisArg=n,this._next=this._prev=this._owner=null}return o(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),s=function(){function t(){r(this,t),this._head=this._tail=void 0}return o(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof a))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return n(this,new a(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return n(this,new a(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof a))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();s.MiniSignalBinding=a,e.default=s,t.exports=e.default},function(t,e){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(t){if(l===setTimeout)return setTimeout(t,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function a(){m&&f&&(m=!1,f.length?p=f.concat(p):g=-1,p.length&&s())}function s(){if(!m){var t=n(a);m=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,m=!1,o(t)}}function h(t,e){this.fun=t,this.array=e}function u(){}var l,c,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(t){l=i}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var f,p=[],m=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];p.push(new h(t,e)),1!==p.length||m||n(s)},h.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,function(t,e,r){e&&(n[i.q.name][e]=r)}),n}},function(t,e){var i=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,n=t.indexOf("["),o=t.indexOf("]");-1!=n&&-1!=o&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));for(var a=i.exec(t||""),s={},h=14;h--;)s[r[h]]=a[h]||"";return-1!=n&&-1!=o&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(t,e){var i=function(t,e,i,r,n){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=r||t.RGBA,this.type=n||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=r};var r=!1;i.prototype.uploadData=function(t,e,i){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!r){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(t,e,r){var n=new i(t);return n.premultiplyAlpha=r||!1,n.upload(e),n},i.fromData=function(t,e,r,n){var o=new i(t);return o.uploadData(e,r,n),o},t.exports=i},function(t,e){var i=function(t,e,i){var r;if(i){var n=i.tempAttribState,o=i.attribState;for(r=0;r<n.length;r++)n[r]=!1;for(r=0;r<e.length;r++)n[e[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==n[r]&&(o[r]=n[r],i.attribState[r]?t.enableVertexAttribArray(r):t.disableVertexAttribArray(r))}else for(r=0;r<e.length;r++){var a=e[r];t.enableVertexAttribArray(a.attribute.location)}};t.exports=i},function(t,e){var i=function(t,e,i,n){var o=r(t,t.VERTEX_SHADER,e),a=r(t,t.FRAGMENT_SHADER,i),s=t.createProgram();if(t.attachShader(s,o),t.attachShader(s,a),n)for(var h in n)t.bindAttribLocation(s,n[h],h);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(o),t.deleteShader(a),s},r=function(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)};t.exports=i},function(t,e){var i=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},r=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};t.exports=i},function(t,e,i){var r=i(50),n=i(89),o=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),s=0;s<o;s++){var h=t.getActiveAttrib(e,s),u=r(t,h.type);i[h.name]={type:u,size:n(u),location:t.getAttribLocation(e,h.name),pointer:a}}return i},a=function(t,e,i,r){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,r||0)};t.exports=o},function(t,e,i){var r=i(50),n=i(85),o=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;a<o;a++){var s=t.getActiveUniform(e,a),h=s.name.replace(/\[.*?\]/,""),u=r(t,s.type);i[h]={type:u,size:s.size,location:t.getUniformLocation(e,h),value:n(u,s.size)}}return i};t.exports=o},function(t,e){function i(t,e){return function(i){this.data[t].value=i;var r=this.data[t].location;1===e.size?a[e.type](this.gl,r,i):s[e.type](this.gl,r,i)}}function r(t,e){for(var i=e,r=0;r<t.length-1;r++){var n=i[t[r]]||{data:{}};i[t[r]]=n,i=n}return i}var n=function(t,e){var n={data:{}};n.gl=t;for(var a=Object.keys(e),s=0;s<a.length;s++){var h=a[s],u=h.split("."),l=u[u.length-1],c=r(u,n),d=e[h];c.data[l]=d,c.gl=t,Object.defineProperty(c,l,{get:o(l),set:i(l,d)})}return n},o=function(t){return function(){return this.data[t].value}},a={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},s={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};t.exports=n},function(t,e){var i=function(t){return r[t]},r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=i},function(t,e){var i=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};t.exports=i},function(t,e,i){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(93),s=i(24),h=r(s),u=i(59),l=i(4),c=r(l),d=i(0),f=function(){function t(e,i,r,o,s){n(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||c.default.RENDER_OPTIONS.height,forceCanvas:!!o,sharedTicker:!!s},r)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,a.autoDetectRenderer)(e),this.stage=new h.default,this._ticker=null,this.ticker=e.sharedTicker?u.shared:new u.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},o(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,d.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=f},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e,i,r){var n=t&&t.forceCanvas;return void 0!==r&&(n=r),!n&&a.isWebGLSupported()?new l.default(t,e,i):new h.default(t,e,i)}e.__esModule=!0,e.autoDetectRenderer=n;var o=i(2),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),s=i(25),h=r(s),u=i(33),l=r(u)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(15),u=r(h),l=i(0),c=i(4),d=r(c),f=i(96),p=r(f),m=i(95),g=r(m),v=i(51),y=r(v),_=i(5),T=function(t){function e(){n(this,e);var i=o(this,t.call(this)),r=d.default.TRANSFORM_MODE===l.TRANSFORM_MODE.STATIC?p.default:g.default;return i.tempDisplayObjectParent=null,i.transform=new r,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new y.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return a(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=i,this.transform=e,r},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},s(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(u.default);e.default=T,T.prototype.displayObjectUpdateTransform=T.prototype.updateTransform},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(5),h=i(52),u=function(t){return t&&t.__esModule?t:{default:t}}(h),l=function(t){function e(){r(this,e);var i=n(this,t.call(this));return i.position=new s.Point(0,0),i.scale=new s.Point(1,1),i.skew=new s.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new s.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return o(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(u.default);e.default=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(5),h=i(52),u=function(t){return t&&t.__esModule?t:{default:t}}(h),l=function(t){function e(){r(this,e);var i=n(this,t.call(this));return i.position=new s.ObservablePoint(i.onChange,i,0,0),i.scale=new s.ObservablePoint(i.onChange,i,1,1),i.pivot=new s.ObservablePoint(i.onChange,i,0,0),i.skew=new s.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return o(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},a(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(u.default);e.default=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e,i,n,o,a,s,h,u){r(this,t),this.lineWidth=e,this.nativeLines=h,this.lineColor=i,this.lineAlpha=n,this._lineTint=i,this.fillColor=o,this.fillAlpha=a,this._fillTint=o,this.fill=s,this.holes=[],this.shape=u,this.type=u.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=n},function(t,e,i){"use strict";function r(t){return t<0?-1:t>0?1:0}e.__esModule=!0;var n=i(53),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],c=[];!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var n=r(a[t]*a[i]+h[t]*s[i]),d=r(s[t]*a[i]+u[t]*s[i]),f=r(a[t]*h[i]+h[t]*u[i]),p=r(s[t]*h[i]+u[t]*u[i]),m=0;m<16;m++)if(a[m]===n&&s[m]===d&&h[m]===f&&u[m]===p){e.push(m);break}}for(var g=0;g<16;g++){var v=new o.default;v.set(a[g],s[g],h[g],u[g],0,0),l.push(v)}}();var d={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return a[t]},uY:function(t){return s[t]},vX:function(t){return h[t]},vY:function(t){return u[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][d.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?d.S:d.N:2*Math.abs(e)<=Math.abs(t)?t>0?d.E:d.W:e>0?t>0?d.SE:d.SW:t>0?d.NE:d.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=l[d.inv(e)];n.tx=i,n.ty=r,t.append(n)}};e.default=d},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this._x=n,this._y=o,this.cb=e,this.scope=i}return t.prototype.set=function(t,e){var i=t||0,r=e||(0!==e?i:0);this._x===i&&this._y===r||(this._x=i,this._y=r,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},n(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=o},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(2),u=i(5),l=i(0),c=i(4),d=r(c),f=i(24),p=r(f),m=i(58),g=r(m),v=i(15),y=r(v),_=new u.Matrix,T=function(t){function e(i,r,a,s){n(this,e);var c=o(this,t.call(this));return(0,h.sayHello)(i),"number"==typeof r&&(r=Object.assign({width:r,height:a||d.default.RENDER_OPTIONS.height},s)),r=Object.assign({},d.default.RENDER_OPTIONS,r),c.options=r,c.type=l.RENDERER_TYPE.UNKNOWN,c.screen=new u.Rectangle(0,0,r.width,r.height),c.view=r.view||document.createElement("canvas"),c.resolution=r.resolution||d.default.RESOLUTION,c.transparent=r.transparent,c.autoResize=r.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=r.preserveDrawingBuffer,c.clearBeforeRender=r.clearBeforeRender,c.roundPixels=r.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=r.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new p.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return a(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,r){r=r||t.getLocalBounds();var n=g.default.create(0|r.width,0|r.height,e,i);return _.tx=-r.x,_.ty=-r.y,this.render(t,n,!1,_,!0),n},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=l.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},s(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,h.hex2string)(t),(0,h.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(y.default);e.default=T},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(4),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(){function t(e,i,n){r(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||a.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},n(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=s},function(t,e,i){"use strict";function r(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}function n(){if("undefined"==typeof document)return!1;var t=r("#ff00ff"),e=r("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var n=i.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(t,0,0),n.drawImage(e,2,0);var o=n.getImageData(2,0,1,1);if(!o)return!1;var a=o.data;return 255===a[0]&&0===a[1]&&0===a[2]}e.__esModule=!0,e.default=n},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(241),s=r(a),h=i(2),u=i(0),l=i(4),c=r(l),d={},f=function(){function t(e,i,r){n(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this._blendMode=u.BLEND_MODES.NORMAL,this.uniformData=r||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value,this.uniformData[o].type&&(this.uniformData[o].type=this.uniformData[o].type.toLowerCase());this.glShaders={},d[this.vertexSrc+this.fragmentSrc]||(d[this.vertexSrc+this.fragmentSrc]=(0,h.uid)()),this.glShaderKey=d[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=c.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},o(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=f},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(103),h=r(s),u=i(5),l=(i(8),i(109)),c=r(l),d=function(t){function e(i){n(this,e);var r=new u.Matrix,a=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,a.maskSprite=i,a.maskMatrix=r,a}return a(e,t),e.prototype.apply=function(t,e,i){var r=this.maskSprite,n=this.maskSprite.texture;n.valid&&(n.transform||(n.transform=new c.default(n,0)),n.transform.update(),this.uniforms.mask=n,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(n.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=n.transform.uClampFrame,t.applyFilter(this,e,i))},e}(h.default);e.default=d},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(6),a=r(o),s=i(60),h=r(s),u=function(){function t(e,i){n(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,h.default)(1),this.vertexBuffer=a.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e,i,n,o,a,s,h,u,l){r(this,t),this.text=e,this.style=i,this.width=n,this.height=o,this.lines=a,this.lineWidths=s,this.lineHeight=h,this.maxLineWidth=u,this.fontProperties=l}return t.measureText=function(e,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;r=r||i.wordWrap;var o=i.toFontString(),a=t.measureFont(o),s=n.getContext("2d");s.font=o;for(var h=r?t.wordWrap(e,i,n):e,u=h.split(/(?:\r\n|\r|\n)/),l=new Array(u.length),c=0,d=0;d<u.length;d++){var f=s.measureText(u[d]).width+(u[d].length-1)*i.letterSpacing;l[d]=f,c=Math.max(c,f)}var p=c+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var m=i.lineHeight||a.fontSize+i.strokeThickness,g=Math.max(m,a.fontSize+i.strokeThickness)+(u.length-1)*(m+i.leading);return i.dropShadow&&(g+=i.dropShadowDistance),new t(e,i,p,g,u,l,m+i.leading,c,a)},t.wordWrap=function(e,i){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,n=r.getContext("2d"),o="",a=0,s="",h={},u=i.letterSpacing,l=i.wordWrapWidth+i.letterSpacing,c=t.getFromCache(" ",u,h,n),d=e.split(" "),f=0;f<d.length;f++){var p=d[f],m=t.getFromCache(p,u,h,n);if(m>l)if(i.breakWords)for(var g=o.length>0?" "+p:p,v=g.split(""),y=0;y<v.length;y++){var _=v[y],T=t.getFromCache(_,u,h,n);T+a>l&&(s+=t.addLine(o),o="",a=0),o+=_,a+=T}else o.length>0&&(s+=t.addLine(o),o="",a=0),s+=t.addLine(p),o="",a=0;else m+a>l&&(s+=t.addLine(o),o="",a=0),o.length>0?o+=" "+p:o+=p,a+=m+c}return s+=t.addLine(o,!1)},t.addLine=function(t){return t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?t:t+"\n"},t.getFromCache=function(t,e,i,r){var n=i[t];if(void 0===n){var o=t.length*e;n=r.measureText(t).width+o,i[t]=n}return n},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},r=t._canvas,n=t._context;n.font=e;var o=Math.ceil(n.measureText("|MÉq").width),a=Math.ceil(n.measureText("M").width),s=2*a;a=1.4*a|0,r.width=o,r.height=s,n.fillStyle="#f00",n.fillRect(0,0,o,s),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,a);var h=n.getImageData(0,0,o,s).data,u=h.length,l=4*o,c=0,d=0,f=!1;for(c=0;c<a;++c){for(var p=0;p<l;p+=4)if(255!==h[d+p]){f=!0;break}if(f)break;d+=l}for(i.ascent=a-c,d=u-l,f=!1,c=s;c>a;--c){for(var m=0;m<l;m+=4)if(255!==h[d+m]){f=!0;break}if(f)break;d-=l}return i.descent=c-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t}();e.default=n;var o=document.createElement("canvas");o.width=o.height=10,n._canvas=o,n._context=o.getContext("2d"),n._fonts={}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return"number"==typeof t?(0,l.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=n(t[e]);return t}return n(t)}function a(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}function s(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=i(0),l=i(2),c={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:u.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},d=function(){function t(e){r(this,t),this.styleID=0,this.reset(),s(this,e,e)}return t.prototype.clone=function(){var e={};return s(e,this,c),new t(e)},t.prototype.reset=function(){s(this,c,c)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();/([\"\'])[^\'\"]+\1/.test(r)||(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},h(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=o(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){a(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();e.default=d},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(20),h=r(s),u=i(4),l=r(u),c=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments[2],s=arguments[3];n(this,e);var h=o(this,t.call(this,null,a));return h.resolution=s||l.default.RESOLUTION,h.width=Math.ceil(i),h.height=Math.ceil(r),h.realWidth=h.width*h.resolution,h.realHeight=h.height*h.resolution,h.scaleMode=void 0!==a?a:l.default.SCALE_MODE,h.hasLoaded=!0,h._glRenderTargets={},h._canvasRenderTarget=null,h.valid=!1,h}return a(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(h.default);e.default=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(53),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=new a.default,h=function(){function t(e,i){r(this,t),this._texture=e,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(s.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(s));var o=e.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+h+u)/o.width,a[1]=(e._frame.y+h+u)/o.height,a[2]=(e._frame.x+e._frame.width-h+u)/o.width,a[3]=(e._frame.y+e._frame.height-h+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,!0},n(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(98),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=function(){function t(){r(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var a=t.width/2/r,s=t.height/2/n,h=t.x/r+a,u=t.y/n+s;i=o.default.add(i,o.default.NW),this.x0=h+a*o.default.uX(i),this.y0=u+s*o.default.uY(i),i=o.default.add(i,2),this.x1=h+a*o.default.uX(i),this.y1=u+s*o.default.uY(i),i=o.default.add(i,2),this.x2=h+a*o.default.uX(i),this.y2=u+s*o.default.uY(i),i=o.default.add(i,2),this.x3=h+a*o.default.uX(i),this.y3=u+s*o.default.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();e.default=a},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}e.__esModule=!0;var h=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),u=i(20),l=r(u),c=i(2),d=i(59),f=i(0),p=i(112),m=r(p),g=function(t){function e(i,r){if(n(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var a=o(this,t.call(this,i,r));return a.width=i.videoWidth,a.height=i.videoHeight,a._autoUpdate=!0,a._isAutoUpdating=!1,a.autoPlay=!0,a.update=a.update.bind(a),a._onCanPlay=a._onCanPlay.bind(a),i.addEventListener("play",a._onPlayStart.bind(a)),i.addEventListener("pause",a._onPlayStop.bind(a)),a.hasLoaded=!1,a.__loaded=!1,a._isSourceReady()?a._onCanPlay():(i.addEventListener("canplay",a._onCanPlay),i.addEventListener("canplaythrough",a._onCanPlay)),a}return a(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(d.shared.add(this.update,this,f.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(d.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&d.shared.remove(this.update,this),this.source&&this.source._pixiId&&(l.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+(0,c.uid)());var r=c.BaseTextureCache[t._pixiId];return r||(r=new e(t,i),l.default.addToCache(r,t._pixiId)),r},e.fromUrl=function(t,i,r){var n=document.createElement("video");n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","");var o=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==o.indexOf("data:")?n.crossOrigin=(0,m.default)(o):r&&(n.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var a=0;a<t.length;++a)n.appendChild(s(t[a].src||t[a],t[a].mime));else n.appendChild(s(o,t.mime));return n.load(),e.fromVideo(n,i)},h(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(d.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(d.shared.add(this.update,this,f.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(l.default);e.default=g,g.fromUrls=g.fromUrl},function(t,e,i){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,a||(a=document.createElement("a")),a.href=t,t=o.default.parse(a.href);var i=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"}e.__esModule=!0,e.default=r;var n=i(134),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=void 0},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var n=i(268);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return r(n).default}});var o=i(270);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return r(o).default}});var a=i(274);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return r(a).default}});var s=i(269);Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return r(s).default}}),i(271),i(272),i(273)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(1),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(117),c=r(l),d=i(116),f=r(d),p=i(118),m=r(p),g=function(t){function e(i,r,a,s){n(this,e),s=s||5;var h=(0,c.default)(s,!0),l=(0,f.default)(s),d=o(this,t.call(this,h,l));return d.resolution=a||u.settings.RESOLUTION,d._quality=0,d.quality=r||4,d.strength=i||8,d.firstRun=!0,d}return a(e,t),e.prototype.apply=function(t,e,i,r){if(this.firstRun){var n=t.renderer.gl,o=(0,m.default)(n);this.vertexSrc=(0,c.default)(o,!0),this.fragmentSrc=(0,f.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{for(var a=t.getRenderTarget(!0),s=e,h=a,u=0;u<this.passes-1;u++){t.applyFilter(this,s,h,!0);var l=h;h=s,s=l}t.applyFilter(this,s,i,r),t.returnRenderTarget(a)}},s(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(u.Filter);e.default=g},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(1),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(117),c=r(l),d=i(116),f=r(d),p=i(118),m=r(p),g=function(t){function e(i,r,a,s){n(this,e),s=s||5;var h=(0,c.default)(s,!1),l=(0,f.default)(s),d=o(this,t.call(this,h,l));return d.resolution=a||u.settings.RESOLUTION,d._quality=0,d.quality=r||4,d.strength=i||8,d.firstRun=!0,d}return a(e,t),e.prototype.apply=function(t,e,i,r){if(this.firstRun){var n=t.renderer.gl,o=(0,m.default)(n);this.vertexSrc=(0,c.default)(o,!1),this.fragmentSrc=(0,f.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{for(var a=t.getRenderTarget(!0),s=e,h=a,u=0;u<this.passes-1;u++){t.applyFilter(this,s,h,!0);var l=h;h=s,s=l}t.applyFilter(this,s,i,r),t.returnRenderTarget(a)}},s(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(u.Filter);e.default=g},function(t,e,i){"use strict";function r(t){for(var e=n[t],i=e.length,r=o,a="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",h=void 0,u=0;u<t;u++){var l=s.replace("%index%",u);h=u,u>=i&&(h=t-u-1),l=l.replace("%value%",e[h]),a+=l,a+="\n"}return r=r.replace("%blur%",a),r=r.replace("%size%",t)}e.__esModule=!0,e.default=r;var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},o=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,i){"use strict";function r(t,e){var i=Math.ceil(t/2),r=n,o="",a=void 0;a=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var h=a.replace("%index%",s);h=h.replace("%sampleIndex%",s-(i-1)+".0"),o+=h,o+="\n"}return r=r.replace("%blur%",o),r=r.replace("%size%",t)}e.__esModule=!0,e.default=r;var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,i){"use strict";function r(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i}e.__esModule=!0,e.default=r},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),s=function(){function t(){r(this,t),this.global=new a.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},n(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e.default=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(){r(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e){r(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},n(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=o,o.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,i){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,i){"use strict";function r(t,e){t.bitmapFont=h.BitmapText.registerFont(t.data,e)}e.__esModule=!0,e.parse=r,e.default=function(){return function(t,e){if(!t.data||t.type!==s.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var i=t.isDataUrl?"":o.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");var n=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(a.utils.TextureCache[n])r(t,a.utils.TextureCache[n]),e();else{var h={crossOrigin:t.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",n,h,function(i){r(t,i.texture),e()})}}};var n=i(8),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n),a=i(1),s=i(28),h=i(113)},function(t,e,i){"use strict";function r(t,e){return t.isDataUrl?t.data.meta.image:a.default.resolve(t.url.replace(e,""),t.data.meta.image)}e.__esModule=!0,e.default=function(){return function(t,e){var i=t.name+"_image";if(!t.data||t.type!==n.Resource.TYPE.JSON||!t.data.frames||this.resources[i])return void e();var o={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=r(t,this.baseUrl);this.add(i,a,o,function(i){if(i.error)return void e(i.error);var r=new s.Spritesheet(i.texture.baseTexture,t.data,t.url);r.parse(function(){t.spritesheet=r,t.textures=r.textures,e()})})}},e.getResourcePath=r;var n=i(28),o=i(134),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=i(1)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===r.Resource.TYPE.IMAGE&&(t.texture=o.default.fromLoader(t.data,t.url,t.name)),e()}};var r=i(28),n=i(12),o=function(t){return t&&t.__esModule?t:{default:t}}(n)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(27),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=function(t){function e(i,o,a){r(this,e);var h=n(this,t.call(this,i));return h._ready=!0,h.verticesX=o||10,h.verticesY=a||10,h.drawMode=s.default.DRAW_MODES.TRIANGLES,h.refresh(),h}return o(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],r=[],n=[],o=[],a=this.verticesX-1,s=this.verticesY-1,h=t.width/a,u=t.height/s,l=0;l<e;l++){var c=l%this.verticesX,d=l/this.verticesX|0;i.push(c*h,d*u),n.push(c/a,d/s)}for(var f=a*s,p=0;p<f;p++){var m=p%a,g=p/a|0,v=g*this.verticesX+m,y=g*this.verticesX+m+1,_=(g+1)*this.verticesX+m,T=(g+1)*this.verticesX+m+1;o.push(v,y,_),o.push(y,T,_)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(n),this.colors=new Float32Array(r),this.indices=new Uint16Array(o),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){s.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(s.default);e.default=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){r(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();e.default=n},function(t,e,i){"use strict";function r(){}function n(t,e,i,r){var n=0,o=t.length;!function a(s){if(s||n===o)return void(i&&i(s));r?setTimeout(function(){e(t[n++],a)},1):e(t[n++],a)}()}function o(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function a(t,e){function i(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())return void setTimeout(function(){return s.drain()},1);var n={data:t,callback:"function"==typeof i?i:r};e?s._tasks.unshift(n):s._tasks.push(n),setTimeout(function(){return s.process()},1)}function n(t){return function(){a-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),a<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var a=0,s={_tasks:[],concurrency:e,saturated:r,unsaturated:r,buffer:e/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){a=0,s.drain=r,s.started=!1,s._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!s.paused&&a<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),a+=1,a===s.concurrency&&s.saturated(),t(e.data,o(n(e)))}},length:function(){return s._tasks.length},running:function(){return a},idle:function(){return s._tasks.length+a===0},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};return s}e.__esModule=!0,e.eachSeries=n,e.queue=a},function(t,e,i){"use strict";function r(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],o=[0,0,0,0],a=0;a<r.length;++a)i<t.length?r[a]=255&t.charCodeAt(i++):r[a]=0;o[0]=r[0]>>2,o[1]=(3&r[0])<<4|r[1]>>4,o[2]=(15&r[1])<<2|r[2]>>6,o[3]=63&r[2];switch(i-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var s=0;s<o.length;++s)e+=n.charAt(o[s])}return e}e.__esModule=!0,e.encodeBinary=r;var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.exports.default=r},function(t,e,i){function r(t,e){if(!(this instanceof r))return new r(t,e);t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=!1!==e.autoConnect,this.autoConnect&&this.open()}var n=i(201),o=i(132),a=i(18),s=i(63),h=i(131),u=i(73),l=i(10)("socket.io-client:manager"),c=i(77),d=i(197),f=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)f.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)f.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t,e){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=n(this.uri,this.opts);var i=this.engine,r=this;this.readyState="opening",this.skipReconnect=!1;var o=h(i,"open",function(){r.onopen(),t&&t()}),a=h(i,"error",function(e){if(l("connect_error"),r.cleanup(),r.readyState="closed",r.emitAll("connect_error",e),t){var i=new Error("Connection error");i.data=e,t(i)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var s=this._timeout;l("connect attempt will timeout after %d",s);var u=setTimeout(function(){l("connect attempt timed out after %d",s),o.destroy(),i.close(),i.emit("error","timeout"),r.emitAll("connect_timeout",s)},s);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(o),this.subs.push(a),this},r.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(h(t,"data",u(this,"ondata"))),this.subs.push(h(t,"ping",u(this,"onping"))),this.subs.push(h(t,"pong",u(this,"onpong"))),this.subs.push(h(t,"error",u(this,"onerror"))),this.subs.push(h(t,"close",u(this,"onclose"))),this.subs.push(h(this.decoder,"decoded",u(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit("packet",t)},r.prototype.onerror=function(t){l("error",t),this.emitAll("error",t)},r.prototype.socket=function(t,e){function i(){~c(n.connecting,r)||n.connecting.push(r)}var r=this.nsps[t];if(!r){r=new o(this,t,e),this.nsps[t]=r;var n=this;r.on("connecting",i),r.on("connect",function(){r.id=n.engine.id}),this.autoConnect&&i()}return r},r.prototype.destroy=function(t){var e=c(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){l("writing packet %j",t);var e=this;t.query&&0===t.type&&(t.nsp+="?"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(i){for(var r=0;r<i.length;r++)e.engine.write(i[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){l("cleanup");for(var t=this.subs.length,e=0;e<t;e++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(t){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();l("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var i=setTimeout(function(){t.skipReconnect||(l("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(l("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(l("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(i)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},function(t,e){function i(t,e,i){return t.on(e,i),{destroy:function(){t.removeListener(e,i)}}}t.exports=i},function(t,e,i){function r(t,e,i){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,i&&i.query&&(this.query=i.query),this.io.autoConnect&&this.open()}var n=i(63),o=i(18),a=i(315),s=i(131),h=i(73),u=i(10)("socket.io-client:socket"),l=i(76);t.exports=r;var c={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},d=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",h(this,"onopen")),s(t,"packet",h(this,"onpacket")),s(t,"close",h(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(c.hasOwnProperty(t))return d.apply(this,arguments),this;var e=a(arguments),i=n.EVENT;l(e)&&(i=n.BINARY_EVENT);var r={type:i,data:e};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){u("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:n.CONNECT,query:this.query}):this.packet({type:n.CONNECT}))},r.prototype.onclose=function(t){u("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(t);break;case n.ACK:case n.BINARY_ACK:this.onack(t);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];u("emitting event %j",e),null!=t.id&&(u("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?d.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,i=!1;return function(){if(!i){i=!0;var r=a(arguments);u("sending ack %j",r);var o=l(r)?n.BINARY_ACK:n.ACK;e.packet({type:o,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(u("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u("bad ack %s",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)d.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e,i){(function(e){function i(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=i}).call(e,i(3))},function(t,e,i){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(t,e,i){if(t&&u.isObject(t)&&t instanceof r)return t;var n=new r;return n.parse(t,e,i),n}function o(t){return u.isString(t)&&(t=n(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return n(t,!1,!0).resolve(e)}function s(t,e){return t?n(t,!1,!0).resolveObject(e):e}var h=i(211),u=i(316);e.parse=n,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=r;var l=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,d=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,f=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(f),m=["'"].concat(p),g=["%","/","?",";","#"].concat(m),v=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w=i(308);r.prototype.parse=function(t,e,i){if(!u.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),n=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(n),a=/\\/g;o[0]=o[0].replace(a,"/"),t=o.join(n);var s=t;if(s=s.trim(),!i&&1===t.split("#").length){var c=d.exec(s);if(c)return this.path=s,this.href=s,this.pathname=c[1],c[2]?(this.search=c[2],this.query=e?w.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var f=l.exec(s);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,s=s.substr(f.length)}if(i||f||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===s.substr(0,2);!x||f&&b[f]||(s=s.substr(2),this.slashes=!0)}if(!b[f]&&(x||f&&!E[f])){for(var S=-1,A=0;A<v.length;A++){var I=s.indexOf(v[A]);-1!==I&&(-1===S||I<S)&&(S=I)}var O,R;R=-1===S?s.lastIndexOf("@"):s.lastIndexOf("@",S),-1!==R&&(O=s.slice(0,R),s=s.slice(R+1),this.auth=decodeURIComponent(O)),S=-1;for(var A=0;A<g.length;A++){var I=s.indexOf(g[A]);-1!==I&&(-1===S||I<S)&&(S=I)}-1===S&&(S=s.length),this.host=s.slice(0,S),s=s.slice(S),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var P=this.hostname.split(/\./),A=0,M=P.length;A<M;A++){var D=P[A];if(D&&!D.match(y)){for(var k="",N=0,G=D.length;N<G;N++)D.charCodeAt(N)>127?k+="x":k+=D[N];if(!k.match(y)){var L=P.slice(0,A),F=P.slice(A+1),U=D.match(_);U&&(L.push(U[1]),F.unshift(U[2])),F.length&&(s="/"+F.join(".")+s),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=h.toASCII(this.hostname));var B=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+B,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!T[p])for(var A=0,M=m.length;A<M;A++){var X=m[A];if(-1!==s.indexOf(X)){var W=encodeURIComponent(X);W===X&&(W=escape(X)),s=s.split(X).join(W)}}var H=s.indexOf("#");-1!==H&&(this.hash=s.substr(H),s=s.slice(0,H));var V=s.indexOf("?");if(-1!==V?(this.search=s.substr(V),this.query=s.substr(V+1),e&&(this.query=w.parse(this.query)),s=s.slice(0,V)):e&&(this.search="",this.query={}),s&&(this.pathname=s),E[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",Y=this.search||"";this.path=B+Y}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,o="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=w.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||E[e])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+n+i+a+r},r.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var i=new r,n=Object.keys(this),o=0;o<n.length;o++){var a=n[o];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),h=0;h<s.length;h++){var l=s[h];"protocol"!==l&&(i[l]=t[l])}return E[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!E[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var f=c[d];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||b[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",g=i.search||"";i.path=m+g}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var v=i.pathname&&"/"===i.pathname.charAt(0),y=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=y||v||i.host&&t.pathname,T=_,w=i.pathname&&i.pathname.split("/")||[],p=t.pathname&&t.pathname.split("/")||[],x=i.protocol&&!E[i.protocol];if(x&&(i.hostname="",i.port=null,i.host&&(""===w[0]?w[0]=i.host:w.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),_=_&&(""===p[0]||""===w[0])),y)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),i.search=t.search,i.query=t.query;else if(!u.isNullOrUndefined(t.search)){if(x){i.hostname=i.host=w.shift();var S=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");S&&(i.auth=S.shift(),i.host=i.hostname=S.shift())}return i.search=t.search,i.query=t.query,u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!w.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var A=w.slice(-1)[0],I=(i.host||t.host||w.length>1)&&("."===A||".."===A)||""===A,O=0,R=w.length;R>=0;R--)A=w[R],"."===A?w.splice(R,1):".."===A?(w.splice(R,1),O++):O&&(w.splice(R,1),O--);if(!_&&!T)for(;O--;O)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),I&&"/"!==w.join("/").substr(-1)&&w.push("");var C=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(x){i.hostname=i.host=C?"":w.length?w.shift():"";var S=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");S&&(i.auth=S.shift(),i.host=i.hostname=S.shift())}return _=_||i.host&&w.length,_&&!C&&w.unshift(""),w.length?i.pathname=w.join("/"):(i.pathname=null,i.path=null),u.isNull(i.pathname)&&u.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},r.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";function r(t){var e="";do{e=s[t%h]+e,t=Math.floor(t/h)}while(t>0);return e}function n(t){var e=0;for(c=0;c<t.length;c++)e=e*h+u[t.charAt(c)];return e}function o(){var t=r(+new Date);return t!==a?(l=0,a=t):t+"."+r(l++)}for(var a,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),h=64,u={},l=0,c=0;c<h;c++)u[s[c]]=c;o.encode=r,o.decode=n,t.exports=o},function(t,e,i){"use strict";(function(t){function e(t){t/=60*APP.ticker.speed,a||(gIsShowBanner?(BANNER.Update(t),BANNER.Render()):(gTotalTimeSpent>0&&(gTotalTimeSpent+=t),APP.Update(t),APP.Render()))}function r(){a||(a=!0,StateManager.Pause())}function n(){a&&(a=!1,StateManager.Resume())}i(282);var o=i(160);t.gTotalTimeSpent=0,t.gIngameTimeSpent=0,t.gLoadingTimeSpent=0,t.gIsShowBanner=!1,t.gIsSizeChanged=!1;var a=!1;window.onBackPressed=function(){StateManager.Back()};window.onControllerEvent=function(t,e){16===t&&0===e&&onBackPressed()},window.onGamePause=function(){r()},window.onGameResume=function(){n()},window.onresize=function(){gIsSizeChanged||(APP.Resize(),StateManager.Resize())},window.main=function(){if(t.DeviceInfo=i(161),t.GameConfig=new o,t.APP=i(162),t.Timer=i(166),t.Input=i(164),t.StateManager=i(165),t.TrackingManager=i(167),t.Utils=i(168),t.AudioManager=i(172),t.GLText=i(29),t.GuiManager=i(174),t.DataDefine=i(181),t.GameDefine=i(182),t.StatePreLoad=i(196),t.StateLoading=i(195),t.StateIngame=i(194),t.StateGameOver=i(193),GameConfig.isUseBanner&&(t.BANNER=i(163)),resource.load_css("css/style.css"),AudioManager.Init(),GameConfig.isUseBanner)try{t.StateBanner=i(!function(){var t=new Error('Cannot find module "../states/StateBanner"');throw t.code="MODULE_NOT_FOUND",t}()),StateBanner.Load()}catch(t){}else Utils.PauseHostGameMusic(),StateManager.PushState(StatePreLoad);if(APP.Init(e),GameConfig.isUseBanner)TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_AD_LOADED);else{var r=GameConfig.Get3rdPartyImpression();r&&r.startsWith("http")&&(r=r.replace("[timestamp]",Date.now()),TrackingManager.SetPixelTracking(TrackingManager.TRACKING_ACTION_IMPRESSIONS,r)),TrackingManager.SendMultiEventTracking([TrackingManager.TRACKING_ACTION_AD_LOADED,TrackingManager.TRACKING_ACTION_IMPRESSIONS])}TrackingManager.format!=TrackingManager.TRCKING_FORMAT_BLS&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VHERO&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VSCORE&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VIDEO_FORM&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_VINT&&TrackingManager.format!=TrackingManager.TRCKING_FORMAT_MINT_MIG||(gTotalTimeSpent=.01)}}).call(e,i(3))},function(t,e,i){"use strict";var r={single_source_shortest_paths:function(t,e,i){var n={},o={};o[e]=0;var a=r.PriorityQueue.make();a.push(e,0);for(var s,h,u,l,c,d,f,p;!a.empty();){s=a.pop(),h=s.value,l=s.cost,c=t[h]||{};for(u in c)c.hasOwnProperty(u)&&(d=c[u],f=l+d,p=o[u],(void 0===o[u]||p>f)&&(o[u]=f,a.push(u,f),n[u]=h))}if(void 0!==i&&void 0===o[i]){var m=["Could not find a path from ",e," to ",i,"."].join("");throw new Error(m)}return n},extract_shortest_path_from_predecessor_list:function(t,e){for(var i=[],r=e;r;)i.push(r),t[r],r=t[r];return i.reverse(),i},find_path:function(t,e,i){var n=r.single_source_shortest_paths(t,e,i);return r.extract_shortest_path_from_predecessor_list(n,i)},PriorityQueue:{make:function(t){var e,i=r.PriorityQueue,n={};t=t||{};for(e in i)i.hasOwnProperty(e)&&(n[e]=i[e]);return n.queue=[],n.sorter=t.sorter||i.default_sorter,n},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var i={value:t,cost:e};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};t.exports=r},function(t,e,i){function r(t,e,i,r,a){var s=[].slice.call(arguments,1),h=s.length,u="function"==typeof s[h-1];if(!u&&!n())throw new Error("Callback required as last argument");if(!u){if(h<1)throw new Error("Too few arguments provided");return 1===h?(i=e,e=r=void 0):2!==h||e.getContext||(r=i,i=e,e=void 0),new Promise(function(n,a){try{var s=o.create(i,r);n(t(s,e,r))}catch(t){a(t)}})}if(h<2)throw new Error("Too few arguments provided");2===h?(a=i,i=e,e=r=void 0):3===h&&(e.getContext&&void 0===a?(a=r,r=void 0):(a=r,r=i,i=e,e=void 0));try{var l=o.create(i,r);a(null,t(l,e,r))}catch(t){a(t)}}var n=i(139),o=i(152),a=i(156),s=i(157);e.create=o.create,e.toCanvas=r.bind(null,a.render),e.toDataURL=r.bind(null,a.renderToDataURL),e.toString=r.bind(null,function(t,e,i){return s.render(t,i)})},function(t,e){t.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},function(t,e,i){var r=i(14).getSymbolSize;e.getRowColCoords=function(t){if(1===t)return[];for(var e=Math.floor(t/7)+2,i=r(t),n=145===i?26:2*Math.ceil((i-13)/(2*e-2)),o=[i-7],a=1;a<e-1;a++)o[a]=o[a-1]-n;return o.push(6),o.reverse()},e.getPositions=function(t){for(var i=[],r=e.getRowColCoords(t),n=r.length,o=0;o<n;o++)for(var a=0;a<n;a++)0===o&&0===a||0===o&&a===n-1||o===n-1&&0===a||i.push([r[o],r[a]]);return i}},function(t,e,i){function r(t){this.mode=n.ALPHANUMERIC,this.data=t}var n=i(13),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];r.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){var e;for(e=0;e+2<=this.data.length;e+=2){var i=45*o.indexOf(this.data[e]);i+=o.indexOf(this.data[e+1]),t.put(i,11)}this.data.length%2&&t.put(o.indexOf(this.data[e]),6)},t.exports=r},function(t,e){function i(){this.buffer=[],this.length=0}i.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},t.exports=i},function(t,e,i){function r(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new n(t*t),this.data.fill(0),this.reservedBit=new n(t*t),this.reservedBit.fill(0)}var n=i(16);r.prototype.set=function(t,e,i,r){var n=t*this.size+e;this.data[n]=i,r&&(this.reservedBit[n]=!0)},r.prototype.get=function(t,e){return this.data[t*this.size+e]},r.prototype.xor=function(t,e,i){this.data[t*this.size+e]^=i},r.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},t.exports=r},function(t,e,i){function r(t){this.mode=o.BYTE,this.data=new n(t)}var n=i(16),o=i(13);r.getBitsLength=function(t){return 8*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){for(var e=0,i=this.data.length;e<i;e++)t.put(this.data[e],8)},t.exports=r},function(t,e,i){var r=i(14).getSymbolSize;e.getPositions=function(t){var e=r(t);return[[0,0],[e-7,0],[0,e-7]]}},function(t,e,i){var r=i(14),n=r.getBCHDigit(1335);e.getEncodedBits=function(t,e){for(var i=t.bit<<3|e,o=i<<10;r.getBCHDigit(o)-n>=0;)o^=1335<<r.getBCHDigit(o)-n;return 21522^(i<<10|o)}},function(t,e,i){var r=i(16);if(r.alloc)var n=r.alloc(512),o=r.alloc(256);else var n=new r(512),o=new r(256);!function(){for(var t=1,e=0;e<255;e++)n[e]=t,o[t]=e,256&(t<<=1)&&(t^=285);for(e=255;e<512;e++)n[e]=n[e-255]}(),e.log=function(t){if(t<1)throw new Error("log("+t+")");return o[t]},e.exp=function(t){return n[t]},e.mul=function(t,e){return 0===t||0===e?0:n[o[t]+o[e]]}},function(t,e,i){function r(t){this.mode=n.KANJI,this.data=t}var n=i(13),o=i(14);r.getBitsLength=function(t){return 13*t},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){var e;for(e=0;e<this.data.length;e++){var i=o.toSJIS(this.data[e]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[e]+"\nMake sure your charset is UTF-8");i-=49472}i=192*(i>>>8&255)+(255&i),t.put(i,13)}},t.exports=r},function(t,e){function i(t,i,r){switch(t){case e.Patterns.PATTERN000:return(i+r)%2==0;case e.Patterns.PATTERN001:return i%2==0;case e.Patterns.PATTERN010:return r%3==0;case e.Patterns.PATTERN011:return(i+r)%3==0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(r/3))%2==0;case e.Patterns.PATTERN101:return i*r%2+i*r%3==0;case e.Patterns.PATTERN110:return(i*r%2+i*r%3)%2==0;case e.Patterns.PATTERN111:return(i*r%3+(i+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var r={N1:3,N2:3,N3:40,N4:10};e.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){for(var e=t.size,i=0,n=0,o=0,a=null,s=null,h=0;h<e;h++){n=o=0,a=s=null;for(var u=0;u<e;u++){var l=t.get(h,u);l===a?n++:(n>=5&&(i+=r.N1+(n-5)),a=l,n=1),l=t.get(u,h),l===s?o++:(o>=5&&(i+=r.N1+(o-5)),s=l,o=1)}n>=5&&(i+=r.N1+(n-5)),o>=5&&(i+=r.N1+(o-5))}return i},e.getPenaltyN2=function(t){for(var e=t.size,i=0,n=0;n<e-1;n++)for(var o=0;o<e-1;o++){var a=t.get(n,o)+t.get(n,o+1)+t.get(n+1,o)+t.get(n+1,o+1);4!==a&&0!==a||i++}return i*r.N2},e.getPenaltyN3=function(t){for(var e=t.size,i=0,n=0,o=0,a=0;a<e;a++){n=o=0;for(var s=0;s<e;s++)n=n<<1&2047|t.get(a,s),s>=10&&(1488===n||93===n)&&i++,o=o<<1&2047|t.get(s,a),s>=10&&(1488===o||93===o)&&i++}return i*r.N3},e.getPenaltyN4=function(t){for(var e=0,i=t.data.length,n=0;n<i;n++)e+=t.data[n];return Math.abs(Math.ceil(100*e/i/5)-10)*r.N4},e.applyMask=function(t,e){for(var r=e.size,n=0;n<r;n++)for(var o=0;o<r;o++)e.isReserved(o,n)||e.xor(o,n,i(t,o,n))},e.getBestMask=function(t,i){for(var r=Object.keys(e.Patterns).length,n=0,o=1/0,a=0;a<r;a++){i(a),e.applyMask(a,t);var s=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(a,t),s<o&&(o=s,n=a)}return n}},function(t,e,i){function r(t){this.mode=n.NUMERIC,this.data=t.toString()}var n=i(13);r.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){var e,i,r;for(e=0;e+3<=this.data.length;e+=3)i=this.data.substr(e,3),r=parseInt(i,10),t.put(r,10);var n=this.data.length-e;n>0&&(i=this.data.substr(e),r=parseInt(i,10),t.put(r,3*n+1))},t.exports=r},function(t,e,i){var r=i(16),n=i(147);e.mul=function(t,e){var i=new r(t.length+e.length-1);i.fill(0);for(var o=0;o<t.length;o++)for(var a=0;a<e.length;a++)i[o+a]^=n.mul(t[o],e[a]);return i},e.mod=function(t,e){for(var i=new r(t);i.length-e.length>=0;){for(var o=i[0],a=0;a<e.length;a++)i[a]^=n.mul(e[a],o);for(var s=0;s<i.length&&0===i[s];)s++;i=i.slice(s)}return i},e.generateECPolynomial=function(t){for(var i=new r([1]),o=0;o<t;o++)i=e.mul(i,[1,n.exp(o)]);return i}},function(t,e,i){function r(t,e){for(var i=t.size,r=y.getPositions(e),n=0;n<r.length;n++)for(var o=r[n][0],a=r[n][1],s=-1;s<=7;s++)if(!(o+s<=-1||i<=o+s))for(var h=-1;h<=7;h++)a+h<=-1||i<=a+h||(s>=0&&s<=6&&(0===h||6===h)||h>=0&&h<=6&&(0===s||6===s)||s>=2&&s<=4&&h>=2&&h<=4?t.set(o+s,a+h,!0,!0):t.set(o+s,a+h,!1,!0))}function n(t){for(var e=t.size,i=8;i<e-8;i++){var r=i%2==0;t.set(i,6,r,!0),t.set(6,i,r,!0)}}function o(t,e){for(var i=v.getPositions(e),r=0;r<i.length;r++)for(var n=i[r][0],o=i[r][1],a=-2;a<=2;a++)for(var s=-2;s<=2;s++)-2===a||2===a||-2===s||2===s||0===a&&0===s?t.set(n+a,o+s,!0,!0):t.set(n+a,o+s,!1,!0)}function a(t,e){for(var i,r,n,o=t.size,a=E.getEncodedBits(e),s=0;s<18;s++)i=Math.floor(s/3),r=s%3+o-8-3,n=1==(a>>s&1),t.set(i,r,n,!0),t.set(r,i,n,!0)}function s(t,e,i){var r,n,o=t.size,a=w.getEncodedBits(e,i);for(r=0;r<15;r++)n=1==(a>>r&1),r<6?t.set(r,8,n,!0):r<8?t.set(r+1,8,n,!0):t.set(o-15+r,8,n,!0),r<8?t.set(8,o-r-1,n,!0):r<9?t.set(8,15-r-1+1,n,!0):t.set(8,15-r-1,n,!0);t.set(o-8,8,1,!0)}function h(t,e){for(var i=t.size,r=-1,n=i-1,o=7,a=0,s=i-1;s>0;s-=2)for(6===s&&s--;;){for(var h=0;h<2;h++)if(!t.isReserved(n,s-h)){var u=!1;a<e.length&&(u=1==(e[a]>>>o&1)),t.set(n,s-h,u),o--,-1===o&&(a++,o=7)}if((n+=r)<0||i<=n){n-=r,r=-r;break}}}function u(t,e,i){var r=new m;i.forEach(function(e){r.put(e.mode.bit,4),r.put(e.getLength(),x.getCharCountIndicator(e.mode,t)),e.write(r)});var n=f.getSymbolTotalCodewords(t),o=T.getTotalCodewordsCount(t,e),a=8*(n-o);for(r.getLengthInBits()+4<=a&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);for(var s=(a-r.getLengthInBits())/8,h=0;h<s;h++)r.put(h%2?17:236,8);return l(r,t,e)}function l(t,e,i){for(var r=f.getSymbolTotalCodewords(e),n=T.getTotalCodewordsCount(e,i),o=r-n,a=T.getBlocksCount(e,i),s=r%a,h=a-s,u=Math.floor(r/a),l=Math.floor(o/a),c=l+1,p=u-l,m=new b(p),g=0,v=new Array(a),y=new Array(a),_=0,E=new d(t.buffer),w=0;w<a;w++){var x=w<h?l:c;v[w]=E.slice(g,g+x),y[w]=m.encode(v[w]),g+=x,_=Math.max(_,x)}var S,A,I=new d(r),O=0;for(S=0;S<_;S++)for(A=0;A<a;A++)S<v[A].length&&(I[O++]=v[A][S]);for(S=0;S<p;S++)for(A=0;A<a;A++)I[O++]=y[A][S];return I}function c(t,e,i,l){var c;if(A(t))c=S.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");var d=e;if(!d){var p=S.rawSplit(t);d=E.getBestVersionForData(p,i)}c=S.fromString(t,d||40)}var m=E.getBestVersionForData(c,i);if(!m)throw new Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<m)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+m+".\n")}else e=m;var v=u(e,i,c),y=f.getSymbolSize(e),T=new g(y);return r(T,e),n(T),o(T,e),s(T,i,0),e>=7&&a(T,e),h(T,v),isNaN(l)&&(l=_.getBestMask(T,s.bind(null,T,i))),_.applyMask(l,T),s(T,i,l),{modules:T,version:e,errorCorrectionLevel:i,maskPattern:l,segments:c}}var d=i(16),f=i(14),p=i(36),m=i(142),g=i(143),v=i(140),y=i(145),_=i(149),T=i(65),b=i(153),E=i(155),w=i(146),x=i(13),S=i(154),A=i(21);e.create=function(t,e){if(void 0===t||""===t)throw new Error("No input text");var i,r,n=p.M;return void 0!==e&&(n=p.from(e.errorCorrectionLevel,p.M),i=E.from(e.version),r=_.from(e.maskPattern),e.toSJISFunc&&f.setToSJISFunction(e.toSJISFunc)),c(t,i,n,r)}},function(t,e,i){function r(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}var n=i(16),o=i(151);r.prototype.initialize=function(t){this.degree=t,this.genPoly=o.generateECPolynomial(this.degree)},r.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");var e=new n(this.degree);e.fill(0);var i=n.concat([t,e],t.length+this.degree),r=o.mod(i,this.genPoly),a=this.degree-r.length;if(a>0){var s=new n(this.degree);return s.fill(0),r.copy(s,a),s}return r},t.exports=r},function(t,e,i){function r(t){return unescape(encodeURIComponent(t)).length}function n(t,e,i){for(var r,n=[];null!==(r=t.exec(i));)n.push({data:r[0],index:r.index,mode:e,length:r[0].length});return n}function o(t){var e,i,r=n(g.NUMERIC,c.NUMERIC,t),o=n(g.ALPHANUMERIC,c.ALPHANUMERIC,t);return v.isKanjiModeEnabled()?(e=n(g.BYTE,c.BYTE,t),i=n(g.KANJI,c.KANJI,t)):(e=n(g.BYTE_KANJI,c.BYTE,t),i=[]),r.concat(o,e,i).sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function a(t,e){switch(e){case c.NUMERIC:return d.getBitsLength(t);case c.ALPHANUMERIC:return f.getBitsLength(t);case c.KANJI:return m.getBitsLength(t);case c.BYTE:return p.getBitsLength(t)}}function s(t){return t.reduce(function(t,e){var i=t.length-1>=0?t[t.length-1]:null;return i&&i.mode===e.mode?(t[t.length-1].data+=e.data,t):(t.push(e),t)},[])}function h(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];switch(n.mode){case c.NUMERIC:e.push([n,{data:n.data,mode:c.ALPHANUMERIC,length:n.length},{data:n.data,mode:c.BYTE,length:n.length}]);break;case c.ALPHANUMERIC:e.push([n,{data:n.data,mode:c.BYTE,length:n.length}]);break;case c.KANJI:e.push([n,{data:n.data,mode:c.BYTE,length:r(n.data)}]);break;case c.BYTE:e.push([{data:n.data,mode:c.BYTE,length:r(n.data)}])}}return e}function u(t,e){for(var i={},r={start:{}},n=["start"],o=0;o<t.length;o++){for(var s=t[o],h=[],u=0;u<s.length;u++){var l=s[u],d=""+o+u;h.push(d),i[d]={node:l,lastCount:0},r[d]={};for(var f=0;f<n.length;f++){var p=n[f];i[p]&&i[p].node.mode===l.mode?(r[p][d]=a(i[p].lastCount+l.length,l.mode)-a(i[p].lastCount,l.mode),i[p].lastCount+=l.length):(i[p]&&(i[p].lastCount=l.length),r[p][d]=a(l.length,l.mode)+4+c.getCharCountIndicator(l.mode,e))}}n=h}for(f=0;f<n.length;f++)r[n[f]].end=0;return{map:r,table:i}}function l(t,e){var i,r=c.getBestModeForData(t);if((i=c.from(e,r))!==c.BYTE&&i.bit<r.bit)throw new Error('"'+t+'" cannot be encoded with mode '+c.toString(i)+".\n Suggested mode is: "+c.toString(r));switch(i!==c.KANJI||v.isKanjiModeEnabled()||(i=c.BYTE),i){case c.NUMERIC:return new d(t);case c.ALPHANUMERIC:return new f(t);case c.KANJI:return new m(t);case c.BYTE:return new p(t)}}var c=i(13),d=i(150),f=i(141),p=i(144),m=i(148),g=i(66),v=i(14),y=i(137);e.fromArray=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(l(e,null)):e.data&&t.push(l(e.data,e.mode)),t},[])},e.fromString=function(t,i){for(var r=o(t,v.isKanjiModeEnabled()),n=h(r),a=u(n,i),l=y.find_path(a.map,"start","end"),c=[],d=1;d<l.length-1;d++)c.push(a.table[l[d]].node);return e.fromArray(s(c))},e.rawSplit=function(t){return e.fromArray(o(t,v.isKanjiModeEnabled()))}},function(t,e,i){function r(t,i,r){for(var n=1;n<=40;n++)if(i<=e.getCapacity(n,r,t))return n}function n(t,e){return l.getCharCountIndicator(t,e)+4}function o(t,e){var i=0;return t.forEach(function(t){var r=n(t.mode,e);i+=r+t.getBitsLength()}),i}function a(t,i){for(var r=1;r<=40;r++){if(o(t,r)<=e.getCapacity(r,i,l.MIXED))return r}}var s=i(14),h=i(65),u=i(36),l=i(13),c=i(67),d=i(21),f=s.getBCHDigit(7973);e.from=function(t,e){return c.isValid(t)?parseInt(t,10):e},e.getCapacity=function(t,e,i){if(!c.isValid(t))throw new Error("Invalid QR Code version");void 0===i&&(i=l.BYTE);var r=s.getSymbolTotalCodewords(t),o=h.getTotalCodewordsCount(t,e),a=8*(r-o);if(i===l.MIXED)return a;var u=a-n(i,t);switch(i){case l.NUMERIC:return Math.floor(u/10*3);case l.ALPHANUMERIC:return Math.floor(u/11*2);case l.KANJI:return Math.floor(u/13);case l.BYTE:default:return Math.floor(u/8)}},e.getBestVersionForData=function(t,e){var i,n=u.from(e,u.M);if(d(t)){if(t.length>1)return a(t,n);if(0===t.length)return 1;i=t[0]}else i=t;return r(i.mode,i.getLength(),n)},e.getEncodedBits=function(t){if(!c.isValid(t)||t<7)throw new Error("Invalid QR Code version");for(var e=t<<12;s.getBCHDigit(e)-f>=0;)e^=7973<<s.getBCHDigit(e)-f;return t<<12|e}},function(t,e,i){function r(t,e,i){t.clearRect(0,0,e.width,e.height),e.style||(e.style={}),e.height=i,e.width=i,e.style.height=i+"px",e.style.width=i+"px"}function n(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}var o=i(68);e.render=function(t,e,i){var a=i,s=e;void 0!==a||e&&e.getContext||(a=e,e=void 0),e||(s=n()),a=o.getOptions(a);var h=o.getImageWidth(t.modules.size,a),u=s.getContext("2d"),l=u.createImageData(h,h);return o.qrToImageData(l.data,t,a),r(u,s,h),u.putImageData(l,0,0),s},e.renderToDataURL=function(t,i,r){var n=r;void 0!==n||i&&i.getContext||(n=i,i=void 0),n||(n={});var o=e.render(t,i,n),a=n.type||"image/png",s=n.rendererOpts||{};return o.toDataURL(a,s.quality)}},function(t,e,i){function r(t,e){var i=t.a/255,r=e+'="'+t.hex+'"';return i<1?r+" "+e+'-opacity="'+i.toFixed(2).slice(1)+'"':r}function n(t,e,i){var r=t+e;return void 0!==i&&(r+=" "+i),r}function o(t,e,i){for(var r="",o=0,a=!1,s=0,h=0;h<t.length;h++){var u=Math.floor(h%e),l=Math.floor(h/e);u||a||(a=!0),t[h]?(s++,h>0&&u>0&&t[h-1]||(r+=a?n("M",u+i,.5+l+i):n("m",o,0),o=0,a=!1),u+1<e&&t[h+1]||(r+=n("h",s),s=0)):o++}return r}var a=i(68);e.render=function(t,e,i){var n=a.getOptions(e),s=t.modules.size,h=t.modules.data,u=s+2*n.margin,l=n.color.light.a?"<path "+r(n.color.light,"fill")+' d="M0 0h'+u+"v"+u+'H0z"/>':"",c="<path "+r(n.color.dark,"stroke")+' d="'+o(h,s,n.margin)+'"/>',d='viewBox="0 0 '+u+" "+u+'"',f=n.width?'width="'+n.width+'" height="'+n.width+'" ':"",p='<svg xmlns="http://www.w3.org/2000/svg" '+f+d+' shape-rendering="crispEdges">'+l+c+"</svg>\n";return"function"==typeof i&&i(null,p),p}},function(t,e){function i(t,e,i){function n(t,r){if(n.count<=0)throw new Error("after called too many times");--n.count,t?(o=!0,e(t),e=i):0!==n.count||o||e(null,r)}var o=!1;return i=i||r,n.count=t,0===t?e():n}function r(){}t.exports=i},function(t,e){t.exports=function(t,e,i){var r=t.byteLength;if(e=e||0,i=i||r,t.slice)return t.slice(e,i);if(e<0&&(e+=r),i<0&&(i+=r),i>r&&(i=r),e>=r||e>=i||0===r)return new ArrayBuffer(0);for(var n=new Uint8Array(t),o=new Uint8Array(i-e),a=e,s=0;a<i;a++,s++)o[s]=n[a];return o.buffer}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){var i=[],r=!0,n=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(312),s=i(138),h=function(){function t(){var e=this;r(this,t),this.soundMax=50,this.scale=1,this.fontList={MainFont:"MainFont",TitleFont:"TitleFont"},this.fontInfo=[this.fontList.MainFont,this.fontList.TitleFont],this.isMigGamePortrait=!0,this.isHostGamePortrait=!0,this.isSupportTwoScreenSize=!0,this.isReverseScaleRatio=!1,this.isSupportKeyboard=!1,this.isSmallVersion=!1,this.isNewUser=!1,this.isFormSubmitted=!1,this.isUseDetectRenderer=!0,this.isBackgroundTransparent=!0,this.isUseBanner=!1,this.isUseVPaidTracking=!1,console.warn=console.log,this.socket=(0,a.connect)(PROTOCOL+"://"+window.location.hostname+"/"),this.socket.send("n"),this.socket.on("message",function(t){if(t.startsWith("n.")){var i=t.split("."),r=n(i,2),o=(r[0],r[1]);console.log(o),e.url=PROTOCOL+"://"+window.location.hostname+"/legoland-tap?"+o,s.toDataURL(e.url,{errorCorrectionLevel:"L"},function(t,i){e.qrcode=new PIXI.Sprite.fromImage(i)})}else if(t.startsWith("s.r"))StateManager.SwitchState(StateLoading);else if(t.startsWith("s.e"))StateManager.SwitchState(StatePreLoad);else if(t.startsWith("i.")){if(!StateIngame.player)return;var a=t.split("."),h=n(a,4),u=(h[0],h[1]);h[2],h[3];switch(u){case"l":StateIngame.player.MoveLeft();break;case"m":StateIngame.player.Release();break;case"r":StateIngame.player.MoveRight()}}}),this.CalculateScreenSize()}return o(t,[{key:"CalculateScreenSize",value:function(){var t=this.isSmallVersion?.5:1;this.isMigGamePortrait?(this.width=750*t,this.height=1334*t):(this.width=1334*t,this.height=750*t),this.isUseBanner&&(this.bannerWidth=640*t,this.bannerHeight=100*t),this.scale=t}},{key:"OverrideCore",value:function(){"AR"==DeviceInfo.GetCurrentCountry()&&(this.fontList={MainFont:"Arial",TitleFont:"Arial"},this.fontInfo=[this.fontList.MainFont,this.fontList.TitleFont]),Utils.OMSGetProductLink=function(){var t="click",e="",i="";return i=window.endtype&&"voucher"==window.endtype?"PR":"GL",window.country&&(e=window.country),""!=e&&""!=i?t=t+"_"+e+"_"+i:t+="_web",resource.get_param(t)},Utils.SendTrackingCompleteEngagement=function(){var t="engagement",e="",i="";i=window.endtype&&"voucher"==window.endtype?"PR":"GL",window.country&&(e=window.country),""!=e&&""!=i?t=t+"_"+e+"_"+i:t+="_web";var r=resource.get_param(t);r&&r.startsWith("http")&&(r=r.replace("{[timestamp]}",Date.now()),TrackingManager.SetPixelTracking(TrackingManager.TRACKING_ACTION_COMPLETE_ENGAGEMENTS,r))},resource.save_form_data=function(t,e,i){"0"==window.creative_id&&(window.creative_id=1);var r={token:window.token_api||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"1",device_identificator:(window.idfa||"").length?window.idfa:this.get_args("idfa")||this.get_args("hdidfv")||this.get_args("gl_device_id"),data:t};return Resource.requester.call_portal("post","../v4.0/?_=mig/save_form_data",r).success(function(t){e&&e(t)}).error(function(t){i&&i(t)})}}},{key:"Get3rdPartyImpression",value:function(){var t="impression",e="",i="";i=window.endtype&&"voucher"==window.endtype?"PR":"GL",window.country&&(e=window.country),""!=e&&""!=i?t=t+"_"+e+"_"+i:t+="_web";var r=resource.get_param(t);return r=r.replace("{[timestamp]}",Date.now())}}]),t}();t.exports=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)},jQuery.fn.exists=function(){return this.length>0};var o=function(){function t(){r(this,t),this.GAME_COUNTRY=this.GetCurrentCountry(),this.DEVICE_MODEL=this.GetStatsUrlInfo("device_model"),this.DEVICE_INFO="",this.underlinePos={x:0,y:0,width:0}}return n(t,[{key:"DetectDevice",value:function(t,e){console.log("User Agent: "+navigator.userAgent),console.log("Device Model: "+this.DEVICE_MODEL),-1!=this.DEVICE_MODEL.indexOf("iPhone7%2C1")&&(GameConfig.isOptmVersion=!0),GameConfig.CalculateScreenSize(),console.log("Small Version: "+GameConfig.isSmallVersion)}},{key:"detectIphoneX",value:function(){return Math.round(APP.GetHeight()/APP.GetWidth()*100)/100==2.17}},{key:"GetStatsUrlInfo",value:function(t){var e="";if("undefined"!=typeof strStatsUrl){var i=strStatsUrl.indexOf(t+"=");if(-1!=i){i+=t.length+1;var r=strStatsUrl.indexOf("&",i);e=strStatsUrl.substring(i,r)}}return e}},{key:"GetCurrentCountry",value:function(){var t=window.country;if(t)switch(t){case"SA":case"EG":case"UAE":case"JO":case"KA":case"QA":case"OA":case"AR":t="AR",window.isAR=!0}else t="US";return(t||"US").toUpperCase()}},{key:"IsUseSmallFontSize",value:function(){for(var t=this.GetCurrentCountry(),e=["JP","KR","MY","RU","ID","GE"],i=!1,r=0;r<e.length&&!(i=t==e[r]);r++);return i}},{key:"GetLanguagePack",value:function(){return{FR:"5.dat",GE:"6.dat",IT:"7.dat",SP:"8.dat",HU:"9.dat",RU:"10.dat",MY:"11.dat",ID:"12.dat",CH:"13.dat",JP:"15.dat",KR:"16.dat",AR:"17.dat"}[this.GAME_COUNTRY]||"4.dat"}},{key:"IsMobile",value:function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}}]),t}();t.exports=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.fadeEffect=new PIXI.Graphics,t.debugLayer=new PIXI.Graphics,t.ticker=PIXI.ticker.shared,t.offsetX=0,t.offsetY=0,GameConfig.isUseDetectRenderer?t.renderer=PIXI.autoDetectRenderer(window.innerWidth,window.innerHeight,{transparent:GameConfig.isBackgroundTransparent}):t.renderer=PIXI.autoDetectRenderer(window.innerWidth,window.innerHeight,{transparent:GameConfig.isBackgroundTransparent},!0),DeviceInfo.DetectDevice(window.innerWidth,window.innerHeight),t.Resize(),t.interactive=!0,t.on("pointerup",t.TouchHandler),t.on("pointerdown",t.TouchHandler),t.on("pointermove",t.TouchHandler),GameConfig.isSupportKeyboard&&(window.addEventListener("keydown",t.KeyHandler,!1),window.addEventListener("keyup",t.KeyHandler,!1)),document.body.appendChild(t.renderer.view),t}return o(e,t),a(e,[{key:"Init",value:function(t){this.ticker.add(t)}},{key:"GetWidth",value:function(){return 0==this.rotation?this.renderer.width:this.renderer.height}},{key:"GetHeight",value:function(){return 0==this.rotation?this.renderer.height:this.renderer.width}},{key:"AddChild",value:function(t){this.addChild(t)}},{key:"RemoveChild",value:function(t){this.removeChild(t)}},{key:"BeginFade",value:function(){this.addChild(this.fadeEffect)}},{key:"EndFade",value:function(){this.removeChild(this.fadeEffect)}},{key:"EnableDebugLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addChild(this.debugLayer),t&&this.IsRotate()&&this.Align(this.debugLayer)}},{key:"DisableDebugLayer",value:function(){this.removeChild(this.debugLayer)}},{key:"Show",value:function(){document.body.appendChild(this.renderer.view),StateManager.Resume()}},{key:"Hide",value:function(){document.body.removeChild(this.renderer.view),StateManager.Pause()}},{key:"Resize",value:function(){DeviceInfo.DetectDevice(window.innerWidth,window.innerHeight),GameConfig.isHostGamePortrait=window.innerWidth<window.innerHeight,console.log("Application: window resize("+window.innerWidth+","+window.innerHeight+")"),GameConfig.isReverseScaleRatio?GameConfig.isMigGamePortrait?GameConfig.isHostGamePortrait?(this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.width,GameConfig.width*this.ratio),this.offsetX=0,this.offsetY=(this.renderer.height-GameConfig.height)/2):(this.ratio=window.innerWidth/window.innerHeight,this.renderer.resize(GameConfig.width*this.ratio,GameConfig.width),this.offsetX=0,this.offsetY=(this.renderer.width-GameConfig.height)/2):GameConfig.isHostGamePortrait?(this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.height,GameConfig.height*this.ratio),this.offsetX=(this.renderer.height-GameConfig.width)/2,this.offsetY=0):(this.ratio=window.innerWidth/window.innerHeight,this.renderer.resize(GameConfig.height*this.ratio,GameConfig.height),this.offsetX=(this.renderer.width-GameConfig.width)/2,this.offsetY=0):GameConfig.isMigGamePortrait?GameConfig.isHostGamePortrait?(this.ratio=window.innerWidth/window.innerHeight,this.renderer.resize(GameConfig.height*this.ratio,GameConfig.height),this.offsetX=(this.renderer.width-GameConfig.width)/2,this.offsetY=0):(this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.height,GameConfig.height*this.ratio),this.offsetX=(this.renderer.height-GameConfig.width)/2,this.offsetY=0):GameConfig.isHostGamePortrait?(this.ratio=window.innerWidth/window.innerHeight,this.renderer.resize(GameConfig.width*this.ratio,GameConfig.width),this.offsetX=0,this.offsetY=(this.renderer.width-GameConfig.height)/2):(this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.width,GameConfig.width*this.ratio),this.offsetX=0,this.offsetY=(this.renderer.height-GameConfig.height)/2),this.Rotate(this.IsRotate())}},{key:"Align",value:function(t){t.position.set(this.renderer.width/2,this.renderer.height/2),t.pivot.set(this.GetWidth()/2,this.GetHeight()/2)}},{key:"Rotate",value:function(t){t?(this.position.set(this.renderer.width/2,this.renderer.height/2),this.pivot.set(this.renderer.width/2,this.renderer.height/2),this.rotation=-90*Math.PI/180):(this.pivot.set(0,0),this.position.set(0,0),this.rotation=0),this.fadeEffect.beginFill(),this.fadeEffect.clear(),this.fadeEffect.drawRect(0,0,this.GetWidth(),this.GetHeight()),this.fadeEffect.endFill(),this.Align(this.fadeEffect)}},{key:"IsRotate",value:function(){return GameConfig.isMigGamePortrait^window.innerWidth<window.innerHeight}},{key:"Update",value:function(t){StateManager.Update(t)}},{key:"Render",value:function(){this.renderer.render(this)}},{key:"TouchHandler",value:function(t){null==StateManager.stateNext&&(Input.Update(t),StateManager.TouchHandler(t),Input.Reset(t))}},{key:"KeyHandler",value:function(t){StateManager.KeyHandler(t),t.target===document.body&&t.preventDefault()}}]),e}(PIXI.Container);t.exports=new s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.renderer=PIXI.autoDetectRenderer(GameConfig.bannerWidth,GameConfig.bannerHeight,{backgroundColor:16711680},!0),t.hitArea=new PIXI.Rectangle(0,0,GameConfig.bannerWidth,GameConfig.bannerHeight),t.interactive=!0,t.on("pointerup",t.TouchHandler),t.on("pointerdown",t.TouchHandler),t.on("pointermove",t.TouchHandler),t}return o(e,t),a(e,[{key:"AddChild",value:function(t){this.addChild(t)}},{key:"RemoveChild",value:function(t){this.removeChild(t)}},{key:"Show",value:function(){document.body.appendChild(this.renderer.view),gIsShowBanner=!0,APP.Hide(),"undefined"!=typeof rewardDelivered&&rewardDelivered&&(closeWithReward(),StateIngame.IsGotReward()),setTimeout(function(){StateManager.Pause(),clearTimeout(this)},100)}},{key:"Hide",value:function(){Utils.PauseHostGameMusic(),document.body.removeChild(this.renderer.view),StateManager.IsEmpty()&&StateManager.PushState(StatePreLoad),gIsShowBanner=!1,APP.Show()}},{key:"Resize",value:function(){this.ratio=window.innerHeight/window.innerWidth,this.renderer.resize(GameConfig.bannerWidth,GameConfig.bannerWidth*this.ratio)}},{key:"Update",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.children[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.Update&&a.Update(t)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}},{key:"Render",value:function(){this.renderer.render(this)}},{key:"TouchHandler",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=this.children[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.TouchHandler&&a.TouchHandler(t)}}catch(t){i=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw r}}}}]),e}(PIXI.Container);t.exports=new s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.touchX=-1,this.touchY=-1,this.touchDX=0,this.touchDY=0}return n(t,[{key:"Update",value:function(t){var e=t.data.global.x,i=t.data.global.y;switch(APP.IsRotate()&&(e=APP.GetWidth()-t.data.global.y,i=t.data.global.x),t.type){case"pointerdown":this.touchX=e,this.touchY=i;break;case"pointermove":this.touchDX=e-this.touchX,this.touchDY=i-this.touchY}}},{key:"Reset",value:function(t){null!=t&&"pointerup"!=t.type||(this.touchX=-1,this.touchY=-1,this.touchDX=0,this.touchDY=0)}},{key:"IsTouchUp",value:function(t){return"pointerup"==t.type}},{key:"IsTouchDown",value:function(t){return"pointerdown"==t.type}},{key:"IsTouchMove",value:function(t){return!("pointermove"!=t.type||-1==this.touchX&&-1==this.touchY||0==this.touchDX&&0==this.touchDY)}},{key:"IsKeyUp",value:function(t){return"keyup"==t.type}},{key:"IsKeyDown",value:function(t){return"keydown"==t.type}}]),t}();t.exports=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.stateDeep=-1,this.stateStack=[],this.stateNext=null,this.isFadeIn=!1,this.timerFade=new Timer,this.timerFade.SetDuration(.5)}return n(t,[{key:"PushState",value:function(t){t.Load(),this.stateStack[++this.stateDeep]=t}},{key:"PopState",value:function(){this.stateDeep>0&&(this.stateStack[this.stateDeep].Unload(),this.stateDeep--)}},{key:"SwitchState",value:function(t){if((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.stateNext!=t)return this.stateNext=t,this.isFadeIn=!0,this.timerFade.Reset(),void APP.BeginFade();this.stateStack[this.stateDeep].Unload(),this.stateStack[this.stateDeep]=t,t.Load()}},{key:"Pause",value:function(){this.IsEmpty()||this.stateStack[this.stateDeep].Pause&&this.stateStack[this.stateDeep].Pause()}},{key:"Resume",value:function(){this.IsEmpty()||this.stateStack[this.stateDeep].Resume&&this.stateStack[this.stateDeep].Resume()}},{key:"Resize",value:function(){if(!this.IsEmpty()){for(var t=0;t<=this.stateDeep;t++)APP.Align(this.stateStack[t]);this.stateStack[this.stateDeep].Resize&&this.stateStack[this.stateDeep].Resize()}}},{key:"Back",value:function(){this.IsEmpty()||(this.stateStack[this.stateDeep].Back?this.stateStack[this.stateDeep].Back():Utils.SendTrackingAndExit())}},{key:"TouchHandler",value:function(t){this.IsEmpty()||this.stateStack[this.stateDeep].TouchHandler&&this.stateStack[this.stateDeep].TouchHandler(t)}},{key:"KeyHandler",value:function(t){this.IsEmpty()||this.stateStack[this.stateDeep].KeyHandler&&this.stateStack[this.stateDeep].KeyHandler(t)}},{key:"IsEmpty",value:function(){return-1==this.stateDeep}},{key:"GetCurrentState",value:function(){return this.stateStack[this.stateDeep]}},{key:"Update",value:function(t){if(null!=this.stateNext){this.timerFade.Update(t);var e=this.timerFade.GetTimePercent();APP.fadeEffect.alpha=this.isFadeIn?1-e:e,this.isFadeIn?this.timerFade.IsDone()&&(this.isFadeIn=!1,this.timerFade.Reset(),this.SwitchState(this.stateNext),APP.EndFade(),APP.BeginFade()):this.timerFade.IsDone()&&(this.stateNext=null,APP.EndFade())}this.IsEmpty()||this.stateStack[this.stateDeep].Update(t)}}]),t}();t.exports=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.timer=0,this.duration=0,this.overhead=0,this.isDone=!0}return n(t,[{key:"SetDuration",value:function(t){this.timer=this.duration=t,this.overhead=0,this.isDone=!1}},{key:"AddTime",value:function(t){this.timer+=t,this.overhead=0,this.isDone=!1}},{key:"GetDuration",value:function(){return this.duration}},{key:"GetTime",value:function(){return this.timer}},{key:"GetTimePercent",value:function(){return this.timer/this.duration}},{key:"Reset",value:function(){this.timer=this.duration,this.overhead=0,this.isDone=!1}},{key:"IsDone",value:function(){return 0==this.timer}},{key:"JustFinished",value:function(){return!(this.timer>0)&&(!this.isDone&&(this.isDone=!0,!0))}},{key:"GetOverhead",value:function(){return this.overhead}},{key:"Update",value:function(t){0!=this.timer&&(this.timer-=t,this.timer<0&&(this.overhead=-this.timer,this.timer=0))}}]),t}();t.exports=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.TRACKING_ACTION_IMPRESSIONS=210628,this.TRACKING_ACTION_TYPE_PLAYER_EXPAND=224025,this.TRACKING_ACTION_TYPE_PLAYER_COLLAPSE=224026,this.TRACKING_ACTION_ADS_EXPAND=211307,this.TRACKING_ACTION_ADS_COLLAPSE=218749,this.TRACKING_ACTION_ENGAGEMENTS=218009,this.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE=238558,this.TRACKING_ACTION_CONFIRMED_ENGAGEMENTS=191963,this.TRACKING_ACTION_TYPE_FIRST_QUARTILE=224028,this.TRACKING_ACTION_TYPE_MIDPOINT=224029,this.TRACKING_ACTION_TYPE_THIRD_QUARTILE=224030,this.TRACKING_ACTION_TYPE_END_QUARTILE=234554,this.TRACKING_ACTION_COMPLETE_ENGAGEMENTS=191968,this.TRACKING_ACTION_FIRST_COMPLETE_ENGAGEMENTS=289812,this.TRACKING_ACTION_REPLAY=191964,this.TRACKING_ACTION_TYPE_REPLAY_VIDEO=234555,this.TRACKING_ACTION_TYPE_VIDEO_STARTED=228364,this.TRACKING_ACTION_CLICK_THROUGHTS=191967,this.TRACKING_ACTION_CLICK_THROUGHTS_START=328898,this.TRACKING_ACTION_CLOSE=191969,this.TRACKING_ACTION_CLICK_ON_SHARE=201586,this.TRACKING_ACTION_CLICK_TO_CALL=216624,this.TRACKING_ACTION_FORM_IMPRESSION=237213,this.TRACKING_ACTION_FORM_LEAD=221840,this.TRACKING_ACTION_FACEBOOK_CLICK_SHARE=235566,this.TRACKING_ACTION_FACEBOOK_SHARE_FAIL=235568,this.TRACKING_ACTION_FACEBOOK_SHARE_SUCCESS=235567,this.TRACKING_ACTION_AD_LOADED=276761,this.TRACKING_ACTION_AD_PAUSED=276762,this.TRACKING_ACTION_AD_PLAYING=276763,this.TRACKING_ACTION_LEADERBOARD_IMPRESSION=310924,this.TRACKING_ACTION_TYPE_QTE_SUCCESSFUL=253201,this.TRACKING_ACTION_TYPE_QTE_FAILED=253202,this.TRACKING_ACTION_AGREED_VIEW=241229,this.TRACKING_ACTION_TYPE_SITE_VISITED=223611,this.TRACKING_ACTION_SAVE_SCREENSHOT=286351,this.ACTION_TYPE_TWITTER_CLICK_SHARE=280159,this.TRACKING_ACTION_CLICK_INFO=343224,this.TRACKING_EVENT_TYPE_ID=200116,this.TRACKING_API_URL="https://game-portal.gameloft.com/2093/v4.0/?_rp_=tracking/send_event",this.TRACKING_MULTI_API_URL="https://game-portal.gameloft.com/2093/v4.0/?_rp_=tracking/send_multi_event",this.TRCKING_FORMAT_MIG=0,this.TRCKING_FORMAT_HYBRID=1,this.TRCKING_FORMAT_MINT_MIG=2,this.TRCKING_FORMAT_BLS=3,this.TRCKING_FORMAT_VIDEO_FORM=4,this.TRCKING_FORMAT_VHERO=5,this.TRCKING_FORMAT_VINT=6,this.TRCKING_FORMAT_SITE=7,this.TRCKING_FORMAT_VBAN=8,this.TRCKING_FORMAT_VSCORE=9,this.token=1,this.score=0,this.page=1,this.timeSpentOnPage=0,this.format=this.TRCKING_FORMAT_MIG,this.startLoadingTime=0,this.evTrack={210628:{send_one:!0,count:0},224025:{send_one:!1,count:0},224026:{send_one:!1,count:0},211307:{send_one:!0,count:0},218749:{send_one:!0,count:0},218009:{send_one:!0,count:0},191963:{send_one:!0,count:0},224028:{send_one:!0,count:0},224029:{send_one:!0,count:0},224030:{send_one:!0,count:0},234554:{send_one:!0,count:0},191968:{send_one:!1,send_score:!0,send_time_spent:!0,count:0},191964:{send_one:!1,count:0},234555:{send_one:!1,count:0},228364:{send_one:!1,count:0},191967:{send_one:!1,count:0},328898:{send_one:!1,count:0},191969:{send_one:!0,count:0},201586:{send_one:!1,count:0},216624:{send_one:!1,count:0},237213:{send_one:!1,count:0},221840:{send_one:!1,count:0},235566:{send_one:!1,count:0},235568:{send_one:!1,count:0},235567:{send_one:!1,count:0},238558:{send_one:!0,count:0},289812:{send_one:!0,count:0},286351:{send_one:!1,send_score:!0,count:0},276761:{send_one:!0,count:0},276762:{send_one:!1,count:0},276763:{send_one:!1,count:0},310924:{send_one:!1,count:0},253201:{send_one:!1,count:0},253202:{send_one:!1,count:0},241229:{send_one:!0,count:0},223611:{send_one:!1,send_page:!0,count:0},280159:{send_one:!1,count:0},343224:{send_one:!1,count:0}},this.SaveStatsOld(),window.resource&&(window.anonymous="ANONYMOUS_ACCOUNT"===window.anonymous?"":window.anonymous,resource.args.anonymous="ANONYMOUS_ACCOUNT"===resource.args.anonymous?"":resource.args.anonymous,resource.args.fbid="FACEBOOK_ID"===resource.args.fbid?"":resource.args.fbid,resource.args.gliveusername="GLIVE_USERNAME"===resource.args.gliveusername?"":resource.args.gliveusername,resource.args.gcid="GAMECENTER_UID"===resource.args.gcid?"":resource.args.gcid,window.anonymous=window.anonymous||resource.get_args("anonymous")||resource.get_args("fbid")||resource.get_args("gliveusername")||resource.get_args("gcid")||resource.get_args("hdidfv")||resource.get_args("udid")),void 0!==window.anonymous&&null!=window.anonymous&&-1==window.anonymous.indexOf("anonymous")&&-1==window.anonymous.indexOf("iphone")&&-1==window.anonymous.indexOf("android")&&-1==window.anonymous.indexOf("google")&&(window.anonymous="anonymous:"+window.anonymous)}return n(t,[{key:"SaveStatsOld",value:function(){var t=window.saveStats;window.saveStats=function(e,i){if(!i)return t(e,i);var r=window.strStatsUrl+e,n=i.replace(/link:/i,""),o={track:r,redir:n};window.ets_redirect_data&&(o.ets=window.ets_redirect_data);var a=("undefined"==typeof mraid?"link:":"")+"https://game-portal.gameloft.com/2093/redirect.php?track_redir=base64"+window.btoa(JSON.stringify(o));window.redirect?redirect(a):window.REVIEW&&window.open(a.replace("link:",""),"_blank")}}},{key:"SetFormat",value:function(t){t==this.TRCKING_FORMAT_MINT_MIG?this.TRACKING_EVENT_TYPE_ID=226759:t==this.TRCKING_FORMAT_HYBRID?this.TRACKING_EVENT_TYPE_ID=234553:t==this.TRCKING_FORMAT_SITE?this.TRACKING_EVENT_TYPE_ID=222996:t==this.TRCKING_FORMAT_BLS?this.TRACKING_EVENT_TYPE_ID=226757:t==this.TRCKING_FORMAT_VIDEO_FORM?this.TRACKING_EVENT_TYPE_ID=316786:t==this.TRCKING_FORMAT_VINT?this.TRACKING_EVENT_TYPE_ID=226760:t==this.TRCKING_FORMAT_VSCORE?this.TRACKING_EVENT_TYPE_ID=327869:this.TRACKING_EVENT_TYPE_ID=200116,this.format=t}},{key:"SetScoreParam",value:function(t){this.score=t}},{key:"SetPageInfo",value:function(t,e){this.page=t,this.timeSpentOnPage=e}},{key:"SetPixelTracking",value:function(t,e){this.evTrack[t]&&(this.evTrack[t].pixel_tracking=e)}},{key:"GetSourceGameGGI",value:function(){var t=resource.get_args("ggi");if(void 0===t){var e=decodeURIComponent(window.client_id||resource.get_args("clientid")||""),i=e.split(":");i.length>=4&&(t=isNaN(i[0])?i[2]:i[1])}return parseInt(t)}},{key:"SendEventTracking",value:function(t,e,i,r){if((window.DEBUG||!window.campaign_id||!window.creative_id||!window.anonymous)&&void 0===window.mraid)return e&&e(!1),!1;if(i=void 0===i?"N/A":""+i,this.evTrack[t]){if(this.evTrack[t].send_one&&this.evTrack[t].count>0)return e&&e(!1),!1;this.evTrack[t].count++}if(t===this.TRACKING_ACTION_CLOSE&&("N/A"==i&&(this.format==this.TRCKING_FORMAT_MIG?0==this.evTrack[this.TRACKING_ACTION_COMPLETE_ENGAGEMENTS].count&&(i="before_completed_engagement"):this.format==this.TRCKING_FORMAT_VIDEO_FORM?0==this.evTrack[this.TRACKING_ACTION_TYPE_END_QUARTILE].count&&(i="before_ad_video_complete"):this.format==this.TRCKING_FORMAT_SITE&&0==this.evTrack[this.TRACKING_ACTION_TYPE_END_QUARTILE].count&&(i="before_completed_engagement")),this.format==this.TRCKING_FORMAT_VSCORE&&this.evTrack[this.TRACKING_ACTION_COMPLETE_ENGAGEMENTS].count>0))return e&&e(!1),!1;var n=0;if(t===this.TRACKING_ACTION_IMPRESSIONS){if(GameConfig.isUseVPaidTracking)n=0;else if(window.starting_time){var o=(new Date).getTime();n=o-window.starting_time}}else if(t===this.TRACKING_ACTION_AD_LOADED){if(window.starting_time){var a=(new Date).getTime();n=a-window.starting_time}}else t===this.TRACKING_ACTION_ENGAGEMENTS?this.startLoadingTime=gTotalTimeSpent:t!==this.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE&&t!==this.TRACKING_ACTION_TYPE_VIDEO_STARTED||(n=Math.ceil(1e3*(gLoadingTimeSpent>0?gLoadingTimeSpent:gTotalTimeSpent)));var s=void 0;if(this.format==this.TRCKING_FORMAT_MIG)s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"N/A",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",score:this.evTrack[t].send_score?this.score:0,source_game:this.GetSourceGameGGI(),time_spent_loading:t===this.TRACKING_ACTION_IMPRESSIONS?0:n,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),total_time_spent_playing:this.evTrack[t].send_time_spent?Math.ceil(gIngameTimeSpent||0):0,ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")||"N/A"}}]};else if(this.format==this.TRCKING_FORMAT_HYBRID)s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"N/A",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",score:this.evTrack[t].send_score?this.score:0,source_game:this.GetSourceGameGGI(),rim_pointcut_id:resource.get_args("location")||"N/A",time_spent_loading:t===this.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE?Math.ceil(1e3*(gTotalTimeSpent-this.startLoadingTime)):n,total_time_spent_ads:Math.ceil(window.gTotalTimeSpent||0),total_time_spent_playing:this.evTrack[t].send_time_spent?Math.ceil(gIngameTimeSpent||0):0,ver:resource.get_param("tracking_version")}}]};else if(this.format==this.TRCKING_FORMAT_SITE)s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",custom_tracking_video_position:0,d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",page:this.evTrack[t].send_page?"Page_"+this.page:"N/A",rim_pointcut_id:resource.get_args("location"),source_game:this.GetSourceGameGGI(),time_spent_loading:t===this.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE?Math.ceil(1e3*(gTotalTimeSpent-this.startLoadingTime)):n,total_time_spent_ads:Math.ceil(window.gTotalTimeSpent||0),total_time_spent_on_page:this.evTrack[t].send_page?Math.ceil(this.timeSpentOnPage):0,ver:resource.get_param("tracking_version")}}]};else if(this.format==this.TRCKING_FORMAT_MINT_MIG)s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",source_game:this.GetSourceGameGGI(),time_spent_loading:n,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}}]};else if(this.format==this.TRCKING_FORMAT_BLS)s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",source_game:this.GetSourceGameGGI(),time_spent_loading:n,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}}]};else if(this.format==this.TRCKING_FORMAT_VIDEO_FORM)s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",source_game:this.GetSourceGameGGI(),time_spent_loading:n,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}}]};else if(this.format==this.TRCKING_FORMAT_VHERO){var h=t===this.TRACKING_ACTION_TYPE_QTE_SUCCESSFUL||t===this.TRACKING_ACTION_TYPE_QTE_FAILED||t===this.TRACKING_ACTION_ENGAGEMENTS?window.QTE_number:0;s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:parseInt(window.campaign_id||0),creative_id:parseInt(window.creative_id||0),custom_tracking:i||"N/A",d_country:window.deviceCountry||"N/A",ip_country:window.ipCountry||"N/A",qte_number:h,source_game:this.GetSourceGameGGI(),time_spent_loading:t===this.TRACKING_ACTION_IMPRESSIONS?0:n,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}}]}}else if(this.format==this.TRCKING_FORMAT_VINT)s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",rim_pointcut_id:resource.get_args("location"),source_game:this.GetSourceGameGGI(),time_spent_loading:t===this.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE?Math.ceil(1e3*(gTotalTimeSpent-this.startLoadingTime)):n,total_time_spent_ads:Math.ceil(window.gTotalTimeSpent||0),ver:resource.get_param("tracking_version")}}]};else if(this.format==this.TRCKING_FORMAT_VBAN)s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",rim_pointcut_id:resource.get_args("location"),source_game:this.GetSourceGameGGI(),time_spent_loading:t===this.TRACKING_ACTION_IMPRESSIONS?0:n,total_time_spent_ads:t===this.TRACKING_ACTION_ADS_EXPAND&&1==this.evTrack[t].count?0:Math.ceil(window.gTotalTimeSpent||0),ver:resource.get_param("tracking_version")}}]};else if(this.format==this.TRCKING_FORMAT_VSCORE){var u=t===this.TRACKING_ACTION_TYPE_QTE_SUCCESSFUL||t===this.TRACKING_ACTION_TYPE_QTE_FAILED?window.QTE_number:0,l=t===this.TRACKING_ACTION_COMPLETE_ENGAGEMENTS||t===this.TRACKING_ACTION_FIRST_COMPLETE_ENGAGEMENTS;s={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[{gdid:0,type:this.TRACKING_EVENT_TYPE_ID,token:this.token++,data:{action_type:t,ad:this.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:parseInt(window.campaign_id||0),creative_id:parseInt(window.creative_id||0),custom_tracking:i||"N/A",d_country:window.deviceCountry||"N/A",ip_country:window.ipCountry||"N/A",qte_number:u,score:l?this.score:0,source_game:this.GetSourceGameGGI(),time_spent_loading:t===this.TRACKING_ACTION_IMPRESSIONS?0:n,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}}]}}if(this.evTrack[t].pixel_tracking){var c=this.evTrack[t].pixel_tracking,d=new Image;d.src=c,d.style.width=0,d.style.height=0,document.body.appendChild(d)}if(!r){var f=new FormData;f.append("data",JSON.stringify(s));return this.SendPayload(this.TRACKING_API_URL,[t],f,e,!1)}"undefined"!=typeof mraid?(window.ets_redirect_data=s,window.call_client(window.creative_id,"click",r)):(window.ets_redirect_data=s,window.call_client(window.creative_id,"GLADS_CLICK_INTERSTITIAL","click",0,0,"","link:"+r),e&&e(!0))}},{key:"SendPayload",value:function(t,e,i,r,n){var o=this,a=new XMLHttpRequest;return n?(a.onload=function(t){e.forEach(function(t){o.evTrack[t]&&o.evTrack[t].count++})},a.onerror=function(n){setTimeout(function(){o.SendPayload(t,e,i,r,!0)},1e3)}):(a.onload=function(t){r&&(r(!0),r=null)},a.onerror=function(n){r&&(r(!1),r=null),e.forEach(function(t){o.evTrack[t]&&o.evTrack[t].count--}),o.SendPayload(t,e,i,r,!0)}),r&&setTimeout(function(){r&&(r(!1),r=null)},2e3),a.open("POST",t,!0),a.send(i),a}},{key:"SendMultiEventTracking",value:function(t,e,i,r){var n=this;if(window.DEBUG||!window.campaign_id||!window.creative_id||!window.anonymous)return e&&e(!1),!1;i=void 0===i?"N/A":""+i;var o={ggi:parseInt(resource.get_param("tracking_ggi")),entity_type:resource.get_param("tracking_entity_type"),entity_id:"2093:"+resource.get_param("tracking_ggi")+":"+resource.get_param("tracking_version")+":HTML5:Ads",proto_ver:resource.get_param("tracking_version"),events:[]};if(t.forEach(function(t){if(n.evTrack[t]){if(n.evTrack[t].send_one&&n.evTrack[t].count>0)return!1;n.evTrack[t].count++}t===n.TRACKING_ACTION_CLOSE&&0==n.evTrack[n.TRACKING_ACTION_COMPLETE_ENGAGEMENTS].count&&n.format!=n.TRCKING_FORMAT_BLS&&(i="before_completed_engagement");var e=0;if(t===n.TRACKING_ACTION_IMPRESSIONS){if(GameConfig.isUseVPaidTracking)e=0;else if(window.starting_time){var r=(new Date).getTime();e=r-window.starting_time}}else if(t===n.TRACKING_ACTION_AD_LOADED){if(window.starting_time){var a=(new Date).getTime();e=a-window.starting_time}}else t===n.TRACKING_ACTION_ENGAGEMENTS?n.startLoadingTime=gTotalTimeSpent:t!==n.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE&&t!==n.TRACKING_ACTION_TYPE_VIDEO_STARTED||(e=Math.ceil(1e3*(gLoadingTimeSpent>0?gLoadingTimeSpent:gTotalTimeSpent)));if(n.format==n.TRCKING_FORMAT_MIG)o.events.push({gdid:0,type:n.TRACKING_EVENT_TYPE_ID,token:n.token++,data:{action_type:t,ad:n.GetAdsStats()||"N/A",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",score:n.evTrack[t].send_score?n.score:0,source_game:n.GetSourceGameGGI(),time_spent_loading:t===n.TRACKING_ACTION_IMPRESSIONS?0:e,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),total_time_spent_playing:n.evTrack[t].send_time_spent?Math.ceil(gIngameTimeSpent||0):0,ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")||"N/A"}});else if(n.format==n.TRCKING_FORMAT_HYBRID)o.events.push({gdid:0,type:n.TRACKING_EVENT_TYPE_ID,token:n.token++,data:{action_type:t,ad:n.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",score:n.evTrack[t].send_score?n.score:0,source_game:n.GetSourceGameGGI(),rim_pointcut_id:resource.get_args("location"),time_spent_loading:t===n.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE?Math.ceil(1e3*(gTotalTimeSpent-n.startLoadingTime)):e,total_time_spent_ads:Math.ceil(window.gTotalTimeSpent||0),total_time_spent_playing:n.evTrack[t].send_time_spent?Math.ceil(gIngameTimeSpent||0):0,ver:resource.get_param("tracking_version")}});else if(n.format==n.TRCKING_FORMAT_MINT_MIG||n.format==n.TRCKING_FORMAT_BLS)o.events.push({gdid:0,type:n.TRACKING_EVENT_TYPE_ID,token:n.token++,data:{action_type:t,ad:n.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:parseInt(window.campaign_id||0),creative_id:parseInt(window.creative_id||0),custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",source_game:n.GetSourceGameGGI(),time_spent_loading:t===n.TRACKING_ACTION_IMPRESSIONS?0:e,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}});else if(n.format==n.TRCKING_FORMAT_VIDEO_FORM)o.events.push({gdid:0,type:n.TRACKING_EVENT_TYPE_ID,token:n.token++,data:{action_type:t,ad:n.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",source_game:n.GetSourceGameGGI(),time_spent_loading:e,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}});else if(n.format==n.TRCKING_FORMAT_VHERO){var s=t===n.TRACKING_ACTION_TYPE_QTE_SUCCESSFUL||t===n.TRACKING_ACTION_TYPE_QTE_FAILED||t===n.TRACKING_ACTION_ENGAGEMENTS?window.QTE_number:0;o.events.push({gdid:0,type:n.TRACKING_EVENT_TYPE_ID,token:n.token++,data:{action_type:t,ad:n.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:parseInt(window.campaign_id||0),creative_id:parseInt(window.creative_id||0),custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",qte_number:s,source_game:n.GetSourceGameGGI(),time_spent_loading:t===n.TRACKING_ACTION_IMPRESSIONS?0:e,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}})}else if(n.format==n.TRCKING_FORMAT_VINT)o.events.push({gdid:0,type:n.TRACKING_EVENT_TYPE_ID,token:n.token++,data:{action_type:t,ad:n.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",rim_pointcut_id:resource.get_args("location"),source_game:n.GetSourceGameGGI(),time_spent_loading:t===n.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE?Math.ceil(1e3*(gTotalTimeSpent-n.startLoadingTime)):e,total_time_spent_ads:Math.ceil(window.gTotalTimeSpent||0),ver:resource.get_param("tracking_version")}});else if(n.format==n.TRCKING_FORMAT_VBAN)o.events.push({gdid:0,type:n.TRACKING_EVENT_TYPE_ID,token:n.token++,data:{action_type:t,ad:n.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",rim_pointcut_id:resource.get_args("location"),source_game:n.GetSourceGameGGI(),time_spent_loading:t===n.TRACKING_ACTION_IMPRESSIONS?0:e,total_time_spent_ads:t===n.TRACKING_ACTION_ADS_EXPAND&&1==n.evTrack[t].count?0:Math.ceil(window.gTotalTimeSpent||0),ver:resource.get_param("tracking_version")}});else if(n.format==n.TRCKING_FORMAT_VSCORE){var h=t===n.TRACKING_ACTION_TYPE_QTE_SUCCESSFUL||t===n.TRACKING_ACTION_TYPE_QTE_FAILED?window.QTE_number:0,u=t===n.TRACKING_ACTION_COMPLETE_ENGAGEMENTS||t===n.TRACKING_ACTION_FIRST_COMPLETE_ENGAGEMENTS;o.events.push({gdid:0,type:n.TRACKING_EVENT_TYPE_ID,token:n.token++,data:{action_type:t,ad:n.GetAdsStats()||"",anon_id:decodeURIComponent(window.anonymous)||"",campaign_id:parseInt(window.campaign_id||0),creative_id:parseInt(window.creative_id||0),custom_tracking:i||"N/A",d_country:window.deviceCountry||"",ip_country:window.ipCountry||"",qte_number:h,score:u?n.score:0,source_game:n.GetSourceGameGGI(),time_spent_loading:t===n.TRACKING_ACTION_IMPRESSIONS?0:e,total_time_spent_ads:Math.ceil(gTotalTimeSpent||0),ver:resource.get_param("tracking_version"),rim_pointcut_id:resource.get_args("location")}})}if(n.evTrack[t].pixel_tracking){var l=n.evTrack[t].pixel_tracking,c=new Image;c.src=l,c.style.width=0,c.style.height=0,document.body.appendChild(c)}}),!r){var a=new FormData;a.append("data",JSON.stringify(o));return this.SendPayload(this.TRACKING_MULTI_API_URL,t,a,e,!1)}window.ets_redirect_data=o,window.call_client(window.creative_id,"GLADS_CLICK_INTERSTITIAL","click",0,0,"","link:"+r),e&&e(!0)}},{key:"GetAdsStats",value:function(){return"undefined"==typeof resource?"fullscreen":resource.get_args("ad")}}]),t}();t.exports=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(30),a=i(37),s=i(38),h=i(11),u=function(){function t(){r(this,t),this.Collision2Rect=function(t,e){return!(t.x+t.width<e.x||t.y+t.height<e.y||e.x+e.width<t.x||e.y+e.height<t.y)},this.token=new PIXI.Container,this.advertisement=new PIXI.Text,this.tokenIcon=null,this.infoBtn=PIXI.Sprite.fromImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjYwODNGNDk1NTQzMTFFNTlDQTg5MEJFMjY0MURFMTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjYwODNGNEE1NTQzMTFFNTlDQTg5MEJFMjY0MURFMTMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGNjA4M0Y0NzU1NDMxMUU1OUNBODkwQkUyNjQxREUxMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGNjA4M0Y0ODU1NDMxMUU1OUNBODkwQkUyNjQxREUxMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pva4zFwAAAkQSURBVHja7FsLTFRnFr4wDwas0hJkAIX6ZMRspT4awKQJ+EJrCVIw2d02miIoMQqxZbfSNBqzptimVsGEWPFRG01rQ6sELAtVsXFXgkVcawWhxSrKY9CAL5gBZpj9znCuvUzGR+m9w5Tdk3xw/8vl3vPd//z/Of/5z/Ww2WyCQjIBeBEIBwzc1gO+gDdfYwLuAkbgGlAP1AH/4bbs4iEzYSL3CpAATAUCh3ifNuAnoAj4hl+C2xBWA0uBFGChpPdIrO3t7XeNRmPrzZs322/cuHHn1q1bPS0tLWb6Y3BwsG7s2LFeISEhz44fPz5Ar9cHBQQEkAWoJPcgK/gW2A8cByzDSXgxkAXMl5zrqaysrDt9+nRDdXV1w6lTp1q6urp6+/r6SFErYGPYn89QaTQa9ahRo7Tz5s0LnjNnTlhMTExYdHQ0WYyX5N4nge1AqasJTwL+AfyFFRbQey3FxcVn9+3bV1NXV9dqMpl6cFrDveUhIehMbJLf9FL6vL29vaZNmxaUmpo6Kz4+fi6sIFhyzefAJqDRFYTfBN4XxydMti0vL++fBw8erILZ3meC6seQe1qxsflaYe6jV65cGZmRkbEYJi/OCzTRZQMHlCLsw+aULpru3r17y3NycsqvXr3aKelNJcTe65MmTXouOzt7EXp9kcTUd/Ow6pKT8FjgU56ByXybMjMzDx09erRWYaJOiScmJk7Pzc19A2YeyudpTK8AbstBmG5aCLxkv3NpaWV6evqhpqamu/yWPQTXCincExoa6rt79+7XlyxZMpfPVwPJwPXfQ1jPrmA2Nfbs2VOyYcOGwu7ubtEdDadYfHx8hB07diSvXr36VT53nl2kcSiEacx+DcRRY9euXUUw469wPRH1FNxD+j08PCyYNJPWrVuXwOfKgNeAbmf/8DjFPxbJUs9ihix0M7J2/Umn9evXF5KOfC6Odf9NPfwmRzZCeXn52YSEhE/MZrPKzcgO6mmdTmc9duzYmri4OHFMpzhzWc4ITwb+RX4WE1NTbGzsh3A7D9xgzD5xTMNtPVNRUfE3TGjPczz+MvDzk0zaHlTgRfSuXbv2EMjeUYCszSHElEPUpCt0Pky6c2D0/pPGMMXGSXSwf//+8uPHj9c6xLJyEO3TarUqmKAWE47t9y4GHMSLdCbduf0ac3JKmMboO/Qb4aJxy5YtZRxUyOlnrZjpo2pra7MxWj44efLk6oiICHJ9fXKt/khn0p04SDk5I0xRVAwdIIopRTTVIXME1Yt4+IWdO3eumTx58kQsC8dgfogqLCxMxTKRXGC/TM9Rke7EgdsxYoQoJUxvJo0OsFZthUlU4VAr96RCqx7HYTRlypSpBoOBJpleGZ+lJQ7EhdtpoqWKDw8DYukA8fHZtra2e0rExxizrgpDVcSBuHA7ljk+JEzh2DOY3cxYz1Yr5ILUJSUllY4zM2bWxoaGhiYFLEqN1dx54kTcmONDwsvox7lz5xqweDcqtPrRHjhw4GJWVlbBdUhHR8eDM2fOfJ+cnFzQ3NzcpUBQo7py5UpbVVVVvZSjmrOJlEoRTpw4UY+IqschLyWrEtu3b/93fn7+eU9PTzWeZbZC2BvIHnbi9t3EKSoqKoI5TiDCMwB/dH1/TU1NvcIRlT1/ZTKZzNK2gs/TXLhwoYG4YfrwRzuCyP2J/nL79u07lHBTWAGLr6+vN4IO0YJseO49dHK/QnG6ijgRN7hBP+JKD6EkuYBZrfX+/fu9Ci7oLfC7obCiv2MIf8jIOXLkyJ/9/PzUMvrhQRZFnIib6I08OaMhUN4Yb9qiYO9SbL4YAf5ELy8vNUOXlJS0cMaMGRNkjLYGh3bgRNzE7A0RDmL30ME5I8V8pUajGeXUf6jVOpkXEtI5w9rY2NjB7WAi7MuJOZNCD/110QpxuqJQcIOLbs/cSMYQYR1PWr1KEx4msTE3Ep2n8D8mRNjuE/39/bWC61OurhAP5kZiJsKUXxZCQkK8Ryph5kZyjwjbfRTchR8HHSNpHBMXFdbfftxuJcK0UhFof1alUqlHWvcSJ+LGzetE2L6aCAwMDBo9erR2pPUwOGnATdxxrCfCP/Kk9SxtRnPwMVLECk7jwO05bl8mwj+QG8ZqwnPWrFkGpUK8YZK+mTNnhhE3YWBn8SIdXBO4aGT+/PlhWMnoFArkXS39FKsvWLDAwG3ieE0MPI7Rj8jISEN4eHjgCDFrK3EhTtwukqZ4aEv0Abpet2rVKtoatYwAwpbU1NTZxIm4ASVSwg1ABR0kJibOxaQ25g/ey1a9Xj9m2bJl0dyuYI4PCZMrKrCvn4KDg1JSUiIFefPEok90GrsrkL7thaVGjhs3Tqz8KRDdrVQBqng7TQeZmZlLEI75ydzLnpcvX651PNnV1dVphMiYWrKS7sSB298xt4G1t/RC4APg5YCAAP3mzZvjMAa+4JciRw94bd26taKzs9MEKxKLUSxlZWXfX7p0iQjLkbm0b9Zt2rRpEXGQcHrYcc72h78EltOWY3x8/Ee8g6iTMbbtcbAcrSBfmta8dOnS6cXFxVkYJXRfKsZZPmj4/H9DfKCc7117xguSn5//V8QiNjcPRqjkwUa6MlmBOfzsLAHgTKg24hM6oJqJ3Nzc5RxyuiNp0qmPdJTUd+wRHlGS+LgUz1vCQAmQQHVQeXl5yVQi5Gak7WRJN0mtFum84ZHZgBFQmJYEsvF8rkYY2Pw2DpUwyfM8282hRmlp6dn09PTDXHqoGyayZqVKD0WhjajPALszB9nrGRkZh4uKioaluDQhISEcZvyGZIKi8oaVwK0nJrh+Qw6cdg2ofHgNt3sKCgrKtm3b9q0ry4c3bty4MC0tjartxOoimlzfFmQuH5YKVenl8Ph2WYH4ihUrIhEuurRA3DE4ET8BsIv4CQB6/Xx9fX2bHJ8AGAyGQPTmbIdPAEgo5H1PcNEnAFKhMU3V6PMk5+T6yGNqdHT0dGFwYdwpHlbfDFVhOT/jWQUsEJ7iM57m5mb7bgeWb0/7Gc8JYJ/gBp/xOEo493qiMFAmFDDE+7Tzgv0oz8Bu9aHWo2QiIBaTTGN/ThMOZVN8+BqKYO5xoE/+8wqTuwj8ooRS/xVgAH5nF3uKxBXBAAAAAElFTkSuQmCC"),this.isGameExit=!1}return n(t,[{key:"PrintObject",value:function(t){var e={};for(var i in t)e[i]=String(t[i]);console.log(e)}},{key:"Log",value:function(t){window.DEBUG&&console.log(t)}},{key:"IsOnDevie",value:function(){return!window.DEBUG&&!window.REVIEW}},{key:"OMSGetRoot",value:function(t){return t}},{key:"OMSGetData",value:function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"data/"+t:resource.get_embed_src("data/"+t)}},{key:"OMSGetGuiData",value:function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"data/gui/"+t:resource.get_embed_src("data/gui/"+t)}},{key:"OMSGetImage",value:function(t){return resource.get_embed_src("data/image/"+t)}},{key:"OMSGetToken",value:function(){return resource.get_reward_icon()}},{key:"OMSGetProductLink",value:function(t){return window.ctarequest?(t=t||"CTA1",resource.get_cta_link(t)):resource.get_param("redirect_url")}},{key:"RedirectInfo",value:function(t){window.DEBUG||window.REVIEW?window.open("https://ingameads.gameloft.com/ads/adserver/ad_targeting_info.php?lang=en&data=%7B%22game%22%3A%22DAMA%22%2C%22device%22%3Atrue%7D"):(window.targetingInfoUrl=window.targetingInfoUrl.startsWith("link:")?window.targetingInfoUrl:"link:"+window.targetingInfoUrl,window.mraid&&(window.targetingInfoUrl=window.targetingInfoUrl.replace("link:","")),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CLICK_INFO,function(){window.redirect(window.targetingInfoUrl)},t))}},{key:"Rand",value:function(t,e){return Math.random()*(e-t)+t}},{key:"RandInt",value:function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},{key:"Normalized",value:function(t,e,i,r){var n=t-i,o=e-r,a=Math.sqrt(n*n+o*o);return{x:n/a,y:o/a}}},{key:"CollisionPointRect",value:function(t,e,i){return!(t<i.x||e<i.y||t>i.x+i.width||e>i.y+i.height)}},{key:"InitInfo",value:function(t){return t||(t=.6),this.infoBtn.scale.set(t,t),this.infoBtn.anchor.set(.5),this.infoBtn.interactive=!0,this.infoBtn.hitArea=new PIXI.Rectangle(this.infoBtn.x-40,this.infoBtn.y-40,80,80),this.infoBtn}},{key:"InitToken",value:function(t,e){return 0==this.token.children.length?(this.tokenIcon=new PIXI.Sprite(t),this.tokenIcon.scale.set(e,e),this.token.addChild(new PIXI.Text("")),this.token.addChild(new PIXI.Text("")),this.token.addChild(this.tokenIcon)):(this.tokenIcon.texture=t,this.tokenIcon.scale.set(e,e)),this.token}},{key:"SetTokenInfo",value:function(t,e){for(var i=0,r=t.replace("%d",this.GetRewardAmount()).split("%token%"),n=0;n<r.length;n++){var o=this.token.getChildAt(n);o.text=r[n],o.style=e,o.position.x=i,0==n&&(i+=o.width,this.tokenIcon.position.set(i,(o.height-this.tokenIcon.height)/2),i+=this.tokenIcon.width)}}},{key:"InitAdvertisement",value:function(t,e){this.advertisement.text=t,this.advertisement.style=e}},{key:"SendTrackingAndExit",value:function(t){}},{key:"GetRewardAmount",value:function(){return"undefined"!=typeof reward_amount?reward_amount:5}},{key:"ExitGame",value:function(){"undefined"==typeof mraid?redirect("exit:"):GameConfig.isUseBanner?window.location="mraid://close":"undefined"!=typeof reward_currency?mraid.closeWithReward(reward_currency,!0):mraid.close()}},{key:"DispatchEvent",value:function(t){var e;try{e=new Event(t)}catch(i){e=document.createEvent("Event"),e.initEvent(t,!0,!0)}document.dispatchEvent(e)}},{key:"PauseHostGameMusic",value:function(){window.can_pause_music&&1==can_pause_music&&(console.log("pauseusermusic"),window.location="pauseusermusic:")}},{key:"GetArrayBuffer",value:function(t,e,i){resource.load_buffer(t,function(t,i){e&&e(t,i)},i)}},{key:"CreateAudio",value:function(t){return resource.load_audio(t)}},{key:"LoadAssets",value:function(t,e,i,r){PIXI.loader.on("progress",e),PIXI.loader.on("error",r),PIXI.loader.on("complete",i);var n=0,o=t.length;if(void 0!==window.isMraidTag){var a=!0,s=!1,h=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0)!function(){var t=u.value,e=t.options||{};if(e.loadType==PIXI.loaders.Resource.LOAD_TYPE.IMAGE)PIXI.loader.add(t.name,t.url,e),++n>=o&&PIXI.loader.load();else{var i=t.url.split(".").pop(),r="dataurl";"json"===i&&(r="arraybuffer",e.xhrType=PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON),resource.requester.call("get",t.url,null,r).success(function(i){if("arraybuffer"===r){var a=window.URL.createObjectURL(new Blob([i.response],{type:"application/json"}));PIXI.loader.add(t.name,a,e)}else PIXI.loader.add(t.name,i.response);++n>=o&&PIXI.loader.load()}).error(function(t){})}}()}catch(t){s=!0,h=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw h}}}else{var c=!0,d=!1,f=void 0;try{for(var p,m=t[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var g=p.value,v=g.options||{};PIXI.loader.add(g.name,g.url,v),n++,n==o&&PIXI.loader.load()}}catch(t){d=!0,f=t}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}}}},{key:"LoadPackage",value:function(t,e,i){var r=this,n=[],u=new PIXI.loaders.Loader;for(var l in CoreHeader[t]){var c=CoreHeader[t][l];c.alias&&n.push({alias:c.alias,url:this.OMSGetImage(c.image),options:{loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR}})}var d=[];n.forEach(function(t){u.resources[t.alias]||d.push(new Promise(function(e,i){void 0!==window.isMraidTag?resource.requester.call("get",t.url,null,"dataurl").success(function(i){u.add(t.alias,i.response),e&&e()}).error(i):(u.add(t.alias,t.url,t.options),e&&e())}))}),Promise.all(d).then(function(n){u.load().once("error",i).once("complete",function(n){r.GetArrayBuffer(r.OMSGetGuiData(t,!0),function(i){a.Load(i);var r=-1;for(var n in CoreHeader[t]){r++;var l=CoreHeader[t][n];if(0==l.type){var c=s.Load(a.GetData(r));h.Add(l.id,u.resources[l.alias].texture,c)}else if(1==l.type){var d=new o;d.Load(a.GetData(r)),GuiManager.Add(l.id,d)}}a.Close(),e&&e()},i)})})}},{key:"SendMoatEvent",value:function(t){}},{key:"InitMoatEvent",value:function(t,e){this.SendMoatEvent=function(t){try{i.dispatchEvent({type:t,adVolume:deviceVolume})}catch(t){}};var i=initMoatTracking(t,moatParameters,e,"gameloftjsvideoint978229678926",t.src)}}]),t}();t.exports=new u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.url="",this.ext="",this.player=null,this.isLoaded=!1,this.isLoop=!1,this.callback=null,this.onEndAudio=null}return n(t,[{key:"Init",value:function(){this.player&&delete this.player,this.isLoaded=!1}},{key:"GetExtension",value:function(t){return t.substr(t.lastIndexOf("."),4)}},{key:"SetSource",value:function(t){this.player&&delete this.player,this.player=Utils.CreateAudio(t)}},{key:"Onload",value:function(){null!==this.callback&&this.callback(),this.isLoaded=!0}},{key:"IsLoaded",value:function(){return this.isLoaded}},{key:"Load",value:function(t,e){""!=t?(this.isLoaded=!1,this.url=t,this.callback=e,this.ext=this.GetExtension(t),this.SetSource(t),this.player&&(this.player.volume=1,this.player.preload="auto",this.player.onerror=function(){Utils.DispatchEvent("LoadingError")}),this.CheckStatus()):e()}},{key:"OnEndAudio",value:function(){this.player.currentTime=0,this.player.play()}},{key:"CheckStatus",value:function(){this.player&&4==this.player.readyState?(null!=this.callback&&this.callback(),this.isLoaded=!0):setTimeout(this.CheckStatus.bind(this),50)}},{key:"Stop",value:function(){if(this.player)try{this.player.paused||(this.player.pause(),this.player.currentTime=0,this.isLoop&&(this.isLoop=!1,this.player.removeEventListener("ended",this.onEndAudio)))}catch(t){}}},{key:"Play",value:function(t,e){if(this.player)try{this.isLoop=t,this.isLoop&&(this.onEndAudio=this.OnEndAudio.bind(this),this.player.addEventListener("ended",this.onEndAudio)),this.player.volume=e,this.player.play()}catch(t){}}},{key:"Pause",value:function(){if(this.player)try{this.player.pause(),this.player.removeEventListener("ended",this.onEndAudio)}catch(t){}}},{key:"SetVolume",value:function(t){this.player&&(this.player.volume=t)}}]),t}();t.exports=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(169),a=function(){function t(){r(this,t),this.audioElement=null,this.audioFiles=null,this.count=0,this.isMuteSoundPlayed=!1,this.isLoad=!1,this.shouldCheckSound=null}return n(t,[{key:"Init",value:function(){this.audioElement=[],this.isLoad=!1;for(var t=0;t<GameConfig.soundMax;t++)this.audioElement[t]=new o,this.audioElement[t].Init(Utils.OMSGetData("sound/mute.m4a"));this.InitMute()}},{key:"Load",value:function(t){this.audioFiles=t,this.SequentiallyLoad()}},{key:"SequentiallyLoad",value:function(){if(this.count>=this.audioFiles.length)return void(this.isLoad=!0);this.audioElement[this.count].Load(this.audioFiles[this.count++].file,this.SequentiallyLoad.bind(this))}},{key:"GetCurrentTimeMS",value:function(t){return this.audioElement[t]?1e3*this.audioElement[t].currentTime:0}},{key:"IsLoaded",value:function(){return this.isLoad}},{key:"InitMute",value:function(){this.shouldCheckSound=this.ShouldCheckSound.bind(this),document.addEventListener("touchstart",this.shouldCheckSound)}},{key:"ShouldCheckSound",value:function(){if(!this.isMuteSoundPlayed){this.isMuteSoundPlayed=!0,document.removeEventListener("touchstart",this.shouldCheckSound);for(var t=0;t<this.audioElement.length;t++)this.audioElement[t].Play(!1,0),this.audioElement[t].Stop()}}},{key:"SetVolume",value:function(t,e){t<this.audioFiles.length&&this.audioElement[t].SetVolume(e)}},{key:"Play",value:function(t,e){t<this.audioFiles.length&&this.audioElement[t].Play(e,1)}},{key:"Stop",value:function(t){t<this.audioFiles.length&&this.audioElement[t].Stop()}},{key:"Pause",value:function(t){t<this.audioFiles.length&&this.audioElement[t].pause()}}]),t}();t.exports=new a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(e,i,n,o){r(this,t),this.context=e,this.urlList=i,this.onLoad=n,this.bufferList=new Array,this.count=0,this.onError=o}return n(t,[{key:"LoadBuffer",value:function(t,e){var i=this;if(""==t)return void(++i.count==i.urlList.length&&i.onLoad(i.bufferList));Utils.GetArrayBuffer(t,function(t){i.context.decodeAudioData(t,function(t){if(!t)return void i.onError();i.bufferList[e]=t,++i.count==i.urlList.length&&i.onLoad(i.bufferList)},function(t){i.onError()})},function(){i.onError()})}},{key:"Load",value:function(){for(var t=0;t<this.urlList.length;++t)this.LoadBuffer(Utils.OMSGetRoot(this.urlList[t].file),t)}}]),t}();t.exports=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(170),a=i(171),s=function(){function t(){r(this,t),this.context=null,this.gain=[],this.source=[],this.audioBuffer=[],this.audioBufferLoader=null,this.count=0,this.isSupportAudioAPI=!0,this.isLoaded=!1,this.audioStartOffset=[],this.audioStartTime=[],this.shouldCheckSound=null}return n(t,[{key:"CreateAudioGain",value:function(){var t=null;return this.context.createGain||(this.context.createGain=this.context.createGainNode),t=this.context.createGain(),t.connect(this.context.destination),t}},{key:"IsSupportAudioAPI",value:function(){return this.isSupportAudioAPI}},{key:"InitMute",value:function(){for(var t=this.context.createBuffer(2,4410,44100),e=0;e<GameConfig.soundMax;e++)this.audioBuffer[e]=t,this.gain[e]=this.CreateAudioGain(),this.audioStartOffset[e]=0,this.audioStartTime[e]=0;this.shouldCheckSound=this.ShouldCheckSound.bind(this),document.addEventListener("touchstart",this.shouldCheckSound)}},{key:"ShouldCheckSound",value:function(){document.removeEventListener("touchstart",this.shouldCheckSound);for(var t=0;t<this.audioBuffer.length;t++)this.PlaySound(t,!1),this.StopSound(t)}},{key:"Load",value:function(t){if(this.count=t.length,this.isLoaded=!1,this.isSupportAudioAPI){for(var e=0;e<this.count;e++)this.audioStartOffset[e]=0,this.audioStartTime[e]=0;this.audioBufferLoader=new a(this.context,t,this.SoundLoadFinished.bind(this),this.SoundLoadError.bind(this)),this.audioBufferLoader.Load()}else this.LoadSimpleSound(t)}},{key:"SoundLoadError",value:function(){Utils.DispatchEvent("LoadingError")}},{key:"LoadSimpleSound",value:function(t){this.isSupportAudioAPI=!1,o.Load(t)}},{key:"Init",value:function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,this.isLoaded=!1,this.isSupportAudioAPI=void 0!==(window.AudioContext||window.webkitAudioContext),this.isSupportAudioAPI?(this.context=new AudioContext,this.InitMute()):(console.log("Web Audio API is not supported"),o.Init())}},{key:"SoundLoadFinished",value:function(t){for(var e=0;e<t.length;e++)this.audioBuffer[e]=t[e];this.isLoaded=!0}},{key:"IsLoaded",value:function(t){return this.isSupportAudioAPI?this.isLoaded:o.IsLoaded(t)}},{key:"SetVolume",value:function(t,e){this.isSupportAudioAPI?this.GetAudioGain(t).gain.value=e:o.SetVolume(t,e)}},{key:"GetAudioGain",value:function(t){return this.gain[t]}},{key:"GetCurrentTimeMS",value:function(t){return this.isSupportAudioAPI?this.context.currentTime:o.GetCurrentTimeMS(t)}},{key:"PlaySound",value:function(t,e){this.isSupportAudioAPI?this.audioBuffer[t]&&(null!=this.source[t]&&0==this.audioStartOffset[t]&&this.StopSound(t),this.audioStartTime[t]=this.context.currentTime,this.source[t]=this.context.createBufferSource(),this.source[t].connect(this.GetAudioGain(t)),this.source[t].buffer=this.audioBuffer[t],this.source[t].loop=e,this.source[t].start||(this.source[t].start=this.source[t].noteOn),this.source[t].start(0,this.audioStartOffset[t]%this.audioBuffer[t].duration)):o.Play(t,e)}},{key:"StopSound",value:function(t){if(this.isSupportAudioAPI)try{null!=this.source[t]&&(this.source[t].stop||(this.source[t].stop=this.source[t].noteOff),this.source[t].stop(0),this.audioStartOffset[t]=0,this.source[t]=null)}catch(t){}else o.Stop(t)}},{key:"Play",value:function(t,e){this.PlaySound(t,e)}},{key:"Stop",value:function(t){this.StopSound(t)}},{key:"Pause",value:function(t){if(this.isSupportAudioAPI){if(null!=this.source[t]){try{this.source[t].stop(0)}catch(t){}this.audioStartOffset[t]+=this.context.currentTime-this.audioStartTime[t]}}else o.Pause(t)}},{key:"StopAll",value:function(){for(var t=0;t<this.count;t++)this.StopSound(t)}}]),t}();t.exports=new s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function t(){r(this,t),this.TEMPLATE_GUI_GFXITEM=200,this.TEMPLATE_GUI_TEXTITEM=201,this.FILLRECTITEM_WIDTH_INDEX=0,this.FILLRECTITEM_HEIGHT_INDEX=1,this.FILLRECTITEM_ALPHA_INDEX=2,this.FILLRECTITEM_RED_INDEX=3,this.FILLRECTITEM_GREEN_INDEX=4,this.FILLRECTITEM_BLUE_INDEX=5,this.GFXITEM_SPRITE_INDEX=0,this.GFXITEM_FRAME_INDEX=1,this.GFXITEM_ANIM_INDEX=2,this.TEXTITEM_TEXTID_INDEX=0,this.TEXTITEM_TEXTSIZE_INDEX=1,this.TEXTITEM_WIDTH_INDEX=2,this.TEXTITEM_HEIGHT_INDEX=3,this.TEXTITEM_FONT_INDEX=4,this.TEXTITEM_RED_INDEX=5,this.TEXTITEM_GREEN_INDEX=6,this.TEXTITEM_BLUE_INDEX=7,this.TEXTITEM_ALIGN_INDEX=8,this.TEXTITEM_SHADOW_INDEX=9,this.TEXTITEM_SHADOW_RED_INDEX=10,this.TEXTITEM_SHADOW_GREEN_INDEX=11,this.TEXTITEM_SHADOW_BLUE_INDEX=12,this.ANCHOR_NONE=0,this.ANCHOR_LEFT=1,this.ANCHOR_LEFT_TOP=2,this.ANCHOR_LEFT_CENTER=3,this.ANCHOR_LEFT_BOTTOM=4,this.ANCHOR_RIGHT=5,this.ANCHOR_RIGHT_TOP=6,this.ANCHOR_RIGHT_CENTER=7,this.ANCHOR_RIGHT_BOTTOM=8,this.ANCHOR_TOP=9,this.ANCHOR_TOP_CENTER=10,this.ANCHOR_BOTTOM=11,this.ANCHOR_BOTTOM_CENTER=12,this.ANCHOR_HCENTER_VCENTER=13};t.exports=new n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=(i(30),function(){function t(){r(this,t),this.gui=[]}return n(t,[{key:"Add",value:function(t,e){this.gui[t]=e}},{key:"GetGui",value:function(t){return this.gui[t]}},{key:"Update",value:function(t,e){this.gui[t].Update(e)}}]),t}());t.exports=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.x=0,this.y=0,this.width=0,this.height=0}return n(t,[{key:"Set",value:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}},{key:"Scale",value:function(t,e){return this.x*=t,this.y*=e,this.width*=t,this.height*=e,this}},{key:"Translate",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"Clone",value:function(){var e=new t;return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}}]),t}();t.exports=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(69),a=e.Tween=function(){function t(){r(this,t),this.object=null,this.type=-1,this.start=null,this.end=null,this.percent=0,this.timer=new Timer,this.timerDelay=new Timer}return n(t,[{key:"Init",value:function(t){this.object=t,this.timerDelay.SetDuration(0)}},{key:"Create",value:function(t,e,i,r,n){this.type=t,this.start=e,this.end=i,this.timer.SetDuration(r),this.timerDelay.SetDuration(n)}},{key:"IsDone",value:function(){return this.timer.IsDone()}},{key:"JustFinished",value:function(){return this.timer.JustFinished()}},{key:"Reset",value:function(){this.timer.Reset(),this.timerDelay.Reset()}},{key:"GetFinishOverhead",value:function(){return this.timer.GetOverhead()}},{key:"Goto",value:function(t){var e=(this.end.x-this.start.x)*t,i=(this.end.y-this.start.y)*t,r=1,n=1,o=0;void 0!==this.start.alpha&&(r=(this.end.alpha-this.start.alpha)*t,this.object.alpha=this.start.alpha+r),void 0!==this.start.scale&&(n=(this.end.scale-this.start.scale)*t,this.object.scale.set(this.start.scale+n,this.start.scale+n)),void 0!==this.start.rotate&&(o=(this.end.rotate-this.start.rotate)*t,this.object.rotation=this.start.rotate+o),void 0!==this.start.x&&(this.object.position.x=this.start.x+e),void 0!==this.start.y&&(this.object.position.y=this.start.y+i)}},{key:"LinearEase",value:function(t){return t}},{key:"ElasticEaseIn",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticEaseOut",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticEaseInOut",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackEaseIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackEaseOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackEaseInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceEaseIn",value:function(t){return 1-this.BounceEaseOut(1-t)}},{key:"BounceEaseOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceEaseInOut",value:function(t){return t<.5?.5*this.BounceEaseIn(2*t):.5*this.BounceEaseOut(2*t-1)+.5}},{key:"QuadEaseOut",value:function(t){return t*(2-t)}},{key:"SinusodialEaseIn",value:function(t){return 1-Math.cos(t*(Math.PI/2))}},{key:"SinusodialEaseOut",value:function(t){return Math.sin(t*(Math.PI/2))}},{key:"SinusodialEaseInOut",value:function(t){return-.5*(Math.cos(Math.PI*t)-1)}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"Update",value:function(t){if(this.timerDelay.Update(t),this.timerDelay.IsDone()){switch(this.timer.Update(t),this.type){case o.LINEAR_EASE:this.percent=this.LinearEase(1-this.timer.GetTimePercent());break;case o.ELASTIC_EASE_IN:this.percent=this.ElasticEaseIn(1-this.timer.GetTimePercent());break;case o.ELASTIC_EASE_OUT:this.percent=this.ElasticEaseOut(1-this.timer.GetTimePercent());break;case o.ELASTIC_EASE_INOUT:this.percent=this.ElasticEaseInOut(1-this.timer.GetTimePercent());break;case o.BACK_EASE_IN:this.percent=this.BackEaseIn(1-this.timer.GetTimePercent());break;case o.BACK_EASE_OUT:this.percent=this.BackEaseOut(1-this.timer.GetTimePercent());break;case o.BACK_EASE_INOUT:this.percent=this.BackEaseInOut(1-this.timer.GetTimePercent());break;case o.BOUNCE_EASE_IN:this.percent=this.BounceEaseIn(1-this.timer.GetTimePercent());break;case o.BOUNCE_EASE_OUT:this.percent=this.BounceEaseOut(1-this.timer.GetTimePercent());break;case o.BOUNCE_EASE_INOUT:this.percent=this.BackEaseInOut(1-this.timer.GetTimePercent());break;case o.QUAD_EASE_OUT:this.percent=this.QuadEaseOut(1-this.timer.GetTimePercent());break;case o.SINUSODIAL_EASE_IN:this.percent=this.SinusodialEaseIn(1-this.timer.GetTimePercent());break;case o.SINUSODIAL_EASE_OUT:this.percent=this.SinusodialEaseOut(1-this.timer.GetTimePercent());break;case o.SINUSODIAL_EASE_INOUT:this.percent=this.SinusodialEaseInOut(1-this.timer.GetTimePercent());break;case o.EXPONENTIAL_IN:this.percent=this.ExponentialIn(1-this.timer.GetTimePercent());break;case o.EXPONENTIAL_OUT:this.percent=this.ExponentialOut(1-this.timer.GetTimePercent());break;case o.EXPONENTIAL_INOUT:this.percent=this.ExponentialInOut(1-this.timer.GetTimePercent());break;default:this.percent=1-this.timer.GetTimePercent()}this.Goto(this.percent)}}}]),t}(),s=e.TweenInfo=function(){function t(){r(this,t),this.tweens=[],this.index=0,this.loop=0,this.loopIndex=0,this.callback=null}return n(t,[{key:"PreInit",value:function(){this.tweens[0].Goto(0)}},{key:"IsDone",value:function(){for(var t=0;t<this.tweens.length;t++)if(this.loop>0||!this.tweens[t].IsDone())return!1;return!0}},{key:"Reset",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=t;e<this.tweens.length;e++)this.tweens[e].Reset();this.index=t}}]),t}(),h=function(){function t(){r(this,t),this.tweens=[],this.objList=[]}return n(t,[{key:"PreInit",value:function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].PreInit()}},{key:"Create",value:function(t,e,i,r,n,o){var h=new a;h.Init(t),h.Create(e,i,r,n,o);var u=this.GetObjectIndex(t);if(-1==u){var l=new s;l.tweens.push(h),l.index=0,this.tweens.push(l),this.objList.push(t)}else this.tweens[u].tweens.push(h)}},{key:"GetObjectIndex",value:function(t){for(var e=0;e<this.objList.length;e++)if(this.objList[e]===t)return e;return-1}},{key:"SetLoop",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.GetObjectIndex(t);-1!=r&&(this.tweens[r].loop=e,this.tweens[r].loopIndex=i)}},{key:"SetCallback",value:function(t,e){var i=this.GetObjectIndex(t);-1!=i&&(this.tweens[i].callback=e)}},{key:"Reset",value:function(t){var e=this.GetObjectIndex(t);-1!=e&&this.tweens[e].Reset()}},{key:"ResetAll",value:function(){for(var t=0;t<this.tweens.length;t++)this.tweens[t].Reset()}},{key:"Remove",value:function(t){var e=this.GetObjectIndex(t);-1!=e&&(this.tweens.splice(e,1),this.objList.splice(e,1))}},{key:"RemoveAll",value:function(){this.tweens=[],this.objList=[]}},{key:"IsDone",value:function(){for(var t=0;t<this.tweens.length;t++)if(!this.tweens[t].IsDone())return!1;return!0}},{key:"Update",value:function(t){for(var e=0;e<this.tweens.length;e++){var i=this.tweens[e],r=i.tweens[i.index];if(r.Update(t),r.JustFinished()&&null!=i.callback&&i.callback(),r.IsDone()){var n=r.GetFinishOverhead();i.index<i.tweens.length-1?i.index++:-1==i.loop?i.Reset(i.loopIndex):i.loop>1&&(i.loop--,i.Reset(i.loopIndex)),i.tweens[i.index].Update(n)}}}}]),t}();t.exports=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(7),h=i(17),u=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.map=1,t.objects=[],t.objects.map1=new s("4"),t.objects.map2=new s("5"),t.objects.tree=new s("1"),t.Hide(),t.addChild(t.objects.map1),t.addChild(t.objects.map2),t.addChild(t.objects.tree),t}return o(e,t),a(e,[{key:"Hide",value:function(){this.objects.map1.visible=!1,this.objects.map2.visible=!1,this.objects.tree.visible=!1}},{key:"SwitchMap",value:function(t){this.map=t}},{key:"Hit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=t&&(t.animId=8)}},{key:"UpdateInfo",value:function(t,e,i,r,n,o,a){var s=e.p1.screen.scale*r*4,u=e.p1.ground.x+s*h.GetLaneOffset(i.lane,n),l=e.p1.ground.y+a;this.Hide();var c="map"+this.map;switch(i.type){case GameDefine.ROAD_DECORATION_TREE:case GameDefine.ROAD_DECORATION_TREE_MIX:case GameDefine.ROAD_DECORATION_TREE_MIX_BRUSH:case GameDefine.ROAD_DECORATION_FLAG:case GameDefine.ROAD_DECORATION_BRUSH:c="tree"}this.objects[c].SetAnim(i.animId,!0),this.objects[c].visible=!0,this.position.set(u,l),this.scale.set(s,s),this.objects[c].Update(t)}}]),e}(PIXI.Container);t.exports=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(9),h=i(17),u=function(t){function e(t,i){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));o.addChild(new s(t)),o.addChild(new s(t));var a=!0,h=!1,u=void 0;try{for(var l,c=o.children[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){l.value.SetFrame(i)}}catch(t){h=!0,u=t}finally{try{!a&&c.return&&c.return()}finally{if(h)throw u}}return o.bgWidth=o.children[0].GetRect().width,o.offsetX=0,o.offsetY=0,o.speed=0,o.fixed=!1,o}return o(e,t),a(e,[{key:"Update",value:function(t,e,i){var r=void 0,n=void 0;this.offsetX=h.Increase(this.offsetX,this.speed*t,1),r=APP.GetWidth()/2-Math.floor(this.bgWidth*this.offsetX),n=this.fixed?APP.GetHeight()/2+.1*e:e+i,this.children[0].position.set(r,n),this.children[1].position.set(r+this.bgWidth,n)}}]),e}(PIXI.Container);t.exports=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(7),h=(i(9),function(t){function e(){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),a(e,[{key:"Init",value:function(){for(;this.children.length<4;){var t=new s("2");this.addChild(t)}for(var e=0;e<4;e++)this.children[e].SetAnim(26+e%3),this.children[e].rootX=(e+(.2+.6*Math.random()))*APP.GetWidth()/4,this.children[e].rootY=-140-200*Math.random(),this.children[e].position.set(this.children[e].rootX,this.children[e].rootY),this.children[e].scale.set(.3*(1+e%3)+.5*Math.random()),this.children[e].mCountRotation=10*Math.random(),this.children[e].mCountRotationSpeed=2+1*Math.random()}},{key:"Update",value:function(t,e,i,r){this.children.forEach(function(n){var o=n.rootX-0*e,a=n.rootY+Math.min(10*i,450),s=o-n.position.x,h=a-n.position.y,u=s,l=a>n.position.y?(r?.8:.4)*h:Math.min(.15*h,-150);n.position.set(GameDefine.MoveToTarget(n.position.x,o,u,t),GameDefine.MoveToTarget(n.position.y,a,l,t)),n.mCountRotation+=n.mCountRotationSpeed*t,n.rotation=Math.sin(n.mCountRotation)*(4/180*Math.PI)})}}]),e}(PIXI.Container));t.exports=new h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),i=0;return t.STATE={},t.STATE.INACTIVE=i++,t.STATE.ACTIVE=i++,t.mPos={},t.mSpeed={},t.mScale={x:1,y:1},t.mBody={x:0,y:0,z:0,dx:0,dy:0,dz:0,radius:0},t.mState,t.mIsUIObject=!1,t}return o(e,t),a(e,[{key:"SetStateInactive",value:function(){this._SetState(this.STATE.INACTIVE)}},{key:"IsStateInactive",value:function(){return this.mState==this.STATE.INACTIVE}},{key:"SetPos",value:function(t,e,i){this._SetPos(t,e,i),this._UpdateDraw(),this._UpdateBody(this.rotation)}},{key:"GetPos",value:function(){return this.mPos}},{key:"SetRotation",value:function(t){this.rotation=t}},{key:"SetScale",value:function(t,e){this.mScale.x=t,this.mScale.y=e}},{key:"GetBody",value:function(){return this.mBody}},{key:"SetIsUIObject",value:function(t){this.mIsUIObject=t}},{key:"_SetState",value:function(t){switch(this.mState=t,this.visible=this.mState!=this.STATE.INACTIVE,this.mState){case this.STATE.INACTIVE:case this.STATE.ACTIVE:}}},{key:"_SetPos",value:function(t,e,i){this.mPos.x=t,this.mPos.y=e,this.mPos.z=i}},{key:"_SetSpeed",value:function(t,e,i){this.mSpeed.x=t,this.mSpeed.y=e,this.mSpeed.z=i}},{key:"_UpdateDraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mPos,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mScale;if(this.mIsUIObject)this.position.set(t.x,t.y),this.scale.set(e.x,e.y);else{this.position.set(APP.GetWidth()/2,APP.GetHeight()/2);this.scale.set(1*e.x,1*e.y)}}},{key:"_UpdateBody",value:function(t){this.mBody.x=this.mPos.x+this.mBody.dx*Math.cos(t)-this.mBody.dy*Math.cos(t+.5*Math.PI),this.mBody.y=this.mPos.y-this.mBody.dx*Math.sin(t)+this.mBody.dy*Math.sin(t+.5*Math.PI),this.mBody.z=this.mPos.z+this.mBody.dz}}]),e}(PIXI.Container);t.exports=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function t(){r(this,t),this.SOUNDS_INFO=[{file:"data/sound/M4A/m_lic_kt_bgm.m4a",volume:1},{file:"data/sound/M4A/m_lic_kt_end.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_01.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_02.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_03.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_04.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_05.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_06.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_07.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_08.m4a",volume:1},{file:"data/sound/M4A/sfx_coin_09.m4a",volume:1},{file:"data/sound/M4A/sfx_combo_amazing.m4a",volume:1},{file:"data/sound/M4A/sfx_combo_awesome.m4a",volume:1},{file:"data/sound/M4A/sfx_combo_great.m4a",volume:1},{file:"data/sound/M4A/sfx_combo_wonderful.m4a",volume:1},{file:"data/sound/M4A/sfx_frenzy_rainbow.m4a",volume:1},{file:"data/sound/M4A/sfx_move_1.m4a",volume:1},{file:"data/sound/M4A/sfx_move_2.m4a",volume:1},{file:"data/sound/M4A/sfx_move_3.m4a",volume:1},{file:"data/sound/M4A/sfx_move_4.m4a",volume:1},{file:"data/sound/M4A/sfx_reaction_scared.m4a",volume:1},{file:"data/sound/M4A/sfx_reaction_wow.m4a",volume:1},{file:"data/sound/M4A/sfx_red_coin.m4a",volume:1},{file:"data/sound/M4A/sfx_ui_replay.m4a",volume:1},{file:"data/sound/M4A/sfx_ui_timer.m4a",volume:1}],this.SINGLE_SOUNDS_INFO=[{file:"data/sound/M4A/m_lic_kt_bgm.m4a",volume:1},{file:"data/sound/M4A/m_lic_kt_end.m4a",volume:1}]};t.exports=new n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.Reset(),this.CAN_SHOW_FORM=!1,this.OPEN_CHEAT=!1,this.IS_BROWSER=!1}return n(t,[{key:"Reset",value:function(){this.GAME_SPEED_BASE=60,this.GAME_TIMEOUT=47,this.GAME_TIMER_WARNING=5,this.GAME_SPEED_TUTORIAL=50,this.GAME_SPEED_NORMAL=80,this.GAME_SPEED_FAST=120,this.GAME_SPEED_BOOST=3,this.GAME_SPEED_TUTORIAL_DECREASE=2,this.GAME_OBJECTS_SEGMENT_SCALE=3,this.GAME_DRAG_DISTANCE_TO_MOVE=100,this.GAME_MESH_COL_MAX=4,this.GAME_OBJECT_PLANE_SIZE=100,this.GAME_PLAYER_SCARE_TIME=2e3,this.GAME_PLAYER_EXCITITED_TIME=3e3,this.ROAD_SCALE=5,this.LENSFLARE_SUN_POS_Y=100,this.LENSFLARE_MOVE_OFFSET_X=20,this.LENSFLARE_MOVE_OFFSET_Y=30,this.GAME_STATE_NONE=0,this.GAME_STATE_TUTORIAL_CHECK_TURN_LEFT=this.GAME_STATE_NONE+1,this.GAME_STATE_TUTORIAL_TURN_LEFT=this.GAME_STATE_TUTORIAL_CHECK_TURN_LEFT+1,this.GAME_STATE_TUTORIAL_CHECK_TURN_RIGHT=this.GAME_STATE_TUTORIAL_TURN_LEFT+1,this.GAME_STATE_TUTORIAL_TURN_RIGHT=this.GAME_STATE_TUTORIAL_CHECK_TURN_RIGHT+1,this.GAME_STATE_NORMAL=this.GAME_STATE_TUTORIAL_TURN_RIGHT+1,this.GAME_STATE_FINISHED=this.GAME_STATE_NORMAL+1,this.MAP_STATE_NORMAL=0,this.MAP_STATE_FRENZY=this.MAP_STATE_NORMAL+1,this.PLAYER_STATE_NONE=0,this.PLAYER_STATE_MOVE_LEFT=this.PLAYER_STATE_NONE+1,this.PLAYER_STATE_MOVE_RIGHT=this.PLAYER_STATE_MOVE_LEFT+1,this.PLAYER_STATE_BOOST=this.PLAYER_STATE_MOVE_RIGHT+1,this.PLAYER_MOVE_SPEED=.02,this.PLAYER_BOOST_SPEED=6,this.PLAYER_CONSTRAIN_LEFT=-.65,this.PLAYER_CONSTRAIN_RIGHT=.65,this.PLAYER_OFFSET_Z=200,this.PLAYER_BOOST_OFFSET_Z=200,this.PLAYER_ROTATE_LEFT=-20*Math.PI/180,this.PLAYER_ROTATE_RIGHT=20*Math.PI/180,this.ROAD_LANE_LEFT=0,this.ROAD_LANE_LEFT_1=this.ROAD_LANE_LEFT+1,this.ROAD_LANE_MIDDLE_LEFT=this.ROAD_LANE_LEFT_1+1,this.ROAD_LANE_MIDDLE=this.ROAD_LANE_MIDDLE_LEFT+1,this.ROAD_LANE_MIDDLE_RIGHT=this.ROAD_LANE_MIDDLE+1,this.ROAD_LANE_RIGHT_1=this.ROAD_LANE_MIDDLE_RIGHT+1,this.ROAD_LANE_RIGHT=this.ROAD_LANE_RIGHT_1+1,this.ROAD_LANE_MAX=this.ROAD_LANE_RIGHT+1,this.ROAD_DECORATION_TREE=1,this.ROAD_DECORATION_HOUSE_LEFT1=this.ROAD_DECORATION_TREE+1,this.ROAD_DECORATION_HOUSE_LEFT2=this.ROAD_DECORATION_HOUSE_LEFT1+1,this.ROAD_DECORATION_HOUSE_LEFT3=this.ROAD_DECORATION_HOUSE_LEFT2+1,this.ROAD_DECORATION_HOUSE_LEFT4=this.ROAD_DECORATION_HOUSE_LEFT3+1,this.ROAD_DECORATION_HOUSE_RIGHT1=this.ROAD_DECORATION_HOUSE_LEFT4+1,this.ROAD_DECORATION_HOUSE_RIGHT2=this.ROAD_DECORATION_HOUSE_RIGHT1+1,this.ROAD_DECORATION_HOUSE_RIGHT3=this.ROAD_DECORATION_HOUSE_RIGHT2+1,this.ROAD_DECORATION_HOUSE_RIGHT4=this.ROAD_DECORATION_HOUSE_RIGHT3+1,this.ROAD_DECORATION_CLOUND=this.ROAD_DECORATION_HOUSE_RIGHT4+1,this.ROAD_DECORATION_FLOOR=this.ROAD_DECORATION_CLOUND+1,this.ROAD_DECORATION_FLAG=this.ROAD_DECORATION_FLOOR+1,this.ROAD_DECORATION_TREE_MIX=this.ROAD_DECORATION_FLAG+1,this.ROAD_DECORATION_TREE_MIX_BRUSH=this.ROAD_DECORATION_TREE_MIX+1,this.ROAD_OBSTACLE_ITEM=this.ROAD_DECORATION_TREE_MIX_BRUSH+1,this.ROAD_OBSTACLE_RED_ITEM=this.ROAD_OBSTACLE_ITEM+1,this.ROAD_EVIRONMENT_1=this.ROAD_OBSTACLE_RED_ITEM+1,this.ROAD_EVIRONMENT_2=this.ROAD_EVIRONMENT_1+1,this.ROAD_OBSTACLE_FINISH_LINE=this.ROAD_EVIRONMENT_2+1,this.TUTORIAL_SEGMENT_TURN_LEFT=20,this.TUTORIAL_SEGMENT_TURN_RIGHT=50,this.BAR_SPEED=80,this.FRENZY_TIME=6,this.SCORE_MGR_FRENZY_SCORE_MAX=240,this.COMBO_COUNT_TIME=3,this.COMBO_TEXT_SIZE=50,this.COMBO_TEXT_STROKE_THICKNESS=4,this.COMBO_TEXT_POS_Y=APP.GetHeight()/2,this.COMBO_ARR=[null,{addScore:30,textId:101,fillColor:[16774400,16749314],strokeColor:0},{addScore:60,textId:102,fillColor:[16747776,16732929],strokeColor:0},{addScore:90,textId:103,fillColor:[16264728,16712272],strokeColor:0},{addScore:120,textId:104,fillColor:[16254202,9111295],strokeColor:0}],this.SCORE_ARR=[{addScore:10,text:"10",fillColor:[8191764,2349313],strokeColor:0},{addScore:20,text:"20",fillColor:[8191764,2349313],strokeColor:0},{addScore:40,text:"40",fillColor:[8191764,2349313],strokeColor:0}],this.TEXT_IN_GAME={FRENZY:{textId:24,fillColor:[16440328,16146447],strokeColor:0,longTime:2,arrScale:[[0,1],[1,1]],arrAlpha:[[0,0],[.2,1],[.8,1],[1,0]],arrDx:[[0,-570],[1,-570]],arrSpeedX:[[0,1500],[.4,0],[.7,0],[.8,-500],[1,5e3]]},GO:{textId:33,fillColor:[16769536],strokeColor:0,longTime:2,arrScale:[[0,1.2],[1.2,1.2]],arrAlpha:[[0,0],[.2,1],[.8,1],[1,0]],arrDx:[[0,-600],[1,-600]],arrSpeedX:[[0,1500],[.4,0],[.7,0],[.8,-500],[1,5e3]]},TIME_UP:{textId:32,fillColor:[13835556],strokeColor:0,longTime:2,arrScale:[[0,1],[1,1]],arrAlpha:[[0,0],[.2,1],[.8,1],[1,0]],arrDx:[[0,-570],[1,-570]],arrSpeedX:[[0,1500],[.4,0],[.7,0],[.8,-500],[1,5e3]]}},this.PARTICLE_ARR_ITEM_PARTICLE=[12,13,14,15],this.SCORE_FLY_START=900,this.SCORE_FLY_DISTANCE=400,this.SCORE_FLY_SPEED=10,this.SCORE_SIZE=100,this.SCORE_OBSTACLE_STONE=-20,this.SCORE_OBSTACLE_COIN=10,this.SCORE_OBSTACLE_SPECIAL_COIN=20,this.SCORE_COMBO=30,this.SCORE_OBSTACLE_HOLE=-20,this.SCORE_FOR_ONE_STAR=280,this.NORMAL_ALPHA_LIGHT=.5,this.MAX_ALPHA_LIGHT=1,this.SCORE_MAX=3*this.SCORE_FOR_ONE_STAR,this.TUTORIAL_TEXT_STATE_SHOW=0,this.TUTORIAL_TEXT_STATE_HIDE=1,this.TUTORIAL_TEXT_STATE_HOLD=2,this.TIMER_PLAYER_BLINK=1,this.TIMER_BOOST_SPEED=1.5}},{key:"MoveToTarget",value:function(t,e,i,r){return i=Math.abs(i),t<e?Math.min(t+i*r,e):t>e?Math.max(t-i*r,e):t}},{key:"CheckValueInRange",value:function(t,e,i){return t>=Math.min(e,i)&&t<=Math.max(e,i)}},{key:"LinearInterpolation",value:function(t,e,i,r,n){return this.Clamp((t-e)/(i-e)*(n-r)+r,r,n)}},{key:"Clamp",value:function(t,e,i){return t>=Math.max(e,i)?Math.max(e,i):t<=Math.min(e,i)?Math.min(e,i):t}},{key:"GetGUIVer",value:function(){return APP.GetHeight()/APP.GetWidth()>2?9:5}},{key:"GetValueInArray",value:function(t,e){if(e.length>=2)for(var i=e.length-1,r=0;r<i;r++)if(this.CheckValueInRange(t,e[r][0],e[r+1][0]))return this.LinearInterpolation(t,e[r][0],e[r+1][0],e[r][1],e[r+1][1]);return 0}},{key:"UpdateParams",value:function(){this.Reset(),this.GAME_SPEED_TUTORIAL*=GameConfig.scale,this.GAME_SPEED_NORMAL*=GameConfig.scale,this.GAME_SPEED_FAST*=GameConfig.scale,this.GAME_DRAG_DISTANCE_TO_MOVE*=GameConfig.scale,this.GAME_OBJECT_PLANE_SIZE*=GameConfig.scale,this.PLAYER_OFFSET_Z*=GameConfig.scale,this.SCORE_FLY_START*=GameConfig.scale,this.SCORE_FLY_DISTANCE*=GameConfig.scale,this.SCORE_FLY_SPEED*=GameConfig.scale,this.SCORE_SIZE*=GameConfig.scale}},{key:"IsOnBrowser",value:function(){return void 0!==window.platform&&"browser"==window.platform||void 0===window.platform&&(window.platform="browser",!0)}},{key:"IsOnDeviceBrowser",value:function(){return window.IsOnBrowser()&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}},{key:"GetAdvertisement",value:function(){return Utils.advertisement.anchor.set(1,1),Utils.advertisement.position.set(APP.GetWidth()-24,APP.GetHeight()-6),Utils.advertisement}},{key:"check_constraint",value:function(t,e,i){t.anonymous=t.anonymous||decodeURIComponent(resource.get_args("anonymous")),t.clientid=t.clientid||decodeURIComponent(resource.get_args("clientid"));var r={token:window.token_api||"",campaign_id:window.campaign_id||"",creative_id:window.creative_id||"",device_identificator:(window.idfa||"").length?window.idfa:resource.get_args("idfa")||resource.get_args("hdidfv")||resource.get_args("gl_device_id"),data:t},n="https://201205igp.gameloft.com/un/api/check_constraints.php";return window.location.protocol&&window.location.protocol.match(/http/i)&&(n="api/check_constraints.php"),$.post(n,r).done(function(t){200==jQuery.parseJSON(t).response?e&&e():i&&i()}).fail(function(t){i&&409==t.status&&i()})}},{key:"_MakeTextDebug",value:function(){void 0==this.mTextDebug&&(this.mTextDebug=new PIXI.Text("",{fontFamily:"Arial",fontSize:40,fill:16711680,align:"left",stroke:65280,strokeThickness:4}),this.mTextDebug.anchor.set(0,1))}},{key:"AddTextDebug",value:function(t,e){this._MakeTextDebug(),e.addChild(this.mTextDebug),this.mTextDebug.position.set(10,APP.GetHeight()-100),this.mTextDebug.text+="\n"+Date.now()%1e5+": "+t;var i=this.mTextDebug.text.length;i>300&&(this.mTextDebug.text=this.mTextDebug.text.slice(i-1-300,i))}}]),t}();t.exports=new o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=(i(7),i(9)),h=function(t){function e(){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),a(e,[{key:"Init",value:function(){for(;this.children.length<4;){var t=new s("2");this.addChild(t)}this.offsetY=GameDefine.LENSFLARE_MOVE_OFFSET_Y,this.offsetX=GameDefine.LENSFLARE_MOVE_OFFSET_X,this.posy=GameDefine.LENSFLARE_SUN_POS_Y,this.posx=APP.GetWidth()-150;for(var e=0;e<4;e++)this.children[e].SetFrame(108+e),this.children[e].position.set(this.posx,this.posy),e>0&&(this.children[e].alpha=0)}},{key:"Update",value:function(t,e,i){i=Math.max(i,0);for(var r=0;r<this.children.length;r++){var n=this.posy+.5*i+(this.offsetY+.1*i)*r,o=this.posx-(this.offsetX+e)*r;this.children[r].position.set(this.children[r].position.x+(o-this.children[r].position.x)*t,this.children[r].position.y+(n-this.children[r].position.y)*t),r>0&&(this.children[r].alpha=GameDefine.MoveToTarget(this.children[r].alpha,i>100?1:.2,.5,t))}}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=(i(7),function(t){function e(t){r(this,e);var i=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));i.size=t.size||100,i.time_limit=t.time?Math.max(6,t.time):6,i.time=0,i.is_run=!1;var o=new PIXI.particles.ParticleContainer(1e4,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0});i.addChild(o),i.emiters=[];for(var a=0;a<i.size;a++){var s=new PIXI.Sprite(t.texture);s.anchor.set(.5),s.tint=15258829*Math.random(),s.scale.set(.8+.3*Math.random()),s.tint=8421504*Math.random(),s.direction=new PIXI.Point(2*Math.random()-1,2*Math.random()-1),s.gravity=9.8,s.speed=t.speed||2,s.rotate=.05*Math.random(),s.update=function(t,e){this.velocity={x:this.direction.x*this.speed*(e-t),y:this.direction.y*this.speed*(e-t)},this.position.set(this.x+this.velocity.x,this.y+this.velocity.y+this.gravity*Math.max(t-.01,0)),this.rotation+=this.rotate,this.alpha=(e-t)/e},i.emiters.push(s),o.addChild(s)}return o.scale.set(.5),i}return o(e,t),a(e,[{key:"Update",value:function(t){var e=this;this.is_run&&(this.emiters.forEach(function(t){t.update(e.time,e.time_limit)}),this.time+=t,this.time>this.time_limit&&(this.is_run=!1))}},{key:"Start",value:function(){this.time=0,this.is_run=!0,this.emiters.forEach(function(t){t.position.set(0,0)})}}]),e}(PIXI.Container));t.exports=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function t(e,i,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,i,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)},h=i(7),u=i(180),l=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.mObject,t.mObjectText,t.mRootPos,t.mIsFirstInitParticle=!0,t.mCheckInactive,t.mPercent,t.mLiveTime,t.mArrScale,t.mArrAlpha,t.mArrRotation,t.mArrSpeedX,t.mArrSpeedY,t.mArrSpeedZ,t.mArrDx,t.mArrDy,t.mArrDz,t.mArrSFX,t.mSFXIndex,t}return o(e,t),a(e,[{key:"Init",value:function(){this.mIsFirstInitParticle&&(this.mObject=new h("2"),this.mObjectText=new PIXI.Text("",{}),this.mObjectText.anchor.set(.5,.5),this.addChild(this.mObject),this.addChild(this.mObjectText)),this.mObject.visible=!1,this.mObjectText.visible=!1,this.SetIsUIObject(!1),this.mCheckInactive=!1,this.mPercent=0,this.mLiveTime=1,this.mRootPos={x:0,y:0,z:0},this.mArrScale=[[0,1],[1,1]],this.SetScale(1,1),this.mArrAlpha=[[0,1],[1,1]],this.alpha=0,this.mArrRotation=[],this.rotation=0,this.mArrSpeedX=[],this.mArrSpeedY=[],this.mArrSpeedZ=[],this.mArrDx=[],this.mArrDy=[],this.mArrDz=[],this.mArrSFX=[],this.mSFXIndex=0,this._SetState(this.STATE.ACTIVE),this.mIsFirstInitParticle=!1}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:break;case this.STATE.ACTIVE:this.mPercent=GameDefine.MoveToTarget(this.mPercent,1,1/this.mLiveTime,t);var e=GameDefine.GetValueInArray(this.mPercent,this.mArrScale);this.SetScale(e,e),this.alpha=GameDefine.GetValueInArray(this.mPercent,this.mArrAlpha),this.rotation=GameDefine.GetValueInArray(this.mPercent,this.mArrRotation),this._SetSpeed(GameDefine.GetValueInArray(this.mPercent,this.mArrSpeedX),GameDefine.GetValueInArray(this.mPercent,this.mArrSpeedY),GameDefine.GetValueInArray(this.mPercent,this.mArrSpeedZ)),this.mRootPos.x+=this.mSpeed.x*t,this.mRootPos.y+=this.mSpeed.y*t,this.mRootPos.z+=this.mSpeed.z*t;var i=GameDefine.GetValueInArray(this.mPercent,this.mArrDx),r=GameDefine.GetValueInArray(this.mPercent,this.mArrDy),n=GameDefine.GetValueInArray(this.mPercent,this.mArrDz);this._SetPos(this.mRootPos.x+i,this.mRootPos.y+r,this.mRootPos.z+n),this.mSFXIndex<this.mArrSFX.length&&this.mPercent>=this.mArrSFX[this.mSFXIndex][0]&&(GameDefine.PlaySFX(this.mArrSFX[this.mSFXIndex][1]),this.mSFXIndex++),this._UpdateDraw(),this.mObject.Update(t),this._UpdateInactive(),this.mPercent>=1&&this._SetState(this.STATE.INACTIVE)}}},{key:"SetPos",value:function(t,i,r){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"SetPos",this).call(this,t,i,r),this.mRootPos.x=t,this.mRootPos.y=i,this.mRootPos.z=r}},{key:"SetCheckInactive",value:function(t){this.mCheckInactive=t}},{key:"SetText",value:function(t,e){this.mObjectText.visible=!0,this.mObjectText.text=t,this.mObjectText.style=e}},{key:"SetAnim",value:function(t,e){this.mObject.visible=!0,this.mObject.SetAnim(t,e)}},{key:"SetLiveTime",value:function(t){this.mLiveTime=t}},{key:"SetArrScale",value:function(t){this.mArrScale=t}},{key:"SetArrAlpha",value:function(t){this.mArrAlpha=t}},{key:"SetArrRotation",value:function(t){this.mArrRotation=t}},{key:"SetArrSpeedX",value:function(t){this.mArrSpeedX=t}},{key:"SetArrSpeedY",value:function(t){this.mArrSpeedY=t}},{key:"SetArrSpeedZ",value:function(t){this.mArrSpeedZ=t}},{key:"SetArrDx",value:function(t){this.mArrDx=t}},{key:"SetArrDy",value:function(t){this.mArrDy=t}},{key:"SetArrDz",value:function(t){this.mArrDz=t}},{key:"SetArrSFX",value:function(t){this.mArrSFX=t,this.mSFXIndex=0}},{key:"GetWidth",value:function(){return this.mObject.GetRect().width*this.mScale.x}},{key:"_UpdateInactive",value:function(){this.mCheckInactive&&this.position.x+this.mObject.GetRect().width*this.scale.x<0&&this._SetState(this.STATE.INACTIVE)}}]),e}(u);t.exports=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(185),a=function(){function t(){r(this,t);var e=0;this.STATE={},this.STATE.INACTIVE=e++,this.STATE.ACTIVE=e++,this.mContainerParticle=new PIXI.Container,this.mContainerParticleUI=new PIXI.Container,this.mArrParticle=[],this.mArrParticleUI=[],this.mIsFirstInitParticleMgr=!0,this.mState}return n(t,[{key:"Init",value:function(){this.mIsFirstInitParticleMgr,this._InactiveArrParticle(this.mArrParticle),this._InactiveArrParticle(this.mArrParticleUI),this._SetState(this.STATE.ACTIVE),this.mIsFirstInitParticleMgr=!1}},{key:"Update",value:function(t){switch(this.mState){case this.STATE.INACTIVE:break;case this.STATE.ACTIVE:this._UpdateArrParticle(t,this.mArrParticle),this._UpdateArrParticle(t,this.mArrParticleUI)}}},{key:"MakeItemParticle",value:function(t,e,i){var r=this._GetObject(this.mArrParticle,o,this.mContainerParticle);r.Init(),r.SetAnim(GameDefine.PARTICLE_ARR_ITEM_PARTICLE[Math.floor(GameDefine.PARTICLE_ARR_ITEM_PARTICLE.length*Math.random())],!1),r.SetPos(t,e,i),r.SetCheckInactive(!0),r.SetLiveTime(.4+.3*Math.random()),r.SetIsUIObject(!0);var n=.5+.5*Math.random();r.SetArrScale([[0,0],[.2,1.3*n],[.3,1*n],[.6,1*n],[1,0]]),r.SetArrAlpha([[0,0],[.2,1],[.8,1],[1,0]]);var a=2*Math.random()*Math.PI,s=a-3+6*Math.random();r.SetArrRotation([[0,a],[1,s]]),r.SetArrSpeedX([[0,1400*Math.random()-700],[1,0]]),r.SetArrSpeedY([[0,1400*Math.random()-700],[1,0]])}},{key:"MakeRainBowParticle",value:function(t,e,i){var r=this._GetObject(this.mArrParticle,o,this.mContainerParticle);r.Init(),r.SetAnim(SPRITE_GAME_ANIM_FRENZY_PARTICLE,!1),r.SetPos(t+-20*Math.random(),e+(40*Math.random()-20),i),r.SetCheckInactive(!0),r.SetLiveTime(.4+.2*Math.random()),r.SetArrScale([[0,1+1*Math.random()],[1,.3]]),r.SetArrAlpha([[0,1],[.6,1],[1,0]]),r.SetArrSpeedX([[0,700+800*Math.random()],[1,700]]),r.SetArrSpeedY([[0,1e3*Math.random()-500],[1,0]])}},{key:"MakeWind",value:function(t,e,i,r){var n=this._GetObject(this.mArrParticle,o,this.mContainerParticle);n.Init(),n.SetAnim(SPRITE_GAME_ANIM_WIND,!1),n.SetPos(t,e,i),n.SetCheckInactive(!0),n.SetLiveTime(10),n.SetArrScale([[0,.7],[1,.7]]),n.SetArrAlpha([[0,r],[1,r]]),n.SetArrSpeedX([[0,-2500],[1,-2500]])}},{key:"MakeTextCombo",value:function(t,e,i){var r=this._GetObject(this.mArrParticle,o,this.mContainerParticle);this.mContainerParticle.addChild(r),r.Init(),r.SetText(t,{fill:e,stroke:i,fontFamily:GameConfig.fontList.MainFont,fontSize:GameDefine.COMBO_TEXT_SIZE,lineHeight:1.1*GameDefine.COMBO_TEXT_SIZE,align:"center",strokeThickness:GameDefine.COMBO_TEXT_STROKE_THICKNESS,lineJoin:"round",fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL}),r.SetPos(.5*APP.GetWidth(),GameDefine.COMBO_TEXT_POS_Y,0),r.SetIsUIObject(!0),r.SetCheckInactive(!1),r.SetLiveTime(1),r.SetArrScale([[0,0],[.2,2.5],[.3,1.5],[.6,1.5],[1.5,0]]),r.SetArrAlpha([[0,1],[.6,1],[1,0]]),r.SetArrSpeedY([[0,-200],[1,-100]])}},{key:"MakeTextScore",value:function(t,e,i,r){var n=this._GetObject(this.mArrParticle,o,this.mContainerParticle);this.mContainerParticle.addChild(n),n.Init(),n.SetText(t,{fill:e,stroke:i,fontFamily:GameConfig.fontList.MainFont,fontSize:50,lineHeight:1.1*50,align:"center",strokeThickness:7,lineJoin:"round"}),n.SetPos(r.x,r.y,0),n.SetIsUIObject(!0),n.SetCheckInactive(!1),n.SetLiveTime(1),n.SetArrScale([[0,0],[0,1.2],[1.2,1.2],[1.2,0]]),n.SetArrAlpha([[0,1],[.6,1],[1,0]]),n.SetArrSpeedY([[0,-250],[1,-150]])}},{key:"MakeTextIngame",value:function(t){var e=DeviceInfo.IsUseSmallFontSize(),i=this._GetObject(this.mArrParticle,o,this.mContainerParticle);this.mContainerParticle.addChild(i),i.Init(),i.SetText(GLText.GetText(t.textId),{fill:t.fillColor,stroke:t.strokeColor,fontFamily:GameConfig.fontList.MainFont,fontSize:e?80:110,lineHeight:143,align:"center",strokeThickness:10,lineJoin:"round",fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL}),i.SetPos(.5*APP.GetWidth(),.25*APP.GetHeight(),0),i.SetIsUIObject(!0),i.SetCheckInactive(!1),i.SetLiveTime(t.longTime),i.SetArrScale(t.arrScale),i.SetArrAlpha(t.arrAlpha),i.SetArrDx(t.arrDx),i.SetArrSpeedX(t.arrSpeedX)}},{key:"MakeFillFrenzyBarParticle",value:function(t,e){var i=this._GetObject(this.mArrParticleUI,o,this.mContainerParticleUI);i.Init(),i.SetAnim(11,!1),i.SetPos(t,e,0),i.SetIsUIObject(!0),i.SetLiveTime(.4+.3*Math.random()),i.SetArrScale([[0,.5+1.3*Math.random()],[1,.4*Math.random()]]),i.SetArrAlpha([[0,.7+.3*Math.random()],[1,0]]),i.SetArrSpeedX([[0,-50-50*Math.random()],[1,0]])}},{key:"_SetState",value:function(t){switch(this.mState=t,this.visible=this.mState!=this.STATE.INACTIVE,this.mState){case this.STATE.INACTIVE:case this.STATE.ACTIVE:}}},{key:"_InactiveArrParticle",value:function(t){for(var e=t.length,i=0;i<e;i++)t[i].SetStateInactive()}},{key:"_UpdateArrParticle",value:function(t,e){for(var i=e.length,r=0;r<i;r++)e[r].Update(t)}},{key:"_GetObject",value:function(t,e,i){for(var r=t.length,n=0;n<r;n++)if(t[n].IsStateInactive())return t[n];var o=new e;return i.addChild(o),t.push(o),o}}]),t}();t.exports=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(7),h=i(17),u=function(t){function e(t){return r(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return o(e,t),a(e,[{key:"Hit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=t&&(t.animId=8)}},{key:"UpdateInfo",value:function(t,e,i,r,n,o){var a=e.p1.screen.scale*r*2,s=h.GetLaneOffset(i.lane,n);switch(i.type){case GameDefine.ROAD_OBSTACLE_ITEM:case GameDefine.ROAD_OBSTACLE_RED_ITEM:s*=.5}i.animId!==this.animId&&this.SetAnim(i.animId,!0);var u=e.p1.screen.x+a*s,l=e.p1.screen.y;this.position.set(u,l),this.scale.set(a,a),this.alpha=o,this.Update(t)}}]),e}(s);t.exports=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(11),h=i(17),u=function(t){function e(t,i){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,new PIXI.Texture(s.spriteInfo[t].texture.baseTexture),GameDefine.GAME_MESH_COL_MAX,2)),a=s.spriteInfo[t].data,h=a.frames[i],u=a.fmodule[h.fmstartIndex],l=a.modules[u.fmodulesID];return o.rect=new PIXI.Rectangle,o.texture.frame=new PIXI.Rectangle(l.x,l.y,l.w,l.h),o.visible=!1,o.refresh(),o}return o(e,t),a(e,[{key:"Update",value:function(t,e,i,r){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t.p1.screen.x,a=t.p1.screen.y,s=t.p1.screen.w,u=t.p2.screen.x,l=t.p2.screen.y,c=t.p2.screen.w;if(n){for(var d=u-c,f=c/(GameDefine.GAME_MESH_COL_MAX-1)*2,p=0;p<GameDefine.GAME_MESH_COL_MAX;p++)this.vertices[2*p+0]=d+p*f,this.vertices[2*p+1]=l;d=o-s,f=s/(GameDefine.GAME_MESH_COL_MAX-1)*2;for(var m=0;m<GameDefine.GAME_MESH_COL_MAX;m++)this.vertices[2*m+2*GameDefine.GAME_MESH_COL_MAX+0]=d+m*f,this.vertices[2*m+2*GameDefine.GAME_MESH_COL_MAX+1]=a;var g=t.p1.screen.scale*i*2,v=t.p1.screen.x+g*h.GetLaneOffset(e.lane,r),y=t.p1.screen.y,_=APP.GetWidth();return this.rect.x=v-_/2*g,this.rect.y=y-_*g,this.rect.width=_*g,void(this.rect.height=_*g)}s/=3,c/=3,o+=(e.lane-GameDefine.ROAD_LANE_MIDDLE)*s*2,u+=(e.lane-GameDefine.ROAD_LANE_MIDDLE)*c*2;for(var T=u-c,b=c/(GameDefine.GAME_MESH_COL_MAX-1)*2,E=0;E<GameDefine.GAME_MESH_COL_MAX;E++)this.vertices[2*E+0]=T+E*b,this.vertices[2*E+1]=l;T=o-s,b=s/(GameDefine.GAME_MESH_COL_MAX-1)*2;for(var w=0;w<GameDefine.GAME_MESH_COL_MAX;w++)this.vertices[2*w+2*GameDefine.GAME_MESH_COL_MAX+0]=T+w*b,this.vertices[2*w+2*GameDefine.GAME_MESH_COL_MAX+1]=a;var x=t.p1.screen.scale*i*2,S=t.p1.screen.x+x*h.GetLaneOffset(e.lane,r),A=t.p1.screen.y;this.rect.x=S-GameDefine.GAME_OBJECT_PLANE_SIZE/2*x,this.rect.y=A-GameDefine.GAME_OBJECT_PLANE_SIZE*x,this.rect.width=GameDefine.GAME_OBJECT_PLANE_SIZE*x,this.rect.height=GameDefine.GAME_OBJECT_PLANE_SIZE*x}}]),e}(PIXI.mesh.Plane);t.exports=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=(i(17),i(11)),h=function(t){function e(t,i){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));o.spriteIndex=t;var a=new PIXI.Texture(s.spriteInfo[t].texture.baseTexture),h=s.spriteInfo[t].data,u=h.frames[i],l=h.fmodule[u.fmstartIndex],c=h.modules[l.fmodulesID];return a.frame=new PIXI.Rectangle(c.x,c.y,c.w,c.h),o.road=new PIXI.mesh.Plane(a,GameDefine.GAME_MESH_COL_MAX,2),o.addChild(o.road),o}return o(e,t),a(e,[{key:"TransformRoad",value:function(t){switch(t){case GameDefine.MAP_STATE_FRENZY:var e=new PIXI.Texture(s.spriteInfo[this.spriteIndex].texture.baseTexture),i=s.spriteInfo[this.spriteIndex].data,r=i.frames[112],n=i.fmodule[r.fmstartIndex],o=i.modules[n.fmodulesID];e.frame=new PIXI.Rectangle(o.x,o.y,o.w,o.h),this.children[0].texture=e;break;case GameDefine.MAP_STATE_NORMAL:var a=new PIXI.Texture(s.spriteInfo[this.spriteIndex].texture.baseTexture),h=s.spriteInfo[this.spriteIndex].data,u=h.frames[6],l=h.fmodule[u.fmstartIndex],c=h.modules[l.fmodulesID];a.frame=new PIXI.Rectangle(c.x,c.y,c.w,c.h),this.children[0].texture=a}}},{key:"Polygon",value:function(t,e,i,r,n,o,a,s,h,u){t.beginFill(u),t.moveTo(e,i),t.lineTo(r,n),t.lineTo(o,a),t.lineTo(s,h),t.endFill()}},{key:"Update",value:function(t,e,i){for(var r=i.p1.screen.x,n=i.p1.screen.y,o=i.p1.screen.w/GameDefine.ROAD_SCALE,a=i.p2.screen.x,s=i.p2.screen.y,h=i.p2.screen.w/GameDefine.ROAD_SCALE,u=i.fog,l=(i.color,a-h),c=h/(GameDefine.GAME_MESH_COL_MAX-1)*2,d=0;d<GameDefine.GAME_MESH_COL_MAX;d++)this.road.vertices[2*d+0]=l+d*c,this.road.vertices[2*d+1]=s;l=r-o,c=o/(GameDefine.GAME_MESH_COL_MAX-1)*2;for(var f=0;f<GameDefine.GAME_MESH_COL_MAX;f++)this.road.vertices[2*f+2*GameDefine.GAME_MESH_COL_MAX+0]=l+f*c,this.road.vertices[2*f+2*GameDefine.GAME_MESH_COL_MAX+1]=n;this.alpha=u}}]),e}(PIXI.Container);t.exports=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.video=null,this.videoDiv=null,this.audioFilter=null,this.isVideoLoaded=!1,this.isVideoPlaying=!1,this.isCanPlayThrough=!1,this.onRotate=!1,this.canRotate=!1,this.bgImage=null,this.forcePlay=null,this.counter=0}return n(t,[{key:"Init",value:function(t,e,i,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(Utils.DispatchEvent("touchstart"),null==this.video||null==this.videoDiv){if(null==this.video&&(this.video=document.createElement("video"),this.HideVideo()),null==this.videoDiv&&(Utils.DispatchEvent("touchstart"),this.videoDiv=document.createElement("div"),this.videoDiv.style.visibility="hidden",this.videoDiv.appendChild(this.video),document.body.appendChild(this.videoDiv),document.body.appendChild(APP.renderer.view)),n){var o=window.innerWidth/APP.GetWidth();t*=o,e*=o,i*=o*GameConfig.scale,r*=o*GameConfig.scale}this.videoDiv.style.position="absolute",this.videoDiv.style.left=t-i/2+"px",this.videoDiv.style.top=e-r/2+"px",this.videoDiv.style.width=i+"px",this.videoDiv.style.height=r+"px",this.video.style.width=i+"px",this.video.style.height=r+"px",this.video.onplay=function(){this.isVideoPlaying=!0}.bind(this),this.UpdateVideoRotation()}}},{key:"SetBgImage",value:function(t){this.bgImage="url("+t+")",this.videoDiv.style.backgroundImage=this.bgImage,APP.IsRotate()?this.videoDiv.style.backgroundSize="cover":this.videoDiv.style.backgroundSize="contain",this.videoDiv.style.backgroundRepeat="no-repeat",this.videoDiv.style.backgroundPosition="center"}},{key:"UpdateVideoRotation",value:function(){this.videoDiv&&(APP.IsRotate()&&!this.onRotate&&(this.onRotate=!0,this.videoDiv.style.top="50%",this.videoDiv.style.left="50%",this.videoDiv.style.transform="translate(-50%, -50%) rotate(-90deg)",this.videoDiv.style.msTransform="translate(-50%, -50%) rotate(-90deg)",this.videoDiv.style.WebkitTransform="translate(-50%, -50%) rotate(-90deg)",this.bgImage&&(this.videoDiv.style.backgroundImage=this.bgImage)),"undefined"!=typeof mraid&&!APP.IsRotate()&&this.onRotate&&(this.onRotate=!1,this.videoDiv.style.top="50%",this.videoDiv.style.left="50%",this.videoDiv.style.transform="translate(-50%, -50%) rotate(-90deg)",this.videoDiv.style.msTransform="translate(-50%, -50%) rotate(-90deg)",this.videoDiv.style.WebkitTransform="translate(-50%, -50%) rotate(-90deg)",this.bgImage&&(this.videoDiv.style.backgroundImage=this.bgImage)))}},{key:"Resize",value:function(t,e,i,r){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.videoDiv){if(this.UpdateVideoRotation(),n){var o=window.innerWidth/APP.GetWidth();t*=o,e*=o,i*=o*GameConfig.scale,r*=o*GameConfig.scale}this.videoDiv.style.position="absolute",this.videoDiv.style.width=i+"px",this.videoDiv.style.height=r+"px",this.video.style.width=i+"px",this.video.style.height=r+"px"}}},{key:"SetPoster",value:function(t){this.video&&$(this.video).attr("poster",t)}},{key:"HideVideo",value:function(){this.video&&(this.video.style.display="none")}},{key:"ShowVideo",value:function(){this.video&&(Utils.DispatchEvent("touchstart"),this.video.style.display="initial")}},{key:"Load",value:function(t){this.videoDiv&&(this.isVideoLoaded||(this.video.setAttribute("src",t),this.video.setAttribute("preload","auto"),this.video.setAttribute("autoplay","true"),this.video.setAttribute("loop","true"),this.video.setAttribute("type","video/mp4"),this.video.setAttribute("webkit-playsinline",""),this.video.setAttribute("playsinline","playsinline"),this.video.load(),this.video.addEventListener("canplaythrough",this.OnVideoCanPlayThrough.bind(this),!1),this.video.addEventListener("ended",this.OnVideoFinished.bind(this),!1)))}},{key:"Play",value:function(){this.videoDiv&&(Utils.DispatchEvent("touchstart"),this.isCanPlayThrough&&(this.Show(),this.video.play(),this.isVideoLoaded=!0,this.isVideoPlaying=!0))}},{key:"Pause",value:function(){this.video.pause()}},{key:"Replay",value:function(){this.isCanPlayThrough&&(this.Play(),this.video.currentTime=0)}},{key:"SetDetune",value:function(t){AudioManager.IsSupportAudioAPI()&&(this.audioFilter.detune.value=t)}},{key:"Show",value:function(){this.videoDiv&&(this.videoDiv.style.visibility="visible",this.canRotate=!0)}},{key:"Hide",value:function(){this.videoDiv&&(this.Pause(),this.videoDiv.style.visibility="hidden",this.canRotate=!1)}},{key:"IsVideoPlaying",value:function(){return this.isVideoPlaying}},{key:"OnVideoCanPlayThrough",value:function(){this.isCanPlayThrough=!0}},{key:"OnVideoFinished",value:function(){this.isVideoPlaying=!1}},{key:"SelfDestroy",value:function(){null!=this.videoDiv&&(this.videoDiv.parentNode.removeChild(this.videoDiv),this.videoDiv=null)}}]),t}();t.exports=new o},function(t,e,i){"use strict";var r,n=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();!function(t){!function(t){var e=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}return t.prototype.apply=function(t,e,i,r,n,o,a,s){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,u=0,l=h.length;u<l;u++)h[u].apply(t,e,i,n,o,a,s)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var r=0,n=t.length/i-2;if(0==n)return i;for(var o=n>>>1;;){if(t[(o+1)*i]<=e?r=o+1:n=o,r==n)return(r+1)*i;o=r+n>>>1}},t.linearSearch=function(t,e,i){for(var r=0,n=t.length-i;r<=n;r+=i)if(t[r]>e)return r;return-1},t}();t.Animation=e;var i;!function(t){t[t.setup=0]="setup",t[t.current=1]="current",t[t.currentLayered=2]="currentLayered"}(i=t.MixPose||(t.MixPose={}));var r;!function(t){t[t.in=0]="in",t[t.out=1]="out"}(r=t.MixDirection||(t.MixDirection={}));var o;!function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(o=t.TimelineType||(t.TimelineType={}));var a=function(){function e(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var i=t*e.BEZIER_SIZE;if(i==this.curves.length)return e.LINEAR;var r=this.curves[i];return r==e.LINEAR?e.LINEAR:r==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,i,r,n,o){var a=.03*(2*-i+n),s=.03*(2*-r+o),h=.006*(3*(i-n)+1),u=.006*(3*(r-o)+1),l=2*a+h,c=2*s+u,d=.3*i+a+.16666667*h,f=.3*r+s+.16666667*u,p=t*e.BEZIER_SIZE,m=this.curves;m[p++]=e.BEZIER;for(var g=d,v=f,y=p+e.BEZIER_SIZE-1;p<y;p+=2)m[p]=g,m[p+1]=v,d+=l,f+=c,l+=h,c+=u,g+=d,v+=f},e.prototype.getCurvePercent=function(i,r){r=t.MathUtils.clamp(r,0,1);var n=this.curves,o=i*e.BEZIER_SIZE,a=n[o];if(a==e.LINEAR)return r;if(a==e.STEPPED)return 0;o++;for(var s=0,h=o,u=o+e.BEZIER_SIZE-1;o<u;o+=2)if((s=n[o])>=r){var l=void 0,c=void 0;return o==h?(l=0,c=0):(l=n[o-2],c=n[o-1]),c+(n[o+1]-c)*(r-l)/(s-l)}var d=n[o-1];return d+(1-d)*(r-s)/(1-s)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=a;var s=function(r){function a(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e<<1),i}return n(a,r),a.prototype.getPropertyId=function(){return(o.rotate<<24)+this.boneIndex},a.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+a.ROTATION]=i},a.prototype.apply=function(t,r,n,o,s,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(n<l[0])switch(h){case i.setup:return void(c.rotation=c.data.rotation);case i.current:var d=c.data.rotation-c.rotation;d-=360*(16384-(16384.499999999996-d/360|0)),c.rotation+=d*s}else if(n>=l[l.length-a.ENTRIES])if(h==i.setup)c.rotation=c.data.rotation+l[l.length+a.PREV_ROTATION]*s;else{var f=c.data.rotation+l[l.length+a.PREV_ROTATION]-c.rotation;f-=360*(16384-(16384.499999999996-f/360|0)),c.rotation+=f*s}else{var p=e.binarySearch(l,n,a.ENTRIES),m=l[p+a.PREV_ROTATION],g=l[p],v=this.getCurvePercent((p>>1)-1,1-(n-g)/(l[p+a.PREV_TIME]-g)),y=l[p+a.ROTATION]-m;y-=360*(16384-(16384.499999999996-y/360|0)),y=m+y*v,h==i.setup?(y-=360*(16384-(16384.499999999996-y/360|0)),c.rotation=c.data.rotation+y*s):(y=c.data.rotation+y-c.rotation,y-=360*(16384-(16384.499999999996-y/360|0)),c.rotation+=y*s)}},a.ENTRIES=2,a.PREV_TIME=-2,a.PREV_ROTATION=-1,a.ROTATION=1,a}(a);t.RotateTimeline=s;var h=function(r){function a(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return n(a,r),a.prototype.getPropertyId=function(){return(o.translate<<24)+this.boneIndex},a.prototype.setFrame=function(t,e,i,r){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.X]=i,this.frames[t+a.Y]=r},a.prototype.apply=function(t,r,n,o,s,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(n<l[0])switch(h){case i.setup:return c.x=c.data.x,void(c.y=c.data.y);case i.current:c.x+=(c.data.x-c.x)*s,c.y+=(c.data.y-c.y)*s}else{var d=0,f=0;if(n>=l[l.length-a.ENTRIES])d=l[l.length+a.PREV_X],f=l[l.length+a.PREV_Y];else{var p=e.binarySearch(l,n,a.ENTRIES);d=l[p+a.PREV_X],f=l[p+a.PREV_Y];var m=l[p],g=this.getCurvePercent(p/a.ENTRIES-1,1-(n-m)/(l[p+a.PREV_TIME]-m));d+=(l[p+a.X]-d)*g,f+=(l[p+a.Y]-f)*g}h==i.setup?(c.x=c.data.x+d*s,c.y=c.data.y+f*s):(c.x+=(c.data.x+d-c.x)*s,c.y+=(c.data.y+f-c.y)*s)}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_X=-2,a.PREV_Y=-1,a.X=1,a.Y=2,a}(a);t.TranslateTimeline=h;var u=function(a){function s(t){return a.call(this,t)||this}return n(s,a),s.prototype.getPropertyId=function(){return(o.scale<<24)+this.boneIndex},s.prototype.apply=function(n,o,a,h,u,l,c){var d=this.frames,f=n.bones[this.boneIndex];if(a<d[0])switch(l){case i.setup:return f.scaleX=f.data.scaleX,void(f.scaleY=f.data.scaleY);case i.current:f.scaleX+=(f.data.scaleX-f.scaleX)*u,f.scaleY+=(f.data.scaleY-f.scaleY)*u}else{var p=0,m=0;if(a>=d[d.length-s.ENTRIES])p=d[d.length+s.PREV_X]*f.data.scaleX,m=d[d.length+s.PREV_Y]*f.data.scaleY;else{var g=e.binarySearch(d,a,s.ENTRIES);p=d[g+s.PREV_X],m=d[g+s.PREV_Y];var v=d[g],y=this.getCurvePercent(g/s.ENTRIES-1,1-(a-v)/(d[g+s.PREV_TIME]-v));p=(p+(d[g+s.X]-p)*y)*f.data.scaleX,m=(m+(d[g+s.Y]-m)*y)*f.data.scaleY}if(1==u)f.scaleX=p,f.scaleY=m;else{var _=0,T=0;l==i.setup?(_=f.data.scaleX,T=f.data.scaleY):(_=f.scaleX,T=f.scaleY),c==r.out?(p=Math.abs(p)*t.MathUtils.signum(_),m=Math.abs(m)*t.MathUtils.signum(T)):(_=Math.abs(_)*t.MathUtils.signum(p),T=Math.abs(T)*t.MathUtils.signum(m)),f.scaleX=_+(p-_)*u,f.scaleY=T+(m-T)*u}}},s}(h);t.ScaleTimeline=u;var l=function(t){function r(e){return t.call(this,e)||this}return n(r,t),r.prototype.getPropertyId=function(){return(o.shear<<24)+this.boneIndex},r.prototype.apply=function(t,n,o,a,s,h,u){var l=this.frames,c=t.bones[this.boneIndex];if(o<l[0])switch(h){case i.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case i.current:c.shearX+=(c.data.shearX-c.shearX)*s,c.shearY+=(c.data.shearY-c.shearY)*s}else{var d=0,f=0;if(o>=l[l.length-r.ENTRIES])d=l[l.length+r.PREV_X],f=l[l.length+r.PREV_Y];else{var p=e.binarySearch(l,o,r.ENTRIES);d=l[p+r.PREV_X],f=l[p+r.PREV_Y];var m=l[p],g=this.getCurvePercent(p/r.ENTRIES-1,1-(o-m)/(l[p+r.PREV_TIME]-m));d+=(l[p+r.X]-d)*g,f+=(l[p+r.Y]-f)*g}h==i.setup?(c.shearX=c.data.shearX+d*s,c.shearY=c.data.shearY+f*s):(c.shearX+=(c.data.shearX+d-c.shearX)*s,c.shearY+=(c.data.shearY+f-c.shearY)*s)}},r}(h);t.ShearTimeline=l;var c=function(r){function a(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return n(a,r),a.prototype.getPropertyId=function(){return(o.color<<24)+this.slotIndex},a.prototype.setFrame=function(t,e,i,r,n,o){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.R]=i,this.frames[t+a.G]=r,this.frames[t+a.B]=n,this.frames[t+a.A]=o},a.prototype.apply=function(t,r,n,o,s,h,u){var l=t.slots[this.slotIndex],c=this.frames;if(n<c[0])switch(h){case i.setup:return void l.color.setFromColor(l.data.color);case i.current:var d=l.color,f=l.data.color;d.add((f.r-d.r)*s,(f.g-d.g)*s,(f.b-d.b)*s,(f.a-d.a)*s)}else{var p=0,m=0,g=0,v=0;if(n>=c[c.length-a.ENTRIES]){var y=c.length;p=c[y+a.PREV_R],m=c[y+a.PREV_G],g=c[y+a.PREV_B],v=c[y+a.PREV_A]}else{var _=e.binarySearch(c,n,a.ENTRIES);p=c[_+a.PREV_R],m=c[_+a.PREV_G],g=c[_+a.PREV_B],v=c[_+a.PREV_A];var T=c[_],b=this.getCurvePercent(_/a.ENTRIES-1,1-(n-T)/(c[_+a.PREV_TIME]-T));p+=(c[_+a.R]-p)*b,m+=(c[_+a.G]-m)*b,g+=(c[_+a.B]-g)*b,v+=(c[_+a.A]-v)*b}if(1==s)l.color.set(p,m,g,v);else{var d=l.color;h==i.setup&&d.setFromColor(l.data.color),d.add((p-d.r)*s,(m-d.g)*s,(g-d.b)*s,(v-d.a)*s)}}},a.ENTRIES=5,a.PREV_TIME=-5,a.PREV_R=-4,a.PREV_G=-3,a.PREV_B=-2,a.PREV_A=-1,a.R=1,a.G=2,a.B=3,a.A=4,a}(a);t.ColorTimeline=c;var d=function(r){function a(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return n(a,r),a.prototype.getPropertyId=function(){return(o.twoColor<<24)+this.slotIndex},a.prototype.setFrame=function(t,e,i,r,n,o,s,h,u){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.R]=i,this.frames[t+a.G]=r,this.frames[t+a.B]=n,this.frames[t+a.A]=o,this.frames[t+a.R2]=s,this.frames[t+a.G2]=h,this.frames[t+a.B2]=u},a.prototype.apply=function(t,r,n,o,s,h,u){var l=t.slots[this.slotIndex],c=this.frames;if(n<c[0])switch(h){case i.setup:return l.color.setFromColor(l.data.color),void l.darkColor.setFromColor(l.data.darkColor);case i.current:var d=l.color,f=l.darkColor,p=l.data.color,m=l.data.darkColor;d.add((p.r-d.r)*s,(p.g-d.g)*s,(p.b-d.b)*s,(p.a-d.a)*s),f.add((m.r-f.r)*s,(m.g-f.g)*s,(m.b-f.b)*s,0)}else{var g=0,v=0,y=0,_=0,T=0,b=0,E=0;if(n>=c[c.length-a.ENTRIES]){var w=c.length;g=c[w+a.PREV_R],v=c[w+a.PREV_G],y=c[w+a.PREV_B],_=c[w+a.PREV_A],T=c[w+a.PREV_R2],b=c[w+a.PREV_G2],E=c[w+a.PREV_B2]}else{var x=e.binarySearch(c,n,a.ENTRIES);g=c[x+a.PREV_R],v=c[x+a.PREV_G],y=c[x+a.PREV_B],_=c[x+a.PREV_A],T=c[x+a.PREV_R2],b=c[x+a.PREV_G2],E=c[x+a.PREV_B2];var S=c[x],A=this.getCurvePercent(x/a.ENTRIES-1,1-(n-S)/(c[x+a.PREV_TIME]-S));g+=(c[x+a.R]-g)*A,v+=(c[x+a.G]-v)*A,y+=(c[x+a.B]-y)*A,_+=(c[x+a.A]-_)*A,T+=(c[x+a.R2]-T)*A,b+=(c[x+a.G2]-b)*A,E+=(c[x+a.B2]-E)*A}if(1==s)l.color.set(g,v,y,_),l.darkColor.set(T,b,E,1);else{var d=l.color,f=l.darkColor;h==i.setup&&(d.setFromColor(l.data.color),f.setFromColor(l.data.darkColor)),d.add((g-d.r)*s,(v-d.g)*s,(y-d.b)*s,(_-d.a)*s),f.add((T-f.r)*s,(b-f.g)*s,(E-f.b)*s,0)}}},a.ENTRIES=8,a.PREV_TIME=-8,a.PREV_R=-7,a.PREV_G=-6,a.PREV_B=-5,a.PREV_A=-4,a.PREV_R2=-3,a.PREV_G2=-2,a.PREV_B2=-1,a.R=1,a.G=2,a.B=3,a.A=4,a.R2=5,a.G2=6,a.B2=7,a}(a);t.TwoColorTimeline=d;var f=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return n.prototype.getPropertyId=function(){return(o.attachment<<24)+this.slotIndex},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},n.prototype.apply=function(t,n,o,a,s,h,u){var l=t.slots[this.slotIndex];if(u==r.out&&h==i.setup){var c=l.data.attachmentName;return void l.setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}var d=this.frames;if(o<d[0]){if(h==i.setup){var f=l.data.attachmentName;l.setAttachment(null==f?null:t.getAttachment(this.slotIndex,f))}}else{var p=0;p=o>=d[d.length-1]?d.length-1:e.binarySearch(d,o,1)-1;var m=this.attachmentNames[p];t.slots[this.slotIndex].setAttachment(null==m?null:t.getAttachment(this.slotIndex,m))}},n}();t.AttachmentTimeline=f;var p=null,m=function(r){function a(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e),i.frameVertices=new Array(e),null==p&&(p=t.Utils.newFloatArray(64)),i}return n(a,r),a.prototype.getPropertyId=function(){return(o.deform<<27)+ +this.attachment.id+this.slotIndex},a.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},a.prototype.apply=function(r,n,o,a,s,h,u){var l=r.slots[this.slotIndex],c=l.getAttachment();if(c instanceof t.VertexAttachment&&c.applyDeform(this.attachment)){var d=l.attachmentVertices,f=this.frameVertices,m=f[0].length,g=t.Utils.setArraySize(d,m),v=this.frames;if(o<v[0]){var y=c;switch(h){case i.setup:var _=void 0;return null==y.bones?_=y.vertices:(_=p,_.length<m&&(p=_=t.Utils.newFloatArray(m))),void t.Utils.arrayCopy(_,0,g,0,m);case i.current:if(1==s)break;if(null==y.bones)for(var T=y.vertices,b=0;b<m;b++)g[b]+=(T[b]-g[b])*s;else{s=1-s;for(var E=0;E<m;E++)g[E]*=s}}}else if(o>=v[v.length-1]){var w=f[v.length-1];if(1==s)t.Utils.arrayCopy(w,0,g,0,m);else if(h==i.setup){var y=c;if(null==y.bones)for(var T=y.vertices,x=0;x<m;x++){var S=T[x];g[x]=S+(w[x]-S)*s}else for(var A=0;A<m;A++)g[A]=w[A]*s}else for(var I=0;I<m;I++)g[I]+=(w[I]-g[I])*s}else{var O=e.binarySearch(v,o),R=f[O-1],C=f[O],P=v[O],M=this.getCurvePercent(O-1,1-(o-P)/(v[O-1]-P));if(1==s)for(var D=0;D<m;D++){var k=R[D];g[D]=k+(C[D]-k)*M}else if(h==i.setup){var y=c;if(null==y.bones)for(var T=y.vertices,N=0;N<m;N++){var k=R[N],S=T[N];g[N]=S+(k+(C[N]-k)*M-S)*s}else for(var G=0;G<m;G++){var k=R[G];g[G]=(k+(C[G]-k)*M)*s}}else for(var L=0;L<m;L++){var k=R[L];g[L]+=(k+(C[L]-k)*M-g[L])*s}}}},a}(a);t.DeformTimeline=m;var g=function(){function i(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return i.prototype.getPropertyId=function(){return o.event<<24},i.prototype.getFrameCount=function(){return this.frames.length},i.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},i.prototype.apply=function(t,i,r,n,o,a,s){if(null!=n){var h=this.frames,u=this.frames.length;if(i>r)this.apply(t,i,Number.MAX_VALUE,n,o,a,s),i=-1;else if(i>=h[u-1])return;if(!(r<h[0])){var l=0;if(i<h[0])l=0;else{l=e.binarySearch(h,i);for(var c=h[l];l>0&&h[l-1]==c;)l--}for(;l<u&&r>=h[l];l++)n.push(this.events[l])}}},i}();t.EventTimeline=g;var v=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return n.prototype.getPropertyId=function(){return o.drawOrder<<24},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},n.prototype.apply=function(n,o,a,s,h,u,l){var c=n.drawOrder,d=n.slots;if(l==r.out&&u==i.setup)return void t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length);var f=this.frames;if(a<f[0])return void(u==i.setup&&t.Utils.arrayCopy(n.slots,0,n.drawOrder,0,n.slots.length));var p=0;p=a>=f[f.length-1]?f.length-1:e.binarySearch(f,a)-1;var m=this.drawOrders[p];if(null==m)t.Utils.arrayCopy(d,0,c,0,d.length);else for(var g=0,v=m.length;g<v;g++)c[g]=d[m[g]]},n}();t.DrawOrderTimeline=v;var y=function(a){function s(e){var i=a.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*s.ENTRIES),i}return n(s,a),s.prototype.getPropertyId=function(){return(o.ikConstraint<<24)+this.ikConstraintIndex},s.prototype.setFrame=function(t,e,i,r){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.MIX]=i,this.frames[t+s.BEND_DIRECTION]=r},s.prototype.apply=function(t,n,o,a,h,u,l){var c=this.frames,d=t.ikConstraints[this.ikConstraintIndex];if(o<c[0])switch(u){case i.setup:return d.mix=d.data.mix,void(d.bendDirection=d.data.bendDirection);case i.current:d.mix+=(d.data.mix-d.mix)*h,d.bendDirection=d.data.bendDirection}else{if(o>=c[c.length-s.ENTRIES])return void(u==i.setup?(d.mix=d.data.mix+(c[c.length+s.PREV_MIX]-d.data.mix)*h,d.bendDirection=l==r.out?d.data.bendDirection:c[c.length+s.PREV_BEND_DIRECTION]):(d.mix+=(c[c.length+s.PREV_MIX]-d.mix)*h,l==r.in&&(d.bendDirection=c[c.length+s.PREV_BEND_DIRECTION])));var f=e.binarySearch(c,o,s.ENTRIES),p=c[f+s.PREV_MIX],m=c[f],g=this.getCurvePercent(f/s.ENTRIES-1,1-(o-m)/(c[f+s.PREV_TIME]-m));u==i.setup?(d.mix=d.data.mix+(p+(c[f+s.MIX]-p)*g-d.data.mix)*h,d.bendDirection=l==r.out?d.data.bendDirection:c[f+s.PREV_BEND_DIRECTION]):(d.mix+=(p+(c[f+s.MIX]-p)*g-d.mix)*h,l==r.in&&(d.bendDirection=c[f+s.PREV_BEND_DIRECTION]))}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_MIX=-2,s.PREV_BEND_DIRECTION=-1,s.MIX=1,s.BEND_DIRECTION=2,s}(a);t.IkConstraintTimeline=y;var _=function(r){function a(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return n(a,r),a.prototype.getPropertyId=function(){return(o.transformConstraint<<24)+this.transformConstraintIndex},a.prototype.setFrame=function(t,e,i,r,n,o){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.ROTATE]=i,this.frames[t+a.TRANSLATE]=r,this.frames[t+a.SCALE]=n,this.frames[t+a.SHEAR]=o},a.prototype.apply=function(t,r,n,o,s,h,u){var l=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(n<l[0]){var d=c.data;switch(h){case i.setup:return c.rotateMix=d.rotateMix,c.translateMix=d.translateMix,c.scaleMix=d.scaleMix,void(c.shearMix=d.shearMix);case i.current:c.rotateMix+=(d.rotateMix-c.rotateMix)*s,c.translateMix+=(d.translateMix-c.translateMix)*s,c.scaleMix+=(d.scaleMix-c.scaleMix)*s,c.shearMix+=(d.shearMix-c.shearMix)*s}}else{var f=0,p=0,m=0,g=0;if(n>=l[l.length-a.ENTRIES]){var v=l.length;f=l[v+a.PREV_ROTATE],p=l[v+a.PREV_TRANSLATE],m=l[v+a.PREV_SCALE],g=l[v+a.PREV_SHEAR]}else{var y=e.binarySearch(l,n,a.ENTRIES);f=l[y+a.PREV_ROTATE],p=l[y+a.PREV_TRANSLATE],m=l[y+a.PREV_SCALE],g=l[y+a.PREV_SHEAR];var _=l[y],T=this.getCurvePercent(y/a.ENTRIES-1,1-(n-_)/(l[y+a.PREV_TIME]-_));f+=(l[y+a.ROTATE]-f)*T,p+=(l[y+a.TRANSLATE]-p)*T,m+=(l[y+a.SCALE]-m)*T,g+=(l[y+a.SHEAR]-g)*T}if(h==i.setup){var d=c.data;c.rotateMix=d.rotateMix+(f-d.rotateMix)*s,c.translateMix=d.translateMix+(p-d.translateMix)*s,c.scaleMix=d.scaleMix+(m-d.scaleMix)*s,c.shearMix=d.shearMix+(g-d.shearMix)*s}else c.rotateMix+=(f-c.rotateMix)*s,c.translateMix+=(p-c.translateMix)*s,c.scaleMix+=(m-c.scaleMix)*s,c.shearMix+=(g-c.shearMix)*s}},a.ENTRIES=5,a.PREV_TIME=-5,a.PREV_ROTATE=-4,a.PREV_TRANSLATE=-3,a.PREV_SCALE=-2,a.PREV_SHEAR=-1,a.ROTATE=1,a.TRANSLATE=2,a.SCALE=3,a.SHEAR=4,a}(a);t.TransformConstraintTimeline=_;var T=function(r){function a(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return n(a,r),a.prototype.getPropertyId=function(){return(o.pathConstraintPosition<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(t,e,i){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.VALUE]=i},a.prototype.apply=function(t,r,n,o,s,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(n<l[0])switch(h){case i.setup:return void(c.position=c.data.position);case i.current:c.position+=(c.data.position-c.position)*s}else{var d=0;if(n>=l[l.length-a.ENTRIES])d=l[l.length+a.PREV_VALUE];else{var f=e.binarySearch(l,n,a.ENTRIES);d=l[f+a.PREV_VALUE];var p=l[f],m=this.getCurvePercent(f/a.ENTRIES-1,1-(n-p)/(l[f+a.PREV_TIME]-p));d+=(l[f+a.VALUE]-d)*m}h==i.setup?c.position=c.data.position+(d-c.data.position)*s:c.position+=(d-c.position)*s}},a.ENTRIES=2,a.PREV_TIME=-2,a.PREV_VALUE=-1,a.VALUE=1,a}(a);t.PathConstraintPositionTimeline=T;var b=function(t){function r(e){return t.call(this,e)||this}return n(r,t),r.prototype.getPropertyId=function(){return(o.pathConstraintSpacing<<24)+this.pathConstraintIndex},r.prototype.apply=function(t,n,o,a,s,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(o<l[0])switch(h){case i.setup:return void(c.spacing=c.data.spacing);case i.current:c.spacing+=(c.data.spacing-c.spacing)*s}else{var d=0;if(o>=l[l.length-r.ENTRIES])d=l[l.length+r.PREV_VALUE];else{var f=e.binarySearch(l,o,r.ENTRIES);d=l[f+r.PREV_VALUE];var p=l[f],m=this.getCurvePercent(f/r.ENTRIES-1,1-(o-p)/(l[f+r.PREV_TIME]-p));d+=(l[f+r.VALUE]-d)*m}h==i.setup?c.spacing=c.data.spacing+(d-c.data.spacing)*s:c.spacing+=(d-c.spacing)*s}},r}(T);t.PathConstraintSpacingTimeline=b;var E=function(r){function a(e){var i=r.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return n(a,r),a.prototype.getPropertyId=function(){return(o.pathConstraintMix<<24)+this.pathConstraintIndex},a.prototype.setFrame=function(t,e,i,r){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.ROTATE]=i,this.frames[t+a.TRANSLATE]=r},a.prototype.apply=function(t,r,n,o,s,h,u){var l=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(n<l[0])switch(h){case i.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case i.current:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*s,c.translateMix+=(c.data.translateMix-c.translateMix)*s}else{var d=0,f=0;if(n>=l[l.length-a.ENTRIES])d=l[l.length+a.PREV_ROTATE],f=l[l.length+a.PREV_TRANSLATE];else{var p=e.binarySearch(l,n,a.ENTRIES);d=l[p+a.PREV_ROTATE],f=l[p+a.PREV_TRANSLATE];var m=l[p],g=this.getCurvePercent(p/a.ENTRIES-1,1-(n-m)/(l[p+a.PREV_TIME]-m));d+=(l[p+a.ROTATE]-d)*g,f+=(l[p+a.TRANSLATE]-f)*g}h==i.setup?(c.rotateMix=c.data.rotateMix+(d-c.data.rotateMix)*s,c.translateMix=c.data.translateMix+(f-c.data.translateMix)*s):(c.rotateMix+=(d-c.rotateMix)*s,c.translateMix+=(f-c.translateMix)*s)}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_ROTATE=-2,a.PREV_TRANSLATE=-1,a.ROTATE=1,a.TRANSLATE=2,a}(a);t.PathConstraintMixTimeline=E}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new r(this),this.propertyIDs=new t.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new t.Pool(function(){return new i}),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,r=e.length;i<r;i++){var n=e[i];if(null!=n){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var o=t*n.timeScale;if(n.delay>0){if(n.delay-=o,n.delay>0)continue;o=-n.delay,n.delay=0}var a=n.next;if(null!=a){var s=n.trackLast-a.delay;if(s>=0){for(a.delay=0,a.trackTime=s+t*a.timeScale,n.trackTime+=o,this.setCurrent(i,a,!0);null!=a.mixingFrom;)a.mixTime+=o,a=a.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&null==n.mixingFrom){e[i]=null,this.queue.end(n),this.disposeNext(n);continue}if(null!=n.mixingFrom&&this.updateMixingFrom(n,t)){var h=n.mixingFrom;for(n.mixingFrom=null;null!=h;)this.queue.end(h),h=h.mixingFrom}n.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var r=this.updateMixingFrom(i,e);return t.mixTime>0&&(t.mixTime>=t.mixDuration||0==t.timeScale)?(0==i.totalAlpha&&(t.mixingFrom=i.mixingFrom,t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),r):(i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,i.trackTime+=e*i.timeScale,t.mixTime+=e*t.timeScale,!1)},e.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,o=!1,a=0,s=n.length;a<s;a++){var h=n[a];if(!(null==h||h.delay>0)){o=!0;var u=0==a?t.MixPose.current:t.MixPose.currentLayered,l=h.alpha;null!=h.mixingFrom?l*=this.applyMixingFrom(h,i,u):h.trackTime>=h.trackEnd&&null==h.next&&(l=0);var c=h.animationLast,d=h.getAnimationTime(),f=h.animation.timelines.length,p=h.animation.timelines;if(1==l)for(var m=0;m<f;m++)p[m].apply(i,c,d,r,1,t.MixPose.setup,t.MixDirection.in);else{var g=h.timelineData,v=0==h.timelinesRotation.length;v&&t.Utils.setArraySize(h.timelinesRotation,f<<1,null);for(var y=h.timelinesRotation,m=0;m<f;m++){var _=p[m],T=g[m]>=e.FIRST?t.MixPose.setup:u;_ instanceof t.RotateTimeline?this.applyRotateTimeline(_,i,d,l,T,y,m<<1,v):_.apply(i,c,d,r,l,T,t.MixDirection.in)}}this.queueEvents(h,d),r.length=0,h.nextAnimationLast=d,h.nextTrackLast=h.trackTime}}return this.queue.drain(),o},e.prototype.applyMixingFrom=function(i,r,n){var o=i.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,r,n);var a=0;0==i.mixDuration?a=1:(a=i.mixTime/i.mixDuration)>1&&(a=1);var s=a<o.eventThreshold?this.events:null,h=a<o.attachmentThreshold,u=a<o.drawOrderThreshold,l=o.animationLast,c=o.getAnimationTime(),d=o.animation.timelines.length,f=o.animation.timelines,p=o.timelineData,m=o.timelineDipMix,g=0==o.timelinesRotation.length;g&&t.Utils.setArraySize(o.timelinesRotation,d<<1,null);var v,y=o.timelinesRotation,_=o.alpha*i.interruptAlpha,T=_*(1-a),b=0;o.totalAlpha=0;for(var E=0;E<d;E++){var w=f[E];switch(p[E]){case e.SUBSEQUENT:if(!h&&w instanceof t.AttachmentTimeline)continue;if(!u&&w instanceof t.DrawOrderTimeline)continue;v=n,b=T;break;case e.FIRST:v=t.MixPose.setup,b=T;break;case e.DIP:v=t.MixPose.setup,b=_;break;default:v=t.MixPose.setup,b=_;var x=m[E];b*=Math.max(0,1-x.mixTime/x.mixDuration)}o.totalAlpha+=b,w instanceof t.RotateTimeline?this.applyRotateTimeline(w,r,c,b,v,y,E<<1,g):w.apply(r,l,c,s,b,v,t.MixDirection.out)}return i.mixDuration>0&&this.queueEvents(o,c),this.events.length=0,o.nextAnimationLast=c,o.nextTrackLast=o.trackTime,a},e.prototype.applyRotateTimeline=function(e,i,r,n,o,a,s,h){if(h&&(a[s]=0),1==n)return void e.apply(i,0,r,null,1,o,t.MixDirection.in);var u=e,l=u.frames,c=i.bones[u.boneIndex];if(r<l[0])return void(o==t.MixPose.setup&&(c.rotation=c.data.rotation));var d=0;if(r>=l[l.length-t.RotateTimeline.ENTRIES])d=c.data.rotation+l[l.length+t.RotateTimeline.PREV_ROTATION];else{var f=t.Animation.binarySearch(l,r,t.RotateTimeline.ENTRIES),p=l[f+t.RotateTimeline.PREV_ROTATION],m=l[f],g=u.getCurvePercent((f>>1)-1,1-(r-m)/(l[f+t.RotateTimeline.PREV_TIME]-m));d=l[f+t.RotateTimeline.ROTATION]-p,d-=360*(16384-(16384.499999999996-d/360|0)),d=p+d*g+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var v=o==t.MixPose.setup?c.data.rotation:c.rotation,y=0,_=d-v;if(0==_)y=a[s];else{_-=360*(16384-(16384.499999999996-_/360|0));var T=0,b=0;h?(T=0,b=_):(T=a[s],b=a[s+1]);var E=_>0,w=T>=0;t.MathUtils.signum(b)!=t.MathUtils.signum(_)&&Math.abs(b)<=90&&(Math.abs(T)>180&&(T+=360*t.MathUtils.signum(T)),w=E),y=_+T-T%360,w!=E&&(y+=360*t.MathUtils.signum(T)),a[s]=y}a[s+1]=_,v+=y*n,c.rotation=v-360*(16384-(16384.499999999996-v/360|0))},e.prototype.queueEvents=function(t,e){for(var i=t.animationStart,r=t.animationEnd,n=r-i,o=t.trackLast%n,a=this.events,s=0,h=a.length;s<h;s++){var u=a[s];if(u.time<o)break;u.time>r||this.queue.event(t,u)}for((t.loop?o>t.trackTime%n:e>=r&&t.animationLast<r)&&this.queue.complete(t);s<h;s++){a[s].time<i||this.queue.event(t,a[s])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var r=i.mixingFrom;if(null==r)break;this.queue.end(r),i.mixingFrom=null,i=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,i){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(i&&this.queue.interrupt(r),e.mixingFrom=r,e.mixTime=0,null!=r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,i)},e.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var r=!0,n=this.expandToIndex(t);null!=n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.disposeNext(n),n=n.mixingFrom,r=!1):this.disposeNext(n));var o=this.trackEntry(t,e,i,n);return this.setCurrent(t,o,r),this.queue.drain(),o},e.prototype.addAnimation=function(t,e,i,r){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,i,r)},e.prototype.addAnimationWith=function(t,e,i,r){if(null==e)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(null!=n)for(;null!=n.next;)n=n.next;var o=this.trackEntry(t,e,i,n);if(null==n)this.setCurrent(t,o,!0),this.queue.drain();else if(n.next=o,r<=0){var a=n.animationEnd-n.animationStart;0!=a?r+=a*(1+(n.trackTime/a|0))-this.data.getMix(n.animation,e):r=0}return o.delay=r,o},e.prototype.setEmptyAnimation=function(t,i){var r=this.setAnimationWith(t,e.emptyAnimation,!1);return r.mixDuration=i,r.trackEnd=i,r},e.prototype.addEmptyAnimation=function(t,i,r){r<=0&&(r-=i);var n=this.addAnimationWith(t,e.emptyAnimation,!1,r);return n.mixDuration=i,n.trackEnd=i,n},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,r=this.tracks.length;i<r;i++){var n=this.tracks[i];null!=n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e-this.tracks.length+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(t,e,i,r){var n=this.trackEntryPool.obtain();return n.trackIndex=t,n.animation=e,n.loop=i,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=null==r?0:this.data.getMix(r.animation,e),n},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs;t.clear();for(var e=this.mixingTo,i=0,r=this.tracks.length;i<r;i++){var n=this.tracks[i];null!=n&&n.setTimelineData(null,e,t)}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,i,r){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,i,r)},e.prototype.addAnimationByName=function(t,i,r,n){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,i,r,n)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.DIP=2,e.DIP_MIX=3,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var i=function(){function i(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},i.prototype.setTimelineData=function(i,r,n){null!=i&&r.push(i);var o=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,r,n):this;null!=i&&r.pop();var a=r,s=r.length-1,h=this.animation.timelines,u=this.animation.timelines.length,l=t.Utils.setArraySize(this.timelineData,u);this.timelineDipMix.length=0;var c=t.Utils.setArraySize(this.timelineDipMix,u);t:for(var d=0;d<u;d++){var f=h[d].getPropertyId();if(n.add(f))if(null!=i&&i.hasTimeline(f)){for(var p=s;p>=0;p--){var m=a[p];if(!m.hasTimeline(f)&&m.mixDuration>0){l[d]=e.DIP_MIX,c[d]=m;continue t}}l[d]=e.DIP}else l[d]=e.FIRST;else l[d]=e.SUBSEQUENT}return o},i.prototype.hasTimeline=function(t){for(var e=this.animation.timelines,i=0,r=e.length;i<r;i++)if(e[i].getPropertyId()==t)return!0;return!1},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(t){i.deprecatedWarning2||(i.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=t},enumerable:!0,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i}();t.TrackEntry=i;var r=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(n.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(n.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(n.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(n.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(n.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(n.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,i=this.animState.listeners,r=0;r<e.length;r+=2){var o=e[r],a=e[r+1];switch(o){case n.start:null!=a.listener&&a.listener.start&&a.listener.start(a);for(var s=0;s<i.length;s++)i[s].start&&i[s].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case n.interrupt:null!=a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(var s=0;s<i.length;s++)i[s].interrupt&&i[s].interrupt(a);break;case n.end:null!=a.listener&&a.listener.end&&a.listener.end(a);for(var s=0;s<i.length;s++)i[s].end&&i[s].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case n.dispose:null!=a.listener&&a.listener.dispose&&a.listener.dispose(a);for(var s=0;s<i.length;s++)i[s].dispose&&i[s].dispose(a);this.animState.trackEntryPool.free(a);break;case n.complete:null!=a.listener&&a.listener.complete&&a.listener.complete(a);for(var s=0;s<i.length;s++)i[s].complete&&i[s].complete(a);var h=t.MathUtils.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,h),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,h);break;case n.event:var u=e[2+r++];null!=a.listener&&a.listener.event&&a.listener.event(a,u);for(var s=0;s<i.length;s++)i[s].event&&i[s].event(a,u);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,u),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,u)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=r;var n;!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(n=t.EventType||(t.EventType={}));var o=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter2=o}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);this.setMixWith(r,n,i)},t.prototype.setMixByName=function(e,i,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,i,r)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+e.name;this.animationToMixTime[r]=i},t.prototype.getMix=function(t,e){var i=t.name+e.name,r=this.animationToMixTime[i];return void 0===r?this.defaultMix:r},t.deprecatedWarning1=!1,t}();t.AnimationStateData=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,i,r){var n=this.atlas.findRegion(r);if(null==n)throw new Error("Region not found in atlas: "+r+" (region attachment: "+i+")");var o=new t.RegionAttachment(i);return o.region=n,o},e.prototype.newMeshAttachment=function(e,i,r){var n=this.atlas.findRegion(r);if(null==n)throw new Error("Region not found in atlas: "+r+" (mesh attachment: "+i+")");var o=new t.MeshAttachment(i);return o.region=n,o},e.prototype.newBoundingBoxAttachment=function(e,i){return new t.BoundingBoxAttachment(i)},e.prototype.newPathAttachment=function(e,i){return new t.PathAttachment(i)},e.prototype.newPointAttachment=function(e,i){return new t.PointAttachment(i)},e.prototype.newClippingAttachment=function(e,i){return new t.ClippingAttachment(i)},e}();t.AtlasAttachmentLoader=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(t.BlendMode||(t.BlendMode={}))}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(t,e,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(i,r,n,o,a,s,h){this.ax=i,this.ay=r,this.arotation=n,this.ascaleX=o,this.ascaleY=a,this.ashearX=s,this.ashearY=h,this.appliedValid=!0;var u=this.parent,l=this.matrix;if(null==u){var c=n+90+h,d=t.MathUtils.cosDeg(n+s)*o,f=t.MathUtils.cosDeg(c)*a,p=t.MathUtils.sinDeg(n+s)*o,m=t.MathUtils.sinDeg(c)*a,g=this.skeleton;return g.flipX&&(i=-i,d=-d,f=-f),g.flipY!==e.yDown&&(r=-r,p=-p,m=-m),l.a=d,l.c=f,l.b=p,l.d=m,l.tx=i+g.x,void(l.ty=r+g.y)}var v=u.matrix.a,y=u.matrix.c,_=u.matrix.b,T=u.matrix.d;switch(l.tx=v*i+y*r+u.matrix.tx,l.ty=_*i+T*r+u.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:var c=n+90+h,d=t.MathUtils.cosDeg(n+s)*o,f=t.MathUtils.cosDeg(c)*a,p=t.MathUtils.sinDeg(n+s)*o,m=t.MathUtils.sinDeg(c)*a;return l.a=v*d+y*p,l.c=v*f+y*m,l.b=_*d+T*p,void(l.d=_*f+T*m);case t.TransformMode.OnlyTranslation:var c=n+90+h;l.a=t.MathUtils.cosDeg(n+s)*o,l.c=t.MathUtils.cosDeg(c)*a,l.b=t.MathUtils.sinDeg(n+s)*o,l.d=t.MathUtils.sinDeg(c)*a;break;case t.TransformMode.NoRotationOrReflection:var b=v*v+_*_,E=0;b>1e-4?(b=Math.abs(v*T-y*_)/b,y=_*b,T=v*b,E=Math.atan2(_,v)*t.MathUtils.radDeg):(v=0,_=0,E=90-Math.atan2(T,y)*t.MathUtils.radDeg);var w=n+s-E,x=n+h-E+90,d=t.MathUtils.cosDeg(w)*o,f=t.MathUtils.cosDeg(x)*a,p=t.MathUtils.sinDeg(w)*o,m=t.MathUtils.sinDeg(x)*a;l.a=v*d-y*p,l.c=v*f-y*m,l.b=_*d+T*p,l.d=_*f+T*m;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var S=t.MathUtils.cosDeg(n),A=t.MathUtils.sinDeg(n),I=v*S+y*A,O=_*S+T*A,b=Math.sqrt(I*I+O*O);b>1e-5&&(b=1/b),I*=b,O*=b,b=Math.sqrt(I*I+O*O);var R=Math.PI/2+Math.atan2(O,I),C=Math.cos(R)*b,P=Math.sin(R)*b,d=t.MathUtils.cosDeg(s)*o,f=t.MathUtils.cosDeg(90+h)*a,p=t.MathUtils.sinDeg(s)*o,m=t.MathUtils.sinDeg(90+h)*a;return l.a=I*d+C*p,l.c=I*f+C*m,l.b=O*d+P*p,l.d=O*f+P*m,void((this.data.transformMode!=t.TransformMode.NoScaleOrReflection?v*T-y*_<0:this.skeleton.flipX!=this.skeleton.flipY!=e.yDown)&&(l.c=-l.c,l.d=-l.d))}this.skeleton.flipX&&(l.a=-l.a,l.c=-l.c),this.skeleton.flipY!=e.yDown&&(l.b=-l.b,l.d=-l.d)},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,i=this.matrix;if(null==e)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*t.MathUtils.radDeg);var r=e.matrix,n=1/(r.a*r.d-r.b*r.c),o=i.tx-r.tx,a=i.ty-r.ty;this.ax=o*r.d*n-a*r.c*n,this.ay=a*r.a*n-o*r.b*n;var s=n*r.d,h=n*r.a,u=n*r.c,l=n*r.b,c=s*i.a-u*i.b,d=s*i.c-u*i.d,f=h*i.b-l*i.a,p=h*i.d-l*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+f*f),this.ascaleX>1e-4){var m=c*p-d*f;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(c*d+f*p,m)*t.MathUtils.radDeg,this.arotation=Math.atan2(f,c)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,d)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,r=e.c,n=e.b,o=e.d,a=1/(i*o-r*n),s=t.x-e.tx,h=t.y-e.ty;return t.x=s*o*a-h*r*a,t.y=h*i*a-s*n*a,t},e.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,r=t.y;return t.x=i*e.a+r*e.c+e.tx,t.y=i*e.b+r*e.d+e.ty,t},e.prototype.worldToLocalRotation=function(e){var i=t.MathUtils.sinDeg(e),r=t.MathUtils.cosDeg(e),n=this.matrix;return Math.atan2(n.a*i-n.b*r,n.d*r-n.c*i)*t.MathUtils.radDeg},e.prototype.localToWorldRotation=function(e){var i=t.MathUtils.sinDeg(e),r=t.MathUtils.cosDeg(e),n=this.matrix;return Math.atan2(r*n.b+i*n.d,r*n.a+i*n.c)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var i=this.matrix,r=i.a,n=i.c,o=i.b,a=i.d,s=t.MathUtils.cosDeg(e),h=t.MathUtils.sinDeg(e);i.a=s*r-h*o,i.c=s*n-h*a,i.b=h*r+s*o,i.d=h*n+s*a,this.appliedValid=!1},e.yDown=!1,e}();t.Bone=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t,e,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=i.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=r}return t}();t.BoneData=e;var i;!function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(i=t.TransformMode||(t.TransformMode={}))}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}return t}();t.Event=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t){this.name=t}return t}();t.EventData=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return e.prototype.getOrder=function(){return this.data.order},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},e.prototype.apply1=function(e,i,r,n){e.appliedValid||e.updateAppliedTransform();var o=e.parent.matrix,a=1/(o.a*o.d-o.b*o.c),s=i-o.tx,h=r-o.ty,u=(s*o.d-h*o.c)*a-e.ax,l=(h*o.a-s*o.b)*a-e.ay,c=Math.atan2(l,u)*t.MathUtils.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),e.updateWorldTransformWith(e.ax,e.ay,e.arotation+c*n,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,i,r,n,o,a){if(0==a)return void i.updateWorldTransform();e.appliedValid||e.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var s=e.ax,h=e.ay,u=e.ascaleX,l=e.ascaleY,c=i.ascaleX,d=e.matrix,f=0,p=0,m=0;u<0?(u=-u,f=180,m=-1):(f=0,m=1),l<0&&(l=-l,m=-m),c<0?(c=-c,p=180):p=0;var g=i.ax,v=0,y=0,_=0,T=d.a,b=d.c,E=d.b,w=d.d,x=Math.abs(u-l)<=1e-4;x?(v=i.ay,y=T*g+b*v+d.tx,_=E*g+w*v+d.ty):(v=0,y=T*g+d.tx,_=E*g+d.ty);var S=e.parent.matrix;T=S.a,b=S.c,E=S.b,w=S.d;var A=1/(T*w-b*E),I=r-S.tx,O=n-S.ty,R=(I*w-O*b)*A-s,C=(O*T-I*E)*A-h;I=y-S.tx,O=_-S.ty;var P=(I*w-O*b)*A-s,M=(O*T-I*E)*A-h,D=Math.sqrt(P*P+M*M),k=i.data.length*c,N=0,G=0;t:if(x){k*=u;var L=(R*R+C*C-D*D-k*k)/(2*D*k);L<-1?L=-1:L>1&&(L=1),G=Math.acos(L)*o,T=D+k*L,b=k*Math.sin(G),N=Math.atan2(C*T-R*b,R*T+C*b)}else{T=u*k,b=l*k;var F=T*T,U=b*b,B=R*R+C*C,j=Math.atan2(C,R);E=U*D*D+F*B-F*U;var X=-2*U*D,W=U-F;if((w=X*X-4*W*E)>=0){var H=Math.sqrt(w);X<0&&(H=-H),H=-(X+H)/2;var V=H/W,Y=E/H,z=Math.abs(V)<Math.abs(Y)?V:Y;if(z*z<=B){O=Math.sqrt(B-z*z)*o,N=j-Math.atan2(O,z),G=Math.atan2(O/l,(z-D)/u);break t}}var K=t.MathUtils.PI,q=D-T,Z=q*q,J=0,Q=0,$=D+T,tt=$*$,et=0;E=-T*D/(F-U),E>=-1&&E<=1&&(E=Math.acos(E),I=T*Math.cos(E)+D,O=b*Math.sin(E),w=I*I+O*O,w<Z&&(K=E,Z=w,q=I,J=O),w>tt&&(Q=E,tt=w,$=I,et=O)),B<=(Z+tt)/2?(N=j-Math.atan2(J*o,q),G=K*o):(N=j-Math.atan2(et*o,$),G=Q*o)}var it=Math.atan2(v,g)*m,rt=e.arotation;N=(N-it)*t.MathUtils.radDeg+f-rt,N>180?N-=360:N<-180&&(N+=360),e.updateWorldTransformWith(s,h,rt+N*a,e.ascaleX,e.ascaleY,0,0),rt=i.arotation,G=((G+it)*t.MathUtils.radDeg-i.ashearX)*m+p-rt,G>180?G-=360:G<-180&&(G+=360),i.updateWorldTransformWith(g,v,rt+G*a,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)},e}();t.IkConstraint=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t}return t}();t.IkConstraintData=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,r=t.bones.length;i<r;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof t.PathAttachment){var i=this.rotateMix,r=this.translateMix,n=r>0,o=i>0;if(n||o){var a=this.data,s=a.spacingMode,h=s==t.SpacingMode.Length,u=a.rotateMode,l=u==t.RotateMode.Tangent,c=u==t.RotateMode.ChainScale,d=this.bones.length,f=l?d:d+1,p=this.bones,m=t.Utils.setArraySize(this.spaces,f),g=null,v=this.spacing;if(c||h){c&&(g=t.Utils.setArraySize(this.lengths,d));for(var y=0,_=f-1;y<_;){var T=p[y],b=T.data.length,E=b*T.matrix.a,w=b*T.matrix.b,x=Math.sqrt(E*E+w*w);c&&(g[y]=x),m[++y]=(h?b+v:v)*x/b}}else for(var y=1;y<f;y++)m[y]=v;var S=this.computeWorldPositions(e,f,l,a.positionMode==t.PositionMode.Percent,s==t.SpacingMode.Percent),A=S[0],I=S[1],O=a.offsetRotation,R=!1;if(0==O)R=u==t.RotateMode.Chain;else{R=!1;var C=this.target.bone.matrix;O*=C.a*C.d-C.b*C.c>0?t.MathUtils.degRad:-t.MathUtils.degRad}for(var y=0,C=3;y<d;y++,C+=3){var T=p[y],P=T.matrix;P.tx+=(A-P.tx)*r,P.ty+=(I-P.ty)*r;var E=S[C],w=S[C+1],M=E-A,D=w-I;if(c){var k=g[y];if(0!=k){var N=(Math.sqrt(M*M+D*D)/k-1)*i+1;P.a*=N,P.b*=N}}if(A=E,I=w,o){var G=P.a,L=P.c,F=P.b,U=P.d,B=0,j=0,X=0;if(B=l?S[C-1]:0==m[y+1]?S[C+2]:Math.atan2(D,M),B-=Math.atan2(F,G),R){j=Math.cos(B),X=Math.sin(B);var W=T.data.length;A+=(W*(j*G-X*F)-M)*i,I+=(W*(X*G+j*F)-D)*i}else B+=O;B>t.MathUtils.PI?B-=t.MathUtils.PI2:B<-t.MathUtils.PI&&(B+=t.MathUtils.PI2),B*=i,j=Math.cos(B),X=Math.sin(B),P.a=j*G-X*F,P.c=j*L-X*U,P.b=X*G+j*F,P.d=X*L+j*U}T.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(i,r,n,o,a){var s=this.target,h=this.position,u=this.spaces,l=t.Utils.setArraySize(this.positions,3*r+2),c=null,d=i.closed,f=i.worldVerticesLength,p=f/6,m=e.NONE;if(!i.constantSpeed){var g=i.lengths;p-=d?1:2;var v=g[p];if(o&&(h*=v),a)for(var y=0;y<r;y++)u[y]*=v;c=t.Utils.setArraySize(this.world,8);for(var y=0,_=0,T=0;y<r;y++,_+=3){var b=u[y];h+=b;var E=h;if(d)E%=v,E<0&&(E+=v),T=0;else{if(E<0){m!=e.BEFORE&&(m=e.BEFORE,i.computeWorldVertices(s,2,4,c,0,2)),this.addBeforePosition(E,c,0,l,_);continue}if(E>v){m!=e.AFTER&&(m=e.AFTER,i.computeWorldVertices(s,f-6,4,c,0,2)),this.addAfterPosition(E-v,c,0,l,_);continue}}for(;;T++){var w=g[T];if(!(E>w)){if(0==T)E/=w;else{var x=g[T-1];E=(E-x)/(w-x)}break}}T!=m&&(m=T,d&&T==p?(i.computeWorldVertices(s,f-4,4,c,0,2),i.computeWorldVertices(s,0,4,c,4,2)):i.computeWorldVertices(s,6*T+2,8,c,0,2)),this.addCurvePosition(E,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],l,_,n||y>0&&0==b)}return l}d?(f+=2,c=t.Utils.setArraySize(this.world,f),i.computeWorldVertices(s,2,f-4,c,0,2),i.computeWorldVertices(s,0,2,c,f-4,2),c[f-2]=c[0],c[f-1]=c[1]):(p--,f-=4,c=t.Utils.setArraySize(this.world,f),i.computeWorldVertices(s,2,f,c,0,2));for(var S=t.Utils.setArraySize(this.curves,p),A=0,I=c[0],O=c[1],R=0,C=0,P=0,M=0,D=0,k=0,N=0,G=0,L=0,F=0,U=0,B=0,j=0,X=0,y=0,W=2;y<p;y++,W+=6)R=c[W],C=c[W+1],P=c[W+2],M=c[W+3],D=c[W+4],k=c[W+5],N=.1875*(I-2*R+P),G=.1875*(O-2*C+M),L=.09375*(3*(R-P)-I+D),F=.09375*(3*(C-M)-O+k),U=2*N+L,B=2*G+F,j=.75*(R-I)+N+.16666667*L,X=.75*(C-O)+G+.16666667*F,A+=Math.sqrt(j*j+X*X),j+=U,X+=B,U+=L,B+=F,A+=Math.sqrt(j*j+X*X),j+=U,X+=B,A+=Math.sqrt(j*j+X*X),j+=U+L,X+=B+F,A+=Math.sqrt(j*j+X*X),S[y]=A,I=D,O=k;if(o&&(h*=A),a)for(var y=0;y<r;y++)u[y]*=A;for(var H=this.segments,V=0,y=0,_=0,T=0,Y=0;y<r;y++,_+=3){var b=u[y];h+=b;var E=h;if(d)E%=A,E<0&&(E+=A),T=0;else{if(E<0){this.addBeforePosition(E,c,0,l,_);continue}if(E>A){this.addAfterPosition(E-A,c,f-4,l,_);continue}}for(;;T++){var z=S[T];if(!(E>z)){if(0==T)E/=z;else{var x=S[T-1];E=(E-x)/(z-x)}break}}if(T!=m){m=T;var K=6*T;for(I=c[K],O=c[K+1],R=c[K+2],C=c[K+3],P=c[K+4],M=c[K+5],D=c[K+6],k=c[K+7],N=.03*(I-2*R+P),G=.03*(O-2*C+M),L=.006*(3*(R-P)-I+D),F=.006*(3*(C-M)-O+k),U=2*N+L,B=2*G+F,j=.3*(R-I)+N+.16666667*L,X=.3*(C-O)+G+.16666667*F,V=Math.sqrt(j*j+X*X),H[0]=V,K=1;K<8;K++)j+=U,X+=B,U+=L,B+=F,V+=Math.sqrt(j*j+X*X),H[K]=V;j+=U,X+=B,V+=Math.sqrt(j*j+X*X),H[8]=V,j+=U+L,X+=B+F,V+=Math.sqrt(j*j+X*X),H[9]=V,Y=0}for(E*=V;;Y++){var q=H[Y];if(!(E>q)){if(0==Y)E/=q;else{var x=H[Y-1];E=Y+(E-x)/(q-x)}break}}this.addCurvePosition(.1*E,I,O,R,C,P,M,D,k,l,_,n||y>0&&0==b)}return l},e.prototype.addBeforePosition=function(t,e,i,r,n){var o=e[i],a=e[i+1],s=e[i+2]-o,h=e[i+3]-a,u=Math.atan2(h,s);r[n]=o+t*Math.cos(u),r[n+1]=a+t*Math.sin(u),r[n+2]=u},e.prototype.addAfterPosition=function(t,e,i,r,n){var o=e[i+2],a=e[i+3],s=o-e[i],h=a-e[i+1],u=Math.atan2(h,s);r[n]=o+t*Math.cos(u),r[n+1]=a+t*Math.sin(u),r[n+2]=u},e.prototype.addCurvePosition=function(t,e,i,r,n,o,a,s,h,u,l,c){(0==t||isNaN(t))&&(t=1e-4);var d=t*t,f=d*t,p=1-t,m=p*p,g=m*p,v=p*t,y=3*v,_=p*y,T=y*t,b=e*g+r*_+o*T+s*f,E=i*g+n*_+a*T+h*f;u[l]=b,u[l+1]=E,c&&(u[l+2]=Math.atan2(E-(i*m+n*v*2+a*d),b-(e*m+r*v*2+o*d)))},e.prototype.getOrder=function(){return this.data.order},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e}();t.PathConstraint=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t){this.order=0,this.bones=new Array,this.name=t}return t}();t.PathConstraintData=e;!function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={}));!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={}));!function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var r=e.bones[i],n=void 0;if(null==r.parent)n=new t.Bone(r,this,null);else{var o=this.bones[r.parent.index];n=new t.Bone(r,this,o),o.children.push(n)}this.bones.push(n)}this.slots=new Array,this.drawOrder=new Array;for(var i=0;i<e.slots.length;i++){var a=e.slots[i],n=this.bones[a.boneData.index],s=new t.Slot(a,n);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(var i=0;i<e.ikConstraints.length;i++){var h=e.ikConstraints[i];this.ikConstraints.push(new t.IkConstraint(h,this))}this.transformConstraints=new Array;for(var i=0;i<e.transformConstraints.length;i++){var u=e.transformConstraints[i];this.transformConstraints.push(new t.TransformConstraint(u,this))}this.pathConstraints=new Array;for(var i=0;i<e.pathConstraints.length;i++){var l=e.pathConstraints[i];this.pathConstraints.push(new t.PathConstraint(l,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].sorted=!1;var r=this.ikConstraints,n=this.transformConstraints,o=this.pathConstraints,a=r.length,s=n.length,h=o.length,u=a+s+h;t:for(var e=0;e<u;e++){for(var l=0;l<a;l++){var c=r[l];if(c.data.order==e){this.sortIkConstraint(c);continue t}}for(var l=0;l<s;l++){var c=n[l];if(c.data.order==e){this.sortTransformConstraint(c);continue t}}for(var l=0;l<h;l++){var c=o[l];if(c.data.order==e){this.sortPathConstraint(c);continue t}}}for(var e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var i=t.bones,r=i[0];if(this.sortBone(r),i.length>1){var n=i[i.length-1];this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}this._updateCache.push(t),this.sortReset(r.children),i[i.length-1].sorted=!0},e.prototype.sortPathConstraint=function(e){var i=e.target,r=i.data.index,n=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,r,n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,n);for(var o=0,a=this.data.skins.length;o<a;o++)this.sortPathConstraintAttachment(this.data.skins[o],r,n);var s=i.getAttachment();s instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(s,n);for(var h=e.bones,u=h.length,o=0;o<u;o++)this.sortBone(h[o]);this._updateCache.push(e);for(var o=0;o<u;o++)this.sortReset(h[o].children);for(var o=0;o<u;o++)h[o].sorted=!0},e.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,i=e.length;if(t.data.local)for(var r=0;r<i;r++){var n=e[r];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(var r=0;r<i;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var o=0;o<i;o++)this.sortReset(e[o].children);for(var o=0;o<i;o++)e[o].sorted=!0},e.prototype.sortPathConstraintAttachment=function(t,e,i){var r=t.attachments[e];if(r)for(var n in r)this.sortPathConstraintAttachmentWith(r[n],i)},e.prototype.sortPathConstraintAttachmentWith=function(e,i){if(e instanceof t.PathAttachment){var r=e.bones;if(null==r)this.sortBone(i);else for(var n=this.bones,o=0;o<r.length;)for(var a=r[o++],s=o+a;o<s;o++){var h=r[o];this.sortBone(n[h])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];r.sorted&&this.sortReset(r.children),r.sorted=!1}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}for(var n=this._updateCache,e=0,i=n.length;e<i;e++)n[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();for(var r=this.ikConstraints,e=0,i=r.length;e<i;e++){var n=r[e];n.bendDirection=n.data.bendDirection,n.mix=n.data.mix}for(var o=this.transformConstraints,e=0,i=o.length;e<i;e++){var n=o[e],a=n.data;n.rotateMix=a.rotateMix,n.translateMix=a.translateMix,n.scaleMix=a.scaleMix,n.shearMix=a.shearMix}for(var s=this.pathConstraints,e=0,i=s.length;e<i;e++){var n=s[e],a=n.data;n.position=a.position,n.spacing=a.spacing,n.rotateMix=a.rotateMix,n.translateMix=a.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var i=0,r=e.length;i<r;i++)e[i].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i],o=n.data.attachmentName;if(null!=o){var a=t.getAttachment(i,o);null!=a&&n.setAttachment(a)}}this.skin=t},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,n=i.length;r<n;r++){var o=i[r];if(o.data.name==t){var a=null;if(null!=e&&null==(a=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(a)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.getBounds=function(e,i,r){if(null==e)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var n=this.drawOrder,o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,u=0,l=n.length;u<l;u++){var c=n[u],d=0,f=null,p=c.getAttachment();if(p instanceof t.RegionAttachment)d=8,f=t.Utils.setArraySize(r,d,0),p.computeWorldVertices(c.bone,f,0,2);else if(p instanceof t.MeshAttachment){var m=p;d=m.worldVerticesLength,f=t.Utils.setArraySize(r,d,0),m.computeWorldVertices(c,0,d,f,0,2)}if(null!=f)for(var g=0,v=f.length;g<v;g+=2){var y=f[g],_=f[g+1];o=Math.min(o,y),a=Math.min(a,_),s=Math.max(s,y),h=Math.max(h,_)}}e.set(o,a),i.set(s-o,h-a)},e.prototype.update=function(t){this.time+=t},e}();t.Skeleton=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool(function(){return t.Utils.newFloatArray(16)})}return e.prototype.update=function(e,i){if(null==e)throw new Error("skeleton cannot be null.");var r=this.boundingBoxes,n=this.polygons,o=this.polygonPool,a=e.slots,s=a.length;r.length=0,o.freeAll(n),n.length=0;for(var h=0;h<s;h++){var u=a[h],l=u.getAttachment();if(l instanceof t.BoundingBoxAttachment){var c=l;r.push(c);var d=o.obtain();d.length!=c.worldVerticesLength&&(d=t.Utils.newFloatArray(c.worldVerticesLength)),n.push(d),c.computeWorldVertices(u,0,c.worldVerticesLength,d,0,2)}}i?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=this.polygons,o=0,a=n.length;o<a;o++)for(var s=n[o],h=s,u=0,l=s.length;u<l;u+=2){var c=h[u],d=h[u+1];t=Math.min(t,c),e=Math.min(e,d),i=Math.max(i,c),r=Math.max(r,d)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=r},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,i,r){var n=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(t<=n&&i<=n||e<=o&&r<=o||t>=a&&i>=a||e>=s&&r>=s)return!1;var h=(r-e)/(i-t),u=h*(n-t)+e;if(u>o&&u<s)return!0;if((u=h*(a-t)+e)>o&&u<s)return!0;var l=(o-e)/h+t;return l>n&&l<a||(l=(s-e)/h+t)>n&&l<a},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var i=this.polygons,r=0,n=i.length;r<n;r++)if(this.containsPointPolygon(i[r],t,e))return this.boundingBoxes[r];return null},e.prototype.containsPointPolygon=function(t,e,i){for(var r=t,n=t.length,o=n-2,a=!1,s=0;s<n;s+=2){var h=r[s+1],u=r[o+1];if(h<i&&u>=i||u<i&&h>=i){var l=r[s];l+(i-h)/(u-h)*(r[o]-l)<e&&(a=!a)}o=s}return a},e.prototype.intersectsSegment=function(t,e,i,r){for(var n=this.polygons,o=0,a=n.length;o<a;o++)if(this.intersectsSegmentPolygon(n[o],t,e,i,r))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,e,i,r,n){for(var o=t,a=t.length,s=e-r,h=i-n,u=e*n-i*r,l=o[a-2],c=o[a-1],d=0;d<a;d+=2){var f=o[d],p=o[d+1],m=l*p-c*f,g=l-f,v=c-p,y=s*v-h*g,_=(u*g-s*m)/y;if((_>=l&&_<=f||_>=f&&_<=l)&&(_>=e&&_<=r||_>=r&&_<=e)){var T=(u*v-h*m)/y;if((T>=c&&T<=p||T>=p&&T<=c)&&(T>=i&&T<=n||T>=n&&T<=i))return!0}l=f,c=p}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(i,r){if(null!=this.clipAttachment)return 0;this.clipAttachment=r;var n=r.worldVerticesLength,o=t.Utils.setArraySize(this.clippingPolygon,n);r.computeWorldVertices(i,0,n,o,0,2);var a=this.clippingPolygon;e.makeClockwise(a);for(var s=this.clippingPolygons=this.triangulator.decompose(a,this.triangulator.triangulate(a)),h=0,u=s.length;h<u;h++){var l=s[h];e.makeClockwise(l),l.push(l[0]),l.push(l[1])}return s.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,i,r,n,o,a,s,h){var u=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,d=this.clippingPolygons,f=this.clippingPolygons.length,p=h?12:8,m=0;l.length=0,c.length=0;t:for(var g=0;g<n;g+=3){var v=r[g]<<1,y=e[v],_=e[v+1],T=o[v],b=o[v+1];v=r[g+1]<<1;var E=e[v],w=e[v+1],x=o[v],S=o[v+1];v=r[g+2]<<1;for(var A=e[v],I=e[v+1],O=o[v],R=o[v+1],C=0;C<f;C++){var P=l.length;if(!this.clip(y,_,E,w,A,I,d[C],u)){var M=t.Utils.setArraySize(l,P+3*p);M[P]=y,M[P+1]=_,M[P+2]=a.r,M[P+3]=a.g,M[P+4]=a.b,M[P+5]=a.a,h?(M[P+6]=T,M[P+7]=b,M[P+8]=s.r,M[P+9]=s.g,M[P+10]=s.b,M[P+11]=s.a,M[P+12]=E,M[P+13]=w,M[P+14]=a.r,M[P+15]=a.g,M[P+16]=a.b,M[P+17]=a.a,M[P+18]=x,M[P+19]=S,M[P+20]=s.r,M[P+21]=s.g,M[P+22]=s.b,M[P+23]=s.a,M[P+24]=A,M[P+25]=I,M[P+26]=a.r,M[P+27]=a.g,M[P+28]=a.b,M[P+29]=a.a,M[P+30]=O,M[P+31]=R,M[P+32]=s.r,M[P+33]=s.g,M[P+34]=s.b,M[P+35]=s.a):(M[P+6]=T,M[P+7]=b,M[P+8]=E,M[P+9]=w,M[P+10]=a.r,M[P+11]=a.g,M[P+12]=a.b,M[P+13]=a.a,M[P+14]=x,M[P+15]=S,M[P+16]=A,M[P+17]=I,M[P+18]=a.r,M[P+19]=a.g,M[P+20]=a.b,M[P+21]=a.a,M[P+22]=O,M[P+23]=R),P=c.length;var D=t.Utils.setArraySize(c,P+3);D[P]=m,D[P+1]=m+1,D[P+2]=m+2,m+=3;continue t}var k=u.length;if(0!=k){for(var N=w-I,G=A-E,L=y-A,F=I-_,U=1/(N*L+G*(_-I)),B=k>>1,j=this.clipOutput,M=t.Utils.setArraySize(l,P+B*p),X=0;X<k;X+=2){var W=j[X],H=j[X+1];M[P]=W,M[P+1]=H,M[P+2]=a.r,M[P+3]=a.g,M[P+4]=a.b,M[P+5]=a.a;var V=W-A,Y=H-I,z=(N*V+G*Y)*U,K=(F*V+L*Y)*U,q=1-z-K;M[P+6]=T*z+x*K+O*q,M[P+7]=b*z+S*K+R*q,h&&(M[P+8]=s.r,M[P+9]=s.g,M[P+10]=s.b,M[P+11]=s.a),P+=p}P=c.length;var D=t.Utils.setArraySize(c,P+3*(B-2));B--;for(var X=1;X<B;X++)D[P]=m,D[P+1]=m+X,D[P+2]=m+X+1,P+=3;m+=B+1}}}},e.prototype.clip=function(t,e,i,r,n,o,a,s){var h=s,u=!1,l=null;a.length%4>=2?(l=s,s=this.scratch):l=this.scratch,l.length=0,l.push(t),l.push(e),l.push(i),l.push(r),l.push(n),l.push(o),l.push(t),l.push(e),s.length=0;for(var c=a,d=a.length-4,f=0;;f+=2){for(var p=c[f],m=c[f+1],g=c[f+2],v=c[f+3],y=p-g,_=m-v,T=l,b=l.length-2,E=s.length,w=0;w<b;w+=2){var x=T[w],S=T[w+1],A=T[w+2],I=T[w+3],O=y*(I-v)-_*(A-g)>0;if(y*(S-v)-_*(x-g)>0){if(O){s.push(A),s.push(I);continue}var R=I-S,C=A-x,P=(C*(m-S)-R*(p-x))/(R*(g-p)-C*(v-m));s.push(p+(g-p)*P),s.push(m+(v-m)*P)}else if(O){var R=I-S,C=A-x,P=(C*(m-S)-R*(p-x))/(R*(g-p)-C*(v-m));s.push(p+(g-p)*P),s.push(m+(v-m)*P),s.push(A),s.push(I)}u=!0}if(E==s.length)return h.length=0,!0;if(s.push(s[0]),s.push(s[1]),f==d)break;var M=s;s=l,s.length=0,l=M}if(h!=s){h.length=0;for(var f=0,D=s.length-2;f<D;f++)h[f]=s[f]}else h.length=h.length-2;return u},e.makeClockwise=function(t){for(var e=t,i=t.length,r=e[i-2]*e[1]-e[0]*e[i-1],n=0,o=0,a=0,s=0,h=0,u=i-3;h<u;h+=2)n=e[h],o=e[h+1],a=e[h+2],s=e[h+3],r+=n*s-a*o;if(!(r<0))for(var h=0,l=i-2,u=i>>1;h<u;h+=2){var c=e[h],d=e[h+1],f=l-h;e[h]=e[f],e[h+1]=e[f+1],e[f]=c,e[f+1]=d}},e}();t.SkeletonClipping=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t}();t.SkeletonData=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var r=this.scale,n=new t.SkeletonData,o="string"==typeof i?JSON.parse(i):i,a=o.skeleton;if(null!=a&&(n.hash=a.hash,n.version=a.spine,n.width=a.width,n.height=a.height,n.fps=a.fps,n.imagesPath=a.images),o.bones)for(var s=0;s<o.bones.length;s++){var h=o.bones[s],u=null,l=this.getValue(h,"parent",null);if(null!=l&&null==(u=n.findBone(l)))throw new Error("Parent bone not found: "+l);var c=new t.BoneData(n.bones.length,h.name,u);c.length=this.getValue(h,"length",0)*r,c.x=this.getValue(h,"x",0)*r,c.y=this.getValue(h,"y",0)*r,c.rotation=this.getValue(h,"rotation",0),c.scaleX=this.getValue(h,"scaleX",1),c.scaleY=this.getValue(h,"scaleY",1),c.shearX=this.getValue(h,"shearX",0),c.shearY=this.getValue(h,"shearY",0),c.transformMode=e.transformModeFromString(this.getValue(h,"transform","normal")),n.bones.push(c)}if(o.slots)for(var s=0;s<o.slots.length;s++){var d=o.slots[s],f=d.name,p=d.bone,m=n.findBone(p);if(null==m)throw new Error("Slot bone not found: "+p);var c=new t.SlotData(n.slots.length,f,m),g=this.getValue(d,"color",null);null!=g&&c.color.setFromString(g);var v=this.getValue(d,"dark",null);null!=v&&(c.darkColor=new t.Color(1,1,1,1),c.darkColor.setFromString(v)),c.attachmentName=this.getValue(d,"attachment",null),c.blendMode=e.blendModeFromString(this.getValue(d,"blend","normal")),n.slots.push(c)}if(o.ik)for(var s=0;s<o.ik.length;s++){var y=o.ik[s],c=new t.IkConstraintData(y.name);c.order=this.getValue(y,"order",0);for(var _=0;_<y.bones.length;_++){var p=y.bones[_],T=n.findBone(p);if(null==T)throw new Error("IK bone not found: "+p);c.bones.push(T)}var b=y.target;if(c.target=n.findBone(b),null==c.target)throw new Error("IK target bone not found: "+b);c.bendDirection=this.getValue(y,"bendPositive",!0)?1:-1,c.mix=this.getValue(y,"mix",1),n.ikConstraints.push(c)}if(o.transform)for(var s=0;s<o.transform.length;s++){var y=o.transform[s],c=new t.TransformConstraintData(y.name);c.order=this.getValue(y,"order",0);for(var _=0;_<y.bones.length;_++){var p=y.bones[_],T=n.findBone(p);if(null==T)throw new Error("Transform constraint bone not found: "+p);c.bones.push(T)}var b=y.target;if(c.target=n.findBone(b),null==c.target)throw new Error("Transform constraint target bone not found: "+b);c.local=this.getValue(y,"local",!1),c.relative=this.getValue(y,"relative",!1),c.offsetRotation=this.getValue(y,"rotation",0),c.offsetX=this.getValue(y,"x",0)*r,c.offsetY=this.getValue(y,"y",0)*r,c.offsetScaleX=this.getValue(y,"scaleX",0),c.offsetScaleY=this.getValue(y,"scaleY",0),c.offsetShearY=this.getValue(y,"shearY",0),c.rotateMix=this.getValue(y,"rotateMix",1),c.translateMix=this.getValue(y,"translateMix",1),c.scaleMix=this.getValue(y,"scaleMix",1),c.shearMix=this.getValue(y,"shearMix",1),n.transformConstraints.push(c)}if(o.path)for(var s=0;s<o.path.length;s++){var y=o.path[s],c=new t.PathConstraintData(y.name);c.order=this.getValue(y,"order",0);for(var _=0;_<y.bones.length;_++){var p=y.bones[_],T=n.findBone(p);if(null==T)throw new Error("Transform constraint bone not found: "+p);c.bones.push(T)}var b=y.target;if(c.target=n.findSlot(b),null==c.target)throw new Error("Path target slot not found: "+b);c.positionMode=e.positionModeFromString(this.getValue(y,"positionMode","percent")),c.spacingMode=e.spacingModeFromString(this.getValue(y,"spacingMode","length")),c.rotateMode=e.rotateModeFromString(this.getValue(y,"rotateMode","tangent")),c.offsetRotation=this.getValue(y,"rotation",0),c.position=this.getValue(y,"position",0),c.positionMode==t.PositionMode.Fixed&&(c.position*=r),c.spacing=this.getValue(y,"spacing",0),c.spacingMode!=t.SpacingMode.Length&&c.spacingMode!=t.SpacingMode.Fixed||(c.spacing*=r),c.rotateMix=this.getValue(y,"rotateMix",1),c.translateMix=this.getValue(y,"translateMix",1),n.pathConstraints.push(c)}if(o.skins)for(var E in o.skins){var w=o.skins[E],x=new t.Skin(E);for(var f in w){var S=n.findSlotIndex(f);if(-1==S)throw new Error("Slot not found: "+f);var d=w[f];for(var A in d){var I=this.readAttachment(d[A],x,S,A,n);null!=I&&x.addAttachment(S,A,I)}}n.skins.push(x),"default"==x.name&&(n.defaultSkin=x)}for(var s=0,O=this.linkedMeshes.length;s<O;s++){var R=this.linkedMeshes[s],x=null==R.skin?n.defaultSkin:n.findSkin(R.skin);if(null==x)throw new Error("Skin not found: "+R.skin);var C=x.getAttachment(R.slotIndex,R.parent);if(null==C)throw new Error("Parent mesh not found: "+R.parent);R.mesh.setParentMesh(C)}if(this.linkedMeshes.length=0,o.events)for(var P in o.events){var M=o.events[P],c=new t.EventData(P);c.intValue=this.getValue(M,"int",0),c.floatValue=this.getValue(M,"float",0),c.stringValue=this.getValue(M,"string",""),n.events.push(c)}if(o.animations)for(var D in o.animations){var k=o.animations[D];this.readAnimation(k,D,n)}return n},e.prototype.readAttachment=function(e,r,n,o,a){var s=this.scale;switch(o=this.getValue(e,"name",o),this.getValue(e,"type","region")){case"region":var h=this.getValue(e,"path",o),u=this.attachmentLoader.newRegionAttachment(r,o,h);if(null==u)return null;u.path=h,u.x=this.getValue(e,"x",0)*s,u.y=this.getValue(e,"y",0)*s,u.scaleX=this.getValue(e,"scaleX",1),u.scaleY=this.getValue(e,"scaleY",1),u.rotation=this.getValue(e,"rotation",0),u.width=e.width*s,u.height=e.height*s;var l=this.getValue(e,"color",null);return null!=l&&u.color.setFromString(l),u;case"boundingbox":var c=this.attachmentLoader.newBoundingBoxAttachment(r,o);if(null==c)return null;this.readVertices(e,c,e.vertexCount<<1);var l=this.getValue(e,"color",null);return null!=l&&c.color.setFromString(l),c;case"mesh":case"linkedmesh":var h=this.getValue(e,"path",o),d=this.attachmentLoader.newMeshAttachment(r,o,h);if(null==d)return null;d.path=h;var l=this.getValue(e,"color",null);null!=l&&d.color.setFromString(l);var f=this.getValue(e,"parent",null);if(null!=f)return d.inheritDeform=this.getValue(e,"deform",!0),this.linkedMeshes.push(new i(d,this.getValue(e,"skin",null),n,f)),d;var p=e.uvs;return this.readVertices(e,d,p.length),d.triangles=e.triangles,d.regionUVs=p,d.hullLength=2*this.getValue(e,"hull",0),d;case"path":var h=this.attachmentLoader.newPathAttachment(r,o);if(null==h)return null;h.closed=this.getValue(e,"closed",!1),h.constantSpeed=this.getValue(e,"constantSpeed",!0);var m=e.vertexCount;this.readVertices(e,h,m<<1);for(var g=t.Utils.newArray(m/3,0),v=0;v<e.lengths.length;v++)g[v]=e.lengths[v]*s;h.lengths=g;var l=this.getValue(e,"color",null);return null!=l&&h.color.setFromString(l),h;case"point":var y=this.attachmentLoader.newPointAttachment(r,o);if(null==y)return null;y.x=this.getValue(e,"x",0)*s,y.y=this.getValue(e,"y",0)*s,y.rotation=this.getValue(e,"rotation",0);var l=this.getValue(e,"color",null);return null!=l&&y.color.setFromString(l),y;case"clipping":var _=this.attachmentLoader.newClippingAttachment(r,o);if(null==_)return null;var T=this.getValue(e,"end",null);if(null!=T){var b=a.findSlot(T);if(null==b)throw new Error("Clipping end slot not found: "+T);_.endSlot=b}var m=e.vertexCount;this.readVertices(e,_,m<<1);var l=this.getValue(e,"color",null);return null!=l&&_.color.setFromString(l),_}return null},e.prototype.readVertices=function(e,i,r){var n=this.scale;i.worldVerticesLength=r;var o=e.vertices;if(r==o.length){var a=t.Utils.toFloatArray(o);if(1!=n)for(var s=0,h=o.length;s<h;s++)a[s]*=n;return void(i.vertices=a)}for(var u=new Array,l=new Array,s=0,h=o.length;s<h;){var c=o[s++];l.push(c);for(var d=s+4*c;s<d;s+=4)l.push(o[s]),u.push(o[s+1]*n),u.push(o[s+2]*n),u.push(o[s+3])}i.bones=l,i.vertices=t.Utils.toFloatArray(u)},e.prototype.readAnimation=function(e,i,r){var n=this.scale,o=new Array,a=0;if(e.slots)for(var s in e.slots){var h=e.slots[s],u=r.findSlotIndex(s);if(-1==u)throw new Error("Slot not found: "+s);for(var l in h){var c=h[l];if("attachment"==l){var d=new t.AttachmentTimeline(c.length);d.slotIndex=u;for(var f=0,p=0;p<c.length;p++){var m=c[p];d.setFrame(f++,m.time,m.name)}o.push(d),a=Math.max(a,d.frames[d.getFrameCount()-1])}else if("color"==l){var d=new t.ColorTimeline(c.length);d.slotIndex=u;for(var f=0,p=0;p<c.length;p++){var m=c[p],g=new t.Color;g.setFromString(m.color||"ffffffff"),d.setFrame(f,m.time,g.r,g.g,g.b,g.a),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=l)throw new Error("Invalid timeline type for a slot: "+l+" ("+s+")");var d=new t.TwoColorTimeline(c.length);d.slotIndex=u;for(var f=0,p=0;p<c.length;p++){var m=c[p],v=new t.Color,y=new t.Color;v.setFromString(m.light),y.setFromString(m.dark),d.setFrame(f,m.time,v.r,v.g,v.b,v.a,y.r,y.g,y.b),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var _ in e.bones){var T=e.bones[_],b=r.findBoneIndex(_);if(-1==b)throw new Error("Bone not found: "+_);for(var l in T){var c=T[l];if("rotate"===l){var d=new t.RotateTimeline(c.length);d.boneIndex=b;for(var f=0,p=0;p<c.length;p++){var m=c[p];d.setFrame(f,m.time,m.angle),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==l&&"scale"!==l&&"shear"!==l)throw new Error("Invalid timeline type for a bone: "+l+" ("+_+")");var d=null,E=1;"scale"===l?d=new t.ScaleTimeline(c.length):"shear"===l?d=new t.ShearTimeline(c.length):(d=new t.TranslateTimeline(c.length),E=n),d.boneIndex=b;for(var f=0,p=0;p<c.length;p++){var m=c[p],w=this.getValue(m,"x",0),x=this.getValue(m,"y",0);d.setFrame(f,m.time,w*E,x*E),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var S in e.ik){var A=e.ik[S],I=r.findIkConstraint(S),d=new t.IkConstraintTimeline(A.length);d.ikConstraintIndex=r.ikConstraints.indexOf(I);for(var f=0,p=0;p<A.length;p++){var m=A[p];d.setFrame(f,m.time,this.getValue(m,"mix",1),this.getValue(m,"bendPositive",!0)?1:-1),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var S in e.transform){var A=e.transform[S],I=r.findTransformConstraint(S),d=new t.TransformConstraintTimeline(A.length);d.transformConstraintIndex=r.transformConstraints.indexOf(I);for(var f=0,p=0;p<A.length;p++){var m=A[p];d.setFrame(f,m.time,this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1),this.getValue(m,"scaleMix",1),this.getValue(m,"shearMix",1)),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.paths)for(var S in e.paths){var A=e.paths[S],O=r.findPathConstraintIndex(S);if(-1==O)throw new Error("Path constraint not found: "+S);var R=r.pathConstraints[O];for(var l in A){var c=A[l];if("position"===l||"spacing"===l){var d=null,E=1;"spacing"===l?(d=new t.PathConstraintSpacingTimeline(c.length),R.spacingMode!=t.SpacingMode.Length&&R.spacingMode!=t.SpacingMode.Fixed||(E=n)):(d=new t.PathConstraintPositionTimeline(c.length),R.positionMode==t.PositionMode.Fixed&&(E=n)),d.pathConstraintIndex=O;for(var f=0,p=0;p<c.length;p++){var m=c[p];d.setFrame(f,m.time,this.getValue(m,l,0)*E),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===l){var d=new t.PathConstraintMixTimeline(c.length);d.pathConstraintIndex=O;for(var f=0,p=0;p<c.length;p++){var m=c[p];d.setFrame(f,m.time,this.getValue(m,"rotateMix",1),this.getValue(m,"translateMix",1)),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[(d.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var C in e.deform){var P=e.deform[C],M=r.findSkin(C);if(null==M)throw new Error("Skin not found: "+C);for(var s in P){var h=P[s],u=r.findSlotIndex(s);if(-1==u)throw new Error("Slot not found: "+h.name);for(var l in h){var c=h[l],D=M.getAttachment(u,l);if(null==D)throw new Error("Deform attachment not found: "+c.name);var k=null!=D.bones,N=D.vertices,G=k?N.length/3*2:N.length,d=new t.DeformTimeline(c.length);d.slotIndex=u,d.attachment=D;for(var f=0,L=0;L<c.length;L++){var m=c[L],F=void 0,U=this.getValue(m,"vertices",null);if(null==U)F=k?t.Utils.newFloatArray(G):N;else{F=t.Utils.newFloatArray(G);var B=this.getValue(m,"offset",0);if(t.Utils.arrayCopy(U,0,F,B,U.length),1!=n)for(var p=B,j=p+U.length;p<j;p++)F[p]*=n;if(!k)for(var p=0;p<G;p++)F[p]+=N[p]}d.setFrame(f,m.time,F),this.readCurve(m,d,f),f++}o.push(d),a=Math.max(a,d.frames[d.getFrameCount()-1])}}}var X=e.drawOrder;if(null==X&&(X=e.draworder),null!=X){for(var d=new t.DrawOrderTimeline(X.length),W=r.slots.length,f=0,L=0;L<X.length;L++){var H=X[L],V=null,Y=this.getValue(H,"offsets",null);if(null!=Y){V=t.Utils.newArray(W,-1);for(var z=t.Utils.newArray(W-Y.length,0),K=0,q=0,p=0;p<Y.length;p++){var Z=Y[p],u=r.findSlotIndex(Z.slot);if(-1==u)throw new Error("Slot not found: "+Z.slot);for(;K!=u;)z[q++]=K++;V[K+Z.offset]=K++}for(;K<W;)z[q++]=K++;for(var p=W-1;p>=0;p--)-1==V[p]&&(V[p]=z[--q])}d.setFrame(f++,H.time,V)}o.push(d),a=Math.max(a,d.frames[d.getFrameCount()-1])}if(e.events){for(var d=new t.EventTimeline(e.events.length),f=0,p=0;p<e.events.length;p++){var J=e.events[p],Q=r.findEvent(J.name);if(null==Q)throw new Error("Event not found: "+J.name);var $=new t.Event(t.Utils.toSinglePrecision(J.time),Q);$.intValue=this.getValue(J,"int",Q.intValue),$.floatValue=this.getValue(J,"float",Q.floatValue),$.stringValue=this.getValue(J,"string",Q.stringValue),d.setFrame(f++,$)}o.push(d),a=Math.max(a,d.frames[d.getFrameCount()-1])}if(isNaN(a))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new t.Animation(i,o,a))},e.prototype.readCurve=function(t,e,i){if(t.curve)if("stepped"===t.curve)e.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var r=t.curve;e.setCurve(i,r[0],r[1],r[2],r[3])}},e.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var i=function(){function t(t,e,i,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=r}return t}()}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=i},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.attachAll=function(t,e){for(var i=0,r=0;r<t.slots.length;r++){var n=t.slots[r],o=n.getAttachment();if(o&&i<e.attachments.length){var a=e.attachments[i];for(var s in a){if(o==a[s]){var h=this.getAttachment(i,name);null!=h&&n.setAttachment(h);break}}}i++}},t}();t.Skin=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(e,i){if(this.attachmentVertices=new Array,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(e,i,r){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==r)throw new Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=r}return e}();t.SlotData=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return i.Nearest;case"linear":return i.Linear;case"mipmap":return i.MipMap;case"mipmapnearestnearest":return i.MipMapNearestNearest;case"mipmaplinearnearest":return i.MipMapLinearNearest;case"mipmapnearestlinear":return i.MipMapNearestLinear;case"mipmaplinearlinear":return i.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return r.MirroredRepeat;case"clamptoedge":return r.ClampToEdge;case"repeat":return r.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=e;var i;!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(i=t.TextureFilter||(t.TextureFilter={}));var r;!function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(r=t.TextureWrap||(t.TextureWrap={}));var n=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t}();t.TextureRegion=n}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return e.prototype.addTexture=function(e,i){for(var n=this.pages,a=null,s=0;s<n.length;s++)if(n[s].baseTexture===i.baseTexture){a=n[s];break}if(null===a){a=new r,a.name="texturePage";var h=i.baseTexture;a.width=h.realWidth,a.height=h.realHeight,a.baseTexture=h,a.minFilter=a.magFilter=t.TextureFilter.Nearest,a.uWrap=t.TextureWrap.ClampToEdge,a.vWrap=t.TextureWrap.ClampToEdge,n.push(a)}var u=new o;return u.name=e,u.page=a,u.texture=i,u.index=-1,this.regions.push(u),u},e.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},e.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},e.prototype.load=function(e,n,a){var s=this;if(null==n)throw new Error("textureLoader cannot be null.");var h=new i(e),u=new Array(4),l=null;!function e(){for(;;){var i=h.readLine();if(null==i)return a&&a(s);if(i=i.trim(),0==i.length)l=null;else{if(!l){l=new r,l.name=i,2==h.readTuple(u)&&(l.width=parseInt(u[0]),l.height=parseInt(u[1]),h.readTuple(u)),h.readTuple(u),l.minFilter=t.Texture.filterFromString(u[0]),l.magFilter=t.Texture.filterFromString(u[1]);var c=h.readValue();l.uWrap=t.TextureWrap.ClampToEdge,l.vWrap=t.TextureWrap.ClampToEdge,"x"==c?l.uWrap=t.TextureWrap.Repeat:"y"==c?l.vWrap=t.TextureWrap.Repeat:"xy"==c&&(l.uWrap=l.vWrap=t.TextureWrap.Repeat),n(i,function(t){l.baseTexture=t,t.hasLoaded||(t.width=l.width,t.height=l.height),s.pages.push(l),l.setFilters(),l.width&&l.height||(l.width=t.realWidth,l.height=t.realHeight,l.width&&l.height||console.log("ERROR spine atlas page "+l.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),e()}),s.pages.push(l);break}var d=new o;d.name=i,d.page=l;var f="true"==h.readValue()?6:0;h.readTuple(u);var p=parseInt(u[0]),m=parseInt(u[1]);h.readTuple(u);var g=parseInt(u[0]),v=parseInt(u[1]),y=l.baseTexture.resolution;p/=y,m/=y,g/=y,v/=y;var _=new PIXI.Rectangle(p,m,f?v:g,f?g:v);4==h.readTuple(u)&&4==h.readTuple(u)&&h.readTuple(u);var T=parseInt(u[0])/y,b=parseInt(u[1])/y;h.readTuple(u);var E=parseInt(u[0])/y,w=parseInt(u[1])/y,x=new PIXI.Rectangle(0,0,T,b),S=new PIXI.Rectangle(E,b-v-w,g,v);if("3"!=PIXI.VERSION[0])d.texture=new PIXI.Texture(d.page.baseTexture,_,x,S,f);else{var A=new PIXI.Rectangle(p,m,g,v),I=A.clone();S.width=T,S.height=b,d.texture=new PIXI.Texture(d.page.baseTexture,A,I,S,f)}d.index=parseInt(h.readValue()),d.texture._updateUvs(),s.regions.push(d)}}}()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var i=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw new Error("Invalid line: "+e);for(var r=0,n=i+1;r<3;r++){var o=e.indexOf(",",n);if(-1==o)break;t[r]=e.substr(n,o-n).trim(),n=o+1}return t[r]=e.substring(n).trim(),r+1},t}(),r=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,i=this.minFilter;i==t.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=!0,i==t.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=r;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=o}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(e,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var r=0;r<e.bones.length;r++)this.bones.push(i.findBone(e.bones[r].name));this.target=i.findBone(e.target.name)}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,i=this.translateMix,r=this.scaleMix,n=this.shearMix,o=this.target,a=o.matrix,s=a.a,h=a.c,u=a.b,l=a.d,c=s*l-h*u>0?t.MathUtils.degRad:-t.MathUtils.degRad,d=this.data.offsetRotation*c,f=this.data.offsetShearY*c,p=this.bones,m=0,g=p.length;m<g;m++){var v=p[m],y=!1,_=v.matrix;if(0!=e){var T=_.a,b=_.c,E=_.b,w=_.d,x=Math.atan2(u,s)-Math.atan2(E,T)+d;x>t.MathUtils.PI?x-=t.MathUtils.PI2:x<-t.MathUtils.PI&&(x+=t.MathUtils.PI2),x*=e;var S=Math.cos(x),A=Math.sin(x);_.a=S*T-A*E,_.c=S*b-A*w,_.b=A*T+S*E,_.d=A*b+S*w,y=!0}if(0!=i){var I=this.temp;o.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),_.tx+=(I.x-_.tx)*i,_.ty+=(I.y-_.ty)*i,y=!0}if(r>0){var O=Math.sqrt(_.a*_.a+_.b*_.b),R=Math.sqrt(s*s+u*u);O>1e-5&&(O=(O+(R-O+this.data.offsetScaleX)*r)/O),_.a*=O,_.b*=O,O=Math.sqrt(_.c*_.c+_.d*_.d),R=Math.sqrt(h*h+l*l),O>1e-5&&(O=(O+(R-O+this.data.offsetScaleY)*r)/O),_.c*=O,_.d*=O,y=!0}if(n>0){var b=_.c,w=_.d,C=Math.atan2(w,b),x=Math.atan2(l,h)-Math.atan2(u,s)-(C-Math.atan2(_.b,_.a));x>t.MathUtils.PI?x-=t.MathUtils.PI2:x<-t.MathUtils.PI&&(x+=t.MathUtils.PI2),x=C+(x+f)*n;var O=Math.sqrt(b*b+w*w);_.c=Math.cos(x)*O,_.d=Math.sin(x)*O,y=!0}y&&(v.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,i=this.translateMix,r=this.scaleMix,n=this.shearMix,o=this.target,a=o.matrix,s=a.a,h=a.c,u=a.b,l=a.d,c=s*l-h*u>0?t.MathUtils.degRad:-t.MathUtils.degRad,d=this.data.offsetRotation*c,f=this.data.offsetShearY*c,p=this.bones,m=0,g=p.length;m<g;m++){var v=p[m],y=!1,_=v.matrix;if(0!=e){var T=_.a,b=_.c,E=_.b,w=_.d,x=Math.atan2(u,s)+d;x>t.MathUtils.PI?x-=t.MathUtils.PI2:x<-t.MathUtils.PI&&(x+=t.MathUtils.PI2),x*=e;var S=Math.cos(x),A=Math.sin(x);_.a=S*T-A*E,_.c=S*b-A*w,_.b=A*T+S*E,_.d=A*b+S*w,y=!0}if(0!=i){var I=this.temp;o.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),_.tx+=I.x*i,_.ty+=I.y*i,y=!0}if(r>0){var O=(Math.sqrt(s*s+u*u)-1+this.data.offsetScaleX)*r+1;_.a*=O,_.b*=O,O=(Math.sqrt(h*h+l*l)-1+this.data.offsetScaleY)*r+1,_.c*=O,_.d*=O,y=!0}if(n>0){var x=Math.atan2(l,h)-Math.atan2(u,s);x>t.MathUtils.PI?x-=t.MathUtils.PI2:x<-t.MathUtils.PI&&(x+=t.MathUtils.PI2);var b=_.c,w=_.d;x=Math.atan2(w,b)+(x-t.MathUtils.PI/2+f)*n;var O=Math.sqrt(b*b+w*w);_.c=Math.cos(x)*O,_.d=Math.sin(x)*O,y=!0}y&&(v.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var h=o[a];h.appliedValid||h.updateAppliedTransform();var u=h.arotation;if(0!=t){var l=n.arotation-u+this.data.offsetRotation;l-=360*(16384-(16384.499999999996-l/360|0)),u+=l*t}var c=h.ax,d=h.ay;0!=e&&(c+=(n.ax-c+this.data.offsetX)*e,d+=(n.ay-d+this.data.offsetY)*e);var f=h.ascaleX,p=h.ascaleY;i>0&&(f>1e-5&&(f=(f+(n.ascaleX-f+this.data.offsetScaleX)*i)/f),p>1e-5&&(p=(p+(n.ascaleY-p+this.data.offsetScaleY)*i)/p));var m=h.ashearY;if(r>0){var l=n.ashearY-m+this.data.offsetShearY;l-=360*(16384-(16384.499999999996-l/360|0)),h.shearY+=l*r}h.updateWorldTransformWith(c,d,u,f,p,h.ashearX,m)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var h=o[a];h.appliedValid||h.updateAppliedTransform();var u=h.arotation;0!=t&&(u+=(n.arotation+this.data.offsetRotation)*t);var l=h.ax,c=h.ay;0!=e&&(l+=(n.ax+this.data.offsetX)*e,c+=(n.ay+this.data.offsetY)*e);var d=h.ascaleX,f=h.ascaleY;i>0&&(d>1e-5&&(d*=(n.ascaleX-1+this.data.offsetScaleX)*i+1),f>1e-5&&(f*=(n.ascaleY-1+this.data.offsetScaleY)*i+1));var p=h.ashearY;r>0&&(p+=(n.ashearY+this.data.offsetShearY)*r),h.updateWorldTransformWith(l,c,u,d,f,h.ashearX,p)}},e.prototype.getOrder=function(){return this.data.order},e}();t.TransformConstraint=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t}return t}();t.TransformConstraintData=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool(function(){return new Array}),this.polygonIndicesPool=new t.Pool(function(){return new Array})}return e.prototype.triangulate=function(t){var i=t,r=t.length>>1,n=this.indicesArray;n.length=0;for(var o=0;o<r;o++)n[o]=o;var a=this.isConcaveArray;a.length=0;for(var o=0,s=r;o<s;++o)a[o]=e.isConcave(o,r,i,n);var h=this.triangles;for(h.length=0;r>3;){for(var u=r-1,o=0,l=1;;){t:if(!a[o]){for(var c=n[u]<<1,d=n[o]<<1,f=n[l]<<1,p=i[c],m=i[c+1],g=i[d],v=i[d+1],y=i[f],_=i[f+1],T=(l+1)%r;T!=u;T=(T+1)%r)if(a[T]){var b=n[T]<<1,E=i[b],w=i[b+1];if(e.positiveArea(y,_,p,m,E,w)&&e.positiveArea(p,m,g,v,E,w)&&e.positiveArea(g,v,y,_,E,w))break t}break}if(0==l){do{if(!a[o])break;o--}while(o>0);break}u=o,o=l,l=(l+1)%r}h.push(n[(r+o-1)%r]),h.push(n[o]),h.push(n[(o+1)%r]),n.splice(o,1),a.splice(o,1),r--;var x=(r+o-1)%r,S=o==r?0:o;a[x]=e.isConcave(x,r,i,n),a[S]=e.isConcave(S,r,i,n)}return 3==r&&(h.push(n[2]),h.push(n[0]),h.push(n[1])),h},e.prototype.decompose=function(t,i){var r=t,n=this.convexPolygons;this.polygonPool.freeAll(n),n.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var a=this.polygonIndicesPool.obtain();a.length=0;var s=this.polygonPool.obtain();s.length=0;for(var h=-1,u=0,l=0,c=i.length;l<c;l+=3){var d=i[l]<<1,f=i[l+1]<<1,p=i[l+2]<<1,m=r[d],g=r[d+1],v=r[f],y=r[f+1],_=r[p],T=r[p+1],b=!1;if(h==d){var E=s.length-4,w=e.winding(s[E],s[E+1],s[E+2],s[E+3],_,T),x=e.winding(_,T,s[0],s[1],s[2],s[3]);w==u&&x==u&&(s.push(_),s.push(T),a.push(p),b=!0)}b||(s.length>0?(n.push(s),o.push(a)):(this.polygonPool.free(s),this.polygonIndicesPool.free(a)),s=this.polygonPool.obtain(),s.length=0,s.push(m),s.push(g),s.push(v),s.push(y),s.push(_),s.push(T),a=this.polygonIndicesPool.obtain(),a.length=0,a.push(d),a.push(f),a.push(p),u=e.winding(m,g,v,y,_,T),h=d)}s.length>0&&(n.push(s),o.push(a));for(var l=0,c=n.length;l<c;l++)if(a=o[l],0!=a.length){var S=a[0],A=a[a.length-1];s=n[l];for(var E=s.length-4,I=s[E],O=s[E+1],R=s[E+2],C=s[E+3],P=s[0],M=s[1],D=s[2],k=s[3],N=e.winding(I,O,R,C,P,M),G=0;G<c;G++)if(G!=l){var L=o[G];if(3==L.length){var F=L[0],U=L[1],B=L[2],j=n[G],_=j[j.length-2],T=j[j.length-1];if(F==S&&U==A){var w=e.winding(I,O,R,C,_,T),x=e.winding(_,T,P,M,D,k);w==N&&x==N&&(j.length=0,L.length=0,s.push(_),s.push(T),a.push(B),I=R,O=C,R=_,C=T,G=0)}}}}for(var l=n.length-1;l>=0;l--)s=n[l],0==s.length&&(n.splice(l,1),this.polygonPool.free(s),a=o[l],o.splice(l,1),this.polygonIndicesPool.free(a));return n},e.isConcave=function(t,e,i,r){var n=r[(e+t-1)%e]<<1,o=r[t]<<1,a=r[(t+1)%e]<<1;return!this.positiveArea(i[n],i[n+1],i[o],i[o+1],i[a],i[a+1])},e.positiveArea=function(t,e,i,r,n,o){return t*(o-r)+i*(e-o)+n*(r-e)>=0},e.winding=function(t,e,i,r,n,o){var a=i-t,s=r-e;return n*s-o*a+a*e-t*s>=0?1:-1},e}();t.Triangulator=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return void 0!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var i=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.r=t,this.g=e,this.b=i,this.a=r}return t.prototype.set=function(t,e,i,r){return this.r=t,this.g=e,this.b=i,this.a=r,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,r){return this.r+=t,this.g+=e,this.b+=i,this.a+=r,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=i;var r=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,i){return t.randomTriangularWith(e,i,.5*(e+i))},t.randomTriangularWith=function(t,e,i){var r=Math.random(),n=e-t;return r<=(i-t)/n?t+Math.sqrt(r*n*(i-t)):e-Math.sqrt((1-r)*n*(e-i))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=r;var o=function(){function t(){}return t.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},t}();t.Interpolation=o;var a=function(t){function e(e){var i=t.call(this)||this;return i.power=2,i.power=e,i}return n(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(o);t.Pow=a;var s=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(a);t.PowOut=s;var h=function(){function t(){}return t.arrayCopy=function(t,e,i,r,n){for(var o=e,a=r;o<e+n;o++,a++)i[a]=t[o]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var r=t.length;if(r==e)return t;if(t.length=e,r<e)for(var n=r;n<e;n++)t[n]=i;return t},t.ensureArrayCapacity=function(e,i,r){return void 0===r&&(r=0),e.length>=i?e:t.setArraySize(e,i,r)},t.newArray=function(t,e){for(var i=new Array(t),r=0;r<t;r++)i[r]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),r=0;r<i.length;r++)i[r]=0;return i},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var i=new Array(e),r=0;r<i.length;r++)i[r]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=h;var u=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e],r=i.matrix;console.log(i.data.name+", "+r.a+", "+r.b+", "+r.c+", "+r.d+", "+r.tx+", "+r.ty)}},t}();t.DebugUtils=u;var l=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=l;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=c;var d=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=d;var f=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=f}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function t(t){if(null==t)throw new Error("name cannot be null.");this.name=t}return t}();t.Attachment=e;var i=function(t){function e(i){var r=t.call(this,i)||this;return r.id=(65535&e.nextID++)<<11,r.worldVerticesLength=0,r}return n(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,i,r,n,o){i=n+(i>>1)*o;var a=t.bone.skeleton,s=t.attachmentVertices,h=this.vertices,u=this.bones;if(null!=u){for(var l=0,c=0,d=0;d<e;d+=2){var f=u[l];l+=f+1,c+=f}var p=a.bones;if(0==s.length)for(var m=n,g=3*c;m<i;m+=o){var v=0,y=0,f=u[l++];for(f+=l;l<f;l++,g+=3){var _=p[u[l]].matrix,T=h[g],b=h[g+1],E=h[g+2];v+=(T*_.a+b*_.c+_.tx)*E,y+=(T*_.b+b*_.d+_.ty)*E}r[m]=v,r[m+1]=y}else for(var w=s,m=n,g=3*c,x=c<<1;m<i;m+=o){var v=0,y=0,f=u[l++];for(f+=l;l<f;l++,g+=3,x+=2){var _=p[u[l]].matrix,T=h[g]+w[x],b=h[g+1]+w[x+1],E=h[g+2];v+=(T*_.a+b*_.c+_.tx)*E,y+=(T*_.b+b*_.d+_.ty)*E}r[m]=v,r[m+1]=y}}else{s.length>0&&(h=s);for(var _=t.bone.matrix,S=_.tx,A=_.ty,I=_.a,g=_.c,O=_.b,R=_.d,C=e,m=n;m<i;C+=2,m+=o){var T=h[C],b=h[C+1];r[m]=T*I+b*g+S,r[m+1]=T*O+b*R+A}}},e.prototype.applyDeform=function(t){return this==t},e.nextID=0,e}(e);t.VertexAttachment=i}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point"}(t.AttachmentType||(t.AttachmentType={}))}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.color=new t.Color(1,1,1,1),r}return n(i,e),i}(t.VertexAttachment);t.BoundingBoxAttachment=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.color=new t.Color(.2275,.2275,.8078,1),r}return n(i,e),i}(t.VertexAttachment);t.ClippingAttachment=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.color=new t.Color(1,1,1,1),r.inheritDeform=!1,r.tempColor=new t.Color(0,0,0,0),r}return n(i,e),i.prototype.updateUVs=function(e,i){var r=this.regionUVs,n=r.length;if(i&&i.length==n||(i=t.Utils.newFloatArray(n)),null!=e){for(var o=e.texture,a=o._uvs,s=e.width,h=e.height,u=e.originalWidth,l=e.originalHeight,c=e.offsetX,d=e.pixiOffsetY,f=0;f<n;f+=2){var p=this.regionUVs[f],m=this.regionUVs[f+1];p=(p*u-c)/s,m=(m*l-d)/h,i[f]=(a.x0*(1-p)+a.x1*p)*(1-m)+(a.x3*(1-p)+a.x2*p)*m,i[f+1]=(a.y0*(1-p)+a.y1*p)*(1-m)+(a.y3*(1-p)+a.y2*p)*m}return i}},i.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},i}(t.VertexAttachment);t.MeshAttachment=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.closed=!1,r.constantSpeed=!1,r.color=new t.Color(1,1,1,1),r}return n(i,e),i}(t.VertexAttachment);t.PathAttachment=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.color=new t.Color(.38,.94,0,1),r}return n(i,e),i.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},i.prototype.computeWorldRotation=function(e){var i=e.matrix,r=t.MathUtils.cosDeg(this.rotation),n=t.MathUtils.sinDeg(this.rotation),o=r*i.a+n*i.c,a=r*i.b+n*i.d;return Math.atan2(a,o)*t.MathUtils.radDeg},i}(t.VertexAttachment);t.PointAttachment=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.x=0,r.y=0,r.scaleX=1,r.scaleY=1,r.rotation=0,r.width=0,r.height=0,r.color=new t.Color(1,1,1,1),r.offset=t.Utils.newFloatArray(8),r.uvs=t.Utils.newFloatArray(8),r.tempColor=new t.Color(1,1,1,1),r}return n(i,e),i.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,o=r+this.region.width*t,a=n+this.region.height*e,s=this.rotation*Math.PI/180,h=Math.cos(s),u=Math.sin(s),l=r*h+this.x,c=r*u,d=n*h+this.y,f=n*u,p=o*h+this.x,m=o*u,g=a*h+this.y,v=a*u,y=this.offset;y[i.OX1]=l-f,y[i.OY1]=d+c,y[i.OX2]=l-v,y[i.OY2]=g+c,y[i.OX3]=p-v,y[i.OY3]=g+m,y[i.OX4]=p-f,y[i.OY4]=d+m},i.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},i.prototype.computeWorldVertices=function(t,e,r,n){var o=this.offset,a=t.matrix,s=a.tx,h=a.ty,u=a.a,l=a.c,c=a.b,d=a.d,f=0,p=0;f=o[i.OX1],p=o[i.OY1],e[r]=f*u+p*l+s,e[r+1]=f*c+p*d+h,r+=n,f=o[i.OX2],p=o[i.OY2],e[r]=f*u+p*l+s,e[r+1]=f*c+p*d+h,r+=n,f=o[i.OX3],p=o[i.OY3],e[r]=f*u+p*l+s,e[r+1]=f*c+p*d+h,r+=n,f=o[i.OX4],p=o[i.OY4],e[r]=f*u+p*l+s,e[r+1]=f*c+p*d+h},i.OX1=0,i.OY1=1,i.OX2=2,i.OY2=3,i.OX3=4,i.OY3=5,i.OX4=6,i.OY4=7,i.X1=0,i.Y1=1,i.C1R=2,i.C1G=3,i.C1B=4,i.C1A=5,i.U1=6,i.V1=7,i.X2=8,i.Y2=9,i.C2R=10,i.C2G=11,i.C2B=12,i.C2A=13,i.U2=14,i.V2=15,i.X3=16,i.Y3=17,i.C3R=18,i.C3G=19,i.C3B=20,i.C3A=21,i.U3=22,i.V3=23,i.X4=24,i.Y4=25,i.C4R=26,i.C4G=27,i.C4B=28,i.C4A=29,i.U4=30,i.V4=31,i}(t.Attachment);t.RegionAttachment=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,i,r,n){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){!function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(i,r,n,o){var a=this.angle*t.MathUtils.degreesToRadians,s=i.x-this.worldX,h=i.y-this.worldY,u=Math.sqrt(s*s+h*h);if(u<this.radius){var l=e.interpolation.apply(0,a,(this.radius-u)/this.radius),c=Math.cos(l),d=Math.sin(l);i.x=c*s-d*h+this.worldX,i.y=d*s+c*h+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(t.core||(t.core={}))}(r||(r={}));var r;!function(t){function e(t){return t.type===PIXI.loaders.Resource.TYPE.JSON}function i(){return function(i,n){if(!i.data||!e(i)||!i.data.bones)return n();var o=i.metadata||{},a=o?i.metadata.spineSkeletonScale:null,s=o?i.metadata.spineAtlas:null;if(!1===s)return n();if(s&&s.pages){var h=new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(s)),u=h.readSkeletonData(i.data);return i.spineData=u,i.spineAtlas=s,n()}var l=o.spineAtlasSuffix||".atlas",c=i.url.substr(0,i.url.lastIndexOf("."))+l;c=c.replace(this.baseUrl,"");var d={crossOrigin:i.crossOrigin,xhrType:PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:o.spineMetadata||null,parentResource:i,loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR},f={crossOrigin:i.crossOrigin,metadata:o.imageMetadata||null,parentResource:i,loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR},p=i.url.substr(0,i.url.lastIndexOf("/")+1);p=p.replace(this.baseUrl,""),p=Utils.OMSGetData(i.name.replace(/_/g,"/")+".png"),c=Utils.OMSGetData(i.name.replace(/_/g,"/")+".atlas");var m=r(this,i.name+"_atlas_page_",p,f);this.add(i.name+"_atlas",c,d,function(e){new t.core.TextureAtlas(e.xhr.responseText,m,function(e){var r=new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(e));a&&(r.scale=a),i.spineData=r.readSkeletonData(i.data),i.spineAtlas=e,n()})})}}function r(t,e,i,r){return function(n,o){var a=e+n,s=i;t.add(a,s,r,function(t){o(t.texture.baseTexture)})}}function n(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,i){i(PIXI.BaseTexture.fromImage(t,e))}}function o(t){return function(e,i){var r=t[e]||t.default;i(r&&r.baseTexture?r.baseTexture:r)}}t.atlasParser=i,t.imageLoaderAdapter=r,t.syncImageLoaderAdapter=n,t.staticImageLoader=o,PIXI.loaders.Loader.addPixiMiddleware(i),PIXI.loader.use(i())}(r||(r={})),function(){Math.fround||(Math.fround=Math.fround=function(t){return function(e){return t[0]=e,t[0]}}(new Float32Array(1)))}();var r;!function(t){function e(){var t=this.parent.worldTransform,e=this.worldTransform,i=this.localTransform;e.a=i.a*t.a+i.b*t.c,e.b=i.a*t.b+i.b*t.d,e.c=i.c*t.a+i.d*t.c,e.d=i.c*t.b+i.d*t.d,e.tx=i.tx*t.a+i.ty*t.c+t.tx,e.ty=i.tx*t.b+i.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}t.core.Bone.yDown=!0;var i=[0,0,0],r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e}return n(e,t),e}(PIXI.Sprite);t.SpineSprite=r;var o=function(t){function e(e,i,r,n,o){return t.call(this,e,i,r,n,o)||this}return n(e,t),e}(PIXI.mesh.Mesh);t.SpineMesh=o;var a=function(a){function s(e){var i=a.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=e,i.skeleton=new t.core.Skeleton(e),i.skeleton.updateWorldTransform(),i.stateData=new t.core.AnimationStateData(e),i.state=new t.core.AnimationState(i.stateData),i.slotContainers=[],i.tempClipContainers=[];for(var r=0,n=i.skeleton.slots.length;r<n;r++){var o=i.skeleton.slots[r],s=o.attachment,h=i.newContainer();if(i.slotContainers.push(h),i.addChild(h),i.tempClipContainers.push(null),s instanceof t.core.RegionAttachment){var u=s.region.name,l=i.createSprite(o,s,u);o.currentSprite=l,o.currentSpriteName=u,h.addChild(l)}else if(s instanceof t.core.MeshAttachment){var c=i.createMesh(o,s);o.currentMesh=c,o.currentMeshName=s.name,h.addChild(c)}else{if(!(s instanceof t.core.ClippingAttachment))continue;i.createGraphics(o,s),h.addChild(o.clippingContainer),h.addChild(o.currentGraphics)}}return i.autoUpdate=!0,i.tintRgb=new Float32Array([1,1,1]),i}return n(s,a),Object.defineProperty(s.prototype,"autoUpdate",{get:function(){return this.updateTransform===s.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?s.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),s.prototype.update=function(r){this.state.update(r),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();var n=this.skeleton.slots,o=this.color,a=null,s=null;o?(a=o.light,s=o.dark):a=this.tintRgb;for(var h=PIXI.TransformBase&&1==this.transformHack(),u=0,l=n.length;u<l;u++){var c=n[u],d=c.attachment,f=this.slotContainers[u];if(d){var p=null,m=d.color;if(d instanceof t.core.RegionAttachment){var g=d.region;if(g){c.currentMesh&&(c.currentMesh.visible=!1,c.currentMesh=null,c.currentMeshName=void 0);var v=g;if(!c.currentSpriteName||c.currentSpriteName!==v.name){var y=v.name;if(c.currentSprite&&(c.currentSprite.visible=!1),c.sprites=c.sprites||{},void 0!==c.sprites[y])c.sprites[y].visible=!0;else{var _=this.createSprite(c,d,y);f.addChild(_)}c.currentSprite=c.sprites[y],c.currentSpriteName=y}}if(f.transform){var T=f.transform,b=T,E=null;b.matrix2d?(E=b.matrix2d,b._dirtyVersion++,b.version=b._dirtyVersion,b.isStatic=!0,b.operMode=0):h?(b.position&&(T=new PIXI.TransformBase,f.transform=T),E=T.localTransform):b.setFromMatrix(c.bone.matrix),E&&c.bone.matrix.copy(E)}else{var E=f.localTransform||new PIXI.Matrix;c.bone.matrix.copy(E),f.localTransform=E,f.displayObjectUpdateTransform=e}c.currentSprite.color?p=c.currentSprite.color:(i[0]=a[0]*c.color.r*m.r,i[1]=a[1]*c.color.g*m.g,i[2]=a[2]*c.color.b*m.b,c.currentSprite.tint=PIXI.utils.rgb2hex(i)),c.currentSprite.blendMode=c.blendMode}else if(d instanceof t.core.MeshAttachment){if(c.currentSprite&&(c.currentSprite.visible=!1,c.currentSprite=null,c.currentSpriteName=void 0,f.transform?f.transform=new PIXI.TransformStatic:(f.localTransform=new PIXI.Matrix,f.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform)),!c.currentMeshName||c.currentMeshName!==d.name){var w=d.name;if(c.currentMesh&&(c.currentMesh.visible=!1),c.meshes=c.meshes||{},void 0!==c.meshes[w])c.meshes[w].visible=!0;else{var x=this.createMesh(c,d);f.addChild(x)}c.currentMesh=c.meshes[w],c.currentMeshName=w}if(d.computeWorldVerticesOld(c,c.currentMesh.vertices),c.currentMesh.color)p=c.currentMesh.color;else if("3"!==PIXI.VERSION[0]){var S=c.currentMesh.tintRgb;S[0]=a[0]*c.color.r*m.r,S[1]=a[1]*c.color.g*m.g,S[2]=a[2]*c.color.b*m.b}c.currentMesh.blendMode=c.blendMode}else{if(!(d instanceof t.core.ClippingAttachment)){f.visible=!1;continue}c.currentGraphics||(this.createGraphics(c,d),f.addChild(c.clippingContainer),f.addChild(c.currentGraphics)),this.updateGraphics(c,d)}if(f.visible=!0,p){var A=c.color.r*m.r,I=c.color.g*m.g,O=c.color.b*m.b;p.setLight(a[0]*A+s[0]*(1-A),a[1]*I+s[1]*(1-I),a[2]*O+s[2]*(1-O)),c.darkColor?(A=c.darkColor.r,I=c.darkColor.g,O=c.darkColor.b):(A=0,I=0,O=0),p.setDark(a[0]*A+s[0]*(1-A),a[1]*I+s[1]*(1-I),a[2]*O+s[2]*(1-O))}f.alpha=c.color.a}else f.visible=!1}for(var R=this.skeleton.drawOrder,C=null,P=null,u=0,l=R.length;u<l;u++){var c=n[R[u].data.index],f=this.slotContainers[R[u].data.index];if(P||f.parent!==this&&(f.parent.removeChild(f),f.parent=this),c.currentGraphics&&c.attachment)P=c.clippingContainer,C=c.attachment,P.children.length=0,this.children[u]=f,C.endSlot==c.data&&(P.renderable=!1,P=null,C=null);else if(P){var M=this.tempClipContainers[u];M||(M=this.tempClipContainers[u]=this.newContainer(),M.visible=!1),this.children[u]=M,f.parent=null,P.addChild(f),C.endSlot==c.data&&(P.renderable=!0,P=null,C=null)}else this.children[u]=f}},s.prototype.setSpriteRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight)},s.prototype.setMeshRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.texture._updateUvs(),t.updateUVs(i,e.uvs),e.dirty++},s.prototype.autoUpdateTransform=function(){if(s.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},s.prototype.createSprite=function(e,i,r){var n=i.region;e.tempAttachment===i&&(n=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);var o=n.texture,a=this.newSprite(o);return a.rotation=i.rotation*t.core.MathUtils.degRad,a.anchor.x=.5,a.anchor.y=.5,a.position.x=i.x,a.position.y=i.y,a.alpha=i.color.a,a.region=i.region,this.setSpriteRegion(i,a,i.region),e.sprites=e.sprites||{},e.sprites[r]=a,a},s.prototype.createMesh=function(t,e){var i=e.region;t.tempAttachment===e&&(i=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var r=this.newMesh(i.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return r.canvasPadding=1.5,r.alpha=e.color.a,r.region=e.region,this.setMeshRegion(e,r,i),t.meshes=t.meshes||{},t.meshes[e.name]=r,r},s.prototype.createGraphics=function(t,e){var i=this.newGraphics(),r=new PIXI.Polygon([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(r),i.renderable=!1,t.currentGraphics=i,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,i},s.prototype.updateGraphics=function(t,e){var i=t.currentGraphics.graphicsData[0].shape.points,r=e.worldVerticesLength;i.length=r,e.computeWorldVertices(t,0,r,i,0,2),t.currentGraphics.dirty++,t.currentGraphics.clearDirty++},s.prototype.hackTextureBySlotIndex=function(e,i,r){void 0===i&&(i=null),void 0===r&&(r=null);var n=this.skeleton.slots[e];if(!n)return!1;var o=n.attachment,a=o.region;return i&&(a=new t.core.TextureRegion,a.texture=i,a.size=r),n.currentSprite&&n.currentSprite.region!=a?(this.setSpriteRegion(o,n.currentSprite,a),n.currentSprite.region=a):n.currentMesh&&n.currentMesh.region!=a?this.setMeshRegion(o,n.currentMesh,a):(n.tempRegion=a,n.tempAttachment=o),!0},s.prototype.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var r=this.skeleton.findSlotIndex(t);return-1!=r&&this.hackTextureBySlotIndex(r,e,i)},s.prototype.newContainer=function(){return new PIXI.Container},s.prototype.newSprite=function(t){return new r(t)},s.prototype.newGraphics=function(){return new PIXI.Graphics},s.prototype.newMesh=function(t,e,i,r,n){return new o(t,e,i,r,n)},s.prototype.transformHack=function(){return 1},s.globalAutoUpdate=!0,s.clippingPolygon=[],s}(PIXI.Container);t.Spine=a}(r||(r={})),PIXI.spine=r},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.background=null,t.gui=GuiManager.GetGui(4),t.mIsFirstLoad=!0,t}return o(e,t),a(e,[{key:"Load",value:function(){APP.AddChild(this),APP.Align(this);var t=DeviceInfo.IsUseSmallFontSize();if(this.mIsFirstLoad){this.mBackground=new PIXI.Graphics,this.mBackground.beginFill(0,.8),this.mBackground.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),this.mBackground.endFill(),this.mTextDescription=this.gui.GetObject(1),this.mTextOk=this.gui.GetObject(2),this.mTextCancel=this.gui.GetObject(3),this.mTextDescription.style={fontFamily:GameConfig.fontList.MainFont,fontSize:30,align:"center",fill:16777215,wordWrap:!0,wordWrapWidth:500},this.mTextOk.style={fontFamily:GameConfig.fontList.MainFont,fontSize:30,align:"center",fill:16777215},this.mTextCancel.style=this.mTextOk.style,this.mTextDescription.anchor.set(.5,.5),this.mTextOk.anchor.set(.5,.5),this.mTextCancel.anchor.set(.5,.5),this.mTextDescription.calculateBounds(),this.mTextOk.calculateBounds(),this.mTextCancel.calculateBounds();var e=this.mTextDescription.getBounds(),i=this.mTextOk.getBounds(),r=this.mTextCancel.getBounds(),n=t?60:200,o=t?20:40,a=o+Math.max(i.width,r.width)+o,s=20+Math.max(i.height,r.height)+20,h=40+e.height+40+s+40,u=Math.max(e.width,n+2*a);n=(u-2*a)/3,this.mBorder=new PIXI.Graphics,this.mBorder.position.set(.5*APP.GetWidth(),.5*APP.GetHeight()-.5*h),this.mBorder.clear(),this.mBorder.lineStyle(4,16777215,1),this.mBorder.beginFill(0,.5),this.mBorder.drawRect(-.5*u,0,u,h),this.mBorder.endFill(),this.mTextDescription.position.set(0,40+.5*e.height),this.mTextOk.position.set(-(.5*a+.5*n),40+e.height+40+.5*s),this.mTextCancel.position.set(+(.5*a+.5*n),40+e.height+40+.5*s),this.mButtonOk=new PIXI.Graphics,this.mButtonOk.position.set(this.mTextOk.position.x,this.mTextOk.position.y),this.mButtonOk.clear(),this.mButtonOk.beginFill(9013641,1),this.mButtonOk.drawRoundedRect(-.5*a,-.5*s,a,s,.5*s),this.mButtonOk.endFill(),this.mButtonCancle=new PIXI.Graphics,this.mButtonCancle.position.set(this.mTextCancel.position.x,this.mTextCancel.position.y),this.mButtonCancle.clear(),this.mButtonCancle.beginFill(13835556,1),this.mButtonCancle.drawRoundedRect(-.5*a,-.5*s,a,s,.5*s),this.mButtonCancle.endFill(),this.addChild(this.mBackground),this.addChild(this.mBorder),this.mBorder.addChild(this.mButtonOk),this.mBorder.addChild(this.mButtonCancle),this.mBorder.addChild(this.mTextDescription),this.mBorder.addChild(this.mTextOk),this.mBorder.addChild(this.mTextCancel)}this.mButtonOk.interactive=!0,this.mButtonCancle.interactive=!0,this.mIsFirstLoad=!1}},{key:"Unload",value:function(){APP.RemoveChild(this)}},{key:"Resize",value:function(){window.isBrowser&&APP.IsRotate()}},{key:"Back",value:function(){StateManager.PopState(),StateIngame.Resume()}},{key:"Update",value:function(t){gIngameTimeSpent+=t}},{key:"TouchHandler",value:function(t){switch(t.target){case this.mButtonOk:Input.IsTouchUp(t)&&(Utils.SendTrackingAndExit(),this.mButtonOk.interactive=!1);break;case this.mButtonCancle:Input.IsTouchUp(t)&&(StateManager.PopState(),StateIngame.Resume(),this.mButtonCancle.interactive=!1)}}}]),e}(PIXI.Container);t.exports=new s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(71),h=(i(39),function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.GAMEOVER_STATE_REWARD_NONE=-1,t.GAMEOVER_STATE_REWARD_WAITING=0,t.GAMEOVER_STATE_REWARD_DELIVERED=1,t.GAMEOVER_STATE_REWARD_FAILED=2,t.rewardTimeout=4,t.btnRetry=null,t.btnClose=null,t.btnCheckNow=null,t.tfReward=null,t.tfGratz=null,t.tfScore=null,t.token=null,t.rewardState=0,t.isSendingTracking=!1,t.bg=null,t.logo1=null,t.logo2=null,t.logo3=null,t.redirectLink="",t.basicText=new PIXI.Text(0),t.countdown=new Timer,t}return o(e,t),a(e,[{key:"Load",value:function(){this.countdown.SetDuration(5),APP.AddChild(this),APP.Align(this),s.Show(),Utils.IsOnDevie()||APP.EnableDebugLayer(!0),AudioManager.StopAll(),AudioManager.Play(1,!1),this.rewardTimeout=4,this.isSendingTracking=!1,this.btnClose=GuiManager.GetGui(6).GetObject(1),this.btnCheckNow=GuiManager.GetGui(6).GetObject(2),this.tfReward=GuiManager.GetGui(6).GetObject(5),this.tfGratz=GuiManager.GetGui(6).GetObject(3),this.tfScore=GuiManager.GetGui(6).GetObject(4),this.logo1=GuiManager.GetGui(6).GetObject(6),this.logo2=GuiManager.GetGui(6).GetObject(7),this.logo3=GuiManager.GetGui(6).GetObject(8);var t,e;window.innerWidth>window.innerHeight?(t=window.innerWidth,e=window.innerHeight):(t=window.innerHeight,e=window.innerWidth),t/e==2436/1125&&this.logo1.position.set(94,94),s.SetRetryPos(this.tfScore),this.bg.anchor.set(.5,.5),this.bg.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.addChild(this.bg),this.btnClose.SetTouchable(!0),this.btnCheckNow.SetTouchable(!0),this.btnCheckNow.hitArea=new PIXI.Rectangle(0,this.btnCheckNow.y-150,APP.GetWidth(),300);var i=GLText.GetText(6).replace("%d",StateIngame.GetScore());this.tfScore.text=i,Utils.SetTokenInfo(GLText.GetText(7),this.tfReward.style),this.token=Utils.token,this.token.visible=!1,this.token.position.set(this.tfReward.position.x-this.token.width/2,this.tfReward.position.y),this.redirectLink=Utils.OMSGetProductLink(),this.redirectLink&&(this.redirectLink=this.redirectLink.replace("{[timestamp]}",Date.now())),StateIngame.IsGotReward()?this.SetRewardState(this.GAMEOVER_STATE_REWARD_NONE):this.SetRewardState(this.GAMEOVER_STATE_REWARD_WAITING),window.notifyGameComplete&&window.notifyGameComplete(),this.addChild(GuiManager.GetGui(6)),this.addChild(this.token),Utils.advertisement.visible=!0,this.addChild(GameDefine.GetAdvertisement()),this.addChild(s)}},{key:"Unload",value:function(){this.btnClose.interactive=!1,this.btnCheckNow.interactive=!1,this.removeChildren(0,this.children.length),APP.RemoveChild(this),Utils.IsOnDevie()||APP.DisableDebugLayer()}},{key:"Resume",value:function(){this.isSendingTracking&&(this.isSendingTracking=!1)}},{key:"Resize",value:function(){s.Resize(),s.SetRetryPos(this.tfScore)}},{key:"Pause",value:function(){AudioManager.StopAll()}},{key:"Update",value:function(t){if(!Utils.IsOnDevie()){var e=APP.debugLayer;if(e.clear(),e.lineStyle(2,16711680,1),window._show_touchzone){var i=void 0;this.btnClose&&1==this.btnClose.visible&&(i=this.btnClose.GetTransformRect(),e.drawRect(i.x,i.y,i.width,i.height)),s.retry&&1==s.retry.visible&&(i=s.retry.hitArea,e.drawRect(s.retry.x-i.width/2,s.retry.y-i.height/2,i.width,i.height)),s.redirect&&1==s.redirect.visible&&(i=s.redirect.hitArea,e.drawRect(s.redirect.x-i.width/2,s.redirect.y-i.height/2,i.width,i.height)),s.formS1.btn&&1==s.formS1.btn.visible&&(i=s.formS1.btn.hitArea,e.drawRect(s.formS1.btn.x-i.width/2,s.formS1.btn.y-i.height/2,i.width,i.height)),s.formS2.btnActive&&1==s.formS2.btnActive.visible&&(i=s.formS2.btnActive,e.drawRect(i.x-i.width/2,i.y-i.height/2,i.width,i.height)),s.formS2.termText&&1==s.formS2.termText.visible&&(i=s.formS2.termText,e.drawRect(i.x-i.width/2,i.y-i.height/2,i.width,i.height)),s.formS2.close&&1==s.formS2.close.visible&&(i=s.formS2.close,e.drawRect(i.x-i.width/2,i.y-i.height/2,i.width,i.height))}}this.UpdateReward(t),this.countdown.IsDone()||(this.countdown.Update(t),this.countdown.IsDone()&&StateManager.SwitchState(StatePreLoad))}},{key:"OpenProductLink",value:function(){try{window.DEBUG||window.REVIEW?window.open(Utils.OMSGetProductLink()):this.isSendingTracking||(this.isSendingTracking=!0,void 0!==window.mraid?TrackingManager.SendMultiEventTracking([TrackingManager.TRACKING_ACTION_CLICK_THROUGHTS_START,TrackingManager.TRACKING_ACTION_CLICK_THROUGHTS],this.Exit):(TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CLICK_THROUGHTS_START),TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CLICK_THROUGHTS,null,"N/A",this.redirectLink)))}catch(t){Utils.Log("Error: "+t.message)}}},{key:"SetRewardState",value:function(t){switch(t){case this.GAMEOVER_STATE_REWARD_NONE:this.token.visible=!1,this.tfReward.visible=!1;break;case this.GAMEOVER_STATE_REWARD_WAITING:this.token.visible=!1,this.tfReward.visible=!0,this.tfReward.text=GLText.GetText(8);break;case this.GAMEOVER_STATE_REWARD_DELIVERED:this.token.visible=!0,this.tfReward.visible=!1,StateIngame.GotReward(),GameDefine.OPEN_CHEAT&&s._ShowWarning("reward");break;case this.GAMEOVER_STATE_REWARD_FAILED:this.token.visible=!1,this.tfReward.visible=!0,this.tfReward.text=GLText.GetText(9),s._ShowWarning("reward")}GameDefine.IS_VOUCHER||(this.tfReward.visible=!1,this.tfGratz.visible=!1),this.rewardState=t}},{key:"UpdateReward",value:function(t){this.rewardState==this.GAMEOVER_STATE_REWARD_WAITING&&this.rewardTimeout>0&&(t>1&&(t=0),this.rewardTimeout-=t,this.rewardTimeout<0?this.SetRewardState(this.GAMEOVER_STATE_REWARD_FAILED):"undefined"!=typeof reward_delivered&&1==reward_delivered&&this.SetRewardState(this.GAMEOVER_STATE_REWARD_DELIVERED))}},{key:"HideUI",value:function(){this.btnClose.visible=!1,this.tfScore.visible=!1,this.logo1.visible=!1,this.logo2.visible=!1,this.logo3.visible=!1,s.HideUI()}},{key:"ShowUI",value:function(){this.btnClose.visible=!0,this.tfScore.visible=!0,this.logo1.visible=!0,this.logo2.visible=!0,this.logo3.visible=!0,s.ShowUI()}},{key:"Exit",value:function(){if(window.call_client){var t=Utils.OMSGetProductLink();if(t&&(t=t.replace("[timestamp]",Date.now())),void 0!==window.mraid)window.clickURLRedirect?t=clickURLRedirect+t:call_client(resource.get_args("creative_id"),"click"),mraid.open(t);else if(window.creative_id)call_client(window.creative_id,"GLADS_CLICK_INTERSTITIAL","click",0,0,"","link:"+t);else{var e=window.open(t,"_blank");e.location}}}},{key:"TouchHandler",value:function(t){switch(t.target){case this.btnRetry:Input.IsTouchUp(t)&&(this.isSendingTracking||(TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_REPLAY),gIngameTimeSpent=0,StateManager.SwitchState(StateIngame),StateIngame.Reset(),this.btnRetry.interactive=!1,s.Hide(),AudioManager.Play(23,!1)));break;case this.btnClose:Input.IsTouchUp(t)&&(Utils.SendTrackingAndExit(),this.btnClose.interactive=!1);break;case this.btnCheckNow:Input.IsTouchUp(t)&&(this.OpenProductLink(),this.btnCheckNow.interactive=!1)}s.TouchHandler(t)}}]),e}(PIXI.Container));t.exports=new h},function(t,e,i){"use strict";(function(e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(41),h=i(40),u=i(42),l=i(72),c=i(186),d=(i(7),i(43)),f=function(t){function f(){r(this,f);var t=n(this,(f.__proto__||Object.getPrototypeOf(f)).call(this));return t.state=0,t.score=0,t.scoreCounter=0,t.previousTime=GameDefine.GAME_TIMER_WARNING,t.isGameStarted=!1,t.isTutorial=!0,t.isGotReward=!1,t.isFirstLaunch=!0,t.tutorialHand=null,t.btnExit=null,t.countdown=null,t.isUpdate=!0,t.limitTime=0,t.combo=0,t.holdingTime=0,t.isTouchDown=!1,t.touchDownCount=0,t.mText,t.mTextState=null,t.mHoldingTextTime=0,t.ui_time=null,t.player=null,t.map=null,t.mapData=null,t.currentMapIndex=0,t.timerMain=new Timer,t.lastCoinCollectTime=0,t.currentCoinIndex=0,t.interactive=!0,t.testParticle=null,t.mCountTimePlayAmbianceSound,t.mIsGamePlaying,t}return o(f,t),a(f,[{key:"Load",value:function(){APP.AddChild(this),APP.Align(this),Utils.IsOnDevie()||APP.EnableDebugLayer(!0),this.state=GameDefine.GAME_STATE_NONE,this.score=0,this.scoreCounter=0,this.previousTime=GameDefine.GAME_TIMER_WARNING,this.isGameStarted=!1,this.isTutorial=!0,this.touchDownCount=0,this.timerMain.SetDuration(GameDefine.GAME_TIMEOUT),this.tutorialHandLeft=GuiManager.GetGui(GameDefine.GetGUIVer()).GetObject(6),this.tutorialHandLeft.visible=!1,this.tutorialHandRight=GuiManager.GetGui(GameDefine.GetGUIVer()).GetObject(7),this.tutorialHandRight.visible=!1,this.tutorialText=GuiManager.GetGui(GameDefine.GetGUIVer()).GetObject(8),this.tutorialText.style={fontFamily:GameConfig.fontList.MainFont,fontSize:80*GameConfig.scale,fill:"#ffe200",stroke:"#000000",strokeThickness:10,fontWeight:"bold",align:"center"},this.tutorialText.visible=!1,DeviceInfo.IsUseSmallFontSize()?this.tutorialText.style.fontSize=76:this.tutorialText.style.fontSize=80,this.countdown=GuiManager.GetGui(GameDefine.GetGUIVer()).GetObject(5),this.countdown.SetFrame(96),this.btnExit=GuiManager.GetGui(GameDefine.GetGUIVer()).GetObject(2),this.btnExit.SetTouchable(!0),this.ui_time=GuiManager.GetGui(GameDefine.GetGUIVer()).GetObject(1),this.ui_time.style={fontFamily:"Arial",fontSize:5===GameDefine.GetGUIVer()?36:30*GameConfig.scale,fill:"#000000",fontWeight:"bold"},e.ParticleMgr=new c,this.addChild(GuiManager.GetGui(GameDefine.GetGUIVer())),this.addChild(u),this.addChild(l),this.addChild(ParticleMgr.mContainerParticle),this.addChild(ParticleMgr.mContainerParticleUI),this.ShowTutorial(),Utils.advertisement.visible=!0,this.addChild(GameDefine.GetAdvertisement()),ParticleMgr.Init(),u.Reset(),l.Reset(),this.mCountTimePlayAmbianceSound=0,this.mIsGamePlaying=!0,AudioManager.Play(0,!0)}},{key:"PreInit",value:function(){this.player=new s("1"),this.map=new h,this.map.Init(this.player),this.map.Load(this.mapData,this.currentMapIndex),this.currentMapIndex=(this.currentMapIndex+1)%3,this.map.SwitchMap(1),this.addChild(this.map),this.addChild(this.player)}},{key:"Reset",value:function(){l.Reset(),this.map.Load(this.mapData,this.currentMapIndex)}},{key:"Unload",value:function(){APP.RemoveChild(this),Utils.IsOnDevie()||APP.DisableDebugLayer()}},{key:"Resize",value:function(){window.isBrowser&&(APP.IsRotate()?(this.isUpdate=!1,this.Pause()):(this.isUpdate=!0,this.Resume()))}},{key:"Pause",value:function(){this.mIsGamePlaying=!1,AudioManager.Stop(0),AudioManager.StopAll(),this.player.Pause()}},{key:"Resume",value:function(){this.mIsGamePlaying=!0,AudioManager.Play(0,!0),this.player.Resume()}},{key:"IsGamePlaying",value:function(){return this.mIsGamePlaying}},{key:"Back",value:function(){if(this.isFirstLaunch){if(this.btnExit.visible){this.Pause();var t=i(192);StateManager.PushState(t)}}else Utils.SendTrackingAndExit()}},{key:"Update",value:function(t){if(this.isUpdate){switch(gIngameTimeSpent+=t,this.limitTime-=t,ParticleMgr.Update(t),!0===this.isTouchDown&&(this.holdingTime+=t),this.state){case GameDefine.GAME_STATE_NONE:break;case GameDefine.GAME_STATE_TUTORIAL_TURN_LEFT:this.map.Update(t);(this.holdingTime>=.5||this.player.state==GameDefine.PLAYER_STATE_MOVE_LEFT)&&(this.map.speed=GameDefine.GAME_SPEED_NORMAL,this.SetState(GameDefine.GAME_STATE_TUTORIAL_CHECK_TURN_RIGHT),this.tutorialHandLeft.visible=!1,this.tutorialText.visible=!1);case GameDefine.GAME_STATE_TUTORIAL_CHECK_TURN_LEFT:this.map.Update(t)>=GameDefine.TUTORIAL_SEGMENT_TURN_LEFT&&(this.map.speed-=GameDefine.GAME_SPEED_TUTORIAL_DECREASE*GameDefine.GAME_SPEED_BASE*t,this.map.speed<0&&(this.map.speed=0,this.tutorialHandLeft.visible=!0,!window.isBrowser||DeviceInfo.IsMobile()||this.tutorialHandLeft.SetAnim(6,!0),this.SetState(GameDefine.GAME_STATE_TUTORIAL_TURN_LEFT),this.tutorialText.text=GLText.GetText(13),this.tutorialText.visible=!0));break;case GameDefine.GAME_STATE_TUTORIAL_TURN_RIGHT:this.map.Update(t);(this.holdingTime>=.5||this.player.state==GameDefine.PLAYER_STATE_MOVE_RIGHT)&&(this.map.speed=GameDefine.GAME_SPEED_NORMAL,this.HideTutorial(),this.tutorialHandRight.visible=!1,this.tutorialText.visible=!1,this.StartGame(),this.SetState(GameDefine.GAME_STATE_NORMAL),ParticleMgr.MakeTextIngame(GameDefine.TEXT_IN_GAME.GO));break;case GameDefine.GAME_STATE_TUTORIAL_CHECK_TURN_RIGHT:this.map.Update(t)>=GameDefine.TUTORIAL_SEGMENT_TURN_RIGHT&&(this.map.speed-=GameDefine.GAME_SPEED_TUTORIAL_DECREASE*GameDefine.GAME_SPEED_BASE*t,this.map.speed<0&&(this.map.speed=0,this.tutorialHandRight.visible=!0,!window.isBrowser||DeviceInfo.IsMobile()||this.tutorialHandRight.SetAnim(7,!0),this.player.MoveRight(),this.isTouchDown=!1,this.player.Release(),this.holdingTime=0,this.SetState(GameDefine.GAME_STATE_TUTORIAL_TURN_RIGHT),this.tutorialText.text=GLText.GetText(14),this.tutorialText.visible=!0));break;case GameDefine.GAME_STATE_NORMAL:this.timerMain.Update(t),this.timerMain.JustFinished()&&(this.map.AddFinishLine(),this.EndGame()),this.map.Update(t),l.state==l.STATE_FRENDZY?this.map.state!=GameDefine.MAP_STATE_FRENZY&&(this.map.state=GameDefine.MAP_STATE_FRENZY,this.map.TransformFrenzyRoad(GameDefine.MAP_STATE_FRENZY),ParticleMgr.MakeTextIngame(GameDefine.TEXT_IN_GAME.FRENZY),this.player.ActiveFrenzy()):this.map.state!=GameDefine.MAP_STATE_NORMAL&&(this.map.state=GameDefine.MAP_STATE_NORMAL,this.map.TransformFrenzyRoad(GameDefine.MAP_STATE_NORMAL),this.player.EndFrenzy()),l.Update(t),u.Update(t),this.UpdatePlayAmbianceSound(t);break;case GameDefine.GAME_STATE_FINISHED:this.map.Update(t),u.Update(t)}this.UpdateInterface(t),window._show_touchzone&&this.ShowTouchzone(),GuiManager.Update(GameDefine.GetGUIVer(),t)}}},{key:"ShowTouchzone",value:function(){var t=APP.debugLayer;if(t.clear(),t.lineStyle(2,16711680,1),this.btnExit&&1==this.btnExit.visible){var e=this.btnExit.GetTransformRect();t.drawRect(e.x,e.y,e.width,e.height)}}},{key:"IsNewUser",value:function(){return!(!window.DEBUG&&!window.REVIEW)||GameConfig.isNewUser}},{key:"GotReward",value:function(){this.isGotReward=!0}},{key:"IsGotReward",value:function(){return this.isGotReward}},{key:"StartGame",value:function(){if(this.isGameStarted=!0,this.isFirstLaunch&&TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_CONFIRMED_ENGAGEMENTS),this.IsNewUser()&&window.UserProfile)try{UserProfile.save_my_profile({finishTutorial:!0,formSubmitted:GameConfig.isFormSubmitted}).error(function(){})}catch(t){}window.isBrowser||(this.btnExit.visible=!0)}},{key:"EndGame",value:function(){this.state!=GameDefine.GAME_STATE_FINISHED&&(StateManager.SwitchState(StateGameOver),AudioManager.Stop(0))}},{key:"SetState",value:function(t){this.state=t}},{key:"GetState",value:function(){return this.state}},{key:"GetScore",value:function(){return this.score}},{key:"GetStar",value:function(){return Math.floor(this.score/GameDefine.SCORE_FOR_ONE_STAR)}},{key:"UpdatePlayAmbianceSound",value:function(t){switch(this.state){case GameDefine.GAME_STATE_NORMAL:this.mCountTimePlayAmbianceSound-=t,this.mCountTimePlayAmbianceSound<=0&&this.timerMain.GetTime()-2>GameDefine.GAME_TIMER_WARNING&&(this.mCountTimePlayAmbianceSound=3+1*Math.random())}}},{key:"PlaySoundCoinCollect",value:function(){var t=Math.max(this.timerMain.GetTime()-2,0);t<this.lastCoinCollectTime-.5&&(this.currentCoinIndex=0),this.lastCoinCollectTime=t,AudioManager.Play(2+this.currentCoinIndex,!1),++this.currentCoinIndex>8&&(this.currentCoinIndex=8)}},{key:"PlaySound",value:function(t,e){AudioManager.IsSupportAudioAPI()&&AudioManager.Play(t,e)}},{key:"StopSound",value:function(t){AudioManager.IsSupportAudioAPI()&&AudioManager.Stop(t)}},{key:"TutorialSetText",value:function(t){void 0==this.mText&&(this.mText=new PIXI.Container,this.mText.mBorder=new PIXI.Graphics,this.mText.mText=new d("",{default:{fontFamily:GameConfig.fontList.MainFont,fontSize:35,align:"center",fill:16777215,wordWrap:!0,wordWrapWidth:550},hl:{}}),this.addChild(this.mText),this.mText.addChild(this.mText.mBorder),this.mText.addChild(this.mText.mText)),this.mText.position.set(.5*APP.GetWidth(),150),this.mText.mText.text=""+t,this.mText.mText.anchor.set(.5,0),this.mText.mText.calculateBounds(),this.mText.mBorder.position.y=this.mText.mText.position.y,this.mText.mBorder.clear(),this.mText.mBorder.lineStyle(2.5,0,1),this.mText.mBorder.beginFill(15538980,1);var e=this.mText.mText.getLocalBounds();this.mText.mBorder.drawRoundedRect(e.x-40,e.y-20,e.width+80,e.height+40,50),this.mText.mBorder.closePath(),this.mText.mBorder.endFill(),this.mText.alpha=0}},{key:"TutorialUpdateText",value:function(t){switch(this.mTextState){case GameDefine.TUTORIAL_TEXT_STATE_SHOW:this.mText.alpha=GameDefine.MoveToTarget(this.mText.alpha,1,2.5,t),this.mText.alpha>=1&&(this.mTextState=GameDefine.TUTORIAL_TEXT_STATE_HOLD);break;case GameDefine.TUTORIAL_TEXT_STATE_HIDE:this.mText.alpha=GameDefine.MoveToTarget(this.mText.alpha,0,2.5,t),this.mText.alpha<=0&&(this.StartGame(),this.SetState(GameDefine.GAME_STATE_NORMAL),ParticleMgr.MakeTextIngame(GameDefine.TEXT_IN_GAME.GO));break;case GameDefine.TUTORIAL_TEXT_STATE_HOLD:this.mHoldingTextTime+=t,this.mHoldingTextTime>=1&&(this.mHoldingTextTime=0,this.mTextState=GameDefine.TUTORIAL_TEXT_STATE_HIDE)}}},{key:"AddScore",value:function(t,e){if(this.state!=GameDefine.GAME_STATE_FINISHED)switch(t){case GameDefine.SCORE_OBSTACLE_COIN:this.score+=t,u.Add(GameDefine.SCORE_OBSTACLE_COIN,e.x,e.y,this.map.state),l.AddFrenzyScore(t),this.PlaySoundCoinCollect();break;case GameDefine.SCORE_OBSTACLE_SPECIAL_COIN:if(this.limitTime>0){this.combo=Math.min(this.combo+1,4),u.AddCombo(this.combo);var i=13;switch(this.combo){case 2:i=11;case 3:i=12;case 4:i=14}AudioManager.Play(i,!1)}else this.combo=0,AudioManager.Play(22,!1);this.limitTime=GameDefine.COMBO_COUNT_TIME,this.score+=t+this.combo*GameDefine.SCORE_COMBO,u.Add(GameDefine.SCORE_OBSTACLE_SPECIAL_COIN,e.x,e.y,this.map.state),l.AddFrenzyScore(t+this.combo*GameDefine.SCORE_COMBO)}}},{key:"ShowTutorial",value:function(){this.btnExit.visible=!1,this.map.speed=GameDefine.GAME_SPEED_TUTORIAL,this.SetState(GameDefine.GAME_STATE_TUTORIAL_CHECK_TURN_LEFT)}},{key:"HideTutorial",value:function(){this.btnExit.visible=!0,this.tutorialHandRight.visible=!1}},{key:"UpdateInterface",value:function(t){var e=Math.max(this.timerMain.GetTime()-2,0);AudioManager.IsSupportAudioAPI()&&e<=GameDefine.GAME_TIMER_WARNING&&(this.previousTime!=Math.floor(e)?(this.previousTime=Math.floor(e),AudioManager.Play(24,!1),this.countdown.SetFrame(91+this.previousTime)):0==e&&(96!==this.countdown.frameId&&ParticleMgr.MakeTextIngame(GameDefine.TEXT_IN_GAME.TIME_UP),this.countdown.SetFrame(96))),this.state!=GameDefine.GAME_STATE_FINISHED&&(this.scoreCounter<this.score?(this.scoreCounter+=GameDefine.GAME_SPEED_BASE*t*10,this.scoreCounter>this.score&&(this.scoreCounter=this.score)):(this.scoreCounter-=GameDefine.GAME_SPEED_BASE*t,this.scoreCounter<this.score&&(this.scoreCounter=this.score)));var i=""+Math.ceil(this.scoreCounter);l.UpdateScore(i);var r=""+Math.ceil(Math.max(this.timerMain.GetTime()-2,0));this.ui_time.text=r}},{key:"TouchHandler",value:function(t){switch(t.target){case this:if(window.isBrowser&&!DeviceInfo.IsMobile())break;if(Input.IsTouchUp(t))switch(this.state){case GameDefine.GAME_STATE_TUTORIAL_CHECK_TURN_LEFT:case GameDefine.GAME_STATE_TUTORIAL_TURN_LEFT:case GameDefine.GAME_STATE_TUTORIAL_TURN_RIGHT:case GameDefine.GAME_STATE_TUTORIAL_CHECK_TURN_RIGHT:this.isTouchDown=!1,this.holdingTime=0,this.player.Release();break;case GameDefine.GAME_STATE_NORMAL:this.isTouchDown=!1,this.touchDownCount--,!this.timerMain.IsDone()&&this.touchDownCount<=0&&(this.touchDownCount=0,this.player.Release())}if(Input.IsTouchDown(t))switch(this.state){case GameDefine.GAME_STATE_TUTORIAL_TURN_LEFT:Input.touchX<=APP.GetWidth()/2&&(this.isTouchDown=!0,this.player.MoveLeft());break;case GameDefine.GAME_STATE_TUTORIAL_TURN_RIGHT:Input.touchX<=APP.GetWidth()/2||(this.isTouchDown=!0,this.player.MoveRight());break;case GameDefine.GAME_STATE_NORMAL:if(this.isTouchDown=!0,this.touchDownCount++,!this.timerMain.IsDone()){Input.touchX<=APP.GetWidth()/2?this.player.MoveLeft():this.player.MoveRight()}}break;case this.btnExit:Input.IsTouchUp(t)&&this.Back()}}},{key:"KeyHandler",value:function(t){if(Input.IsKeyDown(t))switch(this.state){case GameDefine.GAME_STATE_TUTORIAL_TURN_LEFT:37==t.keyCode&&(this.map.speed=GameDefine.GAME_SPEED_NORMAL,this.tutorialHandLeft.visible=!1,this.player.MoveLeft(),this.SetState(GameDefine.GAME_STATE_TUTORIAL_CHECK_TURN_RIGHT));break;case GameDefine.GAME_STATE_TUTORIAL_TURN_RIGHT:39==t.keyCode&&(this.map.speed=GameDefine.GAME_SPEED_NORMAL,this.tutorialHandRight.visible=!1,this.player.MoveRight(),this.StartGame(),this.SetState(GameDefine.GAME_STATE_NORMAL));break;case GameDefine.GAME_STATE_NORMAL:this.timerMain.IsDone()||(37==t.keyCode?this.player.MoveLeft():39==t.keyCode&&this.player.MoveRight())}}}]),f}(PIXI.Container);t.exports=new f}).call(e,i(3))},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(30),h=i(37),u=i(29),l=i(38),c=i(11),d=i(72),f=i(39),p=i(70),m=(i(42),i(71));i(41),i(40);i(191);var g=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.STATE_LOAD_NONE=0,t.STATE_LOAD_IMAGE=1,t.STATE_LOAD_SPRITE=2,t.STATE_LOAD_GUI=3,t.STATE_LOAD_SOUND=4,t.STATE_LOAD_FINISHED=5,t.STATE_LOAD_INGAME_WAITING=6,t.fillBG=new PIXI.Container,t.fillTool=new PIXI.Graphics,t.background=new PIXI.Container,t.foreground=new PIXI.Container,t.decoration=new PIXI.Container,t.backgroundCover=new PIXI.Graphics,t.loadingState=0,t.loadingTime=0,t.loadingTimeOut=30,t.loadingDelay=0,t.loadingBg=null,t.loadingIcon=null,t.btnRetry=null,t.btnExit=null,t.mErrorContainer,t.addChild(t.fillBG),t.addChild(t.backgroundCover),t.addChild(t.background),t.addChild(t.foreground),t.addChild(t.decoration),APP.AddChild(t),t.interactive=!0,t.loadingError=t.LoadingError.bind(t),document.addEventListener("LoadingError",t.loadingError),t}return o(e,t),a(e,[{key:"Load",value:function(){this.visible=!0,"undefined"!=typeof mraid&&mraid.setOrientationProperties({allowOrientationChange:!1,forceOrientation:"portrait"});var t=(PIXI.loaders.Resource.LOAD_TYPE.IMAGE,{loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR});APP.Align(this),0==gLoadingTimeSpent&&(gLoadingTimeSpent=gTotalTimeSpent),this.flag=!1,PIXI.loader.removeAllListeners(),PIXI.loader.reset(),Utils.IsOnDevie()||APP.EnableDebugLayer();var e=[{name:"imgLoadingBg",url:Utils.OMSGetImage("loading_bg.jpg"),options:t},{name:"imgBg",url:Utils.OMSGetImage("bg.png"),options:t},{name:"imgGame",url:Utils.OMSGetImage("game.png"),xhr:t},{name:"imgGameover",url:Utils.OMSGetImage("gameover.jpg"),xhr:t},{name:"map1",url:Utils.OMSGetImage("map1.png"),xhr:t},{name:"map2",url:Utils.OMSGetImage("map2.png"),xhr:t},{name:"spine_SPINE",url:Utils.OMSGetData("spine/SPINE.json"),xhr:t},{name:"bgjpg",url:Utils.OMSGetImage("bg.jpg"),xhr:t},{name:"particle",url:Utils.OMSGetImage("particle.png"),xhr:t}];Utils.LoadAssets(e,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler.bind(this),this.LoadErrorHandler.bind(this)),Utils.advertisement.visible=!0,this.foreground.addChild(GameDefine.GetAdvertisement()),this.btnExit=GuiManager.GetGui(2).GetObject(0),this.loadingIcon=GuiManager.GetGui(2).GetObject(1),this.btnExit.visible=!1,this.loadingTime=0,this.loadingState=this.STATE_LOAD_IMAGE,Utils.GetArrayBuffer(Utils.OMSGetData("map.bin",!0),function(t){var e=null;if("response"!=typeof Uint8Array)e=new Uint8Array(t);else{var i=new DataView(t);e=[];for(var r=0;r<t.byteLength;r++)e[r]=i.getUint8(r)}StateIngame.mapData=e},function(){this.LoadingError()}.bind(this)),this.backgroundCover.clear(),this.backgroundCover.beginFill(0,1),this.backgroundCover.drawRoundedRect(0,0,APP.GetWidth(),APP.GetHeight(),0),this.backgroundCover.endFill(),this.backgroundCover.visible=!0,this._InitErrorContainer(),this._HideErrorContainer(),this.btnExit.SetTouchable(!0),this.decoration.removeChildren(0,this.decoration.children.length),this.decoration.addChild(GuiManager.GetGui(2)),AudioManager.Load(AudioManager.IsSupportAudioAPI()?DataDefine.SOUNDS_INFO:DataDefine.SINGLE_SOUNDS_INFO)}},{key:"Unload",value:function(){this.visible=!1}},{key:"Back",value:function(){this.mErrorContainer.visible&&Utils.SendTrackingAndExit()}},{key:"Update",value:function(t){if(this.mErrorContainer.visible||(gLoadingTimeSpent+=t),!Utils.IsOnDevie()){var e=APP.debugLayer;if(e.clear(),e.lineStyle(2,16711680,1),window._show_touchzone){if(null!=this.btnExit){var i=this.btnExit.GetTransformRect();e.drawRect(i.x,i.y,i.width,i.height)}null!=this.btnRetry&&e.drawRect(this.mErrorContainer.position.x+this.btnRetry.position.x+this.btnRetry.hitArea.x,this.mErrorContainer.position.y+this.btnRetry.position.y+this.btnRetry.hitArea.y,this.btnRetry.hitArea.width,this.btnRetry.hitArea.height)}}if(this.loadingTime<this.loadingTimeOut){if(this.loadingTime+=t,this.loadingTime>=this.loadingTimeOut)return void this.LoadErrorHandler();switch(this.loadingState){case this.STATE_LOAD_IMAGE:case this.STATE_LOAD_SPRITE:case this.STATE_LOAD_GUI:break;case this.STATE_LOAD_SOUND:AudioManager.IsLoaded(t)&&("1"===window.iv_location_type&&Utils.DispatchEvent("touchstart"),this.loadingState=this.STATE_LOAD_INGAME_WAITING);break;case this.STATE_LOAD_INGAME_WAITING:this.loadingDelay+=t,this.loadingDelay>3&&(this.loadingState=this.STATE_LOAD_FINISHED);break;case this.STATE_LOAD_FINISHED:TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_ENDGAMENTS_LOADING_COMPLETE),f.Init(),f.Resize(),f.SetTouchable(!1),StateIngame.isFirstLaunch&&StateIngame.PreInit(),m.Init(),p.Init(),d.Init(),StateManager.SwitchState(StateIngame),this.loadingState=this.STATE_LOAD_NONE}null!=this.loadingIcon&&(this.loadingIcon.rotation+=5*t),GuiManager.GetGui(2).Update(t)}}},{key:"LoadProgressHandler",value:function(t,e){switch(Utils.Log("StateLoading loading: "+e.url),Utils.Log("StateLoading progress: "+t.progress+"%"),e.name){case"imgLoadingBg":this.loadingBg=new PIXI.Sprite(PIXI.loader.resources.imgLoadingBg.texture),this.loadingBg.anchor.set(.5,.5),this.loadingBg.position.set(APP.GetWidth()/2,APP.GetHeight()/2),this.background.addChild(this.loadingBg),void 0!==window.mraid&&setTimeout(function(){this.loadingBg.position.set(APP.GetWidth()/2,APP.GetHeight()/2)}.bind(this),500)}}},{key:"LoadErrorHandler",value:function(t){Utils.Log("LoadErrorHandler: "+t),this._ShowErrorContainer()}},{key:"LoadCompleteHandler",value:function(){void 0!==PIXI.loader.resources.spine_SPINE&&(GameDefine.spinePlayer=PIXI.loader.resources.spine_SPINE.spineData),GameDefine.bgjpg=PIXI.loader.resources.bgjpg.texture,GameDefine.particle_texture=PIXI.loader.resources.particle.texture,this.LoadSprite()}},{key:"LoadSprite",value:function(){Utils.GetArrayBuffer(Utils.OMSGetGuiData("2.dat",!0),function(t){var e=PIXI.loader.resources;h.Load(t);for(var i=[e.imgBg.texture,e.imgGame.texture,e.imgGameover.texture,e.map1.texture,e.map2.texture],r="1";r<="5";r++){var n=l.Load(h.GetData(r-"1"));c.Add(r,i[r-"1"],n)}StateGameOver.bg=new PIXI.Sprite(PIXI.loader.resources.imgGameover.texture),h.Close(),this.LoadGui()}.bind(this),function(){this.LoadingError()}.bind(this)),this.loadingState=this.STATE_LOAD_SPRITE}},{key:"LoadGui",value:function(){Utils.GetArrayBuffer(Utils.OMSGetGuiData("3.dat",!0),function(t){PIXI.loader.resources;h.Load(t);for(var e=3;e<=9;e++){var i=new s;i.Load(h.GetData(e-3)),GuiManager.Add(e,i)}h.Close(),this.loadingState=this.STATE_LOAD_SOUND}.bind(this),function(){this.LoadingError()}.bind(this)),this.loadingState=this.STATE_LOAD_GUI}},{key:"LoadingError",value:function(){this.LoadErrorHandler()}},{key:"TouchHandler",value:function(t){var e=this;switch(t.target){case this.btnRetry:Input.IsTouchUp(t)&&(this.flag||(this.flag=!0,this.background.removeChild(this.loadingBg),this.foreground.removeChild(this.btnRetry),window.isBrowser||this.foreground.removeChild(this.btnExit),this.Load(),setTimeout(function(){e.flag=!1},2e3)));break;case this.btnExit:Input.IsTouchUp(t)&&Utils.SendTrackingAndExit()}}},{key:"_InitErrorContainer",value:function(){if(null==this.mErrorContainer){var t="GE"==DeviceInfo.GetCurrentCountry()?25:30,e=40-.5*t,i=e+40;this.mErrorContainer=new PIXI.Container,this.mErrorContainer.position.set(.5*APP.GetWidth(),.5*APP.GetHeight()-40);var r=u.GetText(21);r=r.replaceAll("<br>","\n");var n=new PIXI.Text(r,{fontFamily:GameConfig.fontList.MainFont,fontSize:t,fill:16777215,align:"center",wordWrap:!0,wordWrapWidth:520});n.position.set(0,0),n.anchor.set(.5,.5),n.calculateBounds();var o=n.getBounds(),a=new PIXI.Graphics;a.clear(),a.lineStyle(5,16777215,1),a.beginFill(0,.7),a.drawRoundedRect(o.x-30,o.y-30,o.width+60,o.height+60+40,1),a.endFill();var s=new PIXI.Text(u.GetText(22),{fontFamily:GameConfig.fontList.MainFont,fontSize:t,fill:16777215,align:"center"});s.position.set(0,o.y+o.height+30+40),s.anchor.set(.5,.5),s.calculateBounds();var h=s.getBounds();this.btnRetry=new PIXI.Graphics,this.btnRetry.clear(),this.btnRetry.lineStyle(0,16777215,0),this.btnRetry.beginFill(13835556,1),this.btnRetry.drawRoundedRect(h.x-i,h.y-e,h.width+2*i,h.height+2*e,.5*(h.height+2*e)),this.btnRetry.endFill(),this.btnRetry.hitArea=new PIXI.Rectangle(-.5*APP.GetWidth(),this.btnRetry.y,APP.GetWidth(),200),this.btnRetry.interactive=!0,this.addChild(this.mErrorContainer),this.mErrorContainer.addChild(a),this.mErrorContainer.addChild(n),this.mErrorContainer.addChild(this.btnRetry),this.mErrorContainer.addChild(s)}this.mErrorContainer.visible=!1}},{key:"_ShowErrorContainer",value:function(){null==this.mErrorContainer&&this._InitErrorContainer(),null!=this.loadingBg||this.backgroundCover.position.set(0,0),this.loadingIcon.visible=!1,this.mErrorContainer.visible=!0,this.btnRetry.visible=!0,this.btnExit.visible=!0}},{key:"_HideErrorContainer",value:function(){null==this.mErrorContainer&&this._InitErrorContainer(),this.loadingIcon.visible=!0,this.mErrorContainer.visible=!1,this.btnRetry.visible=!1,this.btnExit.visible=!1}}]),e}(PIXI.Container);t.exports=new g},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(37),h=i(29),u=i(38),l=i(11),c=i(30),d=(i(9),i(7),i(190)),f=i(43),p=function(t){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.background=new PIXI.Container,t.foreground=new PIXI.Container,t.decoration=new PIXI.Container,t.drawing=new PIXI.Graphics,t.splash=null,t.btnExit=null,t.token=null,t.isLoaded=!1,t.interactive=!0,t.play=null,t.m_video=d,t.resetUI=!1,t.btnExit=null,t.gl_logo=null,t.logo=null,t.addChild(t.background),t.addChild(t.foreground),t.addChild(t.decoration),APP.AddChild(t),Utils.IsOnDevie()||APP.EnableDebugLayer(),window.UserProfile&&UserProfile.load_my_profile().success(function(t){t.data.finishTutorial?GameConfig.isNewUser=!1:GameConfig.isNewUser=!0}).error(function(t){GameConfig.isNewUser=!0}),Utils.GetArrayBuffer(Utils.OMSGetGuiData(DeviceInfo.GetLanguagePack(),!0),function(t){s.Load(t),h.Load(s.GetData(0))}.bind(t),function(){Utils.SendTrackingAndExit()}),resource.load_font("MainFont",Utils.OMSGetData("font/KlavikaBold.otf"),function(){}.bind(t),function(){}),GameConfig.OverrideCore(),t}return o(e,t),a(e,[{key:"Load",value:function(){var t=this;if(this.visible=!0,Utils.PauseHostGameMusic(),"undefined"!=typeof mraid&&!window.REVIEW&&GameConfig.isHostGamePortrait)return void setTimeout(function(){APP.Resize(),StateManager.Resize(),APP.Align(t)},100);window.DEBUG||window.REVIEW||!window.endtype?GameDefine.CAN_SHOW_FORM=!1:GameDefine.check_constraint({gl_device_id:resource.get_args("gl_device_id"),anonymous:"",clientid:""},function(){GameDefine.CAN_SHOW_FORM=!0},function(){GameDefine.CAN_SHOW_FORM=!1}),window.endtype?GameDefine.IS_VOUCHER="voucher"==window.endtype:GameDefine.CAN_SHOW_FORM=!1,GameDefine.IS_VOUCHER&&(GameDefine.CAN_SHOW_FORM=!1),window.opencheat&&this.CheatOn();var e={loadType:PIXI.loaders.Resource.LOAD_TYPE.IMAGE},i={loadType:PIXI.loaders.Resource.LOAD_TYPE.XHR};if(GameDefine.UpdateParams(),APP.Rotate(APP.IsRotate()),APP.Align(this),void 0!==window.iv_location_type&&"1"===window.iv_location_type){var r=[{name:"imgPreload",url:Utils.OMSGetImage("preload.png"),options:i},{name:"imgToken",url:Utils.OMSGetToken(),options:e}];return void Utils.LoadAssets(r,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler.bind(this),this.LoadErrorHandler.bind(this))}var n=[{name:"imgSplash",url:Utils.OMSGetImage(this.GetSplashName()),options:i},{name:"imgPreload",url:Utils.OMSGetImage("preload.png"),options:i},{name:"imgToken",url:Utils.OMSGetToken(),options:e},{name:"preloadVideo",url:Utils.OMSGetData("video/movie.mp4")}];!this.isLoaded&&Utils.LoadAssets(n,this.LoadProgressHandler.bind(this),this.LoadCompleteHandler.bind(this),this.LoadErrorHandler.bind(this))}},{key:"Unload",value:function(){this.visible=!1}},{key:"Resize",value:function(){if(this.isLoaded){GameDefine.UpdateParams(),APP.IsRotate()&&GameConfig.isSupportTwoScreenSize&&APP.Rotate(!1),APP.Align(this),this.decoration.removeChildren(0,this.decoration.children.length);var t=1,e=0;APP.IsRotate()&&(t=0,e=0),this.decoration.addChild(GuiManager.GetGui(t)),this.btnExit=GuiManager.GetGui(t).GetObject(e),DeviceInfo.detectIphoneX()&&!APP.IsRotate()&&(GuiManager.GetGui(1).GetObject(1).position.y=100),this.Alignment(),this.ResizeVideo()}else this.IsResizeCompleted()&&(PIXI.loader.removeAllListeners(),PIXI.loader.reset(),this.background.removeChildren(0,this.background.children.length),this.foreground.removeChildren(0,this.foreground.children.length),this.Load())}},{key:"Update",value:function(t){if(!Utils.IsOnDevie()){var e=APP.debugLayer;if(e.clear(),e.lineStyle(2,16711680,1),window._show_touchzone){if(null!=this.btnExit){var i=this.btnExit.GetTransformRect();e.drawRect(i.x,i.y,i.width,i.height)}null!=this.play&&e.drawRect(this.play.position.x+this.play.hitArea.x,this.play.position.y+this.play.hitArea.y,this.play.hitArea.width,this.play.hitArea.height)}}this.m_video&&this.m_video.canRotate&&this.m_video.UpdateVideoRotation()}},{key:"LoadProgressHandler",value:function(t,e){switch(Utils.Log("StatePreload loading: "+e.name),Utils.Log("StatePreload progress: "+t.progress+"%"),e.name){case"imgSplash":this.InitVideo(),this.m_video.SetBgImage(PIXI.loader.resources.imgSplash.url);break;case"imgPreload":this.LoadPreloadSprite(PIXI.loader.resources.imgPreload.texture);break;case"imgToken":this.token=Utils.InitToken(PIXI.loader.resources.imgToken.texture,.5);break;case"preloadVideo":this.InitVideo(),this.m_video.SetPoster(""),this.m_video.Load(PIXI.loader.resources.preloadVideo.url),this.m_video.Play(),this.m_video.Show()}}},{key:"Pause",value:function(){this.m_video&&this.m_video.Pause()}},{key:"Resume",value:function(){this.m_video&&this.m_video.Play()}},{key:"LoadErrorHandler",value:function(t){Utils.Log("LoadErrorHandler: "+t)}},{key:"LoadCompleteHandler",value:function(){if(Utils.Log("LoadCompleteHandler"),this.isLoaded=!0,Utils.InitAdvertisement(h.GetText(23),{fontFamily:"Arial",fontSize:25*GameConfig.scale,fill:"#ffffff",stroke:"#000000",strokeThickness:2}),this.Alignment(),void 0!==window.iv_location_type&&"1"===window.iv_location_type)return void this.NextState();this.m_video.ShowVideo(),DeviceInfo.detectIphoneX()&&!APP.IsRotate()&&(GuiManager.GetGui(1).GetObject(1).position.y=100)}},{key:"GetSplashName",value:function(){return APP.IsRotate()?"mig_portrait_host_landscape.jpg":"mig_portrait_host_portrait.jpg"}},{key:"Alignment",value:function(){var t=new PIXI.TextStyle({align:"center",fontFamily:GameConfig.fontList.MainFont,fontSize:50,fill:"#ffffff"});Utils.SetTokenInfo(h.GetText(59),t),this.token.position.set((APP.GetWidth()-this.token.width)/2,100);var e=Utils.advertisement;e.anchor.set(1,1),e.position.set(APP.GetWidth()-20,APP.GetHeight()-20),this.foreground.addChild(e),void 0!==window.iv_location_type&&"1"===window.iv_location_type?e.visible=!1:this.InitPreloadUI()}},{key:"LoadPreloadSprite",value:function(t){Utils.GetArrayBuffer(Utils.OMSGetGuiData("1.dat",!0),function(e){s.Load(e),l.Add("0",t,u.Load(s.GetData(0)));for(var i=0;i<=2;i++){var r=new c;r.Load(s.GetData(i+1)),GuiManager.Add(i,r)}s.Close()}.bind(this),function(){Utils.Log("Preload load error")}.bind(this))}},{key:"SetupPreload",value:function(){void 0!==window.iv_location_type&&"1"===window.iv_location_type||(this.decoration.children.length>0&&(this.resetUI=!0,this.decoration.removeChildren(0,this.decoration.children.length)),APP.IsRotate()?(this.btnExit=GuiManager.GetGui(0).GetObject(0),this.decoration.addChild(GuiManager.GetGui(0)),GuiManager.GetGui(0).UpdateAnchorRotate()):(this.btnExit=GuiManager.GetGui(1).GetObject(0),this.decoration.addChild(GuiManager.GetGui(1))),this.resetUI&&(this.Alignment(),this.resetUI=!1),this.btnExit.SetTouchable(!0))}},{key:"IsResizeCompleted",value:function(){return!0}},{key:"NextState",value:function(){this.isLoaded&&(TrackingManager.SendEventTracking(TrackingManager.TRACKING_ACTION_ENGAGEMENTS),gTotalTimeSpent=.01,gIngameTimeSpent=.01,this.interactive=!1,APP.IsRotate()||(StateLoading.fillTool.beginFill(0),StateLoading.fillTool.drawRect(0,0,APP.GetWidth(),APP.GetHeight()),StateLoading.fillTool.endFill()),this.background.visible=!1,this.foreground.visible=!1,this.decoration.visible=!1,this.m_video.SelfDestroy(),StateLoading.fillBG.addChild(StateLoading.fillTool),this.decoration.removeChildren(0,this.decoration.children.length),StateManager.SwitchState(StateLoading))}},{key:"CheatOn",value:function(){GameDefine.CAN_SHOW_FORM=!0,GameDefine.OPEN_CHEAT=!0}},{key:"InitVideo",value:function(){var t=APP.GetWidth(),e=APP.GetHeight(),i=Math.max(e/720,(t+2*GameConfig.scale)/1280);this.m_video.Init(.5*t,.5*e,1280*i+20*GameConfig.scale,720*i+20*GameConfig.scale,!0),this.m_video.UpdateVideoRotation()}},{key:"ResizeVideo",value:function(){if(this.m_video){var t=APP.GetWidth(),e=APP.GetHeight(),i=Math.max(e/720,(t+2*GameConfig.scale)/1280);this.m_video.Resize(.5*t,.5*e,1280*i+20*GameConfig.scale,720*i+20*GameConfig.scale,!0),this.m_video.UpdateVideoRotation()}}},{key:"TouchHandler",value:function(t){switch(t.target){case this:Input.IsTouchUp(t);break;case this.btnExit:Input.IsTouchUp(t)&&Utils.SendTrackingAndExit();break;case this.play:Input.IsTouchUp(t)&&this.NextState()}}},{key:"InitPreloadUI",value:function(){var t=DeviceInfo.GetCurrentCountry(),e="AR"==t?100:"JP"==t?200:0,i={},r=new PIXI.Graphics,n=h.GetText(20);n=n.replaceAll("<br>","\n");var o=new f(n,{default:{fontFamily:GameConfig.fontList.MainFont,fontSize:54,fill:"#ffffff",align:"center",fontWeight:"normal",wordWrap:!0,wordWrapWidth:570},hl:{fill:"#4cc8fe"}});i.width=o.width+80+e,i.height=o.height+250,r.lineStyle(4,16777215),r.beginFill(0,.3),r.drawRect(-.5*i.width,-.5*i.height,i.width,i.height),r.endFill(),o.anchor.set(.5,.5),i.x=i.width/2,i.y=o.height/2+40,o.position.set(0,-i.height/2+o.height/2+40),r.addChild(o),i.x=APP.GetWidth()/2,i.y=APP.GetHeight()/2+40,r.position.set(i.x,i.y),this.decoration.addChild(r),setTimeout(function(){var t=GameConfig,e=t.qrcode;e.anchor.set(.5,.5),e.scale.set(2,2),e.position.set(i.x,i.y+150),this.decoration.addChild(e)}.bind(this),3e3)}},{key:"RecheckLogo",value:function(){this.btnExit&&this.btnExit.position.set(APP.GetWidth(),0),this.gl_logo&&this.gl_logo.position.set(4,APP.GetHeight()-6),this.logo&&this.logo.position.set(10,16)}}]),e}(PIXI.Container);t.exports=new p},function(t,e){function i(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=i,i.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),i=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-i:t+i}return 0|Math.min(t,this.max)},i.prototype.reset=function(){this.attempts=0},i.prototype.setMin=function(t){this.ms=t},i.prototype.setMax=function(t){this.max=t},i.prototype.setJitter=function(t){this.jitter=t}},function(t,e){!function(){"use strict";for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(256),r=0;r<t.length;r++)i[t.charCodeAt(r)]=r;e.encode=function(e){var i,r=new Uint8Array(e),n=r.length,o="";for(i=0;i<n;i+=3)o+=t[r[i]>>2],o+=t[(3&r[i])<<4|r[i+1]>>4],o+=t[(15&r[i+1])<<2|r[i+2]>>6],o+=t[63&r[i+2]];return n%3==2?o=o.substring(0,o.length-1)+"=":n%3==1&&(o=o.substring(0,o.length-2)+"=="),o},e.decode=function(t){var e,r,n,o,a,s=.75*t.length,h=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var l=new ArrayBuffer(s),c=new Uint8Array(l);for(e=0;e<h;e+=4)r=i[t.charCodeAt(e)],n=i[t.charCodeAt(e+1)],o=i[t.charCodeAt(e+2)],a=i[t.charCodeAt(e+3)],c[u++]=r<<2|n>>4,c[u++]=(15&n)<<4|o>>2,c[u++]=(3&o)<<6|63&a;return l}}()},function(t,e,i){(function(e){function i(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.buffer instanceof ArrayBuffer){var r=i.buffer;if(i.byteLength!==r.byteLength){var n=new Uint8Array(i.byteLength);n.set(new Uint8Array(r,i.byteOffset,i.byteLength)),r=n.buffer}t[e]=r}}}function r(t,e){e=e||{};var r=new o;i(t);for(var n=0;n<t.length;n++)r.append(t[n]);return e.type?r.getBlob(e.type):r.getBlob()}function n(t,e){return i(t),new Blob(t,e||{})}var o=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,a=function(){try{return 2===new Blob(["hi"]).size}catch(t){return!1}}(),s=a&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(t){return!1}}(),h=o&&o.prototype.append&&o.prototype.getBlob;t.exports=function(){return a?s?e.Blob:n:h?r:void 0}()}).call(e,i(3))},function(t,e,i){"use strict";function r(t){function e(t){for(var e=0,i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return r.colors[Math.abs(e)%r.colors.length]}function r(t){function i(){if(i.enabled){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=i,s=Number(new Date),h=s-(a||s);o.diff=h,o.prev=a,o.curr=s,a=s,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");var u=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,function(t,i){if("%%"===t)return t;u++;var n=r.formatters[i];if("function"==typeof n){var a=e[u];t=n.call(o,a),e.splice(u,1),u--}return t}),r.formatArgs.call(o,e);(o.log||r.log).apply(o,e)}}var a;return i.namespace=t,i.enabled=r.enabled(t),i.useColors=r.useColors(),i.color=e(t),i.destroy=n,i.extend=o,"function"==typeof r.init&&r.init(i),r.instances.push(i),i}function n(){var t=r.instances.indexOf(this);return-1!==t&&(r.instances.splice(t,1),!0)}function o(t,e){return r(this.namespace+(void 0===e?":":e)+t)}function a(t){r.save(t),r.names=[],r.skips=[];var e,i=("string"==typeof t?t:"").split(/[\s,]+/),n=i.length;for(e=0;e<n;e++)i[e]&&(t=i[e].replace(/\*/g,".*?"),"-"===t[0]?r.skips.push(new RegExp("^"+t.substr(1)+"$")):r.names.push(new RegExp("^"+t+"$")));for(e=0;e<r.instances.length;e++){var o=r.instances[e];o.enabled=r.enabled(o.namespace)}}function s(){r.enable("")}function h(t){if("*"===t[t.length-1])return!0;var e,i;for(e=0,i=r.skips.length;e<i;e++)if(r.skips[e].test(t))return!1;for(e=0,i=r.names.length;e<i;e++)if(r.names[e].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}return r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=a,r.enabled=h,r.humanize=i(210),Object.keys(t).forEach(function(e){r[e]=t[e]}),r.instances=[],r.names=[],r.skips=[],r.formatters={},r.selectColor=e,r.enable(r.load()),r}t.exports=r},function(t,e,i){t.exports=i(202)},function(t,e,i){t.exports=i(203),t.exports.parser=i(19)},function(t,e,i){(function(e){function r(t,i){if(!(this instanceof r))return new r(t,i);i=i||{},t&&"object"==typeof t&&(i=t,t=null),t?(t=l(t),i.hostname=t.host,i.secure="https"===t.protocol||"wss"===t.protocol,i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=l(i.host).host),this.secure=null!=i.secure?i.secure:e.location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.agent=i.agent||!1,this.hostname=i.hostname||(e.location?location.hostname:"localhost"),this.port=i.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=i.query||{},"string"==typeof this.query&&(this.query=d.decode(this.query)),this.upgrade=!1!==i.upgrade,this.path=(i.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!i.forceJSONP,this.jsonp=!1!==i.jsonp,this.forceBase64=!!i.forceBase64,this.enablesXDR=!!i.enablesXDR,this.timestampParam=i.timestampParam||"t",this.timestampRequests=i.timestampRequests,this.transports=i.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=i.policyPort||843,this.rememberUpgrade=i.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=i.onlyBinaryUpgrades,this.perMessageDeflate=!1!==i.perMessageDeflate&&(i.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=i.pfx||null,this.key=i.key||null,this.passphrase=i.passphrase||null,this.cert=i.cert||null,this.ca=i.ca||null,this.ciphers=i.ciphers||null,this.rejectUnauthorized=void 0===i.rejectUnauthorized?null:i.rejectUnauthorized,this.forceNode=!!i.forceNode;var n="object"==typeof e&&e;n.global===n&&(i.extraHeaders&&Object.keys(i.extraHeaders).length>0&&(this.extraHeaders=i.extraHeaders),i.localAddress&&(this.localAddress=i.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function n(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}var o=i(74),a=i(18),s=i(10)("engine.io-client:socket"),h=i(77),u=i(19),l=i(81),c=i(213),d=i(49);t.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=u.protocol,r.Socket=r,r.Transport=i(46),r.transports=i(74),r.parser=i(19),r.prototype.createTransport=function(t){s('creating transport "%s"',t);var e=n(this.query);return e.EIO=u.protocol,e.transport=t,this.id&&(e.sid=this.id),new o[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){s("setting transport %s",t.name);var e=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){function e(){if(d.onlyBinaryUpgrades){var e=!this.supportsBinary&&d.transport.supportsBinary;c=c||e}c||(s('probe transport "%s" opened',t),l.send([{type:"ping",data:"probe"}]),l.once("packet",function(e){if(!c)if("pong"===e.type&&"probe"===e.data){if(s('probe transport "%s" pong',t),d.upgrading=!0,d.emit("upgrading",l),!l)return;r.priorWebsocketSuccess="websocket"===l.name,s('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){c||"closed"!==d.readyState&&(s("changing transport and sending upgrade packet"),u(),d.setTransport(l),l.send([{type:"upgrade"}]),d.emit("upgrade",l),l=null,d.upgrading=!1,d.flush())})}else{s('probe transport "%s" failed',t);var i=new Error("probe error");i.transport=l.name,d.emit("upgradeError",i)}}))}function i(){c||(c=!0,u(),l.close(),l=null)}function n(e){var r=new Error("probe error: "+e);r.transport=l.name,i(),s('probe transport "%s" failed because of error: %s',t,e),d.emit("upgradeError",r)}function o(){n("transport closed")}function a(){n("socket closed")}function h(t){l&&t.name!==l.name&&(s('"%s" works - aborting "%s"',t.name,l.name),i())}function u(){l.removeListener("open",e),l.removeListener("error",n),l.removeListener("close",o),d.removeListener("close",a),d.removeListener("upgrading",h)}s('probing transport "%s"',t);var l=this.createTransport(t,{probe:1}),c=!1,d=this;r.priorWebsocketSuccess=!1,l.once("open",e),l.once("error",n),l.once("close",o),this.once("close",a),this.once("upgrading",h),l.open()},r.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(c(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else s('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e,i){return this.sendPacket("message",t,e,i),this},r.prototype.sendPacket=function(t,e,i,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof i&&(r=i,i=null),"closing"!==this.readyState&&"closed"!==this.readyState){i=i||{},i.compress=!1!==i.compress;var n={type:t,data:e,options:i};this.emit("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),s("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function i(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?i():t()}):this.upgrading?i():t()}return this},r.prototype.onError=function(t){s("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',t);var i=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),i.writeBuffer=[],i.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],i=0,r=t.length;i<r;i++)~h(this.transports,t[i])&&e.push(t[i]);return e}}).call(e,i(3))},function(t,e,i){(function(e){function r(){}function n(t){o.call(this,t),this.query=this.query||{},s||(e.___eio||(e.___eio=[]),s=e.___eio),this.index=s.length;var i=this;s.push(function(t){i.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){i.script&&(i.script.onerror=r)},!1)}var o=i(75),a=i(31);t.exports=n;var s,h=/\n/g,u=/\\n/g;a(n,o),n.prototype.supportsBinary=!1,n.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},n.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var i=document.getElementsByTagName("script")[0];i?i.parentNode.insertBefore(e,i):(document.head||document.body).appendChild(e),this.script=e,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},n.prototype.doWrite=function(t,e){function i(){r(),e()}function r(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(t){n.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+n.iframeId+'">';o=document.createElement(t)}catch(t){o=document.createElement("iframe"),o.name=n.iframeId,o.src="javascript:0"}o.id=n.iframeId,n.form.appendChild(o),n.iframe=o}var n=this;if(!this.form){var o,a=document.createElement("form"),s=document.createElement("textarea"),l=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=l,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),r(),t=t.replace(u,"\\\n"),this.area.value=t.replace(h,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&i()}:this.iframe.onload=i}}).call(e,i(3))},function(t,e,i){(function(e){function r(){}function n(t){if(h.call(this,t),this.requestTimeout=t.requestTimeout,e.location){var i="https:"===location.protocol,r=location.port;r||(r=i?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==i}else this.extraHeaders=t.extraHeaders}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function a(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var s=i(47),h=i(75),u=i(18),l=i(31),c=i(10)("engine.io-client:polling-xhr");t.exports=n,t.exports.Request=o,l(n,h),n.prototype.supportsBinary=!0,n.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new o(t)},n.prototype.doWrite=function(t,e){var i="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:i}),n=this;r.on("success",e),r.on("error",function(t){n.onError("xhr post error",t)}),this.sendXhr=r},n.prototype.doPoll=function(){c("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},u(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var i=this.xhr=new s(t),r=this;try{c("xhr open %s: %s",this.method,this.uri),i.open(this.method,this.uri,this.async);try{if(this.extraHeaders){i.setDisableHeaderCheck(!0);for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this.extraHeaders[n])}}catch(t){}if(this.supportsBinary&&(i.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?i.setRequestHeader("Content-type","application/octet-stream"):i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{i.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in i&&(i.withCredentials=!0),this.requestTimeout&&(i.timeout=this.requestTimeout),this.hasXDR()?(i.onload=function(){r.onLoad()},i.onerror=function(){r.onError(i.responseText)}):i.onreadystatechange=function(){4===i.readyState&&(200===i.status||1223===i.status?r.onLoad():setTimeout(function(){r.onError(i.status)},0))},c("xhr data %s",this.data),i.send(this.data)}catch(t){return void setTimeout(function(){r.onError(t)},0)}e.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(t){}e.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(var i=new Uint8Array(this.xhr.response),r=[],n=0,o=i.length;n<o;n++)r.push(i[n]);t=String.fromCharCode.apply(null,r)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return void 0!==e.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},o.requestsCount=0,o.requests={},e.document&&(e.attachEvent?e.attachEvent("onunload",a):e.addEventListener&&e.addEventListener("beforeunload",a,!1))}).call(e,i(3))},function(t,e,i){(function(e){function r(t){t&&t.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=c&&!t.forceNode,this.usingBrowserWebSocket||(d=n),o.call(this,t)}var n,o=i(46),a=i(19),s=i(49),h=i(31),u=i(135),l=i(10)("engine.io-client:websocket"),c=e.WebSocket||e.MozWebSocket;if("undefined"==typeof window)try{n=i(319)}catch(t){}var d=c;d||"undefined"!=typeof window||(d=n),t.exports=r,h(r,o),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e={agent:this.agent,perMessageDeflate:this.perMessageDeflate};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(e.headers=this.extraHeaders),this.localAddress&&(e.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new d(t):new d(t,void 0,e)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},r.prototype.write=function(t){function i(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var n=t.length,o=0,s=n;o<s;o++)!function(t){a.encodePacket(t,r.supportsBinary,function(o){if(!r.usingBrowserWebSocket){var a={};if(t.options&&(a.compress=t.options.compress),r.perMessageDeflate){("string"==typeof o?e.Buffer.byteLength(o):o.length)<r.perMessageDeflate.threshold&&(a.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(o):r.ws.send(o,a)}catch(t){l("websocket closed before onclose event")}--n||i()})}(t[o])},r.prototype.onClose=function(){o.prototype.onClose.call(this)},r.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",i="";return this.port&&("wss"===e&&443!==Number(this.port)||"ws"===e&&80!==Number(this.port))&&(i=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),t=s.encode(t),t.length&&(t="?"+t),e+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+i+this.path+t},r.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===r.prototype.name)}}).call(e,i(3))},function(t,e){t.exports=Object.keys||function(t){var e=[],i=Object.prototype.hasOwnProperty;for(var r in t)i.call(t,r)&&e.push(r);return e}},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,i){(function(t,r){var n;(function(){function o(t,e){function i(t){if(i[t]!==g)return i[t];var o;if("bug-string-char-index"==t)o="a"!="a"[0];else if("json"==t)o=i("json-stringify")&&i("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var u=e.stringify,l="function"==typeof u&&_;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===u(0)&&"0"===u(new r)&&'""'==u(new n)&&u(y)===g&&u(g)===g&&u()===g&&"1"===u(a)&&"[1]"==u([a])&&"[null]"==u([g])&&"null"==u(null)&&"[null,null,null]"==u([g,y,null])&&u({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===u(null,a)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new h(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new h(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new h(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new h(-1))}catch(t){l=!1}}o=l}if("json-parse"==t){var c=e.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){a=c(s);var d=5==a.a.length&&1===a.a[0];if(d){try{d=!c('"\t"')}catch(t){}if(d)try{d=1!==c("01")}catch(t){}if(d)try{d=1!==c("1.")}catch(t){}}}}catch(t){d=!1}o=d}}return i[t]=!!o}t||(t=u.Object()),e||(e=u.Object());var r=t.Number||u.Number,n=t.String||u.String,a=t.Object||u.Object,h=t.Date||u.Date,l=t.SyntaxError||u.SyntaxError,c=t.TypeError||u.TypeError,d=t.Math||u.Math,f=t.JSON||u.JSON;"object"==typeof f&&f&&(e.stringify=f.stringify,e.parse=f.parse);var p,m,g,v=a.prototype,y=v.toString,_=new h(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(t){}if(!i("json")){var T=i("bug-string-char-index");if(!_)var b=d.floor,E=[0,31,59,90,120,151,181,212,243,273,304,334],w=function(t,e){return E[e]+365*(t-1970)+b((t-1969+(e=+(e>1)))/4)-b((t-1901+e)/100)+b((t-1601+e)/400)};if((p=v.hasOwnProperty)||(p=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=y?p=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,p=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,p.call(this,t)}),m=function(t,e){var i,r,n,o=0;(i=function(){this.valueOf=0}).prototype.valueOf=0,r=new i;for(n in r)p.call(r,n)&&o++;return i=r=null,o?m=2==o?function(t,e){var i,r={},n="[object Function]"==y.call(t);for(i in t)n&&"prototype"==i||p.call(r,i)||!(r[i]=1)||!p.call(t,i)||e(i)}:function(t,e){var i,r,n="[object Function]"==y.call(t);for(i in t)n&&"prototype"==i||!p.call(t,i)||(r="constructor"===i)||e(i);(r||p.call(t,i="constructor"))&&e(i)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(t,e){var i,n,o="[object Function]"==y.call(t),a=!o&&"function"!=typeof t.constructor&&s[typeof t.hasOwnProperty]&&t.hasOwnProperty||p;for(i in t)o&&"prototype"==i||!a.call(t,i)||e(i);for(n=r.length;i=r[--n];a.call(t,i)&&e(i));}),m(t,e)},!i("json-stringify")){var x={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},S=function(t,e){return("000000"+(e||0)).slice(-t)},A=function(t){for(var e='"',i=0,r=t.length,n=!T||r>10,o=n&&(T?t.split(""):t);i<r;i++){var a=t.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=x[a];break;default:if(a<32){e+="\\u00"+S(2,a.toString(16));break}e+=n?o[i]:t.charAt(i)}}return e+'"'},I=function(t,e,i,r,n,o,a){var s,h,u,l,d,f,v,_,T,E,x,O,R,C,P,M;try{s=e[t]}catch(t){}if("object"==typeof s&&s)if("[object Date]"!=(h=y.call(s))||p.call(s,"toJSON"))"function"==typeof s.toJSON&&("[object Number]"!=h&&"[object String]"!=h&&"[object Array]"!=h||p.call(s,"toJSON"))&&(s=s.toJSON(t));else if(s>-1/0&&s<1/0){if(w){for(d=b(s/864e5),u=b(d/365.2425)+1970-1;w(u+1,0)<=d;u++);for(l=b((d-w(u,0))/30.42);w(u,l+1)<=d;l++);d=1+d-w(u,l),f=(s%864e5+864e5)%864e5,v=b(f/36e5)%24,_=b(f/6e4)%60,T=b(f/1e3)%60,E=f%1e3}else u=s.getUTCFullYear(),l=s.getUTCMonth(),d=s.getUTCDate(),v=s.getUTCHours(),_=s.getUTCMinutes(),T=s.getUTCSeconds(),E=s.getUTCMilliseconds();s=(u<=0||u>=1e4?(u<0?"-":"+")+S(6,u<0?-u:u):S(4,u))+"-"+S(2,l+1)+"-"+S(2,d)+"T"+S(2,v)+":"+S(2,_)+":"+S(2,T)+"."+S(3,E)+"Z"}else s=null;if(i&&(s=i.call(e,t,s)),null===s)return"null";if("[object Boolean]"==(h=y.call(s)))return""+s;if("[object Number]"==h)return s>-1/0&&s<1/0?""+s:"null";if("[object String]"==h)return A(""+s);if("object"==typeof s){for(C=a.length;C--;)if(a[C]===s)throw c();if(a.push(s),x=[],P=o,o+=n,"[object Array]"==h){for(R=0,C=s.length;R<C;R++)O=I(R,s,i,r,n,o,a),x.push(O===g?"null":O);M=x.length?n?"[\n"+o+x.join(",\n"+o)+"\n"+P+"]":"["+x.join(",")+"]":"[]"}else m(r||s,function(t){var e=I(t,s,i,r,n,o,a);e!==g&&x.push(A(t)+":"+(n?" ":"")+e)}),M=x.length?n?"{\n"+o+x.join(",\n"+o)+"\n"+P+"}":"{"+x.join(",")+"}":"{}";return a.pop(),M}};e.stringify=function(t,e,i){var r,n,o,a;if(s[typeof e]&&e)if("[object Function]"==(a=y.call(e)))n=e;else if("[object Array]"==a){o={};for(var h,u=0,l=e.length;u<l;h=e[u++],("[object String]"==(a=y.call(h))||"[object Number]"==a)&&(o[h]=1));}if(i)if("[object Number]"==(a=y.call(i))){if((i-=i%1)>0)for(r="",i>10&&(i=10);r.length<i;r+=" ");}else"[object String]"==a&&(r=i.length<=10?i:i.slice(0,10));return I("",(h={},h[""]=t,h),n,o,r,"",[])}}if(!i("json-parse")){var O,R,C=n.fromCharCode,P={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw O=R=null,l()},D=function(){for(var t,e,i,r,n,o=R,a=o.length;O<a;)switch(n=o.charCodeAt(O)){case 9:case 10:case 13:case 32:O++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=T?o.charAt(O):o[O],O++,t;case 34:for(t="@",O++;O<a;)if((n=o.charCodeAt(O))<32)M();else if(92==n)switch(n=o.charCodeAt(++O)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=P[n],O++;break;case 117:for(e=++O,i=O+4;O<i;O++)(n=o.charCodeAt(O))>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70||M();t+=C("0x"+o.slice(e,O));break;default:M()}else{if(34==n)break;for(n=o.charCodeAt(O),e=O;n>=32&&92!=n&&34!=n;)n=o.charCodeAt(++O);t+=o.slice(e,O)}if(34==o.charCodeAt(O))return O++,t;M();default:if(e=O,45==n&&(r=!0,n=o.charCodeAt(++O)),n>=48&&n<=57){for(48==n&&(n=o.charCodeAt(O+1))>=48&&n<=57&&M(),r=!1;O<a&&(n=o.charCodeAt(O))>=48&&n<=57;O++);if(46==o.charCodeAt(O)){for(i=++O;i<a&&(n=o.charCodeAt(i))>=48&&n<=57;i++);i==O&&M(),O=i}if(101==(n=o.charCodeAt(O))||69==n){for(n=o.charCodeAt(++O),43!=n&&45!=n||O++,i=O;i<a&&(n=o.charCodeAt(i))>=48&&n<=57;i++);i==O&&M(),O=i}return+o.slice(e,O)}if(r&&M(),"true"==o.slice(O,O+4))return O+=4,!0;if("false"==o.slice(O,O+5))return O+=5,!1;if("null"==o.slice(O,O+4))return O+=4,null;M()}return"$"},k=function(t){var e,i;if("$"==t&&M(),"string"==typeof t){if("@"==(T?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=D());i||(i=!0))i&&(","==t?"]"==(t=D())&&M():M()),","==t&&M(),e.push(k(t));return e}if("{"==t){for(e={};"}"!=(t=D());i||(i=!0))i&&(","==t?"}"==(t=D())&&M():M()),","!=t&&"string"==typeof t&&"@"==(T?t.charAt(0):t[0])&&":"==D()||M(),e[t.slice(1)]=k(D());return e}M()}return t},N=function(t,e,i){var r=G(t,e,i);r===g?delete t[e]:t[e]=r},G=function(t,e,i){var r,n=t[e];if("object"==typeof n&&n)if("[object Array]"==y.call(n))for(r=n.length;r--;)N(n,r,i);else m(n,function(t){N(n,t,i)});return i.call(t,e,n)};e.parse=function(t,e){var i,r;return O=0,R=""+t,i=k(D()),"$"!=D()&&M(),O=R=null,e&&"[object Function]"==y.call(e)?G((r={},r[""]=i,r),"",e):i}}}return e.runInContext=o,e}var a=i(317),s={function:!0,object:!0},h=s[typeof e]&&e&&!e.nodeType&&e,u=s[typeof window]&&window||this,l=h&&s[typeof t]&&t&&!t.nodeType&&"object"==typeof r&&r;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(u=l),h&&!a)o(u,h);else{var c=u.JSON,d=u.JSON3,f=!1,p=o(u,u.JSON3={noConflict:function(){return f||(f=!0,u.JSON=c,u.JSON3=d,c=d=null),p}});u.JSON={parse:p.parse,stringify:p.stringify}}a&&void 0!==(n=function(){return p}.call(e,i,e,t))&&(t.exports=n)}).call(this)}).call(e,i(64)(t),i(3))},function(t,e){function i(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var i=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"weeks":case"week":case"w":return i*l;case"days":case"day":case"d":return i*u;case"hours":case"hour":case"hrs":case"hr":case"h":return i*h;case"minutes":case"minute":case"mins":case"min":case"m":return i*s;case"seconds":case"second":case"secs":case"sec":case"s":return i*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function r(t){var e=Math.abs(t);return e>=u?Math.round(t/u)+"d":e>=h?Math.round(t/h)+"h":e>=s?Math.round(t/s)+"m":e>=a?Math.round(t/a)+"s":t+"ms"}function n(t){var e=Math.abs(t);return e>=u?o(t,e,u,"day"):e>=h?o(t,e,h,"hour"):e>=s?o(t,e,s,"minute"):e>=a?o(t,e,a,"second"):t+" ms"}function o(t,e,i,r){var n=e>=1.5*i;return Math.round(t/i)+" "+r+(n?"s":"")}var a=1e3,s=60*a,h=60*s,u=24*h,l=7*u,c=365.25*u;t.exports=function(t,e){e=e||{};var o=typeof t;if("string"===o&&t.length>0)return i(t);if("number"===o&&!1===isNaN(t))return e.long?n(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,i){(function(t,r){var n;!function(o){function a(t){throw new RangeError(M[t])}function s(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function h(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),t=t.replace(P,"."),r+s(t.split("."),e).join(".")}function u(t){for(var e,i,r=[],n=0,o=t.length;n<o;)e=t.charCodeAt(n++),e>=55296&&e<=56319&&n<o?(i=t.charCodeAt(n++),56320==(64512&i)?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--)):r.push(e);return r}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=N(t>>>10&1023|55296),t=56320|1023&t),e+=N(t)}).join("")}function c(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:b}function d(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function f(t,e,i){var r=0;for(t=i?k(t/S):t>>1,t+=k(t/e);t>D*w>>1;r+=b)t=k(t/D);return k(r+(D+1)*t/(t+x))}function p(t){var e,i,r,n,o,s,h,u,d,p,m=[],g=t.length,v=0,y=I,_=A;for(i=t.lastIndexOf(O),i<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&a("not-basic"),m.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<g;){for(o=v,s=1,h=b;n>=g&&a("invalid-input"),u=c(t.charCodeAt(n++)),(u>=b||u>k((T-v)/s))&&a("overflow"),v+=u*s,d=h<=_?E:h>=_+w?w:h-_,!(u<d);h+=b)p=b-d,s>k(T/p)&&a("overflow"),s*=p;e=m.length+1,_=f(v-o,e,0==o),k(v/e)>T-y&&a("overflow"),y+=k(v/e),v%=e,m.splice(v++,0,y)}return l(m)}function m(t){var e,i,r,n,o,s,h,l,c,p,m,g,v,y,_,x=[];for(t=u(t),g=t.length,e=I,i=0,o=A,s=0;s<g;++s)(m=t[s])<128&&x.push(N(m));for(r=n=x.length,n&&x.push(O);r<g;){for(h=T,s=0;s<g;++s)(m=t[s])>=e&&m<h&&(h=m);for(v=r+1,h-e>k((T-i)/v)&&a("overflow"),i+=(h-e)*v,e=h,s=0;s<g;++s)if(m=t[s],m<e&&++i>T&&a("overflow"),m==e){for(l=i,c=b;p=c<=o?E:c>=o+w?w:c-o,!(l<p);c+=b)_=l-p,y=b-p,x.push(N(d(p+_%y,0))),l=k(_/y);x.push(N(d(l,0))),o=f(i,v,r==n),i=0,++r}++i,++e}return x.join("")}function g(t){return h(t,function(t){return R.test(t)?p(t.slice(4).toLowerCase()):t})}function v(t){return h(t,function(t){return C.test(t)?"xn--"+m(t):t})}var y=("object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType,"object"==typeof r&&r);var _,T=2147483647,b=36,E=1,w=26,x=38,S=700,A=72,I=128,O="-",R=/^xn--/,C=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=b-E,k=Math.floor,N=String.fromCharCode;_={version:"1.4.1",ucs2:{decode:u,encode:l},decode:p,encode:m,toASCII:v,toUnicode:g},void 0!==(n=function(){return _}.call(e,i,e,t))&&(t.exports=n)}()}).call(e,i(64)(t),i(3))},function(t,e,i){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,s,h=r(t),u=1;u<arguments.length;u++){i=Object(arguments[u]);for(var l in i)o.call(i,l)&&(h[l]=i[l]);if(n){s=n(i);for(var c=0;c<s.length;c++)a.call(i,s[c])&&(h[s[c]]=i[s[c]])}}return h}},function(t,e,i){(function(e){var i=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,n=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;t.exports=function(t){return"string"==typeof t&&t?(t=t.replace(a,"").replace(s,""),e.JSON&&JSON.parse?JSON.parse(t):i.test(t.replace(r,"@").replace(n,"]").replace(o,""))?new Function("return "+t)():void 0):null}}).call(e,i(3))},function(t,e){var i=new ArrayBuffer(0),r=function(t,e,r,n){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=n||t.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0};r.prototype.upload=function(t,e,i){i||this.bind();var r=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?r.bufferSubData(this.type,e,t):r.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,i){return new r(t,t.ARRAY_BUFFER,e,i)},r.createIndexBuffer=function(t,e,i){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,i)},r.create=function(t,e,i,n){return new r(t,e,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=r},function(t,e,i){var r=i(82),n=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};n.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new r(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},n.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},n.prototype.clear=function(t,e,i,r){this.bind();var n=this.gl;n.clearColor(t,e,i,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},n.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},n.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},n.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},n.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},n.createRGBA=function(t,e,i,o){var a=r.fromData(t,null,e,i);a.enableNearestScaling(),a.enableWrapClamp();var s=new n(t,e,i);return s.enableTexture(a),s.unbind(),s},n.createFloat32=function(t,e,i,o){var a=new r.fromData(t,o,e,i);a.enableNearestScaling(),a.enableWrapClamp();var s=new n(t,e,i);return s.enableTexture(a),s.unbind(),s},t.exports=n},function(t,e,i){var r=i(84),n=i(86),o=i(87),a=i(90),s=i(88),h=function(t,e,i,h,u){this.gl=t,h&&(e=a(e,h),i=a(i,h)),this.program=r(t,e,i,u),this.attributes=n(t,this.program),this.uniformData=o(t,this.program),this.uniforms=s(t,this.uniformData)};h.prototype.bind=function(){return this.gl.useProgram(this.program),this},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=h},function(t,e,i){function r(t,e){if(this.nativeVaoExtension=null,r.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var n=i(83);r.prototype.constructor=r,t.exports=r,r.FORCE_NATIVE=!1,r.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},r.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},r.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var r=this.attributes[i];e!==r.buffer&&(r.buffer.bind(),e=r.buffer),t.vertexAttribPointer(r.attribute.location,r.attribute.size,r.type||t.FLOAT,r.normalized||!1,r.stride||0,r.start||0)}return n(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},r.prototype.addAttribute=function(t,e,i,r,n,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:r||!1,stride:n||0,start:o||0}),this.dirty=!0,this},r.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},r.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},r.prototype.draw=function(t,e,i){var r=this.gl;return this.indexBuffer?r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(i||0)):r.drawArrays(t,i,e||this.getSize()),this},r.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},r.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e){var i=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i};t.exports=i},function(t,e,i){t.exports={compileProgram:i(84),defaultValue:i(85),extractAttributes:i(86),extractUniforms:i(87),generateUniformAccessObject:i(88),setPrecision:i(90),mapSize:i(89),mapType:i(50)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),s=i(48),h=r(s),u=i(91),l=r(u);a.utils.mixins.delayMixin(a.DisplayObject.prototype,l.default);var c=100,d=0,f=0,p=2,m=function(){function t(e){n(this,t),!h.default.tablet&&!h.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=c+"px",i.style.height=c+"px",i.style.position="absolute",i.style.top=d+"px",i.style.left=f+"px",i.style.zIndex=p,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,r=this.div;r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o.renderId!==this.renderId)o._accessibleActive=!1,a.utils.removeItems(this.children,n,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{r=o._accessibleDiv;var s=o.hitArea,h=o.worldTransform;o.hitArea?(r.style.left=(h.tx+s.x*h.a)*e+"px",r.style.top=(h.ty+s.y*h.d)*i+"px",r.style.width=s.width*h.a*e+"px",r.style.height=s.height*h.d*i+"px"):(s=o.getBounds(),this.capHitArea(s),r.style.left=s.x*e+"px",r.style.top=s.y*i+"px",r.style.width=s.width*e+"px",r.style.height=s.height*i+"px")}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=c+"px",e.style.height=c+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=p,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(){this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e.default=m,a.WebGLRenderer.registerPlugin("accessibility",m),a.CanvasRenderer.registerPlugin("accessibility",m)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(91);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return r(n).default}});var o=i(220);Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return r(o).default}})},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(24),h=r(s),u=i(58),l=r(u),c=i(12),d=r(c),f=i(97),p=r(f),m=i(56),g=r(m),v=i(5),y=i(2),_=i(0),T=i(51),b=r(T),E=i(224),w=r(E),x=i(25),S=r(x),A=void 0,I=new v.Matrix,O=new v.Point,R=new Float32Array(4),C=new Float32Array(4),P=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n(this,e);var r=o(this,t.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=i,r.lineColor=0,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=_.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new b.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r}return a(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.currentPath)if(this.currentPath.shape.points.length){var r=new v.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var i=new v.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,i,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n=this.currentPath.shape.points,o=0,a=0;0===n.length&&this.moveTo(0,0);for(var s=n[n.length-2],h=n[n.length-1],u=1;u<=20;++u){var l=u/20;o=s+(t-s)*l,a=h+(e-h)*l,n.push(o+(t+(i-t)*l-o)*l,a+(e+(r-e)*l-a)*l)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,i,r,n,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,s=a[a.length-2],h=a[a.length-1];return a.length-=2,(0,w.default)(s,h,t,e,i,r,n,o,a),this.dirty++,this},e.prototype.arcTo=function(t,e,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],h=s-e,u=a-t,l=r-e,c=i-t,d=Math.abs(h*c-u*l);if(d<1e-8||0===n)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var f=h*h+u*u,p=l*l+c*c,m=h*l+u*c,g=n*Math.sqrt(f)/d,v=n*Math.sqrt(p)/d,y=g*m/f,_=v*m/p,T=g*c+v*u,b=g*l+v*h,E=u*(v+y),w=h*(v+y),x=c*(g+_),S=l*(g+_),A=Math.atan2(w-b,E-T),I=Math.atan2(S-b,x-T);this.arc(T+t,b+e,n,A,I,u*l>c*h)}return this.dirty++,this},e.prototype.arc=function(t,e,i,r,n){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===n)return this;!o&&n<=r?n+=_.PI_2:o&&r<=n&&(r+=_.PI_2);var a=n-r,s=40*Math.ceil(Math.abs(a)/_.PI_2);if(0===a)return this;var h=t+Math.cos(r)*i,u=e+Math.sin(r)*i,l=this.currentPath?this.currentPath.shape.points:null;l?l[l.length-2]===h&&l[l.length-1]===u||l.push(h,u):(this.moveTo(h,u),l=this.currentPath.shape.points);for(var c=a/(2*s),d=2*c,f=Math.cos(c),p=Math.sin(c),m=s-1,g=m%1/m,v=0;v<=m;++v){var y=v+g*v,T=c+r+d*y,b=Math.cos(T),E=-Math.sin(T);l.push((f*b+p*E)*i+t,(f*-E+p*b)*i+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new v.Rectangle(t,e,i,r)),this},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new v.RoundedRectangle(t,e,i,r,n)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new v.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new v.Ellipse(t,e,i,r)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof v.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var n=new v.Polygon(e);return n.closed=i,this.drawShape(n),this},e.prototype.drawStar=function(t,e,i,r,n){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n=n||r/2;for(var a=-1*Math.PI/2+o,s=2*i,h=_.PI_2/s,u=[],l=0;l<s;l++){var c=l%2?n:r,d=l*h+a;u.push(t+c*Math.cos(d),e+c*Math.sin(d))}return this.drawPolygon(u)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new g.default(new d.default(d.default.WHITE)));var i=this._spriteRect;if(16777215===this.tint)i.tint=this.graphicsData[0].fillColor;else{var r=R,n=C;(0,y.hex2rgb)(this.graphicsData[0].fillColor,r),(0,y.hex2rgb)(this.tint,n),r[0]*=n[0],r[1]*=n[1],r[2]*=n[2],i.tint=(0,y.rgb2hex)(r)}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,O);for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fill&&(r.shape&&r.shape.contains(O.x,O.y))){if(r.holes)for(var n=0;n<r.holes.length;n++){var o=r.holes[n];if(o.contains(O.x,O.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,r=-1/0;if(this.graphicsData.length)for(var n=0,o=0,a=0,s=0,h=0,u=0;u<this.graphicsData.length;u++){var l=this.graphicsData[u],c=l.type,d=l.lineWidth;if(n=l.shape,c===_.SHAPES.RECT||c===_.SHAPES.RREC)o=n.x-d/2,a=n.y-d/2,s=n.width+d,h=n.height+d,t=o<t?o:t,e=o+s>e?o+s:e,i=a<i?a:i,r=a+h>r?a+h:r;else if(c===_.SHAPES.CIRC)o=n.x,a=n.y,s=n.radius+d/2,h=n.radius+d/2,t=o-s<t?o-s:t,e=o+s>e?o+s:e,i=a-h<i?a-h:i,r=a+h>r?a+h:r;else if(c===_.SHAPES.ELIP)o=n.x,a=n.y,s=n.width+d/2,h=n.height+d/2,t=o-s<t?o-s:t,e=o+s>e?o+s:e,i=a-h<i?a-h:i,r=a+h>r?a+h:r;else for(var f=n.points,p=0,m=0,g=0,v=0,y=0,T=0,b=0,E=0,w=0;w+2<f.length;w+=2)o=f[w],a=f[w+1],p=f[w+2],m=f[w+3],g=Math.abs(p-o),v=Math.abs(m-a),h=d,(s=Math.sqrt(g*g+v*v))<1e-9||(y=(h/s*v+g)/2,T=(h/s*g+v)/2,b=(p+o)/2,E=(m+a)/2,t=b-y<t?b-y:t,e=b+y>e?b+y:e,i=E-T<i?E-T:i,r=E+T>r?E+T:r)}else t=0,e=0,i=0,r=0;var x=this.boundsPadding;this._localBounds.minX=t-x,this._localBounds.maxX=e+x,this._localBounds.minY=i-x,this._localBounds.maxY=r+x},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new p.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===_.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),r=l.default.create(i.width,i.height,t,e);A||(A=new S.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(I),I.invert(),I.tx-=i.x,I.ty-=i.y,A.render(this,r,!0,I);var n=d.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,t,"graphics");return n.baseTexture.resolution=e,n.baseTexture.update(),n},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var r in this._webgl)for(var n=0;n<this._webgl[r].data.length;++n)this._webgl[r].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(h.default);e.default=P,P._SPRITE_TEXTURE=null},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(25),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i(0),s=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldAlpha,n=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),i.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var h=t.graphicsData[s],u=h.shape,l=h._fillTint,c=h._lineTint;if(i.lineWidth=h.lineWidth,h.type===a.SHAPES.POLY){i.beginPath(),this.renderPolygon(u.points,u.closed,i);for(var d=0;d<h.holes.length;d++)this.renderPolygon(h.holes[d].points,!0,i);h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===a.SHAPES.RECT)(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fillRect(u.x,u.y,u.width,u.height)),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(u.x,u.y,u.width,u.height));else if(h.type===a.SHAPES.CIRC)i.beginPath(),i.arc(u.x,u.y,u.radius,0,2*Math.PI),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(h.type===a.SHAPES.ELIP){var f=2*u.width,p=2*u.height,m=u.x-f/2,g=u.y-p/2;i.beginPath();var v=f/2*.5522848,y=p/2*.5522848,_=m+f,T=g+p,b=m+f/2,E=g+p/2;i.moveTo(m,E),i.bezierCurveTo(m,E-y,b-v,g,b,g),i.bezierCurveTo(b+v,g,_,E-y,_,E),i.bezierCurveTo(_,E+y,b+v,T,b,T),i.bezierCurveTo(b-v,T,m,E+y,m,E),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===a.SHAPES.RREC){var w=u.x,x=u.y,S=u.width,A=u.height,I=u.radius,O=Math.min(S,A)/2|0;I=I>O?O:I,i.beginPath(),i.moveTo(w,x+I),i.lineTo(w,x+A-I),i.quadraticCurveTo(w,x+A,w+I,x+A),i.lineTo(w+S-I,x+A),i.quadraticCurveTo(w+S,x+A,w+S,x+A-I),i.lineTo(w+S,x+I),i.quadraticCurveTo(w+S,x,w+S-I,x),i.lineTo(w+I,x),i.quadraticCurveTo(w,x,w,x+I),i.closePath(),(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,r=(255&t.tint)/255,n=0;n<t.graphicsData.length;++n){var o=t.graphicsData[n],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*r*255,o._lineTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*r*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;++r)i.lineTo(t[2*r],t[2*r+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=s,o.default.registerPlugin("graphics",s)},function(t,e,i){"use strict";function r(t,e,i,r,n,o,a,s){var h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=0,l=0,c=0,d=0,f=0;h.push(t,e);for(var p=1,m=0;p<=20;++p)m=p/20,u=1-m,l=u*u,c=l*u,d=m*m,f=d*m,h.push(c*t+3*l*m*i+3*u*d*n+f*a,c*e+3*l*m*r+3*u*d*o+f*s);return h}e.__esModule=!0,e.default=r},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(2),h=i(0),u=i(34),l=r(u),c=i(33),d=r(c),f=i(226),p=r(f),m=i(227),g=r(m),v=i(229),y=r(v),_=i(230),T=r(_),b=i(231),E=r(b),w=i(228),x=r(w),S=function(t){function e(i){n(this,e);var r=o(this,t.call(this,i));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=i.gl,r.CONTEXT_UID=0,r}return a(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new g.default(this.gl)},e.prototype.destroy=function(){l.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,r=void 0,n=t._webGL[this.CONTEXT_UID];n&&t.dirty===n.dirty||(this.updateGraphics(t),n=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var a=0,h=n.data.length;a<h;a++){r=n.data[a];var u=r.shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,s.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(r.vao),r.nativeLines?i.drawArrays(i.LINES,0,r.points.length/6):r.vao.draw(i.TRIANGLE_STRIP,r.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var r=0;r<i.data.length;r++)this.graphicsDataPool.push(i.data[r]);i.data.length=0,i.lastIndex=0}for(var n=void 0,o=void 0,a=i.lastIndex;a<t.graphicsData.length;a++){var s=t.graphicsData[a];n=this.getWebGLData(i,0),s.nativeLines&&s.lineWidth&&(o=this.getWebGLData(i,0,!0),i.lastIndex++),s.type===h.SHAPES.POLY&&(0,y.default)(s,n,o),s.type===h.SHAPES.RECT?(0,T.default)(s,n,o):s.type===h.SHAPES.CIRC||s.type===h.SHAPES.ELIP?(0,x.default)(s,n,o):s.type===h.SHAPES.RREC&&(0,E.default)(s,n,o),i.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<i.data.length;u++)n=i.data[u],n.dirty&&n.upload()},e.prototype.getWebGLData=function(t,e,i){var r=t.data[t.data.length-1];return(!r||r.nativeLines!==i||r.points.length>32e4)&&(r=this.graphicsDataPool.pop()||new p.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),r.nativeLines=i,r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(l.default);e.default=S,d.default.registerPlugin("graphics",S)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(6),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=function(){function t(e,i,n){r(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new o.default.VertexArrayObject(e,n).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=a},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(23),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=function(t){function e(i){return r(this,e),n(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return o(e,t),e}(s.default);e.default=h},function(t,e,i){"use strict";function r(t,e,i){var r=t.shape,n=r.x,h=r.y,u=void 0,l=void 0;if(t.type===a.SHAPES.CIRC?(u=r.radius,l=r.radius):(u=r.width,l=r.height),0!==u&&0!==l){var c=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),d=2*Math.PI/c;if(t.fill){var f=(0,s.hex2rgb)(t.fillColor),p=t.fillAlpha,m=f[0]*p,g=f[1]*p,v=f[2]*p,y=e.points,_=e.indices,T=y.length/6;_.push(T);for(var b=0;b<c+1;b++)y.push(n,h,m,g,v,p),y.push(n+Math.sin(d*b)*u,h+Math.cos(d*b)*l,m,g,v,p),_.push(T++,T++);_.push(T-1)}if(t.lineWidth){var E=t.points;t.points=[];for(var w=0;w<c+1;w++)t.points.push(n+Math.sin(d*w)*u,h+Math.cos(d*w)*l);(0,o.default)(t,e,i),t.points=E}}}e.__esModule=!0,e.default=r;var n=i(32),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i(0),s=i(2)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e,i){t.points=t.shape.points.slice();var r=t.points;if(t.fill&&r.length>=6){for(var n=[],o=t.holes,h=0;h<o.length;h++){var l=o[h];n.push(r.length/2),r=r.concat(l.points)}var c=e.points,d=e.indices,f=r.length/2,p=(0,s.hex2rgb)(t.fillColor),m=t.fillAlpha,g=p[0]*m,v=p[1]*m,y=p[2]*m,_=(0,u.default)(r,n,2);if(!_)return;for(var T=c.length/6,b=0;b<_.length;b+=3)d.push(_[b]+T),d.push(_[b]+T),d.push(_[b+1]+T),d.push(_[b+2]+T),d.push(_[b+2]+T);for(var E=0;E<f;E++)c.push(r[2*E],r[2*E+1],g,v,y,m)}t.lineWidth>0&&(0,a.default)(t,e,i)}e.__esModule=!0,e.default=n;var o=i(32),a=r(o),s=i(2),h=i(45),u=r(h)},function(t,e,i){"use strict";function r(t,e,i){var r=t.shape,n=r.x,s=r.y,h=r.width,u=r.height;if(t.fill){var l=(0,a.hex2rgb)(t.fillColor),c=t.fillAlpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,m=e.points,g=e.indices,v=m.length/6;m.push(n,s),m.push(d,f,p,c),m.push(n+h,s),m.push(d,f,p,c),m.push(n,s+u),m.push(d,f,p,c),m.push(n+h,s+u),m.push(d,f,p,c),g.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var y=t.points;t.points=[n,s,n+h,s,n+h,s+u,n,s+u,n,s],(0,o.default)(t,e,i),t.points=y}}e.__esModule=!0,e.default=r;var n=i(32),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i(2)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e,i){var r=t.shape,n=r.x,o=r.y,s=r.width,u=r.height,d=r.radius,f=[];if(f.push(n,o+d),a(n,o+u-d,n,o+u,n+d,o+u,f),a(n+s-d,o+u,n+s,o+u,n+s,o+u-d,f),a(n+s,o+d,n+s,o,n+s-d,o,f),a(n+d,o,n,o,n,o+d+1e-10,f),t.fill){for(var p=(0,c.hex2rgb)(t.fillColor),m=t.fillAlpha,g=p[0]*m,v=p[1]*m,y=p[2]*m,_=e.points,T=e.indices,b=_.length/6,E=(0,h.default)(f,null,2),w=0,x=E.length;w<x;w+=3)T.push(E[w]+b),T.push(E[w]+b),T.push(E[w+1]+b),T.push(E[w+2]+b),T.push(E[w+2]+b);for(var S=0,A=f.length;S<A;S++)_.push(f[S],f[++S],g,v,y,m)}if(t.lineWidth){var I=t.points;t.points=f,(0,l.default)(t,e,i),t.points=I}}function o(t,e,i){return t+(e-t)*i}function a(t,e,i,r,n,a){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],h=s,u=0,l=0,c=0,d=0,f=0,p=0,m=0,g=0;m<=20;++m)g=m/20,u=o(t,i,g),l=o(e,r,g),c=o(i,n,g),d=o(r,a,g),f=o(u,c,g),p=o(l,d,g),h.push(f,p);return h}e.__esModule=!0,e.default=n;var s=i(45),h=r(s),u=i(32),l=r(u),c=i(2)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(55),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i(0),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t),this.x=e,this.y=i,this.radius=n,this.type=a.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return r*=r,n*=n,r+n<=i},t.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(55),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i(0),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=e,this.y=i,this.width=n,this.height=o,this.type=a.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return i*=i,r*=r,i+r<=1},t.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(54),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=i(0),s=function(){function t(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];if(r(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof o.default){for(var s=[],h=0,u=i.length;h<u;h++)s.push(i[h].x,i[h].y);i=s}this.closed=!0,this.points=i,this.type=a.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,o=r-1;n<r;o=n++){var a=this.points[2*n],s=this.points[2*n+1],h=this.points[2*o],u=this.points[2*o+1];s>e!=u>e&&t<(e-s)/(u-s)*(h-a)+a&&(i=!i)}return i},t}();e.default=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(0),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;r(this,t),this.x=e,this.y=i,this.width=o,this.height=a,this.radius=s,this.type=n.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),r=e-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=t-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(r=e-(this.y+this.height-this.radius),i*i+r*r<=n)return!0;if((i=t-(this.x+this.radius))*i+r*r<=n)return!0}return!1},t}();e.default=o},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(0),o=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,r=t.transform.worldTransform,n=e.resolution;e.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var r=0;r<i;r++){var o=t.graphicsData[r],a=o.shape;if(o.type===n.SHAPES.POLY){var s=a.points;e.moveTo(s[0],s[1]);for(var h=1;h<s.length/2;h++)e.lineTo(s[2*h],s[2*h+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===n.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(o.type===n.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(o.type===n.SHAPES.ELIP){var u=2*a.width,l=2*a.height,c=a.x-u/2,d=a.y-l/2,f=u/2*.5522848,p=l/2*.5522848,m=c+u,g=d+l,v=c+u/2,y=d+l/2;e.moveTo(c,y),e.bezierCurveTo(c,y-p,v-f,d,v,d),e.bezierCurveTo(v+f,d,m,y-p,m,y),e.bezierCurveTo(m,y+p,v+f,g,v,g),e.bezierCurveTo(v-f,g,c,y+p,c,y),e.closePath()}else if(o.type===n.SHAPES.RREC){var _=a.x,T=a.y,b=a.width,E=a.height,w=a.radius,x=Math.min(b,E)/2|0;w=w>x?x:w,e.moveTo(_,T+w),e.lineTo(_,T+E-w),e.quadraticCurveTo(_,T+E,_+w,T+E),e.lineTo(_+b-w,T+E),e.quadraticCurveTo(_+b,T+E,_+b,T+E-w),e.lineTo(_+b,T+w),e.quadraticCurveTo(_+b,T,_+b-w,T),e.lineTo(_+w,T),e.quadraticCurveTo(_,T,_,T+w),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();e.default=o},function(t,e,i){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over"),t[n.BLEND_MODES.NORMAL_NPM]=t[n.BLEND_MODES.NORMAL],t[n.BLEND_MODES.ADD_NPM]=t[n.BLEND_MODES.ADD],t[n.BLEND_MODES.SCREEN_NPM]=t[n.BLEND_MODES.SCREEN],t}e.__esModule=!0,e.default=r;var n=i(0),o=i(102),a=function(t){return t&&t.__esModule?t:{default:t}}(o)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(0),o=i(4),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=function(){function t(e){r(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=a.default.GC_MAX_IDLE,this.checkCountMax=a.default.GC_MAX_CHECK_COUNT,this.mode=a.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){for(var o=0,a=0;a<e.length;a++)null!==e[a]&&(e[o++]=e[a]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();e.default=s},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(6),o=i(0),a=i(35),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=i(2),u=function(){function t(e){r(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,r=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e){e=0;for(var h=0;h<a.length;++h)if(a[h]===t){e=h;break}}a[e]=t,i.activeTexture(i.TEXTURE0+e);var u=t._glTextures[this.renderer.CONTEXT_UID];if(u)r?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):u.upload(t.source);else{if(r){var l=new s.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);l.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=l,u=l.texture}else u=new n.GLTexture(this.gl,null,null,null,null),u.bind(e),u.premultiplyAlpha=!0,u.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=u,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&u.enableMipmap(),t.wrapMode===o.WRAP_MODES.CLAMP?u.enableWrapClamp():t.wrapMode===o.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),t.scaleMode===o.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded){var i=this.renderer.CONTEXT_UID,r=t._glTextures,n=t._glRenderTargets;if(r[i]&&(this.renderer.unbindTexture(t),r[i].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete r[i],!e)){var o=this._managedTextures.indexOf(t);-1!==o&&(0,h.removeItems)(this._managedTextures,o,1)}n&&n[i]&&(n[i].destroy(),delete n[i])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(247),o=function(t){return t&&t.__esModule?t:{default:t}}(n),a=function(){function t(e){r(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=a},function(t,e,i){"use strict";function r(t,e,i){var r=n(t),o=n(e);return Object.assign(r,o)}function n(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},r=void 0,n=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<n.length;o++){var a=n[o].trim();if(a.indexOf("uniform")>-1){var h=a.split(" "),u=h[1],l=h[2],c=1;l.indexOf("[")>-1&&(r=l.split(/\[|]/),l=r[0],c*=Number(r[1])),l.match(e)||(i[l]={value:s(u,c),name:l,type:u})}}return i}e.__esModule=!0,e.default=r;var o=i(6),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=a.default.shader.defaultValue},function(t,e,i){"use strict";function r(t,e,i){var r=t.identity();return r.translate(e.x/i.width,e.y/i.height),r.scale(i.width,i.height),r}function n(t,e,i){var r=t.identity();r.translate(e.x/i.width,e.y/i.height);var n=i.width/e.width,o=i.height/e.height;return r.scale(n,o),r}function o(t,e,i,r){var n=r._texture.orig,o=t.set(i.width,0,0,i.height,e.x,e.y),s=r.worldTransform.copy(a.Matrix.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/n.width,1/n.height),o.translate(r.anchor.x,r.anchor.y),o}e.__esModule=!0,e.calculateScreenSpaceMatrix=r,e.calculateNormalizedScreenSpaceMatrix=n,e.calculateSpriteMatrix=o;var a=i(5)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var s=i(26),h=r(s),u=i(35),l=r(u),c=i(105),d=r(c),f=i(5),p=i(23),m=r(p),g=i(242),v=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(g),y=i(44),_=r(y),T=function t(){a(this,t),this.renderTarget=null,this.sourceFrame=new f.Rectangle,this.destinationFrame=new f.Rectangle,this.filters=[],this.target=null,this.resolution=1},b=function(t){function e(i){a(this,e);var r=n(this,t.call(this,i));return r.gl=r.renderer.gl,r.quad=new d.default(r.gl,i.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r.renderer.on("prerender",r.onPrerender,r),r._screenWidth=i.view.width,r._screenHeight=i.view.height,r}return o(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var n=new T;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[n]},this.filterData=r}var o=r.stack[++r.index],a=r.stack[0].destinationFrame;o||(o=r.stack[r.index]=new T);var s=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===i.screen.width&&t.filterArea.height===i.screen.height,h=e[0].resolution,u=0|e[0].padding,l=s?i.screen:t.filterArea||t.getBounds(!0),c=o.sourceFrame,d=o.destinationFrame;c.x=(l.x*h|0)/h,c.y=(l.y*h|0)/h,c.width=(l.width*h|0)/h,c.height=(l.height*h|0)/h,s||(r.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(a),c.pad(u)),d.width=c.width,d.height=c.height;var f=this.getPotRenderTarget(i.gl,c.width,c.height,h);o.target=t,o.filters=e,o.resolution=h,o.renderTarget=f,f.setFrame(d,c),i.bindRenderTarget(f),f.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var r=i.filters;if(1===r.length)r[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var n=i.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);o.setFrame(i.destinationFrame,i.sourceFrame),o.clear();var a=0;for(a=0;a<r.length-1;++a){r[a].apply(this,n,o,!0,i);var s=n;n=o,o=s}r[a].apply(this,n,e.renderTarget,!1,i),this.freePotRenderTarget(n),this.freePotRenderTarget(o)}0===--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,r){var n=this.renderer,o=n.gl,a=t.glShaders[n.CONTEXT_UID];a||(t.glShaderKey?(a=this.shaderCache[t.glShaderKey])||(a=new m.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[n.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=a,this.managedFilters.push(t)):(a=t.glShaders[n.CONTEXT_UID]=new m.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),n.bindVao(null),this.quad.initVao(a)),n.bindVao(this.quad.vao),n.bindRenderTarget(i),r&&(o.disable(o.SCISSOR_TEST),n.clear(),o.enable(o.SCISSOR_TEST)),i===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(a);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(a,t),n.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,r=e.uniforms,n=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var a=t.uniforms.filterArea;a[0]=o.renderTarget.size.width,a[1]=o.renderTarget.size.height,a[2]=o.sourceFrame.x,a[3]=o.sourceFrame.y,t.uniforms.filterArea=a}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var s=t.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,s[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=s}for(var h in i){var u=i[h].type;if("sampler2d"===u&&0!==r[h]){if(r[h].baseTexture)t.uniforms[h]=this.renderer.bindTexture(r[h].baseTexture,n);else{t.uniforms[h]=n;var l=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],l.activeTexture(l.TEXTURE0+n),r[h].texture.bind()}n++}else if("mat3"===u)void 0!==r[h].a?t.uniforms[h]=r[h].toArray(!0):t.uniforms[h]=r[h];else if("vec2"===u)if(void 0!==r[h].x){var c=t.uniforms[h]||new Float32Array(2);c[0]=r[h].x,c[1]=r[h].y,t.uniforms[h]=c}else t.uniforms[h]=r[h];else"float"===u?t.uniforms.data[h].value!==i[h]&&(t.uniforms[h]=r[h]):t.uniforms[h]=r[h]}},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return r.setFrame(i.destinationFrame,i.sourceFrame),r},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return v.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return v.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return v.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,i=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var r=0;r<i.length;r++)t||i[r].glShaders[e.CONTEXT_UID].destroy(),delete i[r].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,r){var n="screen";e*=r,i*=r,e===this._screenWidth&&i===this._screenHeight||(e=_.default.nextPow2(e),i=_.default.nextPow2(i),n=(65535&e)<<16|65535&i),this.pool[n]||(this.pool[n]=[]);var o=this.pool[n].pop();if(!o){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new l.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=r,o.defaultFrame.width=o.size.width=e/r,o.defaultFrame.height=o.size.height=i/r,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,i=t.size.height*t.resolution,r="screen";e===this._screenWidth&&i===this._screenHeight||(r=(65535&e)<<16|65535&i),this.pool[r].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(h.default);e.default=b},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(26),h=r(s),u=i(104),l=r(u),c=function(t){function e(i){n(this,e);var r=o(this,t.call(this,i));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return a(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,r=Math.atan2(i.b,i.a);r=Math.round(r*(180/Math.PI)),r%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new l.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,r=e.getBounds();r.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(r.x*n,(i.root?i.size.height-r.y-r.height:r.y)*n,r.width*n,r.height*n),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(h.default);e.default=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(26),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=function(t){function e(i){r(this,e);var o=n(this,t.call(this,i));return o.stencilMaskStack=null,o}return o(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,i,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){s.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(s.default);e.default=h},function(t,e,i){"use strict";function r(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var r=document.createElement("canvas");r.width=1,r.height=1,e=a.default.createContext(r)}for(var o=e.createShader(e.FRAGMENT_SHADER);;){var h=s.replace(/%forloop%/gi,n(t));if(e.shaderSource(o,h),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function n(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}e.__esModule=!0,e.default=r;var o=i(6),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(t,e,i){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[n.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e}e.__esModule=!0,e.default=r;var n=i(0)},function(t,e,i){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[n.DRAW_MODES.POINTS]=t.POINTS,e[n.DRAW_MODES.LINES]=t.LINES,e[n.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[n.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[n.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[n.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[n.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}e.__esModule=!0,e.default=r;var n=i(0)},function(t,e,i){"use strict";function r(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}e.__esModule=!0,e.default=r},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(25),a=r(o),s=i(0),h=i(5),u=i(57),l=r(u),c=new h.Matrix,d=function(){function t(e){n(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,r=e._frame.width,n=e._frame.height,o=t.transform.worldTransform,a=0,u=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==d&&(i.context[i.smoothProperty]=d),e.trim?(a=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,u=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(a=(.5-t.anchor.x)*e.orig.width,u=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(c),o=c,h.GroupD8.matrixAppendRotationInv(o,e.rotate,a,u),a=0,u=0),a-=r/2,u-=n/2,i.roundPixels?(i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution|0,o.ty*i.resolution|0),a|=0,u|=0):i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution,o.ty*i.resolution);var f=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=l.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,r*f,n*f,a*i.resolution,u*i.resolution,r*i.resolution,n*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*f,e._frame.y*f,r*f,n*f,a*i.resolution,u*i.resolution,r*i.resolution,n*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=d,a.default.registerPlugin("sprite",d)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){r(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=n},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(34),h=r(s),u=i(33),l=r(u),c=i(60),d=r(c),f=i(253),p=r(f),m=i(246),g=r(m),v=i(251),y=r(v),_=i(4),T=r(_),b=i(2),E=i(6),w=r(E),x=i(44),S=r(x),A=0,I=0,O=function(t){function e(i){n(this,e);var r=o(this,t.call(this,i));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=T.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var a=1;a<=S.default.nextPow2(r.size);a*=2)r.buffers.push(new y.default(4*a*r.vertByteSize));r.indices=(0,d.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var s=0;s<r.size;s++)r.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),T.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,g.default)(this.MAX_TEXTURES,t)),this.shader=(0,p.default)(t,this.MAX_TEXTURES),this.indexBuffer=w.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var r=this.vertexBuffers[i]=w.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(r,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&n.addAttribute(r,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=S.default.nextPow2(this.currentIndex),r=S.default.log2(i),n=this.buffers[r],o=this.sprites,a=this.groups,s=n.float32View,h=n.uint32View,u=this.boundTextures,l=this.renderer.boundTextures,c=this.renderer.textureGC.count,d=0,f=void 0,p=void 0,m=1,g=0,v=a[0],y=void 0,_=void 0,E=b.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];v.textureCount=0,v.start=0,v.blend=E,A++;var x=void 0;for(x=0;x<e;++x){var O=l[x];O._enabled!==A?(u[x]=O,O._virtalBoundId=x,O._enabled=A):u[x]=this.renderer.emptyTextures[x]}for(A++,x=0;x<this.currentIndex;++x){var R=o[x];f=R._texture.baseTexture;var C=b.premultiplyBlendMode[Number(f.premultipliedAlpha)][R.blendMode];if(E!==C&&(E=C,p=null,g=e,A++),p!==f&&(p=f,f._enabled!==A)){if(g===e&&(A++,v.size=x-v.start,g=0,v=a[m++],v.blend=E,v.textureCount=0,v.start=x),f.touched=c,-1===f._virtalBoundId)for(var P=0;P<e;++P){var M=(P+I)%e,D=u[M];if(D._enabled!==A){I++,D._virtalBoundId=-1,f._virtalBoundId=M,u[M]=f;break}}f._enabled=A,v.textureCount++,v.ids[g]=f._virtalBoundId,v.textures[g++]=f}if(y=R.vertexData,_=R._texture._uvs.uvsUint32,this.renderer.roundPixels){var k=this.renderer.resolution;s[d]=(y[0]*k|0)/k,s[d+1]=(y[1]*k|0)/k,s[d+5]=(y[2]*k|0)/k,s[d+6]=(y[3]*k|0)/k,s[d+10]=(y[4]*k|0)/k,s[d+11]=(y[5]*k|0)/k,s[d+15]=(y[6]*k|0)/k,s[d+16]=(y[7]*k|0)/k}else s[d]=y[0],s[d+1]=y[1],s[d+5]=y[2],s[d+6]=y[3],s[d+10]=y[4],s[d+11]=y[5],s[d+15]=y[6],s[d+16]=y[7];h[d+2]=_[0],h[d+7]=_[1],h[d+12]=_[2],h[d+17]=_[3];var N=Math.min(R.worldAlpha,1),G=N<1&&f.premultipliedAlpha?(0,b.premultiplyTint)(R._tintRGB,N):R._tintRGB+(255*N<<24);h[d+3]=h[d+8]=h[d+13]=h[d+18]=G,s[d+4]=s[d+9]=s[d+14]=s[d+19]=f._virtalBoundId,d+=20}if(v.size=x-v.start,T.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var L=this.shader.attributes,F=this.vertexBuffers[this.vertexCount]=w.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),U=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(F,L.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(F,L.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(F,L.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);L.aTextureId&&U.addAttribute(F,L.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=U}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(x=0;x<e;++x)l[x]._virtalBoundId=-1;for(x=0;x<m;++x){for(var B=a[x],j=B.textureCount,X=0;X<j;X++)p=B.textures[X],l[B.ids[X]]!==p&&this.renderer.bindTexture(p,B.ids[X],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(B.blend),t.drawElements(t.TRIANGLES,6*B.size,t.UNSIGNED_SHORT,6*B.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),T.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(h.default);e.default=O,l.default.registerPlugin("sprite",O)},function(t,e,i){"use strict";function r(t,e){var i=s;i=i.replace(/%count%/gi,e),i=i.replace(/%forloop%/gi,n(e));for(var r=new a.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),o=[],h=0;h<e;h++)o[h]=h;return r.bind(),r.uniforms.uSamplers=o,r}function n(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}e.__esModule=!0,e.default=r;var o=i(23),a=function(t){return t&&t.__esModule?t:{default:t}}(o),s=(i(8),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(56),u=r(h),l=i(12),c=r(l),d=i(5),f=i(2),p=i(0),m=i(4),g=r(m),v=i(107),y=r(v),_=i(106),T=r(_),b=i(263),E=r(b),w={texture:!0,children:!1,baseTexture:!0},x=function(t){function e(i,r,a){n(this,e),a=a||document.createElement("canvas"),a.width=3,a.height=3;var s=c.default.fromCanvas(a,g.default.SCALE_MODE,"text");s.orig=new d.Rectangle,s.trim=new d.Rectangle;var h=o(this,t.call(this,s));return c.default.addToCache(h._texture,h._texture.baseTexture.textureCacheIds[0]),h.canvas=a,h.context=h.canvas.getContext("2d"),h.resolution=g.default.RESOLUTION,h._text=null,h._style=null,h._styleListener=null,h._font="",h.text=i,h.style=r,h.localStyleID=-1,h}return a(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,r=T.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=r.width,o=r.height,a=r.lines,s=r.lineHeight,h=r.lineWidths,u=r.maxLineWidth,l=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,n)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var c=void 0,d=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,p=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,m=0;m<a.length;m++)c=e.strokeThickness/2,d=e.strokeThickness/2+m*s+l.ascent,"right"===e.align?c+=u-h[m]:"center"===e.align&&(c+=(u-h[m])/2),e.fill&&(this.drawLetterSpacing(a[m],c+f+e.padding,d+p+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(a[m],c+f+e.padding,d+p+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,a);for(var g=0;g<a.length;g++)c=e.strokeThickness/2,d=e.strokeThickness/2+g*s+l.ascent,"right"===e.align?c+=u-h[g]:"center"===e.align&&(c+=(u-h[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[g],c+e.padding,d+e.padding,!0),e.fill&&this.drawLetterSpacing(a[g],c+e.padding,d+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this._style,o=n.letterSpacing;if(0===o)return void(r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var a=String.prototype.split.call(t,""),s=e,h=0,u="";h<t.length;)u=a[h++],r?this.context.strokeText(u,s,i):this.context.fillText(u,s,i),s+=this.context.measureText(u).width+o},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,E.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var i=this._texture,r=this._style,n=r.trim?0:r.padding,o=i.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,r=void 0,n=void 0,o=void 0,a=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,h=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var l=h.length+1,c=1;c<l;++c)u.push(c/l);if(h.unshift(t.fill[0]),u.unshift(0),h.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,0,a/2,s),r=(h.length+1)*e.length,n=0;for(var d=0;d<e.length;d++){n+=1;for(var f=0;f<h.length;f++)o="number"==typeof u[f]?u[f]/e.length+d/e.length:n/r,i.addColorStop(o,h[f]),n++}}else{i=this.context.createLinearGradient(0,s/2,a,s/2),r=h.length+1,n=1;for(var m=0;m<h.length;m++)o="number"==typeof u[m]?u[m]:n/r,i.addColorStop(o,h[m]),n++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},w,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},s(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,f.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,f.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},t instanceof y.default?this._style=t:this._style=new y.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(u.default);e.default=x},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=i(1),a=i(2),s=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t),this.baseTexture=e,this.textures={},this.data=i,this.resolution=this._updateResolution(n||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,a.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,r=t.BATCH_SIZE,n=this.baseTexture.sourceScale;i-e<r&&i<this._frameKeys.length;){var a=this._frameKeys[i],s=this._frames[a],h=s.frame;if(h){var u=null,l=null,c=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,d=new o.Rectangle(0,0,Math.floor(c.w*n)/this.resolution,Math.floor(c.h*n)/this.resolution);u=s.rotated?new o.Rectangle(Math.floor(h.x*n)/this.resolution,Math.floor(h.y*n)/this.resolution,Math.floor(h.h*n)/this.resolution,Math.floor(h.w*n)/this.resolution):new o.Rectangle(Math.floor(h.x*n)/this.resolution,Math.floor(h.y*n)/this.resolution,Math.floor(h.w*n)/this.resolution,Math.floor(h.h*n)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(l=new o.Rectangle(Math.floor(s.spriteSourceSize.x*n)/this.resolution,Math.floor(s.spriteSourceSize.y*n)/this.resolution,Math.floor(h.w*n)/this.resolution,Math.floor(h.h*n)/this.resolution)),this.textures[a]=new o.Texture(this.baseTexture,u,d,l,s.rotated?2:0),o.Texture.addToCache(this.textures[a],a)}i++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=s},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),a=i(4),s=r(a),h=i(0),u=i(257),l=r(u),c=function(){function t(){var e=this;n(this,t),this._head=new l.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.UPDATE_PRIORITY.NORMAL;return this._addListener(new l.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.UPDATE_PRIORITY.NORMAL;return this._addListener(new l.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*s.default.TARGET_FPMS*this.speed;for(var i=this._head,r=i.next;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},o(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=c},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r(this,t),this.fn=e,this.context=i,this.priority=n,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();e.default=n},function(t,e,i){"use strict";function r(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}e.__esModule=!0,e.default=r},function(t,e,i){"use strict";function r(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL,t[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD,t[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN,e[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM,e[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM,e[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}e.__esModule=!0,e.default=r;var n=i(0)},function(t,e,i){"use strict";function r(t){return o.default.tablet||o.default.phone?4:t}e.__esModule=!0,e.default=r;var n=i(48),o=function(t){return t&&t.__esModule?t:{default:t}}(n)},function(t,e,i){"use strict";function r(t,e){if(t&&e)for(var i=Object.keys(e),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}}function n(t,e){a.push(t,e)}function o(){for(var t=0;t<a.length;t+=2)r(a[t],a[t+1]);a.length=0}e.__esModule=!0,e.mixin=r,e.delayMixin=n,e.performMixins=o;var a=[]},function(t,e,i){"use strict";function r(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.__esModule=!0,e.default={mixin:function(t){r(t)}}},function(t,e,i){"use strict";function r(t){var e=t.width,i=t.height,r=t.getContext("2d"),n=r.getImageData(0,0,e,i),o=n.data,a=o.length,s={top:null,left:null,right:null,bottom:null},h=void 0,u=void 0,l=void 0;for(h=0;h<a;h+=4)0!==o[h+3]&&(u=h/4%e,l=~~(h/4/e),null===s.top&&(s.top=l),null===s.left?s.left=u:u<s.left&&(s.left=u),null===s.right?s.right=u+1:s.right<u&&(s.right=u+1),null===s.bottom?s.bottom=l:s.bottom<l&&(s.bottom=l));return e=s.right-s.left,i=s.bottom-s.top+1,{height:i,width:e,data:r.getImageData(s.left,s.top,e,i)}}e.__esModule=!0,e.default=r},function(t,e,i){"use strict";function r(t){if(!o[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),o[t]=!0}}function n(t){var e=t.mesh,i=t.particles,n=t.extras,o=t.filters,a=t.prepare,s=t.loaders,h=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return r("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return r("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return r("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return r("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return r("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return r("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return r("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return r("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return r("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return r("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return r("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return r("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return r("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return r("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return r("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=0;l<u.length;l++)!function(e){var i=u[e];Object.defineProperty(t[i.parent],"DEFAULT",{get:function(){return r("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]},set:function(e){r("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]=e}})}(l);Object.defineProperties(t.settings,{PRECISION:{get:function(){return r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return r("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}}),n&&Object.defineProperties(n,{TextureTransform:{get:function(){return r("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,i){return r("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},t.Graphics.prototype.generateTexture=function(t,e){return r("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return r("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,i,n){this.legacyRenderer.render(t,this,i,e,!n),r("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return r("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return r("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return r("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return r("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,r("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return r("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return r("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,r("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return r("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return r("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),e=e||{},e instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){r("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){r("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var n=0;n<e.length;++n)if(e[n].match(/(px|pt|em|%)/)){i=n,this._fontSize=e[n];break}this._fontWeight="normal";for(var o=0;o<i;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var a=i+1;a<e.length;++a)this._fontFamily+=e[a]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,r("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,i){t.Texture.addToCache(e,i),r("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return r("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return r("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return r("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return r("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return r("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(r("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=t},get:function(){return c}}),a.BasePrepare&&(a.BasePrepare.prototype.register=function(t,e){return r("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),a.canvas&&Object.defineProperty(a.canvas,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.webgl&&Object.defineProperty(a.webgl,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.Loader){var d=s.Resource,f=s.Loader;Object.defineProperties(d.prototype,{isJson:{get:function(){return r("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===d.TYPE.JSON}},isXml:{get:function(){return r("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===d.TYPE.XML}},isImage:{get:function(){return r("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===d.TYPE.IMAGE}},isAudio:{get:function(){return r("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===d.TYPE.AUDIO}},isVideo:{get:function(){return r("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===d.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return r("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return r("The after() method is deprecated, please use use()."),this.use}}})}h.interactiveTarget&&Object.defineProperty(h.interactiveTarget,"defaultCursor",{set:function(t){r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),h.InteractionManager&&(Object.defineProperty(h.InteractionManager,"defaultCursorStyle",{set:function(t){r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(h.InteractionManager,"currentCursorStyle",{set:function(t){r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}e.__esModule=!0,e.default=n;var o={}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n),a=new o.Rectangle,s=function(){function t(e){r(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,r=void 0,n=void 0,s=void 0;t&&(s=t instanceof o.RenderTexture?t:e.generateTexture(t)),s?(i=s.baseTexture._canvasRenderTarget.context,r=s.baseTexture._canvasRenderTarget.resolution,n=s.frame):(i=e.rootContext,n=a,n.width=this.renderer.width,n.height=this.renderer.height);var h=n.width*r,u=n.height*r,l=new o.CanvasRenderTarget(h,u),c=i.getImageData(n.x*r,n.y*r,h,u);return l.context.putImageData(c,0,0),l.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,r=void 0,n=void 0,s=void 0;return t&&(s=t instanceof o.RenderTexture?t:e.generateTexture(t)),s?(i=s.baseTexture._canvasRenderTarget.context,r=s.baseTexture._canvasRenderTarget.resolution,n=s.frame):(i=e.rootContext,n=a,n.width=e.width,n.height=e.height),i.getImageData(0,0,n.width*r,n.height*r).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=s,o.CanvasRenderer.registerPlugin("extract",s)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(267);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return r(n).default}});var o=i(265);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return r(o).default}})},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n),a=new o.Rectangle,s=function(){function t(e){r(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,r=void 0,n=void 0,s=!1,h=void 0,u=!1;t&&(t instanceof o.RenderTexture?h=t:(h=this.renderer.generateTexture(t),u=!0)),h?(i=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],r=i.resolution,n=h.frame,s=!1):(i=this.renderer.rootRenderTarget,r=i.resolution,s=!0,n=a,n.width=i.size.width,n.height=i.size.height);var l=n.width*r,c=n.height*r,d=new o.CanvasRenderTarget(l,c);if(i){e.bindRenderTarget(i);var f=new Uint8Array(4*l*c),p=e.gl;p.readPixels(n.x*r,n.y*r,l,c,p.RGBA,p.UNSIGNED_BYTE,f);var m=d.context.getImageData(0,0,l,c);m.data.set(f),d.context.putImageData(m,0,0),s&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return u&&h.destroy(!0),d.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,r=void 0,n=void 0,s=void 0,h=!1;t&&(t instanceof o.RenderTexture?s=t:(s=this.renderer.generateTexture(t),h=!0)),s?(i=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],r=i.resolution,n=s.frame):(i=this.renderer.rootRenderTarget,r=i.resolution,n=a,n.width=i.size.width,n.height=i.size.height);var u=n.width*r,l=n.height*r,c=new Uint8Array(4*u*l);if(i){e.bindRenderTarget(i);var d=e.gl;d.readPixels(n.x*r,n.y*r,u,l,d.RGBA,d.UNSIGNED_BYTE,c)}return h&&s.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=s,o.WebGLRenderer.registerPlugin("extract",s)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=function(t){function e(i,o){r(this,e);var a=n(this,t.call(this,i[0]instanceof h.Texture?i[0]:i[0].texture));return a._textures=null,a._durations=null,a.textures=i,a._autoUpdate=!1!==o,a.animationSpeed=1,a.loop=!0,a.onComplete=null,a.onFrameChange=null,a.onLoop=null,a._currentTime=0,a.playing=!1,a}return o(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&h.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&h.ticker.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(h.Texture.fromFrame(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(h.Texture.fromImage(t[r]));return new e(i)},a(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof h.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(h.Sprite);e.default=u},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(1),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(99),c=r(l),d=i(2),f=i(4),p=r(f),m=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e);var a=o(this,t.call(this));return a._textWidth=0,a._textHeight=0,a._glyphs=[],a._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},a.font=r.font,a._text=i,a._maxWidth=0,a._maxLineHeight=0,a._anchor=new c.default(function(){a.dirty=!0},a,0,0),a.dirty=!1,a.updateText(),a}return a(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,r=new u.Point,n=[],o=[],a=null,s=0,h=0,l=0,c=-1,d=0,f=0,p=0,m=0;m<this.text.length;m++){var g=this.text.charCodeAt(m);if(/(\s)/.test(this.text.charAt(m))&&(c=m,d=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(m)))o.push(s),h=Math.max(h,s),l++,r.x=0,r.y+=t.lineHeight,a=null;else if(-1!==c&&this._maxWidth>0&&r.x*i>this._maxWidth)u.utils.removeItems(n,c-f,m-c),m=c,c=-1,++f,o.push(d),h=Math.max(h,d),l++,r.x=0,r.y+=t.lineHeight,a=null;else{var v=t.chars[g];v&&(a&&v.kerning[a]&&(r.x+=v.kerning[a]),n.push({texture:v.texture,line:l,charCode:g,position:new u.Point(r.x+v.xOffset,r.y+v.yOffset)}),s=r.x+(v.texture.width+v.xOffset),r.x+=v.xAdvance,p=Math.max(p,v.yOffset+v.texture.height),a=g)}}o.push(s),h=Math.max(h,s);for(var y=[],_=0;_<=l;_++){var T=0;"right"===this._font.align?T=h-o[_]:"center"===this._font.align&&(T=(h-o[_])/2),y.push(T)}for(var b=n.length,E=this.tint,w=0;w<b;w++){var x=this._glyphs[w];x?x.texture=n[w].texture:(x=new u.Sprite(n[w].texture),this._glyphs.push(x)),x.position.x=(n[w].position.x+y[n[w].line])*i,x.position.y=n[w].position.y*i,x.scale.x=x.scale.y=i,x.tint=E,x.parent||this.addChild(x)}for(var S=b;S<this._glyphs.length;++S)this.removeChild(this._glyphs[S]);if(this._textWidth=h*i,this._textHeight=(r.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var A=0;A<b;A++)this._glyphs[A].x-=this._textWidth*this.anchor.x,this._glyphs[A].y-=this._textHeight*this.anchor.y;this._maxLineHeight=p*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var r={},n=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],a=t.getElementsByTagName("page")[0].getAttribute("file"),s=(0,d.getResolutionOfUrl)(a,p.default.RESOLUTION);r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/s,r.chars={};for(var h=t.getElementsByTagName("char"),l=0;l<h.length;l++){var c=h[l],f=parseInt(c.getAttribute("id"),10),m=new u.Rectangle(parseInt(c.getAttribute("x"),10)/s+i.frame.x/s,parseInt(c.getAttribute("y"),10)/s+i.frame.y/s,parseInt(c.getAttribute("width"),10)/s,parseInt(c.getAttribute("height"),10)/s);r.chars[f]={xOffset:parseInt(c.getAttribute("xoffset"),10)/s,yOffset:parseInt(c.getAttribute("yoffset"),10)/s,xAdvance:parseInt(c.getAttribute("xadvance"),10)/s,kerning:{},texture:new u.Texture(i.baseTexture,m)}}for(var g=t.getElementsByTagName("kerning"),v=0;v<g.length;v++){var y=g[v],_=parseInt(y.getAttribute("first"),10)/s,T=parseInt(y.getAttribute("second"),10)/s,b=parseInt(y.getAttribute("amount"),10)/s;r.chars[T]&&(r.chars[T].kerning[_]=b)}return e.fonts[r.font]=r,r},s(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(u.Container);e.default=m,m.fonts={}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(57),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=new h.Point,d=function(t){function e(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;r(this,e);var s=n(this,t.call(this,i));return s.tileTransform=new h.TransformStatic,s._width=o,s._height=a,s._canvasPattern=null,s.uvTransform=i.transform||new h.TextureMatrix(i),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return o(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,r=this.worldTransform,n=t.resolution,o=e.baseTexture,a=o.resolution,s=this.tilePosition.x/this.tileScale.x%e._frame.width*a,u=this.tilePosition.y/this.tileScale.y%e._frame.height*a;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new h.CanvasRenderTarget(e._frame.width,e._frame.height,a);16777215!==this.tint?(this.tintedTexture=l.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(o.source,-e._frame.x*a,-e._frame.y*a),this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/a,this.tileScale.y/a);var d=this.anchor.x*-this._width,f=this.anchor.y*-this._height;this.uvRespectAnchor?(i.translate(s,u),i.fillRect(-s+d,-u+f,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(i.translate(s+d,u+f),i.fillRect(-s,-u,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new h.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e=this._width,i=this._height,r=-e*this.anchor._x;if(c.x>=r&&c.x<r+e){var n=-i*this.anchor._y;if(c.y>=n&&c.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,r){return new e(h.Texture.from(t),i,r)},e.fromFrame=function(t,i,r){var n=h.utils.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(n,i,r)},e.fromImage=function(t,i,r,n,o){return new e(h.Texture.fromImage(t,n,o),i,r)},a(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(h.Sprite);e.default=d},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i(1),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(o),s=i(12),h=r(s),u=i(20),l=r(u),c=i(2),d=a.DisplayObject,f=new a.Matrix;d.prototype._cacheAsBitmap=!1,d.prototype._cacheData=!1;var p=function t(){n(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(d.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new p),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),d.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},d.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;i.pad(r)}var n=t._activeRenderTarget,o=t.filterManager.filterStack,s=a.RenderTexture.create(0|i.width,0|i.height),u="cacheAsBitmap_"+(0,c.uid)();this._cacheData.textureCacheId=u,l.default.addToCache(s.baseTexture,u),h.default.addToCache(s,u);var d=f;d.tx=-i.x,d.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,d,!0),t.bindRenderTarget(n),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var p=new a.Sprite(s);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-i.x/i.width,p.anchor.y=-i.y/i.height,p.alpha=e,p._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},d.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},d.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var r=t.context,n=a.RenderTexture.create(0|e.width,0|e.height),o="cacheAsBitmap_"+(0,c.uid)();this._cacheData.textureCacheId=o,l.default.addToCache(n.baseTexture,o),h.default.addToCache(n,o);var s=f;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,n,!0,s,!1),t.context=r,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var u=new a.Sprite(n);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u._bounds=this._bounds,u.alpha=i,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=u,this.containsPoint=u.containsPoint.bind(u)}},d.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},d.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},d.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,l.default.removeFromCache(this._cacheData.textureCacheId),h.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},d.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,i){"use strict";var r=i(1),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r);n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,i){"use strict";var r=i(1),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(r);n.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(1),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),h=i(0),u=(i(8),new s.Matrix),l=function(t){function e(i){r(this,e);var o=n(this,t.call(this,i));return o.shader=null,o.simpleShader=null,o.quad=null,o}return o(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new s.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new s.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new s.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(r=i.uvs,r[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),i.upload();var n=t._texture,o=n.baseTexture,a=t.tileTransform.localTransform,l=t.uvTransform,c=o.isPowerOfTwo&&n.frame.width===o.width&&n.frame.height===o.height;c&&(o._glTextures[e.CONTEXT_UID]?c=o.wrapMode!==h.WRAP_MODES.CLAMP:o.wrapMode===h.WRAP_MODES.CLAMP&&(o.wrapMode=h.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;e.bindShader(d);var f=n.width,p=n.height,m=t._width,g=t._height;u.set(a.a*f/m,a.b*f/g,a.c*p/m,a.d*p/g,a.tx/m,a.ty/g),u.invert(),c?u.prepend(l.mapCoord):(d.uniforms.uMapCoord=l.mapCoord.toArray(!0),d.uniforms.uClampFrame=l.uClampFrame,d.uniforms.uClampOffset=l.uClampOffset),d.uniforms.uTransform=u.toArray(!0),d.uniforms.uColor=s.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,o.premultipliedAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(n),e.setBlendMode(s.utils.correctBlendMode(t.blendMode,o.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(s.ObjectRenderer);e.default=l,s.WebGLRenderer.registerPlugin("tilingSprite",l)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=(i(8),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;r(this,e);var o=n(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return o.alpha=i,o.glShaderKey="alpha",o}return o(e,t),a(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(h.Filter));e.default=u},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),h=i(1),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(114),c=r(l),d=i(115),f=r(d),p=function(t){function e(i,r,a,s){n(this,e);var h=o(this,t.call(this));return h.blurXFilter=new c.default(i,r,a,s),h.blurYFilter=new f.default(i,r,a,s),h.padding=0,h.resolution=a||u.settings.RESOLUTION,h.quality=r||4,h.blur=i||8,h}return a(e,t),e.prototype.apply=function(t,e,i){var r=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,i,!1),t.returnRenderTarget(r)},s(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(u.Filter);e.default=p},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=(i(8),function(t){function e(){r(this,e);var i=n(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return o(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=Math.sqrt,o=1/3,a=n(o),s=i+(1-i)*o,h=o*(1-i)-a*r,u=o*(1-i)+a*r,l=o*(1-i)+a*r,c=i+o*(1-i),d=o*(1-i)-a*r,f=o*(1-i)-a*r,p=o*(1-i)+a*r,m=i+o*(1-i),g=[s,h,u,0,0,l,c,d,0,0,f,p,m,0,0,0,0,0,1,0];this._loadMatrix(g,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,i,r,n){t=t||.2,e=e||.15,i=i||16770432,r=r||3375104;var o=(i>>16&255)/255,a=(i>>8&255)/255,s=(255&i)/255,h=(r>>16&255)/255,u=(r>>8&255)/255,l=(255&r)/255,c=[.3,.59,.11,0,0,o,a,s,t,0,h,u,l,e,0,o-h,a-u,s-l,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){t=t||.1;var i=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},a(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(h.Filter));e.default=u,u.prototype.grayscale=u.prototype.greyscale},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=(i(8),function(t){function e(i,o){r(this,e);var a=new h.Matrix;i.renderable=!1;var s=n(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=i,s.maskMatrix=a,s.uniforms.mapSampler=i._texture,s.uniforms.filterMatrix=a,s.uniforms.scale={x:1,y:1},null!==o&&void 0!==o||(o=20),s.scale=new h.Point(o,o),s}return o(e,t),e.prototype.apply=function(t,e,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,i)},a(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(h.Filter));e.default=u},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(1),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(a),h=(i(8),function(t){function e(){return r(this,e),n(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return o(e,t),e}(s.Filter));e.default=h},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(279);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return r(n).default}});var o=i(281);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return r(o).default}});var a=i(278);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return r(a).default}});var s=i(276);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return r(s).default}});var h=i(114);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return r(h).default}});var u=i(115);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return r(u).default}});var l=i(277);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return r(l).default}});var c=i(275);Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return r(c).default}})},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=(i(8),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();r(this,e);var a=n(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return a.noise=i,a.seed=o,a}return o(e,t),a(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(h.Filter));e.default=u},function(t,e,i){"use strict";(function(t){function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var n=i(300);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var o=i(1);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=i(264),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=i(221),u=r(h),l=i(266),c=r(l),d=i(113),f=r(d),p=i(280),m=r(p),g=i(284),v=r(g),y=i(285),_=r(y),T=i(290),b=r(T),E=i(293),w=r(E),x=i(303),S=r(x);o.utils.mixins.performMixins();var A=_.shared||null;e.accessibility=u,e.extract=c,e.extras=f,e.filters=m,e.interaction=v,e.loaders=_,e.mesh=b,e.particles=w,e.prepare=S,e.loader=A,"function"==typeof s.default&&(0,s.default)(e),t.PIXI=e}).call(e,i(3))},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=i(1),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(h),l=i(119),c=r(l),d=i(120),f=r(d),p=i(121),m=r(p),g=i(15),v=r(g),y=i(122),_=r(y);u.utils.mixins.delayMixin(u.DisplayObject.prototype,_.default);var T=1,b={target:null,data:{global:null}},E=function(t){function e(i,r){n(this,e);var a=o(this,t.call(this));return r=r||{},a.renderer=i,a.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,a.interactionFrequency=r.interactionFrequency||10,a.mouse=new c.default,a.mouse.identifier=T,a.mouse.global.set(-999999),a.activeInteractionData={},a.activeInteractionData[T]=a.mouse,a.interactionDataPool=[],a.eventData=new f.default,a.interactionDOMElement=null,a.moveWhenInside=!1,a.eventsAdded=!1,a.mouseOverRenderer=!1,a.supportsTouchEvents="ontouchstart"in window,a.supportsPointerEvents=!!window.PointerEvent,a.onPointerUp=a.onPointerUp.bind(a),a.processPointerUp=a.processPointerUp.bind(a),a.onPointerCancel=a.onPointerCancel.bind(a),a.processPointerCancel=a.processPointerCancel.bind(a),a.onPointerDown=a.onPointerDown.bind(a),a.processPointerDown=a.processPointerDown.bind(a),a.onPointerMove=a.onPointerMove.bind(a),a.processPointerMove=a.processPointerMove.bind(a),a.onPointerOut=a.onPointerOut.bind(a),a.processPointerOverOut=a.processPointerOverOut.bind(a),a.onPointerOver=a.onPointerOver.bind(a),a.cursorStyles={default:"inherit",pointer:"pointer"},a.currentCursorMode=null,a.cursor=null,a._tempPoint=new u.Point,a.resolution=1,a.setTargetElement(a.renderer.view,a.renderer.resolution),a}return a(e,t),e.prototype.hitTest=function(t,e){return b.target=null,b.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(b,e,null,!0),b.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(u.ticker.shared.add(this.update,this,u.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(u.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":s(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r,n){if(!e||!e.visible)return!1;var o=t.data.global;n=e.interactive||n;var a=!1,s=n,h=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,h=!1)),s=!1):e._mask&&r&&(e._mask.containsPoint(o)||(r=!1,h=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var c=u[l],d=this.processInteractive(t,c,i,r,s);if(d){if(!c.parent)continue;s=!1,d&&(t.target&&(r=!1),a=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),i&&i(t,e,!!a))),a},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(a.data.originalEvent=t,this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===n.pointerType)this.emit("touchstart",a);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new m.default(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,o=t.target!==this.interactionDOMElement?"outside":"",a=0;a<n;a++){var s=r[a],h=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,h);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,u),"mouse"===s.pointerType||"pen"===s.pointerType){var l=2===s.button;this.emit(l?"rightup"+o:"mouseup"+o,u)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(s.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,o=e.trackedPointers[n],a="touch"===r.pointerType;if("mouse"===r.pointerType||"pen"===r.pointerType){var s=2===r.button,h=m.default.FLAGS,u=s?h.RIGHT_DOWN:h.LEFT_DOWN,l=void 0!==o&&o.flags&u;i?(this.dispatchEvent(e,s?"rightup":"mouseup",t),l&&this.dispatchEvent(e,s?"rightclick":"click",t)):l&&this.dispatchEvent(e,s?"rightupoutside":"mouseupoutside",t),o&&(s?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&(this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,o);a.data.originalEvent=t;var s="touch"!==n.pointerType||this.moveWhenInside;this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",a),"touch"===n.pointerType&&this.emit("touchmove",a),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),i=e[0];"mouse"===i.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(i),n=this.configureInteractionEventForDOMEvent(this.eventData,i,r);n.data.originalEvent=i,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===i.pointerType||"pen"===i.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(r.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=e.trackedPointers[n];i&&!a&&(a=e.trackedPointers[n]=new m.default(n)),void 0!==a&&(i&&this.mouseOverRenderer?(a.over||(a.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),i=e[0],r=this.getInteractionDataForPointerId(i),n=this.configureInteractionEventForDOMEvent(this.eventData,i,r);n.data.originalEvent=i,"mouse"===i.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return e===T||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:(i=this.interactionDataPool.pop()||new c.default,i.identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),n.twist=0,n.tangentialPressure=0,void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=T),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(v.default);e.default=E,u.WebGLRenderer.registerPlugin("interaction",E),u.CanvasRenderer.registerPlugin("interaction",E)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(119);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return r(n).default}});var o=i(283);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return r(o).default}});var a=i(122);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return r(a).default}});var s=i(121);Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return r(s).default}});var h=i(120);Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return r(h).default}})},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var n=i(123);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return r(n).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return n.parse}});var o=i(124);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var a=i(125);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return r(a).default}});var s=i(28);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var h=i(92),u=r(h),l=i(286),c=r(l);e.Loader=c.default;var d=new c.default;d.destroy=function(){},e.shared=d;var f=u.default.prototype;f._loader=null,Object.defineProperty(f,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?d:new c.default}return this._loader}}),f._parentDestroy=f.destroy,f.destroy=function(t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t)}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(28),h=r(s),u=i(311),l=i(15),c=r(l),d=i(125),f=r(d),p=i(124),m=r(p),g=i(123),v=r(g),y=function(t){function e(i,r){n(this,e);var a=o(this,t.call(this,i,r));c.default.call(a);for(var s=0;s<e._pixiMiddleware.length;++s)a.use(e._pixiMiddleware[s]());return a.onStart.add(function(t){return a.emit("start",t)}),a.onProgress.add(function(t,e){return a.emit("progress",t,e)}),a.onError.add(function(t,e,i){return a.emit("error",t,e,i)}),a.onLoad.add(function(t,e){return a.emit("load",t,e)}),a.onComplete.add(function(t,e){return a.emit("complete",t,e)}),a}return a(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(h.default);e.default=y;for(var _ in c.default.prototype)y.prototype[_]=c.default.prototype[_];y._pixiMiddleware=[u.blobMiddlewareFactory,f.default,m.default,v.default];var T=h.default.Resource;T.setExtensionXhrType("fnt",T.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(126),h=function(t){return t&&t.__esModule?t:{default:t}}(s),u=10,l=function(t){function e(i,o,a,s,h){r(this,e);var l=n(this,t.call(this,i,4,4));return l._origWidth=i.orig.width,l._origHeight=i.orig.height,l._width=l._origWidth,l._height=l._origHeight,l.leftWidth=void 0!==o?o:u,l.rightWidth=void 0!==s?s:u,l.topHeight=void 0!==a?a:u,l.bottomHeight=void 0!==h?h:u,l.refresh(!0),l}return o(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode);var i=this.worldTransform,r=t.resolution;t.roundPixels?e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r);var n=this._texture.baseTexture,o=n.source,a=n.width*n.resolution,s=n.height*n.resolution;this.drawSegment(e,o,a,s,0,1,10,11),this.drawSegment(e,o,a,s,2,3,12,13),this.drawSegment(e,o,a,s,4,5,14,15),this.drawSegment(e,o,a,s,8,9,18,19),this.drawSegment(e,o,a,s,10,11,20,21),this.drawSegment(e,o,a,s,12,13,22,23),this.drawSegment(e,o,a,s,16,17,26,27),this.drawSegment(e,o,a,s,18,19,28,29),this.drawSegment(e,o,a,s,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,r,n,o,a,s){var h=this.uvs,u=this.vertices,l=(h[a]-h[n])*i,c=(h[s]-h[o])*r,d=u[a]-u[n],f=u[s]-u[o];l<1&&(l=1),c<1&&(c=1),d<1&&(d=1),f<1&&(f=1),t.drawImage(e,h[n]*i,h[o]*r,l,c,u[n],u[o],d,f)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var r=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},a(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(h.default);e.default=l},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(27),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=function(t){function e(i,o){r(this,e);var a=n(this,t.call(this,i));return a.points=o,a.vertices=new Float32Array(4*o.length),a.uvs=new Float32Array(4*o.length),a.colors=new Float32Array(2*o.length),a.indices=new Uint16Array(2*o.length),a.autoUpdate=!0,a.refresh(),a}return o(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,r=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,r[0]=1,r[1]=1,i[0]=0,i[1]=1;for(var n=t.length,o=1;o<n;o++){var a=4*o,s=o/(n-1);e[a]=s,e[a+1]=0,e[a+2]=s,e[a+3]=1,a=2*o,r[a]=1,r[a+1]=1,a=2*o,i[a]=a,i[a+1]=a+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,r=0,n=0,o=this.vertices,a=t.length,s=0;s<a;s++){var h=t[s],u=4*s;i=s<t.length-1?t[s+1]:h,n=-(i.x-e.x),r=i.y-e.y;var l=10*(1-s/(a-1));l>1&&(l=1);var c=Math.sqrt(r*r+n*n),d=this._texture.height/2;r/=c,n/=c,r*=d,n*=d,o[u]=h.x+r,o[u+1]=h.y+n,o[u+2]=h.x-r,o[u+3]=h.y-n,e=h}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(s.default);e.default=h},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=i(1),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(n),a=i(27),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldTransform,n=e.resolution;e.roundPixels?i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var r=2*i;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,r=0;r<i;r+=3){var n=2*e[r],o=2*e[r+1],a=2*e[r+2];this._renderDrawTriangle(t,n,o,a)}},t.prototype._renderDrawTriangle=function(t,e,i,r){var n=this.renderer.context,o=t.uvs,a=t.vertices,s=t._texture;if(s.valid){var h=s.baseTexture,u=h.source,l=h.width,c=h.height,d=void 0,f=void 0,p=void 0,m=void 0,g=void 0,v=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;d=(o[e]*y.a+o[e+1]*y.c+y.tx)*h.width,f=(o[i]*y.a+o[i+1]*y.c+y.tx)*h.width,p=(o[r]*y.a+o[r+1]*y.c+y.tx)*h.width,m=(o[e]*y.b+o[e+1]*y.d+y.ty)*h.height,g=(o[i]*y.b+o[i+1]*y.d+y.ty)*h.height,v=(o[r]*y.b+o[r+1]*y.d+y.ty)*h.height}else d=o[e]*h.width,f=o[i]*h.width,p=o[r]*h.width,m=o[e+1]*h.height,g=o[i+1]*h.height,v=o[r+1]*h.height;var _=a[e],T=a[i],b=a[r],E=a[e+1],w=a[i+1],x=a[r+1],S=t.canvasPadding/this.renderer.resolution;if(S>0){var A=S/Math.abs(t.worldTransform.a),I=S/Math.abs(t.worldTransform.d),O=(_+T+b)/3,R=(E+w+x)/3,C=_-O,P=E-R,M=Math.sqrt(C*C+P*P);_=O+C/M*(M+A),E=R+P/M*(M+I),C=T-O,P=w-R,M=Math.sqrt(C*C+P*P),T=O+C/M*(M+A),w=R+P/M*(M+I),C=b-O,P=x-R,M=Math.sqrt(C*C+P*P),b=O+C/M*(M+A),x=R+P/M*(M+I)}n.save(),n.beginPath(),n.moveTo(_,E),n.lineTo(T,w),n.lineTo(b,x),n.closePath(),n.clip();var D=d*g+m*p+f*v-g*p-m*f-d*v,k=_*g+m*b+T*v-g*b-m*T-_*v,N=d*T+_*p+f*b-T*p-_*f-d*b,G=d*g*b+m*T*p+_*f*v-_*g*p-m*f*b-d*T*v,L=E*g+m*x+w*v-g*x-m*w-E*v,F=d*w+E*p+f*x-w*p-E*f-d*x,U=d*g*x+m*w*p+E*f*v-E*g*p-m*f*x-d*w*v;n.transform(k/D,L/D,N/D,F/D,G/D,U/D),n.drawImage(u,0,0,l*h.resolution,c*h.resolution,0,0,l,c),n.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,r=i.length/2;e.beginPath();for(var n=1;n<r-2;++n){var o=2*n,a=i[o],s=i[o+1],h=i[o+2],u=i[o+3],l=i[o+4],c=i[o+5];e.moveTo(a,s),e.lineTo(h,u),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=h,o.CanvasRenderer.registerPlugin("mesh",h)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(27);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return r(n).default}});var o=i(291);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return r(o).default}});var a=i(289);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return r(a).default}});var s=i(126);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return r(s).default}});var h=i(287);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return r(h).default}});var u=i(288);Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return r(u).default}})},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(6),l=r(u),c=i(27),d=r(c),f=(i(8),h.Matrix.IDENTITY),p=function(t){function e(i){n(this,e);var r=o(this,t.call(this,i));return r.shader=null,r}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new h.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,r=t._texture;if(r.valid){var n=t._glDatas[e.CONTEXT_UID];n||(e.bindVao(null),n={shader:this.shader,vertexBuffer:l.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:l.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:l.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty},n.vao=new l.default.VertexArrayObject(i).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=n),e.bindVao(n.vao),t.dirty!==n.dirty&&(n.dirty=t.dirty,n.uvBuffer.upload(t.uvs)),t.indexDirty!==n.indexDirty&&(n.indexDirty=t.indexDirty,n.indexBuffer.upload(t.indices)),n.vertexBuffer.upload(t.vertices),e.bindShader(n.shader),n.shader.uniforms.uSampler=e.bindTexture(r),e.state.setBlendMode(h.utils.correctBlendMode(t.blendMode,r.baseTexture.premultipliedAlpha)),n.shader.uniforms.uTransform&&(t.uploadUvTransform?n.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):n.shader.uniforms.uTransform=f.toArray(!0)),n.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),n.shader.uniforms.uColor=h.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,n.shader.uniforms.uColor,r.baseTexture.premultipliedAlpha);var o=t.drawMode===d.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;n.vao.draw(o,t.indices.length,0)}},e}(h.ObjectRenderer);e.default=p,h.WebGLRenderer.registerPlugin("mesh",p)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(2),l=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,o=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r(this,e);var u=n(this,t.call(this));return a>16384&&(a=16384),a>i&&(a=i),u._properties=[!1,!0,!1,!1,!1],u._maxSize=i,u._batchSize=a,u._glBuffers={},u._bufferUpdateIDs=[],u._updateID=0,u.interactiveChildren=!1,u.blendMode=h.BLEND_MODES.NORMAL,u.autoResize=s,u.roundPixels=!0,u.baseTexture=null,u.setProperties(o),u._tint=0,u.tintRgb=new Float32Array(4),u.tint=16777215,u}return o(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,r=!0,n=0,o=0,a=0,s=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var u=this.children[h];if(u.visible){var l=u._texture.frame;if(e.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)r&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),r=!1),n=u.anchor.x*(-l.width*u.scale.x)+u.position.x+.5,o=u.anchor.y*(-l.height*u.scale.y)+u.position.y+.5,a=l.width*u.scale.x,s=l.height*u.scale.y;else{r||(r=!0),u.displayObjectUpdateTransform();var c=u.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),n=u.anchor.x*-l.width+.5,o=u.anchor.y*-l.height+.5,a=l.width,s=l.height}var d=u._texture.baseTexture.resolution;e.drawImage(u._texture.baseTexture.source,l.x*d,l.y*d,l.width*d,l.height*d,n*t.resolution,o*t.resolution,a*t.resolution,s*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},a(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,u.hex2rgb)(t,this.tintRgb)}}]),e}(h.Container);e.default=l},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(292);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return r(n).default}});var o=i(295);Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return r(o).default}})},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=i(6),a=r(o),s=i(60),h=r(s),u=function(){function t(e,i,r,o){n(this,t),this.gl=e,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var a=0;a<i.length;++a){var s=i[a];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},r[a]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,h.default)(this.size),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var r=this.dynamicProperties[i];r.offset=e,e+=r.size,this.dynamicStride+=r.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=a.default.GLBuffer.createVertexBuffer(t,n,t.STREAM_DRAW);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var u=this.staticProperties[s];u.offset=o,o+=u.size,this.staticStride+=u.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=a.default.GLBuffer.createVertexBuffer(t,l,t.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var f=0;f<this.staticProperties.length;++f){var p=this.staticProperties[f];p.unsignedByte?this.vao.addAttribute(this.staticBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*p.offset):this.vao.addAttribute(this.staticBuffer,p.attribute,t.FLOAT,!1,4*this.staticStride,4*p.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();e.default=u},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(296),l=r(u),c=i(294),d=r(c),f=i(2),p=function(t){function e(i){n(this,e);var r=o(this,t.call(this,i));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new h.Matrix,r.CONTEXT_UID=0,r}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new l.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer,o=e.length;if(0!==o){o>i&&(o=i);var a=t._glBuffers[n.CONTEXT_UID];a||(a=t._glBuffers[n.CONTEXT_UID]=this.generateBuffers(t));var s=e[0]._texture.baseTexture;this.renderer.setBlendMode(h.utils.correctBlendMode(t.blendMode,s.premultipliedAlpha));var u=n.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(n._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=h.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,s.premultipliedAlpha),this.shader.uniforms.uSampler=n.bindTexture(s);for(var c=!1,d=0,f=0;d<o;d+=r,f+=1){var p=o-d;if(p>r&&(p=r),f>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var m=a[f];m.uploadDynamic(e,d,p);var g=t._bufferUpdateIDs[d]||0;c=c||m._updateID<g,c&&(m._updateID=t._updateID,m.uploadStatic(e,d,p)),n.bindVao(m.vao),m.vao.draw(u.TRIANGLES,6*p)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],r=t._maxSize,n=t._batchSize,o=t._properties,a=0;a<r;a+=n)i.push(new d.default(e,this.properties,o,n));return i},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,i=t._batchSize,r=t._properties;return new d.default(e,this.properties,r,i)},e.prototype.uploadVertices=function(t,e,i,r,n,o){for(var a=0,s=0,h=0,u=0,l=0;l<i;++l){var c=t[e+l],d=c._texture,f=c.scale.x,p=c.scale.y,m=d.trim,g=d.orig;m?(s=m.x-c.anchor.x*g.width,a=s+m.width,u=m.y-c.anchor.y*g.height,h=u+m.height):(a=g.width*(1-c.anchor.x),s=g.width*-c.anchor.x,h=g.height*(1-c.anchor.y),u=g.height*-c.anchor.y),r[o]=s*f,r[o+1]=u*p,r[o+n]=a*f,r[o+n+1]=u*p,r[o+2*n]=a*f,r[o+2*n+1]=h*p,r[o+3*n]=s*f,r[o+3*n+1]=h*p,o+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,o){for(var a=0;a<i;a++){var s=t[e+a].position;r[o]=s.x,r[o+1]=s.y,r[o+n]=s.x,r[o+n+1]=s.y,r[o+2*n]=s.x,r[o+2*n+1]=s.y,r[o+3*n]=s.x,r[o+3*n+1]=s.y,o+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,o){for(var a=0;a<i;a++){var s=t[e+a].rotation;r[o]=s,r[o+n]=s,r[o+2*n]=s,r[o+3*n]=s,o+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,o){for(var a=0;a<i;++a){var s=t[e+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+n]=s.x1,r[o+n+1]=s.y1,r[o+2*n]=s.x2,r[o+2*n+1]=s.y2,r[o+3*n]=s.x3,r[o+3*n+1]=s.y3,o+=4*n):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+2*n]=0,r[o+2*n+1]=0,r[o+3*n]=0,r[o+3*n+1]=0,o+=4*n)}},e.prototype.uploadTint=function(t,e,i,r,n,o){for(var a=0;a<i;++a){var s=t[e+a],h=s._texture.baseTexture.premultipliedAlpha,u=s.alpha,l=u<1&&h?(0,f.premultiplyTint)(s._tintRGB,u):s._tintRGB+(255*u<<24);r[o]=l,r[o+n]=l,r[o+2*n]=l,r[o+3*n]=l,o+=4*n}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(h.ObjectRenderer);e.default=p,h.WebGLRenderer.registerPlugin("particle",p)},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var a=i(23),s=function(t){return t&&t.__esModule?t:{default:t}}(a),h=function(t){function e(i){return r(this,e),n(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return o(e,t),e}(s.default);e.default=h},function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},function(t,e,i){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},function(t,e,i){"use strict";var r=i(212),n=function(t){return t&&t.__esModule?t:{default:t}}(r);Object.assign||(Object.assign=n.default)},function(t,e,i){"use strict";i(299),i(301),i(297),i(298),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,i){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),r=["ms","moz","webkit","o"],n=0;n<r.length&&!t.requestAnimationFrame;++n){var o=r[n];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+i-e;return r<0&&(r=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(e,i(3))},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(e instanceof h.BaseTexture){var i=e.source,r=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),n=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,r,n,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.__esModule=!0;var s=i(1),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(s),u=i(61),l=function(t){return t&&t.__esModule?t:{default:t}}(u),c=16,d=function(t){function e(i){r(this,e);var o=n(this,t.call(this,i));return o.uploadHookHelper=o,o.canvas=document.createElement("canvas"),o.canvas.width=c,o.canvas.height=c,o.ctx=o.canvas.getContext("2d"),o.registerUploadHook(a),o}return o(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(l.default);e.default=d,h.CanvasRenderer.registerPlugin("prepare",d)},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var n=i(305);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return r(n).default}});var o=i(302);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return r(o).default}});var a=i(61);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return r(a).default}});var s=i(127);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return r(s).default}});var h=i(304);Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return r(h).default}})},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var n=function(){function t(e){r(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e.default=n},function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){return e instanceof l.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function s(t,e){return e instanceof l.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){return t instanceof l.Graphics&&(e.push(t),!0)}e.__esModule=!0;var u=i(1),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(u),c=i(61),d=function(t){return t&&t.__esModule?t:{default:t}}(c),f=function(t){function e(i){r(this,e);var o=n(this,t.call(this,i));return o.uploadHookHelper=o.renderer,o.registerFindHook(h),o.registerUploadHook(a),o.registerUploadHook(s),o}return o(e,t),e}(d.default);e.default=f,l.WebGLRenderer.registerPlugin("prepare",f)},function(t,e,i){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,o){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var c,d,f,p,m=t[l].replace(s,"%20"),g=m.indexOf(i);g>=0?(c=m.substr(0,g),d=m.substr(g+1)):(c=m,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),r(a,f)?n(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";function r(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,s){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?r(a(t),function(a){var s=encodeURIComponent(n(a))+i;return o(t[a])?r(t[a],function(t){return s+encodeURIComponent(n(t))}).join(e):s+encodeURIComponent(n(t[a]))}).join(e):s?encodeURIComponent(n(s))+i+encodeURIComponent(n(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";e.decode=e.parse=i(306),e.encode=e.stringify=i(307)},function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){i=e+i>n?n-e:i;var o=n-i;for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}}},function(t,e,i){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0,e.Loader=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(78),h=r(s),u=i(80),l=r(u),c=i(128),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(c),f=i(62),p=/(#[\w-]+)?$/,m=e.Loader=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;n(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=d.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new h.default,this.onError=new h.default,this.onLoad=new h.default,this.onStart=new h.default,this.onComplete=new h.default;for(var o=0;o<t._defaultBeforeMiddleware.length;++o)this.pre(t._defaultBeforeMiddleware[o]);for(var a=0;a<t._defaultAfterMiddleware.length;++a)this.use(t._defaultAfterMiddleware[a])}return t.prototype.add=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"===(void 0===t?"undefined":o(t))&&(r=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(r=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new f.Resource(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var a=i.parentResource,s=[],h=0;h<a.children.length;++h)a.children[h].isComplete||s.push(a.children[h]);var u=a.progressChunk*(s.length+1),l=u/(s.length+2);a.children.push(this.resources[t]),a.progressChunk=l;for(var c=0;c<s.length;++c)s[c].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,i=100/e,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,l.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=p.exec(i)[0];i=i.substr(0,i.length-r.length),-1!==i.indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=r}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,d.eachSeries(this._beforeMiddleware,function(e,r){e.call(i,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),d.eachSeries(this._afterMiddleware,function(i,r){i.call(e,t,r)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},a(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();m._defaultBeforeMiddleware=[],m._defaultAfterMiddleware=[],m.pre=function(t){return m._defaultBeforeMiddleware.push(t),m},m.use=function(t){return m._defaultAfterMiddleware.push(t),m}},function(t,e,i){"use strict";function r(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===n.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=a.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=n.Resource.TYPE.IMAGE,void(t.data.onload=function(){a.revokeObjectURL(i),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+(0,o.encodeBinary)(t.xhr.responseText),t.type=n.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}e.__esModule=!0,e.blobMiddlewareFactory=r;var n=i(62),o=i(129),a=window.URL||window.webkitURL},function(t,e,i){function r(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r=o(t),a=r.source,l=r.id,c=r.path,d=u[l]&&c in u[l].nsps,f=e.forceNew||e["force new connection"]||!1===e.multiplex||d;return f?(h("ignoring socket cache for %s",a),i=s(a,e)):(u[l]||(h("new io instance for %s",a),u[l]=s(a,e)),i=u[l]),r.query&&!e.query?e.query=r.query:e&&"object"==typeof e.query&&(e.query=n(e.query)),i.socket(r.path,e)}function n(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(encodeURIComponent(i)+"="+encodeURIComponent(t[i]));return e.join("&")}var o=i(313),a=i(63),s=i(130),h=i(10)("socket.io-client");t.exports=e=r;var u=e.managers={};e.protocol=a.protocol,e.connect=r,e.Manager=i(130),e.Socket=i(132)},function(t,e,i){(function(e){function r(t,i){var r=t;i=i||e.location,null==t&&(t=i.protocol+"//"+i.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?i.protocol+t:i.host+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t=void 0!==i?i.protocol+"//"+t:"https://"+t),o("parse %s",t),r=n(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":"),s=a?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(i&&i.port===r.port?"":":"+r.port),r}var n=i(81),o=i(10)("socket.io-client:url");t.exports=r}).call(e,i(3))},function(t,e,i){(function(t){var r=i(21),n=i(133);e.deconstructPacket=function(t){function e(t){if(!t)return t;if(n(t)){var o={_placeholder:!0,num:i.length};return i.push(t),o}if(r(t)){for(var a=new Array(t.length),s=0;s<t.length;s++)a[s]=e(t[s]);return a}if("object"==typeof t&&!(t instanceof Date)){var a={};for(var h in t)a[h]=e(t[h]);return a}return t}var i=[],o=t.data,a=t;return a.data=e(o),a.attachments=i.length,{packet:a,buffers:i}},e.reconstructPacket=function(t,e){function i(t){if(t&&t._placeholder){return e[t.num]}if(r(t)){for(var n=0;n<t.length;n++)t[n]=i(t[n]);return t}if(t&&"object"==typeof t){for(var o in t)t[o]=i(t[o]);return t}return t}return t.data=i(t.data),t.attachments=void 0,t},e.removeBlobs=function(e,i){function o(e,h,u){if(!e)return e;if(t.Blob&&e instanceof Blob||t.File&&e instanceof File){a++;var l=new FileReader;l.onload=function(){u?u[h]=this.result:s=this.result,--a||i(s)},l.readAsArrayBuffer(e)}else if(r(e))for(var c=0;c<e.length;c++)o(e[c],c,e);else if(e&&"object"==typeof e&&!n(e))for(var d in e)o(e[d],d,e)}var a=0,s=e;o(s),a||i(s)}}).call(e,i(3))},function(t,e){function i(t,e){var i=[];e=e||0;for(var r=e||0;r<t.length;r++)i[r-e]=t[r];return i}t.exports=i},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,i){(function(t,r){var n;!function(o){function a(t){for(var e,i,r=[],n=0,o=t.length;n<o;)e=t.charCodeAt(n++),e>=55296&&e<=56319&&n<o?(i=t.charCodeAt(n++),56320==(64512&i)?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--)):r.push(e);return r}function s(t){for(var e,i=t.length,r=-1,n="";++r<i;)e=t[r],e>65535&&(e-=65536,n+=_(e>>>10&1023|55296),e=56320|1023&e),n+=_(e);return n}function h(t,e){return _(t>>e&63|128)}function u(t){if(0==(4294967168&t))return _(t);var e="";return 0==(4294965248&t)?e=_(t>>6&31|192):0==(4294901760&t)?(e=_(t>>12&15|224),e+=h(t,6)):0==(4292870144&t)&&(e=_(t>>18&7|240),e+=h(t,12),e+=h(t,6)),e+=_(63&t|128)}function l(t){for(var e,i=a(t),r=i.length,n=-1,o="";++n<r;)e=i[n],o+=u(e);return o}function c(){if(y>=v)throw Error("Invalid byte index");var t=255&g[y];if(y++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function d(){var t,e,i,r,n;if(y>v)throw Error("Invalid byte index");if(y==v)return!1;if(t=255&g[y],y++,0==(128&t))return t;if(192==(224&t)){var e=c();if((n=(31&t)<<6|e)>=128)return n;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=c(),i=c(),(n=(15&t)<<12|e<<6|i)>=2048)return n;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=c(),i=c(),r=c(),(n=(15&t)<<18|e<<12|i<<6|r)>=65536&&n<=1114111))return n;throw Error("Invalid WTF-8 detected")}function f(t){g=a(t),v=g.length,y=0;for(var e,i=[];!1!==(e=d());)i.push(e);return s(i)}var p="object"==typeof e&&e,m=("object"==typeof t&&t&&t.exports,"object"==typeof r&&r);var g,v,y,_=String.fromCharCode,T={version:"1.0.0",encode:l,decode:f};void 0!==(n=function(){return T}.call(e,i,e,t))&&(t.exports=n)}()}).call(e,i(64)(t),i(3))},function(t,e){},function(t,e,i){t.exports=i(136)}]);